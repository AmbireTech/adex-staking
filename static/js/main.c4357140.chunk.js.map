{"version":3,"sources":["helpers/formatting.js","AppContext.js","components/Tooltip.js","components/cardCommon.js","helpers/bonds.js","components/WithDialog.js","actions/validations.js","ethereum.js","actions/common.js","actions/v5actions.js","actions/loyaltyPoolActions.js","actions/actions.js","helpers/fetch.js","helpers/errors.js","actions/pools.js","actions/farm.js","components/Anchor.js","components/MigrationForm.js","components/Bonds.js","components/StatsCard.js","components/DepositForm.js","components/Deposits.js","components/StakingPoolTxnsHistory.js","components/SectionHeader.js","components/Stakings.js","resources/gasless-ic.svg","components/Gasless.js","components/NewGaslessBondForm.js","resources/gift-ic.svg","components/ConfirmationDialog.js","components/WithRouterLink.js","components/Rewards.js","FarmProvider.js","resources/crown-ic.svg","components/FarmCard.js","components/FarmForm.js","components/FarmInfoCard.js","resources/wheat-icon.svg","components/Farm.js","resources/stats-ic.svg","ValidatorStatsContext.js","themeMUi.js","helpers/colors.js","components/StatsChart.js","hooks/windowSize.js","components/Stats.js","resources/coming-soon-ic.svg","components/PoolCard.js","resources/mail-awards.svg","helpers/validation.js","mauticActions.js","components/EmailSignUpCard.js","components/Pools.js","helpers/localStorage.js","components/StakeNowPopup.js","resources/migration-ic.svg","components/MigrationBtn.js","components/MigrateNowPopup.js","components/NewBondForm.js","components/LegacyADXSwapDialog.js","components/HelperMenu.js","components/WalletMenu.js","components/LangSelect.js","MultiThemeProvider.js","components/ThemeSwitch.js","components/rootStyles.js","components/Toolbar.js","resources/link-ic.svg","resources/farm-icon.svg","components/SideNav.js","components/UserData.js","Snack.js","components/Root.js","components/ChooseWallet.js","helpers/connector.js","AppHooks.js","helpers/hooks.js","components/Loading.js","App.js","ValidatorStatsHooks.js","serviceWorker.js","i18n.js","index.js","resources/adex-logo-clean.svg","resources/loyalty-ic.svg","resources/tom-ic.svg","resources/staking-logo.svg","resources/logo-light-theme.svg","resources/balancer-bal-logo.svg","resources/uniswap-uni-logo.svg","resources/yUSD.svg","resources/eth-logo.svg","resources/yfi-logo.svg","resources/chain-link-logo.svg","helpers/constants.js","walletconnect-logo.svg","metamask-fox.svg","trezor.svg","resources/eddie-farmer-info-card.svg","helpers/identity.js"],"names":["formatUnits","utils","parseUnits","commify","formatADX","num","formatADXPretty","div","formatNumberPretty","formatDAI","formatAmountPretty","currency","formatDAIPretty","BigNumber","from","toLocaleString","parseADX","n","parseTokens","formatTokens","decimals","formatDate","d","getDate","month","getFullYear","formatDateTime","Intl","DateTimeFormat","navigator","language","dateStyle","timeStyle","format","e","console","error","getADXInUSD","prices","ADX","USD","parseFloat","getADXInUSDFormatted","adxUsd","toFixed","getDAIInUSD","DAI","getUSDFormatted","usdAmount","formatAddress","address","joinSymbol","substring","toIdAttributeString","string","defaultValue","replace","toLowerCase","formatLPToken","lpTokenDataWithPrices","lpValueBN","t1","t2","lpValue","unitsPerLP","token","AppContext","React","createContext","CommonTooltip","children","props","Tooltip","leaveTouchDelay","enterTouchDelay","title","disableFocusListener","disableHoverListener","disableTouchListener","ExtraLabel","label","Array","isArray","map","x","index","Typography","key","display","variant","color","Info","fontSize","AmountTextSingle","text","multiline","decimalSeparatorSplit","split","length","decimalsSplit","rest","slice","Box","component","width","style","opacity","join","AmountText","transValue","multipleAmountsSplit","trim","filter","i","toString","reduce","prev","curr","CardRow","infoText","fontWeight","justify","isAmountText","multilineLinesAmounts","restBox","flexDirection","alignItems","flexWrap","justifyContent","wordBreak","ml","keccak256","defaultAbiCoder","getPool","poolId","POOLS","find","id","getBondId","owner","amount","nonce","encode","ADDR_STAKING","styles","theme","spacing","dialog","backgroundColor","palette","background","paper","dialogTitle","wordWrap","margin","marginLeft","marginBottom","padding","content","flex","position","overflowX","overflowY","textBtn","cursor","btnIconLeft","marginRight","breakLong","overflowWrap","hyphens","TextBtn","withStyles","className","classes","onClick","clsx","Transition","forwardRef","ref","Slide","direction","useStyles","makeStyles","WithDialogHoc","Decorated","WithDialog","disableBackdropClick","forwardedRef","iconButton","textButton","fabButton","size","btnLabel","mini","disabled","icon","dialogActions","fullWidth","onBeforeOpen","onCloseDialog","tooltipTitle","btnProps","useState","open","setOpen","handleToggle","a","handleClick","ev","stopPropagation","preventDefault","ButtonComponent","IconButton","Fab","Button","aria-label","floating","first","second","Dialog","onClose","TransitionComponent","DialogTitle","disableTypography","root","DialogContent","closeDialog","DialogActions","isValidNumberString","numStr","isNaN","LocalProvider","REACT_APP_RPC_URL","startsWith","providers","WebSocketProvider","JsonRpcProvider","getDefaultProvider","defaultProvider","useTestnet","on","getSigner","chosenWalletType","library","Error","signMessage","signer","message","getAddress","sig","provider","isWalletConnect","send","hexlify","verifyMessage","getPrices","fetch","PRICES_API_URL","res","json","data","adex","usd","executeOnIdentity","txns","opts","gasless","extraGasLimit","walletAddr","getUserIdentity","addr","bytecode","identity","Contract","IdentityABI","getCode","needsToDeploy","ZERO","idNonce","toTuples","offset","to","zeroFeeTx","add","toSolidityTuple","txnsRaw","rawZeroFeeTx","signatures","tx","Transaction","hash","push","splitSig","executeUrl","ADEX_RELAYER_HOST","method","body","JSON","stringify","headers","status","txnTuples","estimateGas","executeBySender","estimatedGasLimit","gasLimit","executeTx","interface","encodeFunctionData","factoryWithSigner","ADDR_FACTORY","FactoryABI","deployAndExecute","toChannelTuple","args","creator","tokenAddr","tokenAmount","validUntil","validators","spec","supplyControllerABI","ADXSupplyControllerABI","PRECISION","ADXToken","ADDR_ADX","ADXTokenABI","ADXSupplyController","ADDR_ADX_SUPPLY_CONTROLLER","StakingPool","ADDR_STAKING_POOL","StakingPoolABI","StakingMigrator","ADDR_STAKING_MIGRATOR","StakingMigratorABI","Core","ADDR_CORE","CoreABI","STAKING_POOL_EVENT_TYPES","STAKING_POOL_EMPTY_STATS","shareValue","balanceShares","balanceSharesAvailable","currentBalanceADX","currentBalanceADXAvailable","currentBalanceADXAtCurrentShareValue","withdrawnReward","poolTotalStaked","poolTotalBalanceADX","sharesTotalSupply","totalRewards","currentReward","withdrawsADXTotal","depositsADXTotal","totalSharesOutTransfersAdxValue","totalSharesInTransfersAdxValue","currentAPY","stakings","userLeaves","hasActiveUnbondCommitments","leavesPendingToUnlockTotalMax","leavesReadyToWithdrawTotalMax","leavesPendingToUnlockTotalADX","leavesReadyToWithdrawTotalADX","unbondDays","loaded","userDataLoaded","rageReceivedPromilles","timeToUnbond","userShare","gaslessAddress","gaslessAddrBalance","onMigrationToV5Finalize","claimPendingRewards","stakeWalletBalance","withdrawOnMigration","stats","enterTo","interactionAddress","userWalletBalance","tomPoolStats","identityADXIncentiveChannels","identityAdxRewardsAmount","willWithdrawOnMigration","identityTxns","extraAmount","forEach","channel","channelTuple","channelArgs","stateRoot","proof","onStakingPoolV5Deposit","adxDepositAmount","isZero","gt","userBalance","Promise","all","allowance","allowanceStakingPool","setAllowance","lt","tokenWithSigner","ERC20ABI","approve","MAX_UINT","stakingPoolWithSigner","enter","onStakingPoolV5GaslessDeposit","gaslessStakeUrl","onStakingPoolV5WhenNoSufficientForGaslessDeposit","gaslessAddrAmount","gaslessSweeperWithSigner","ADDR_GASLESS_SWEEPER","GaslessSweeperABI","sweep","onStakingPoolV5Withdraw","_","unbondCommitment","shares","unlocksAt","withdraw","onStakingPoolV5RageLeave","rageLeaveADXAmount","tomStakingV5PoolStats","sharesToWithdraw","mul","rageLeave","onStakingPoolV5UnbondCommitment","unbondCommitmentAmountADX","leave","getTomStakingV5PoolData","balanceOf","mintableIncentive","totalSupply","incentivePerSecond","toNumber","loadUserTomStakingV5PoolStats","poolData","getUserGaslessAddress","lockedShares","getLogs","fromBlock","filters","Transfer","LogLeave","LogWithdraw","LogRageLeave","allEnterADXTransferLogs","leaveLogs","withdrawLogs","rageLeaveLogs","sharesTokensTransfersInLogs","sharesTokensTransfersOutLogs","enterAdexTokensByTxHash","byHash","log","transactionHash","sharesTokensTransfersIn","parseLog","blockNumber","type","ZERO_ADDR","sharesTokensTransfersOut","event","shareTokensEnterMintByHash","shareTokensTransfersInByTxHash","sharesTokensTransfersInFromExternal","Object","values","userEnters","sharesMintEvent","adexTokenTransfersLog","parsedAdxLog","adxAmount","userWithdraws","maxTokens","receivedTokens","userRageLeaves","now","Date","parsedLog","withdrawTx","unbondingCommitmentWorth","adxValue","canWithdraw","leavesPendingToUnlock","leavesReadyToWithdraw","b","Math","min","Number","MAX_SAFE_INTEGER","allLeaveLogs","allWithdrawLogs","allRageLeaveLogs","allEnterSharesTokensTransfersInLogs","allEnters","allWithdraws","allRageLeaves","allLeaves","allLogs","concat","sort","withAdxAmount","events","transferLog","bestShareValue","lockedSharesAdxValue","totalLockedSharesCheck","eq","sub","lockedSharesADXAtCurrentShareValue","stakingEvent","getBlock","timestamp","withTimestamp","getGaslessInfo","resData","canExecuteGasless","canExecute","canExecuteGaslessError","Token","LoyaltyToken","ADDR_ADX_LOYALTY_TOKEN","ADXLoyaltyPoolTokenABI","LOYALTY_POOP_EMPTY_STATS","balanceLpToken","balanceLpADX","rewardADX","poolDepositsLimit","stakingEvents","totalDeposits","totalWithdraws","loadLoyaltyPoolData","incentivePerTokenPerAnnum","maxTotalADX","loadUserLoyaltyPoolsStats","currentShareValue","lpTokenTransfersInLogs","lpTokenTransfersOutLogs","adexTokenTransfersInLogs","adexTokenTransfersOutLogs","currentBalance","adxTransfersInByTxHash","pool","userDeposits","deposits","axdTransferLog","adxTransferLog","adxLPT","adx","logs","adxTransfersOutByTxHash","withdraws","shareTokensTransferOutToExternal","allAdxInLogs","allSharesOutLogs","allAdxOutLogs","allSharesInLogs","enterAdxTokensByTxHash","outAdxTokensByTxHash","value","allStakingEvents","onLoyaltyPoolDeposit","allowanceADXLOYALTY","loyaltyTokenWithSigner","onLoyaltyPoolWithdraw","withdrawAmountADX","loyaltyPoolStats","lpTokensToWithdraw","Staking","StakingABI","OUTSTANDING_REWARD_THRESHOLD","POOL_EMPTY_STATS","totalStake","totalCurrentTotalActiveStake","currentAdxIncentiveAPY","lastDaiFeesAPY","totalAPY","userRewardsADX","userRewardsDAI","rewardChannels","userBonds","EMPTY_STATS","connectedWalletAddress","totalStakeTom","totalRewardADX","totalRewardDAI","tomRewardADX","totalLockedOnDeposits","totalPendingToUnlock","totalUnlockedDeposits","totalStaked","apyTomADX","userTotalStake","totalBalanceADX","userIdentityBalance","legacyTokenBalance","identityDeployed","userWalletToIdentityADXAllowance","tomBondsMigrationData","hasToMigrate","bondToMigrate","isWithdrawMigration","hasPendingTransactions","sumRewards","outstandingReward","getIncentiveChannelCurrentAPY","periodEnd","currentRewardPerSecond","currentTotalActiveStake","poolTotalStake","distributionEnds","getTime","secondsLeft","floor","getValidatorFeesAPY","periodStart","totalActiveStaked","totalStakeInDaiValue","toDistribute","distributionSeconds","getChannelAPY","loadStats","loadUserStats","userStats","loadActivePoolsStats","getPoolStats","getRewardChannels","adxIncentiveRewardsChannels","_id","feeRewardsChannels","currentActiveIncentiveChannels","lastFeeRewardChannel","totalCurrent","name","poolStats","identityAddr","loadBondStats","getRewards","WITH_BONUS_PROMILLES","getTransactionCount","userBondsData","tomPoolUserRewardChannels","poolsStats","tomStakingV5PoolStatsWithUserData","migrationBonusPromilles","latestTransactionsCount","pendingTransactionsCount","tomAdxRewardsChannels","claimFrom","tomPoolDaiRewardsChannels","tomRewardDAI","bond","migrationReward","currentAmount","tomUnbondRequestedWithdraw","tomPoolStatsWithUserData","nonStakedBalance","migratableBonds","willUnlock","MIGRATION_UNBOND_BEFORE","topics","hexZeroPad","LogBondMigrated","migrationLogs","migrationLogsByBondId","bondId","bonds","topic","getEventTopic","vals","slashedAtStart","time","bondMigrationLog","bondWithData","replacedBondIndex","findIndex","rewardPool","url","resp","rewardChannel","balances","balanceTree","BalanceTree","withdrawnPerUser","channelId","getProof","mTree","getRoot","forUser","createNewBond","allowanceStaking","balanceOnIdentity","needed","gte","active","stakingData","onUnbondOrRequest","isUnbond","claimRewards","coreWithSigner","legacyChannels","channelWithdraw","identityChannels","toTransfer","amnt","entries","reBond","identityWithdraw","identityBalance","fetchJSON","TranslatableError","TOM_URL","DaiToken","DAI_TOKEN_ADDR","DEPOSIT_ACTION_TYPES","getDepositPool","DEPOSIT_POOLS","getPoolStatsByPoolId","getDepositActionByTypeAndPoolId","actionType","actionName","getWithdrawActionByPoolId","getDepositActionByPoolId","getUnbondCommitmentActionByPoolId","getRageLeaveActionByPoolId","getDepositActionMaxAmountByTypeAndPoolId","getMaxWithdrawAmountByPoolId","getMaxRageLeaveAmountByPoolId","getMaxUnbondCommitmentAmountByPoolId","getWithdrawActionBySelectedRewardChannels","rewards","byPool","r","rwds","bind","sumValidatorAnalyticsResValue","aggr","toChartData","valueLabel","noLast","pop","labels","datasets","getValidatorTomStats","MARKET_URL","channels","depositAmount","totalPayouts","lastApprovedBalances","adUnits","ipfs","uniqueUnits","keys","uniquePublishers","uniqueAdvertisers","dailyPayoutsData","yearlyTransactionsData","dailyTransactionsData","monthlyTransactionsData","lockupOnChain","totalCampaigns","dailyPayoutsVolume","yearlyTransactions","dailyTransactions","monthlyTransactions","getValidatorStatsByPoolId","MASTER_CHEF_ADDR","MasterChef","MasterChefABI","getOtherTokenAndPoolPrice","known","unknown","totalLPPrice","poolBalance","weight","usdPrice","unknownPrice","getDepositLPTokenToADXValue","externalPrices","adxPrice","FARM_POOLS","lpTokenData","allTokenContracts","allTokensInUSD","poolDataMap","depositAssetName","depositAssetAddr","tokenName","poolDataWithBalances","maxIters","iters","includes","poolTotalPriceUSD","lpTokensToADXData","lpTokensToADX","poolTotalADXValue","poolsPricesData","depositTokenContract","pendingADX","userInfo","poolInfo","ADXPerBlock","totalAllocPoint","walletBalance","adxPerBlock","userLPBalance","useShare","poolAllocPoints","totalStakedFloat","depositAssetDecimals","totalRewardsADX","parseInt","latRewardBlock","firstRewardBlock","totalPoolRewardsUSD","lpTokenPrice","lpTokenStakedValueUSD","rewardsDistributedPerMonthInUSD","rewardsDurationDays","rewardsDistributedPerYearInUSD","poolAPY","poolMPY","getFarmPoolsStats","poolsCalls","allPoolStats","statsByPoolId","byId","pollStatsLoaded","userStatsLoaded","onLiquidityPoolDeposit","actionAmount","LPToken","allowanceMC","balanceOnWallet","identityCode","isDeployed","connect","onLiquidityPoolWithdraw","onHarvestAll","farmStats","poolsToHarvest","totalADXRewards","toHarvest","externalIcon","link","Anchor","href","target","underline","isExternal","getUrl","linkProps","draggable","rel","Link","OpenInNew","ExternalAnchor","activePool","MigrationForm","poolLabel","created","location","useLocation","t","useTranslation","useContext","account","wrapDoingTxns","setClaimPendingRewards","setStakeWalletBalance","confirmEnterTo","setConfirmEnterTo","setEnterTo","confirmed","setConfirmed","enterToParam","URLSearchParams","search","get","setPoolStats","useEffect","newPoolStats","onAction","confirmationLabel","Trans","i18nKey","components","totalBondAmount","e1","e2","STAKING_RULES_URL","disableMigrationMsg","Grid","container","m","migrationBonus","migrationBonusCurrency","box","mt","item","xs","rewardPolicy","slashPolicy","count","apy","sign","farmer","role","FormControlLabel","userSelect","control","Checkbox","checked","onChange","FormControl","disableElevation","MigrationDialog","Bonds","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","reverse","days","ceil","bondStatus","Alert","severity","UNBOND_DAYS","StatsCard","titleInfo","subtitle","subtitleInfo","extra","extraInfo","moreExtra","moreExtraInfo","actions","LinearProgress","DepositForm","depositPool","setActionAmount","actionAmountBN","setActionAmountBN","amountErr","setAmountErr","amountErrText","setAmountErrText","amountErrVals","setAmountErrVals","selectErr","setSelectErr","selectErrText","setSelectErrText","dirtyInputs","setDirtyInputs","confirmation","setConfirmation","rageConfirmed","setRageConfirmed","rageOverAvailableConfirmed","setRageOverAvailableConfirmed","setActivePool","setUnbondCommitment","activeUnbondCommitments","setActiveUnbondCommitments","maxAmount","setMaxAmount","maxAmountAvailableForRage","setMaxAmountAvailableForRage","newActivePool","newMaxAmount","newMaxAmountAvailable","newActiveUnbondCommitments","action","rageLeaveConfirmed","amountInputSplit","amountWithMaxDecimalsVal","undefined","substr","amountBN","minStakingAmountBN","minStakingAmount","lte","userDepositsLimit","currentDeposited","onAmountChange","amountStr","required","InputLabel","Select","MenuItem","uc","px","FormHelperText","TextField","helperText","lockupPeriod","percent","available","getActionBtnText","DepositsDialog","iconBox","borderRadius","height","common","white","black","updateDeposits","newDeposit","newDeposits","Deposits","setDeposits","totalSharesOutTransfersAdxValueLP","totalSharesInTransfersAdxValueLP","hasExternalStakingTokenTransfers","hasExternalStakingTokenTransfersLP","disableActionsMsg","disableDepositsMsg","loadedDeposits","loyaltyPoolDeposit","disabledDepositsMsg","disabledWithdrawsMsg","balance","allTimeReward","pendingToUnlockTotalADX","readyToWithdrawTotalADX","getLoyaltyPoolDeposit","stakingPoolDeposit","getStakingPool","mb","deposit","PoolIcon","iconByPoolId","mr","SvgIcon","my","stakingPoolLabel","StakingEventRow","isExternalShareTokenTransfer","formatTxnHash","fabIcon","SectionHeader","canStake","Stakings","setToUnbond","onUnbond","onMigrationFinalize","onClaimRewards","onRebond","gutterBottom","bgcolor","boxShadow","p","onRequestUnbond","Accordion","square","AccordionSummary","expandIcon","ExpandMore","aria-controls","AccordionDetails","stakingPoolEvents","loyaltyPoolEvents","StakingPoolTxnsHistory","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","transform","_ref","svgRef","viewBox","ForwardRef","GaslessDepositDialog","onTxRes","noGasless","maxWidth","maxHeight","pb","overflow","overlay","left","top","right","bottom","noUserData","modal","bullets","breakpoints","up","defaultGaslessInfo","Gasless","gaslessInfo","setGaslessInfo","setConnectWallet","addSnack","gaslessError","info","updateGasless","walletConnected","insufficientForGasless","MIN_BALANCE_FOR_GASLESS_TXNS","btnId","txId","flexGrow","mx","copy","minBalance","external","ConfirmationDialog","isOpen","onDeny","onConfirm","confirmActionName","WithRouterLink","Component","WithRouter","withRouter","history","match","staticContext","toLocation","path","pathname","createHref","resolveToLocation","RRButton","getTotalSelectedRewards","selected","getTotal","amounts","totalAmountsLabel","Rewards","setRewards","setSelected","totalAmountsSelected","setTotalAmountsSelected","claimOpen","setClaimOpen","totalRewardsAmounts","totalOutstandingRewardsAmounts","totalRewardsInUsd","totalOutstandingRewardsInUsd","selectedRewards","tomRewardChannels","startDate","endDate","getMonth","onSelectChange","newSelected","totalAmountSelected","onClaim","totalSelectedLabel","totalRewardsLabel","totalOutstandingRewardsLabel","renderDepositRewardsRow","reward","inputProps","renderRewardRow","total","FarmContext","FarmProvider","farmHooks","userIdle","pricesLoaded","setPricesLoaded","setStats","getStats","setGetFarmStats","refreshFarmStats","useCallback","code","intvl","setInterval","clearInterval","useFarm","Provider","FarmFormDialog","showRewards","showRewardsOnDeposit","disableWithdrawMsg","disableRewardsWithdrawMsg","params","userInputAmount","validateFields","placeholder","shadows","paddingLeft","paddingRight","border","special","main","platformIconBox","borderTopLeftRadius","borderBottomLeftRadius","specialIcon","loading","comingSoon","iconSpecial","getLink","strong","FarmPoolData","platform","getDepositAssetUrl","rewardAssetName","totalDepositTokenStaked","totalDepositTokenStakedUSD","userStakedShare","currentMPY","mpyInfo","yield","liquidityInfoText","liquidityStakedLP","liquidityStakedLPInfo","lpTokenName","liquidityOnWalletLP","liquidityOnWalletLPInfo","depositAsset","rewardAsset","mpy","FarmCard","disabledInfo","platformIcon","assetsIcons","Icon","canDeposit","pt","minHeight","src","eddieTheFarmerInfo","alt","externalLink","y","enableBackground","harvestBtn","harvestIcon","canHarvest","Farm","justifyCenter","useMediaQuery","down","harvestOpen","setHarvestOpen","onHarvest","startIcon","ValidatorStatsContext","WHITE","BLACK","paletteCommon","primary","contrastText","secondary","grey","lightGrey","warning","success","lime","paletteLight","fade","hint","default","darkerPaper","specialSecondary","contrast","card","paletteDark","divider","hover","hoverOpacity","selectedOpacity","disabledOpacity","focus","focusOpacity","activatedOpacity","defaultTheme","createMuiTheme","darkShadows","lightShadows","commonTheme","typography","fontFamily","overrides","MuiButton","outlined","borderColor","contained","MuiFab","MuiTableCell","head","whiteSpace","MuiPaper","rounded","MuiTooltip","tooltip","arrow","MuiDrawer","paperAnchorLeft","borderRight","paperAnchorDockedLeft","MuiAlert","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","filledSuccess","filledInfo","filledWarning","filledError","MuiBackdrop","MuiFilledInput","borderTopRightRadius","MuiOutlinedInput","defaultThemeWithOverrides","responsiveFontSizes","factor","darkTheme","lightTheme","hexToRgbaColorString","hex","alpha","hexToDec","h","g","commonDsProps","fill","lineTension","borderWidth","pointRadius","pointHitRadius","FONT","DefaultLabel","StatsChart","dataSynced","dataActive","defaultLabels","options","xLabel","yLabel","yColor","xSelect","windowSize","hasWindow","window","getWindowSize","innerWidth","innerHeight","setWindowSize","onResize","addEventListener","removeEventListener","useWindowSize","chartHeight","max","chartData","pointBackgroundColor","yAxisID","hidden","linesOptions","animation","responsive","layout","maintainAspectRatio","legend","tooltips","mode","intersect","titleFontSize","bodyFontSize","bodyFontFamily","titleFontFamily","xPadding","yPadding","cornerRadius","bodySpacing","caretSize","displayColors","callbacks","datasetIndex","scales","xAxes","gridLines","drawBorder","drawTicks","scaleLabel","labelString","ticks","autoSkip","maxTicksLimit","maxRotation","callback","yAxes","beginAtZero","stepSize","fontColor","CircularProgress","poolsSrc","hasValidatorStats","validatorId","chartStatsKeys","interactive","ValidatorStatsCard","currentKey","chartKey","setKey","py","PropItem","ListItem","ListItemText","XSelect","chartDataKey","setChartDataKey","labelId","getDefaultLabels","Stats","useTheme","query","setChartData","setPoolId","setPool","onPoolSelect","parse","validator","md","lg","List","dense","disablePadding","purpose","lockupPeriodText","apyStability","ButtonWithLink","PoolCard","totalStakedADX","totalStakedUSD","weeklyYield","weeklyYieldInfo","onStakeBtnClick","lockupPeriodTitle","lockupPeriodInfo","actionBtn","extraData","statsPath","importantValue","valueInfo","normalValue","extrInfo","filterUnits","dx","dy","input","stdDeviation","result","floodOpacity","operator","in2","in","cx","cy","rx","ry","validateEmail","email","test","String","submitFormToMautic","formId","returnValue","formName","messenger","response","utf8Decoder","TextDecoder","reader","getReader","read","mauticDataResponse","decode","extractJSONResponseFromHTML","matches","exec","messageCopy","asciiRegex","lastIndex","groupIndex","decoded","fromCharCode","warn","bold","singUp","gdprCheckbox","errors","gdpr","tosCheckbox","tos","EmailSignUp","setEmail","mauticState","setMauticState","waiting","setWaiting","setGDPR","setErrors","handleSubmit","HTMLResponse","jsonResponse","successMessage","onBlur","FormGroup","TOM_V5_POOL","LOYALTY_POOL","fontSizeSmall","textWhite","Pools","tomV5APY","loyaltyPoolAPY","loadFromLocalStorage","localStorage","getItem","err","saveToLocalStorage","serialized","setItem","iconBoxBack","marginTop","paddingTop","StakeNowPopup","legacySwapOpen","legacySwapInPrg","hasADX","lastPopUP","showSinceLast","Modal","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","x1","y1","x2","y2","gradientUnits","stopColor","stopOpacity","RRFab","MigrationBtn","MigrateNowAlert","AlertTitle","MigrateNowPopup","NewBondForm","onNewBond","pools","newBondPool","setNewBondPool","DEFAULT_BOND","setBond","stakingAmount","setStakingAmount","minWidthStyle","minWidth","onlyIdentityBalance","poolToValidate","updateStakingAmountBN","sm","wallet","ADDR_ADX_OLD","LegacyToken","LegacyADXSwapDialog","setLegacySwapInPrg","setLegacySwapInOpen","setAmount","refreshAmount","catch","onSwap","swapTokens","wait","Snackbar","elevation","legacyTokenWithSigner","newTokenWithSigner","hasAutocalculatedGas","firstTimeGasLimit","swap","Help","menuEl","setMenuEl","closeHelpMenu","currentTarget","Menu","anchorEl","Boolean","keepMounted","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","chipRoot","fontWeightBold","pxToRem","chipIcon","Wallet","Chip","clickable","diameter","seed","jsNumberForAddress","locales","en","ko","zh","LangSelect","i18n","setAnchorEl","aria-haspopup","changeLanguage","THEMES","light","dark","MultiThemeContext","MultiThemeProvider","themeType","setThemeType","setTheme","lastTheme","contextValue","switchTheme","ThemeSwitch","backgroundImage","backgroundRepeat","backgroundPositionX","drawerWidth","toolbar","toolbarActions","drawerPaper","contentInner","alwaysOnTop","zIndex","stickyAlerts","appBar","AppToolbar","handleDrawerToggle","AppBar","Toolbar","Hidden","mdUp","_ref15","_ref16","_ref17","xmlSpace","RRListItem","activeColor","activeBgColor","sntPadding","navListRoot","navList","sideNavToolbar","version","borderTopWidth","borderTopColor","borderTopStyle","listItem","adxLink","sideSwitch","textTransform","SideNav","logo","logoLight","withdrawIdentityOpen","setWithdrawIdentityOpen","hasLegacyIdentityBalance","onWithdraw","priceUSD","UserData","Divider","textAlign","button","ListItemIcon","year","packageJson","ShtarvolinkiSnack","snackOpen","snackMessageInfo","closeSnack","snackExited","autoHideDuration","hideTimeout","onExited","Root","mobileOpen","setMobileOpen","isTempDrawer","isNewBondOpen","setNewBondOpen","toUnbond","openErr","openDoingTx","snackbarErr","connectWallet","handleErrClose","onWalletTypeSelect","snackHooks","chainWarning","idlePopupOpen","onIdleDialogAction","drawer","document","Drawer","anchor","ModalProps","ol","li","handleListItemClick","handleClose","disableNonBrowserWallets","aria-labelledby","Wallets","extraLabel","METAMASK","Avatar","ChooseWallet","msg","selectable","isEarly","aria-describedby","minutes","IDLE_TIMEOUT_MINUTES","injected","InjectedConnector","supportedChainIds","ledger","LedgerConnector","chainId","pollingInterval","trezor","TrezorConnector","manifestEmail","manifestAppUrl","config","networkId","walletconnect","WalletConnectConnector","rpc","1","bridge","qrcode","IDLE_TIMEOUT","connectorsByName","WALLET_CONNECT","TREZOR","LEDGER","tryGetErrMessage","useApp","snackPack","setSnackPack","setMessageInfo","random","reason","useSnack","useWeb3React","activate","deactivate","setOpenErr","setOpenDoingTx","setSnackbarErr","chosenWalletTypeName","setChosenWalletTypeName","setChosenWalletType","setPrices","setChainWarning","refreshCount","setRefreshCount","setUserIdle","setIdlePopupOpen","secondsToAutoRefresh","setSecondsToAutoRefresh","suppress","handleConnect","handleChainChanged","handleAccountsChanged","accounts","reload","handleNetworkChanged","ethereum","removeListener","useInactiveListener","useIdleTimer","onIdle","debounce","refreshStats","newPrices","updatePrices","newStats","intvlSecsToRefresh","refreshInterval","SUPPORTED_CHAINS","some","chain","NoEthereumProviderError","UnsupportedChainIdError","UserRejectedRequestErrorInjected","UserRejectedRequestErrorWalletConnect","getErrorMessage","fn","walletTypeName","newWalletType","updateWalletType","Loading","App","appHooks","validatorStatsHooks","setStatsByPoolId","updatePoolStats","useValidatorStats","Fragment","CssBaseline","fallback","getLibrary","ethers","Web3Provider","hostname","use","Backend","LanguageDetector","initReactI18next","init","backend","loadPath","fallbackLng","defaultNS","debug","keySeparator","interpolation","escapeValue","ReactDOM","render","getElementById","serviceWorker","ready","then","registration","unregister","_ref2","_ref3","SvgAdexLogoClean","points","SvgLoyaltyIc","SvgTomIc","module","exports","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","stroke","preserveAspectRatio","fillRule","shapeRendering","textRendering","imageRendering","clipRule","estimatedAnnualFeeYield","estimatedAnnualADXYield","estimatedAnnualADXEarlyYield","confirmationUrl","legacyPoolId","LoyaltyIcon","TomIcon","metamaskLogo","walletconnectLogo","wallets","trezorLogo","lpTokenAddr","rewardAssetAddr","UniswapIcon","ADXIcon","ETHIcon","BalancerIcon","YUSDIcon","YFIIcon","LINKIcon","addrHex","getBytecode","generateAddress2","Buffer","alloc","idAddr","identityContract","feeTokenAddr","feeAmount","ADXTokenAddr","poolAddr","initCode","ContractFactory","GaslessDepositorABI","GaslessDepositorBytecode","object","getDeployTransaction","initCodeHash","getCreate2Address"],"mappings":"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","file":"static/js/main.c4357140.chunk.js","sourcesContent":["import { BigNumber, utils } from \"ethers\"\r\nconst { formatUnits, parseUnits, commify } = utils\r\n\r\nexport function formatADX(num) {\r\n\treturn formatUnits(num, 18)\r\n}\r\n\r\nexport function formatADXPretty(num) {\r\n\treturn commify(formatUnits(num.div(\"100000000000000\"), 4))\r\n}\r\n\r\nexport function formatNumberPretty(num) {\r\n\treturn commify(num)\r\n}\r\n\r\nexport function formatDAI(num) {\r\n\treturn formatUnits(num, 18)\r\n}\r\n\r\nexport function formatDAIPretty(num) {\r\n\treturn commify(formatUnits(num.div(\"10000000000000000\"), 2))\r\n}\r\n\r\nexport function formatAmountPretty(num, currency) {\r\n\tif (!num) {\r\n\t\treturn num\r\n\t}\r\n\r\n\tswitch (currency) {\r\n\t\tcase \"DAI\":\r\n\t\t\treturn formatDAIPretty(BigNumber.from(num))\r\n\t\tcase \"ADX\":\r\n\t\t\treturn formatADXPretty(BigNumber.from(num))\r\n\t\tdefault:\r\n\t\t\treturn num.toLocaleString(10)\r\n\t}\r\n}\r\n\r\nexport function parseADX(n) {\r\n\treturn parseUnits(n, 18)\r\n}\r\n\r\nexport function parseTokens(n, decimals = 18) {\r\n\treturn parseUnits(n, 18)\r\n}\r\n\r\nexport function formatTokens(n, decimals = 18) {\r\n\treturn formatUnits(n, decimals)\r\n}\r\n\r\nexport function formatDate(d) {\r\n\treturn `${d.getDate()} ${d.toLocaleString(\"default\", {\r\n\t\tmonth: \"short\"\r\n\t})} ${d.getFullYear()}`\r\n}\r\n\r\nexport function formatDateTime(d) {\r\n\t// @TODO temporary\r\n\ttry {\r\n\t\treturn new Intl.DateTimeFormat(navigator.language, {\r\n\t\t\tdateStyle: \"short\",\r\n\t\t\ttimeStyle: \"short\"\r\n\t\t}).format(d)\r\n\t} catch (e) {\r\n\t\tconsole.error(e)\r\n\t\treturn \"Unknown\"\r\n\t}\r\n}\r\n\r\n// @TODO refactor to take pool arguments and use pool constants\r\nexport function getApproxAPY(bond, totalStake, isEarly) {\r\n\tif (!totalStake || totalStake.isZero()) return 0\r\n\tconst earlyDistributionEnds = 1599177600000\r\n\tconst bondCreatedSeconds =\r\n\t\tbond && bond.nonce ? bond.nonce.toNumber() : Date.now() / 1000\r\n\tconst getsEarlyBird =\r\n\t\t(isEarly || bondCreatedSeconds < 1597276800) &&\r\n\t\tDate.now() < earlyDistributionEnds\r\n\t// this reward is distributed over that many days, hence * (365/145)\r\n\tconst base = (6000000 / parseFloat(formatADX(totalStake), 10)) * (365 / 145)\r\n\tconst early = (1000000 / parseFloat(formatADX(totalStake), 10)) * (365 / 30)\r\n\treturn base + (getsEarlyBird ? early : 0)\r\n\t// @TODO DAI rewards\r\n}\r\n\r\nexport function getADXInUSD(prices, ADX) {\r\n\tif (!prices || !prices.USD) return 0\r\n\tconst adxUsd = parseFloat(formatADX(ADX || 0), 10) * prices.USD\r\n\treturn adxUsd\r\n}\r\n\r\nexport function getADXInUSDFormatted(prices, ADX) {\r\n\tconst adxUsd = getADXInUSD(prices, ADX)\r\n\treturn `$ ${commify(adxUsd.toFixed(2))}`\r\n}\r\n\r\nexport function getDAIInUSD(DAI) {\r\n\tconst adxUsd = parseFloat(formatDAI(DAI || 0), 10) * 1\r\n\treturn adxUsd\r\n}\r\n\r\nexport function getUSDFormatted(usdAmount) {\r\n\treturn `$ ${commify(parseFloat(usdAmount.toFixed(2)))}`\r\n}\r\n\r\nexport const formatAddress = (address = \"\", joinSymbol = \"...\") => {\r\n\treturn `${address.substring(0, 6)}${joinSymbol}${address.substring(38, 42)}`\r\n}\r\n\r\nexport const formatTxnHash = (hash = \"\") => {\r\n\treturn `${hash.substring(0, 16)}...`\r\n}\r\n\r\nexport const toIdAttributeString = (string, defaultValue) => {\r\n\tif (typeof string === \"string\") {\r\n\t\treturn string.replace(/([^a-z0-9]+)/gi, \"-\").toLowerCase()\r\n\t} else {\r\n\t\treturn defaultValue || \"\"\r\n\t}\r\n}\r\n\r\nexport const formatLPToken = ({ lpTokenDataWithPrices, lpValueBN }) => {\r\n\tif (!lpValueBN) return \"-\"\r\n\r\n\tconst [t1, t2] = lpTokenDataWithPrices\r\n\tconst lpValue = parseFloat(formatTokens(lpValueBN))\r\n\r\n\tconst formatted = `\r\n\t\t${formatNumberPretty((t1.unitsPerLP * lpValue).toFixed(6))} ${t1.token} +\r\n\t\t${formatNumberPretty((t2.unitsPerLP * lpValue).toFixed(6))} ${t2.token}\r\n\t`\r\n\treturn formatted\r\n}\r\n","import React from \"react\"\r\n\r\nconst AppContext = React.createContext()\r\n\r\nexport default AppContext\r\n","import React from \"react\"\r\nimport { Tooltip } from \"@material-ui/core\"\r\n\r\nconst CommonTooltip = ({ children, ...props }) => (\r\n\t<Tooltip\r\n\t\tleaveTouchDelay={16900}\r\n\t\tenterTouchDelay={420}\r\n\t\t{...props}\r\n\t\t{...(!props.title\r\n\t\t\t? {\r\n\t\t\t\t\tdisableFocusListener: true,\r\n\t\t\t\t\tdisableHoverListener: true,\r\n\t\t\t\t\tdisableTouchListener: true\r\n\t\t\t  }\r\n\t\t\t: {})}\r\n\t>\r\n\t\t{children}\r\n\t</Tooltip>\r\n)\r\n\r\nexport default CommonTooltip\r\n","import React, { Fragment } from \"react\"\r\nimport { Box, Typography } from \"@material-ui/core\"\r\nimport { InfoSharp as InfoIcon } from \"@material-ui/icons\"\r\nimport Tooltip from \"./Tooltip\"\r\n\r\nconst ExtraLabel = ({ label = \"\" }) =>\r\n\tArray.isArray(label) ? (\r\n\t\t<Fragment>\r\n\t\t\t{label.map((x, index) => (\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\tdisplay=\"block\"\r\n\t\t\t\t\tvariant=\"caption\"\r\n\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{x}\r\n\t\t\t\t</Typography>\r\n\t\t\t))}\r\n\t\t</Fragment>\r\n\t) : (\r\n\t\tlabel\r\n\t)\r\n\r\nexport function Info({ title }) {\r\n\treturn (\r\n\t\t<Tooltip title={<ExtraLabel label={title} />}>\r\n\t\t\t<InfoIcon fontSize=\"inherit\" />\r\n\t\t</Tooltip>\r\n\t)\r\n}\r\n\r\nfunction AmountTextSingle({ text = \"\", fontSize, multiline }) {\r\n\tconst decimalSeparatorSplit = text.split(\".\")\r\n\r\n\tif (decimalSeparatorSplit.length > 1) {\r\n\t\tconst decimalsSplit = decimalSeparatorSplit[1].split(\" \")\r\n\t\tconst rest = decimalsSplit.slice(2)\r\n\t\treturn (\r\n\t\t\t<Box\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tdisplay={multiline ? \"block\" : \"inline\"}\r\n\t\t\t\twidth={multiline ? 1 : \"auto\"}\r\n\t\t\t\tfontSize={fontSize}\r\n\t\t\t>\r\n\t\t\t\t<Box component=\"div\" display=\"inline\">\r\n\t\t\t\t\t{decimalSeparatorSplit[0]}\r\n\t\t\t\t\t{\".\"}\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tdisplay=\"inline\"\r\n\t\t\t\t\tstyle={{ opacity: \"0.56\" }}\r\n\t\t\t\t\tfontSize={fontSize * 0.8}\r\n\t\t\t\t>\r\n\t\t\t\t\t{decimalsSplit[0]}\r\n\t\t\t\t</Box>\r\n\t\t\t\t{decimalsSplit[1] && (\r\n\t\t\t\t\t<Box component=\"div\" display=\"inline\" fontSize={fontSize * 0.8}>\r\n\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t{decimalsSplit[1]}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)}\r\n\t\t\t\t{!!rest.length && (\r\n\t\t\t\t\t<Box component=\"div\" display=\"inline\">\r\n\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t{rest.join(\" \")}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t)\r\n\t} else {\r\n\t\treturn text\r\n\t}\r\n}\r\n\r\nexport function AmountText({ text = \"\", fontSize, multiline, children }) {\r\n\tconst transValue = children ? children.join(\";\") : \"\"\r\n\r\n\tconst multipleAmountsSplit = (text || transValue)\r\n\t\t.split(\";\")\r\n\t\t.map(x => x.trim())\r\n\t\t.filter(x => !!x)\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{multipleAmountsSplit.length\r\n\t\t\t\t? multipleAmountsSplit\r\n\t\t\t\t\t\t.map((x, i) => (\r\n\t\t\t\t\t\t\t<AmountTextSingle\r\n\t\t\t\t\t\t\t\tkey={i + x.toString()}\r\n\t\t\t\t\t\t\t\ttext={x}\r\n\t\t\t\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\t\t\t\tmultiline={multiline}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t\t.reduce((prev, curr) => [prev, multiline ? null : \"; \", curr])\r\n\t\t\t\t: text}\r\n\t\t</Fragment>\r\n\t)\r\n}\r\n\r\nexport function CardRow({\r\n\ttext,\r\n\tinfoText,\r\n\tfontWeight,\r\n\tfontSize,\r\n\tcolor,\r\n\tjustify,\r\n\tisAmountText,\r\n\tmultilineLinesAmounts,\r\n\t...restBox\r\n}) {\r\n\treturn (\r\n\t\t<Box {...restBox}>\r\n\t\t\t<Typography component=\"div\" variant=\"body2\">\r\n\t\t\t\t<Box\r\n\t\t\t\t\tcolor={color}\r\n\t\t\t\t\tfontWeight={fontWeight}\r\n\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tflexWrap=\"wrap\"\r\n\t\t\t\t\tjustifyContent={justify || \"flex-start\"}\r\n\t\t\t\t\tstyle={{ wordBreak: \"break-word\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{isAmountText ? (\r\n\t\t\t\t\t\t<AmountText\r\n\t\t\t\t\t\t\ttext={text}\r\n\t\t\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\t\t\tmultiline={multilineLinesAmounts}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\ttext\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{infoText && (\r\n\t\t\t\t\t\t<Box ml={0.69} display=\"flex\">\r\n\t\t\t\t\t\t\t<Info title={infoText} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Box>\r\n\t\t\t</Typography>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import { POOLS, ADDR_STAKING } from \"./constants\"\r\nimport { utils } from \"ethers\"\r\n\r\nconst { keccak256, defaultAbiCoder } = utils\r\n\r\nexport const getPool = poolId => POOLS.find(x => x.id === poolId)\r\nexport function getBondId({ owner, amount, poolId, nonce }) {\r\n\treturn keccak256(\r\n\t\tdefaultAbiCoder.encode(\r\n\t\t\t[\"address\", \"address\", \"uint\", \"bytes32\", \"uint\"],\r\n\t\t\t[ADDR_STAKING, owner, amount, poolId, nonce]\r\n\t\t)\r\n\t)\r\n}\r\n","import React, { Fragment, useState, forwardRef } from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport {\r\n\tButton,\r\n\tBox,\r\n\tFab,\r\n\tIconButton,\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogContent,\r\n\tSlide,\r\n\tDialogActions,\r\n\tTypography\r\n} from \"@material-ui/core\"\r\nimport clsx from \"clsx\"\r\nimport { withStyles } from \"@material-ui/core/styles\"\r\nimport CancelIcon from \"@material-ui/icons/Cancel\"\r\nimport Tooltip from \"./Tooltip\"\r\n\r\nexport const styles = theme => {\r\n\tconst spacing = theme.spacing(2)\r\n\treturn {\r\n\t\tdialog: {\r\n\t\t\t// height: `calc(100vh - ${spacing}px)`,\r\n\t\t\t// minWidth: 999,\r\n\t\t\t// maxWidth: 999,\r\n\t\t\tbackgroundColor: theme.palette.background.paper\r\n\t\t\t// \"@media(max-width:1080px)\": {\r\n\t\t\t// \tmaxWidth: \"100%\",\r\n\t\t\t// \tminWidth: `calc(100vw - ${spacing}px)`\r\n\t\t\t// }\r\n\t\t},\r\n\t\tdialogTitle: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"row\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"space-between\",\r\n\t\t\twordWrap: \"break-word\",\r\n\t\t\tmargin: spacing,\r\n\t\t\tmarginLeft: theme.spacing(2),\r\n\t\t\tmarginBottom: 0,\r\n\t\t\tpadding: 0\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\tflex: \"1 1 auto\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\tpadding: spacing,\r\n\t\t\tmargin: 0,\r\n\t\t\toverflowX: \"visible\",\r\n\t\t\toverflowY: \"auto\"\r\n\t\t},\r\n\t\ttextBtn: {\r\n\t\t\tcursor: \"pointer\"\r\n\t\t},\r\n\t\tbtnIconLeft: {\r\n\t\t\tmarginRight: theme.spacing(1)\r\n\t\t},\r\n\t\tbreakLong: {\r\n\t\t\twordBreak: \"break-word\",\r\n\t\t\toverflowWrap: \"break-word\",\r\n\t\t\thyphens: \"auto\"\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst textBtn = ({ label, className, classes, style, onClick, ...rest }) => {\r\n\treturn (\r\n\t\t<span\r\n\t\t\tclassName={clsx(classes.textBtn, className)}\r\n\t\t\tstyle={style}\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t{\" \"}\r\n\t\t\t{label}{\" \"}\r\n\t\t</span>\r\n\t)\r\n}\r\n\r\nconst TextBtn = withStyles(styles)(textBtn)\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />\r\n})\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nexport default function WithDialogHoc(Decorated) {\r\n\tfunction WithDialog(props) {\r\n\t\tconst {\r\n\t\t\tid,\r\n\t\t\tdisableBackdropClick = false,\r\n\t\t\tforwardedRef,\r\n\t\t\ticonButton,\r\n\t\t\ttextButton,\r\n\t\t\tfabButton,\r\n\t\t\tvariant,\r\n\t\t\tcolor,\r\n\t\t\tsize,\r\n\t\t\tmini,\r\n\t\t\tbtnLabel,\r\n\t\t\tdisabled,\r\n\t\t\tclassName,\r\n\t\t\ticon,\r\n\t\t\ttitle,\r\n\t\t\tdialogActions,\r\n\t\t\tonClick,\r\n\t\t\tfullWidth,\r\n\t\t\tonBeforeOpen,\r\n\t\t\tonCloseDialog,\r\n\t\t\ttooltipTitle,\r\n\t\t\t...rest\r\n\t\t} = props\r\n\r\n\t\tconst btnProps = {\r\n\t\t\tcolor,\r\n\t\t\tsize,\r\n\t\t\tvariant\r\n\t\t}\r\n\r\n\t\tconst classes = useStyles()\r\n\t\tconst [open, setOpen] = useState(false)\r\n\r\n\t\tconst handleToggle = async () => {\r\n\t\t\tif (typeof onBeforeOpen === \"function\" && !open) {\r\n\t\t\t\tawait onBeforeOpen()\r\n\t\t\t}\r\n\r\n\t\t\tsetOpen(!open)\r\n\t\t}\r\n\r\n\t\tconst handleClick = async ev => {\r\n\t\t\tev && ev.stopPropagation && ev.stopPropagation()\r\n\t\t\tev && ev.preventDefault && ev.preventDefault()\r\n\t\t\tawait handleToggle()\r\n\t\t\tif (onClick) await onClick()\r\n\t\t}\r\n\r\n\t\tconst closeDialog = () => {\r\n\t\t\tif (onCloseDialog) {\r\n\t\t\t\tonCloseDialog()\r\n\t\t\t}\r\n\r\n\t\t\tsetOpen(false)\r\n\t\t}\r\n\r\n\t\tlet ButtonComponent = null\r\n\r\n\t\tif (iconButton) {\r\n\t\t\tButtonComponent = IconButton\r\n\t\t} else if (textButton) {\r\n\t\t\tButtonComponent = TextBtn\r\n\t\t} else if (fabButton) {\r\n\t\t\tButtonComponent = Fab\r\n\t\t} else {\r\n\t\t\tButtonComponent = Button\r\n\t\t\tbtnProps.fullWidth = fullWidth\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<Tooltip title={tooltipTitle || \"\"}>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay=\"inline-block\"\r\n\t\t\t\t\t\t{...(btnProps.fullWidth ? { width: 1 } : {})}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ButtonComponent\r\n\t\t\t\t\t\t\tid={id}\r\n\t\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\t\taria-label={btnLabel || \"\"}\r\n\t\t\t\t\t\t\tlabel={btnLabel || \"\"}\r\n\t\t\t\t\t\t\tonClick={ev => handleClick(ev)}\r\n\t\t\t\t\t\t\t{...btnProps}\r\n\t\t\t\t\t\t\tclassName={clsx(\r\n\t\t\t\t\t\t\t\tclassName,\r\n\t\t\t\t\t\t\t\t{ [classes.floating]: !!fabButton },\r\n\t\t\t\t\t\t\t\t{ [classes.first]: color === \"first\" },\r\n\t\t\t\t\t\t\t\t{ [classes.second]: color === \"second\" }\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{icon}\r\n\t\t\t\t\t\t\t{(!iconButton && btnLabel) || \"\"}\r\n\t\t\t\t\t\t</ButtonComponent>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\tdisableBackdropClick={disableBackdropClick}\r\n\t\t\t\t\t// disableEscapeKeyDown\r\n\t\t\t\t\t// maxWidth=\"xs\"\r\n\t\t\t\t\t// fullScreen\r\n\t\t\t\t\topen={open}\r\n\t\t\t\t\tonClose={handleToggle}\r\n\t\t\t\t\tTransitionComponent={Transition}\r\n\t\t\t\t\tclasses={{ paper: classes.dialog }}\r\n\t\t\t\t\t// onEscKeyDown={handleToggle}\r\n\t\t\t\t\t// onOverlayClick={handleToggle}\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogTitle\r\n\t\t\t\t\t\tdisableTypography\r\n\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\troot: clsx(classes.dialogTitle, classes.breakLong)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography variant=\"h4\">{title}</Typography>\r\n\t\t\t\t\t\t<IconButton onClick={handleToggle} size=\"small\">\r\n\t\t\t\t\t\t\t<CancelIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</DialogTitle>\r\n\t\t\t\t\t<DialogContent classes={{ root: classes.content }}>\r\n\t\t\t\t\t\t<Decorated ref={forwardedRef} {...rest} closeDialog={closeDialog} />\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t{dialogActions && <DialogActions>{dialogActions}</DialogActions>}\r\n\t\t\t\t</Dialog>\r\n\t\t\t</Fragment>\r\n\t\t)\r\n\t}\r\n\r\n\tWithDialog.propTypes = {\r\n\t\tbtnLabel: PropTypes.string,\r\n\t\ttitle: PropTypes.string.isRequired,\r\n\t\tfloating: PropTypes.bool,\r\n\t\tonBeforeOpen: PropTypes.func\r\n\t}\r\n\r\n\treturn forwardRef((props, ref) => (\r\n\t\t<WithDialog {...props} forwardedRef={ref} />\r\n\t))\r\n}\r\n","export function isValidNumberString(numStr) {\r\n\tif (typeof numStr !== \"string\") return false\r\n\treturn !isNaN(numStr) && !isNaN(parseFloat(numStr))\r\n}\r\n","import { providers, utils } from \"ethers\"\r\n\r\nimport { useTestnet, REACT_APP_RPC_URL } from \"./helpers/constants\"\r\n\r\nconst LocalProvider = REACT_APP_RPC_URL.startsWith(\"wss://\")\r\n\t? providers.WebSocketProvider\r\n\t: providers.JsonRpcProvider\r\n\r\n// TODO: async\r\nexport const getDefaultProvider = (function() {\r\n\tlet defaultProvider = new LocalProvider(\r\n\t\tREACT_APP_RPC_URL,\r\n\t\tuseTestnet ? \"goerli\" : \"homestead\"\r\n\t)\r\n\r\n\tdefaultProvider.on(\"error\", e => {\r\n\t\tconsole.error(\"WS Error\", e)\r\n\t\tdefaultProvider = new LocalProvider(\r\n\t\t\tREACT_APP_RPC_URL,\r\n\t\t\tuseTestnet ? \"goerli\" : \"homestead\"\r\n\t\t)\r\n\t})\r\n\r\n\treturn defaultProvider\r\n})()\r\n\r\nexport async function getSigner(chosenWalletType) {\r\n\t// console.log(\"chosenWalletType\", chosenWalletType)\r\n\tif (!chosenWalletType || !chosenWalletType.library)\r\n\t\tthrow new Error(\"Wallet not connected\")\r\n\treturn chosenWalletType.library.getSigner()\r\n}\r\n\r\nexport async function signMessage(signer, message) {\r\n\tif (!signer) {\r\n\t\tthrow new Error(\"errors.noSignerProvided\")\r\n\t}\r\n\tif (!message) {\r\n\t\tthrow new Error(\"errors.noMessageProvided\")\r\n\t}\r\n\r\n\tconst address = await signer.getAddress()\r\n\tlet sig = \"\"\r\n\r\n\tif (signer.provider.provider.isWalletConnect) {\r\n\t\tsig = await signer.provider.send(\"personal_sign\", [\r\n\t\t\tutils.hexlify(message),\r\n\t\t\taddress\r\n\t\t])\r\n\t} else {\r\n\t\tsig = await signer.signMessage(message)\r\n\t}\r\n\r\n\tconst verified = (await utils.verifyMessage(message, sig)) === address\r\n\r\n\tif (!verified) {\r\n\t\tthrow new Error(\"errors.signatureNotVerified\")\r\n\t}\r\n\r\n\treturn sig\r\n}\r\n","import { BigNumber, Contract } from \"ethers\"\r\nimport { splitSig, Transaction } from \"adex-protocol-eth/js\"\r\nimport IdentityABI from \"adex-protocol-eth/abi/Identity\"\r\nimport FactoryABI from \"adex-protocol-eth/abi/IdentityFactory\"\r\nimport { ADDR_FACTORY, ZERO } from \"../helpers/constants\"\r\nimport { getUserIdentity, zeroFeeTx, rawZeroFeeTx } from \"../helpers/identity\"\r\nimport { ADEX_RELAYER_HOST, PRICES_API_URL } from \"../helpers/constants\"\r\nimport { getSigner, getDefaultProvider, signMessage } from \"../ethereum\"\r\n\r\nconst defaultProvider = getDefaultProvider\r\n\r\nexport async function getPrices() {\r\n\ttry {\r\n\t\tconst res = await fetch(PRICES_API_URL)\r\n\t\tconst data = await res.json()\r\n\r\n\t\tif (!data.adex) {\r\n\t\t\tthrow new Error(\"errors.gettingPrices\")\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\tUSD: data.adex.usd\r\n\t\t\t}\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.error(err)\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nexport async function executeOnIdentity(\r\n\tchosenWalletType,\r\n\ttxns,\r\n\topts = {},\r\n\tgasless,\r\n\textraGasLimit\r\n) {\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\tconst walletAddr = await signer.getAddress()\r\n\tconst { addr, bytecode } = getUserIdentity(walletAddr)\r\n\tconst identity = new Contract(addr, IdentityABI, signer)\r\n\r\n\tconst needsToDeploy =\r\n\t\t(await defaultProvider.getCode(identity.address)) === \"0x\"\r\n\tconst idNonce = needsToDeploy ? ZERO : await identity.nonce()\r\n\tconst toTuples = offset => ([to, data], i) =>\r\n\t\tzeroFeeTx(\r\n\t\t\tidentity.address,\r\n\t\t\tidNonce.add(i + offset),\r\n\t\t\tto,\r\n\t\t\tdata\r\n\t\t).toSolidityTuple()\r\n\tif (gasless) {\r\n\t\t// @TODO: we can use execute that calls into executeBySender here to only sign one tx\r\n\t\tconst txnsRaw = txns.map(([to, data], i) =>\r\n\t\t\trawZeroFeeTx(identity.address, idNonce.add(i), to, data)\r\n\t\t)\r\n\t\tconst signatures = []\r\n\t\tfor (const tx of txnsRaw) {\r\n\t\t\tconst sig = await signMessage(signer, new Transaction(tx).hash())\r\n\t\t\tsignatures.push(splitSig(sig))\r\n\t\t}\r\n\r\n\t\tconst executeUrl = `${ADEX_RELAYER_HOST}/staking/${walletAddr}/execute`\r\n\t\tconst res = await fetch(executeUrl, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\ttxnsRaw,\r\n\t\t\t\tsignatures\r\n\t\t\t}),\r\n\t\t\theaders: { \"Content-Type\": \"application/json\" }\r\n\t\t})\r\n\t\tif (res.status === 500) throw new Error(\"errors.relayerInternal\")\r\n\t\treturn res.json()\r\n\t} else if (!needsToDeploy) {\r\n\t\tconst txnTuples = txns.map(toTuples(0))\r\n\r\n\t\tif (extraGasLimit) {\r\n\t\t\tconst estimatedGasLimit = await identity.estimateGas.executeBySender(\r\n\t\t\t\ttxnTuples,\r\n\t\t\t\topts\r\n\t\t\t)\r\n\t\t\topts.gasLimit = estimatedGasLimit.add(BigNumber.from(extraGasLimit))\r\n\t\t}\r\n\r\n\t\tawait identity.executeBySender(txnTuples, opts)\r\n\t} else {\r\n\t\t// Has offset because the execute() takes the first nonce\r\n\t\tconst txnTuples = txns.map(toTuples(1))\r\n\t\tconst executeTx = zeroFeeTx(\r\n\t\t\tidentity.address,\r\n\t\t\tidNonce,\r\n\t\t\tidentity.address,\r\n\t\t\tidentity.interface.encodeFunctionData(\"executeBySender\", [txnTuples])\r\n\t\t)\r\n\r\n\t\tconst sig = await signMessage(signer, executeTx.hash())\r\n\r\n\t\tconst factoryWithSigner = new Contract(ADDR_FACTORY, FactoryABI, signer)\r\n\r\n\t\tif (extraGasLimit) {\r\n\t\t\tconst estimatedGasLimit = await factoryWithSigner.deployAndExecute(\r\n\t\t\t\tbytecode,\r\n\t\t\t\t0,\r\n\t\t\t\t[executeTx.toSolidityTuple()],\r\n\t\t\t\t[splitSig(sig)],\r\n\t\t\t\topts\r\n\t\t\t)\r\n\t\t\topts.gasLimit = estimatedGasLimit.add(BigNumber.from(extraGasLimit))\r\n\t\t}\r\n\r\n\t\tawait factoryWithSigner.deployAndExecute(\r\n\t\t\tbytecode,\r\n\t\t\t0,\r\n\t\t\t[executeTx.toSolidityTuple()],\r\n\t\t\t[splitSig(sig)],\r\n\t\t\topts\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport function toChannelTuple(args) {\r\n\treturn [\r\n\t\targs.creator,\r\n\t\targs.tokenAddr,\r\n\t\targs.tokenAmount,\r\n\t\targs.validUntil,\r\n\t\targs.validators,\r\n\t\targs.spec\r\n\t]\r\n}\r\n","import { Contract, BigNumber, utils } from \"ethers\"\r\nimport ERC20ABI from \"../abi/ERC20\"\r\nimport ADXTokenABI from \"../abi/ADXToken\"\r\n// import StakingABI from \"adex-protocol-eth/abi/Staking\"\r\nimport ADXSupplyControllerABI from \"../abi/ADXSupplyController\"\r\nimport StakingMigratorABI from \"../abi/StakingMigrator.json\"\r\nimport StakingPoolABI from \"../abi/StakingPool.json\"\r\nimport GaslessSweeperABI from \"../abi/GaslessSweeper.json\"\r\nimport CoreABI from \"adex-protocol-eth/abi/AdExCore\"\r\nimport {\r\n\tADDR_ADX,\r\n\t// ADDR_STAKING,\r\n\tADDR_CORE,\r\n\tZERO,\r\n\tMAX_UINT,\r\n\tZERO_ADDR,\r\n\tADDR_STAKING_POOL,\r\n\tADDR_STAKING_MIGRATOR,\r\n\tADDR_ADX_SUPPLY_CONTROLLER,\r\n\tADEX_RELAYER_HOST,\r\n\tADDR_GASLESS_SWEEPER\r\n} from \"../helpers/constants\"\r\nimport { getDefaultProvider, getSigner } from \"../ethereum\"\r\nimport { executeOnIdentity, toChannelTuple } from \"./common\"\r\nimport { getUserGaslessAddress } from \"../helpers/identity\"\r\n\r\nconst supplyControllerABI = ADXSupplyControllerABI\r\nconst secondsInYear = 60 * 60 * 24 * 365\r\nconst PRECISION = 1_000_000_000_000\r\n\r\nconst provider = getDefaultProvider\r\n\r\n// const Staking = new Contract(ADDR_STAKING, StakingABI, provider)\r\nconst ADXToken = new Contract(ADDR_ADX, ADXTokenABI, provider)\r\nconst ADXSupplyController = new Contract(\r\n\tADDR_ADX_SUPPLY_CONTROLLER,\r\n\tsupplyControllerABI,\r\n\tprovider\r\n)\r\nconst StakingPool = new Contract(ADDR_STAKING_POOL, StakingPoolABI, provider)\r\nconst StakingMigrator = new Contract(\r\n\tADDR_STAKING_MIGRATOR,\r\n\tStakingMigratorABI,\r\n\tprovider\r\n)\r\nconst Core = new Contract(ADDR_CORE, CoreABI, provider)\r\n\r\nconst POOL_SHARES_TOKEN_DECIMALS_MUL = \"1000000000000000000\"\r\n\r\nexport const STAKING_POOL_EVENT_TYPES = {\r\n\tenter: \"enter\",\r\n\tleave: \"leave\",\r\n\tburn: \"burn\",\r\n\twithdraw: \"withdraw\",\r\n\trageLeave: \"rageLeave\",\r\n\tshareTokensTransferIn: \"shareTokensTransferIn\",\r\n\tshareTokensTransferOut: \"shareTokensTransferOut\"\r\n}\r\n\r\nexport const STAKING_POOL_EMPTY_STATS = {\r\n\tshareValue: ZERO,\r\n\tbalanceShares: ZERO,\r\n\tbalanceSharesAvailable: ZERO,\r\n\tcurrentBalanceADX: ZERO,\r\n\tcurrentBalanceADXAvailable: ZERO,\r\n\tcurrentBalanceADXAtCurrentShareValue: ZERO,\r\n\twithdrawnReward: ZERO,\r\n\tpoolTotalStaked: ZERO,\r\n\tpoolTotalBalanceADX: ZERO,\r\n\tsharesTotalSupply: ZERO,\r\n\ttotalRewards: ZERO,\r\n\tcurrentReward: ZERO,\r\n\twithdrawsADXTotal: ZERO,\r\n\tdepositsADXTotal: ZERO,\r\n\ttotalSharesOutTransfersAdxValue: ZERO,\r\n\ttotalSharesInTransfersAdxValue: ZERO,\r\n\tcurrentAPY: 0,\r\n\tstakings: [],\r\n\tuserLeaves: [],\r\n\thasActiveUnbondCommitments: false,\r\n\tleavesPendingToUnlockTotalMax: ZERO,\r\n\tleavesReadyToWithdrawTotalMax: ZERO,\r\n\tleavesPendingToUnlockTotalADX: ZERO,\r\n\tleavesReadyToWithdrawTotalADX: ZERO,\r\n\tunbondDays: 33,\r\n\tloaded: false,\r\n\tuserDataLoaded: false,\r\n\trageReceivedPromilles: 700,\r\n\ttimeToUnbond: 1,\r\n\tuserShare: 0,\r\n\tgaslessAddress: null,\r\n\tgaslessAddrBalance: ZERO\r\n}\r\n\r\nexport async function onMigrationToV5Finalize(\r\n\tchosenWalletType,\r\n\t{ amount, poolId, nonce },\r\n\tclaimPendingRewards,\r\n\tstakeWalletBalance,\r\n\twithdrawOnMigration, // TODO: check it here\r\n\tstats,\r\n\tenterTo\r\n) {\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\tconst walletAddr = await signer.getAddress()\r\n\r\n\tconst interactionAddress = enterTo ? utils.getAddress(enterTo) : walletAddr\r\n\r\n\tconst { userWalletBalance, tomPoolStats } = stats\r\n\tconst {\r\n\t\tidentityADXIncentiveChannels,\r\n\t\tidentityAdxRewardsAmount\r\n\t} = tomPoolStats\r\n\r\n\tconst willWithdrawOnMigration = withdrawOnMigration\r\n\r\n\tconst identityTxns = []\r\n\r\n\tlet extraAmount = ZERO\r\n\r\n\tif (claimPendingRewards) {\r\n\t\tidentityADXIncentiveChannels.forEach(channel => {\r\n\t\t\tconst channelTuple = toChannelTuple(channel.channelArgs)\r\n\t\t\tidentityTxns.push([\r\n\t\t\t\tCore.address,\r\n\t\t\t\tCore.interface.encodeFunctionData(\"channelWithdraw\", [\r\n\t\t\t\t\tchannelTuple,\r\n\t\t\t\t\tchannel.stateRoot,\r\n\t\t\t\t\tchannel.signatures,\r\n\t\t\t\t\tchannel.proof,\r\n\t\t\t\t\tchannel.amount\r\n\t\t\t\t])\r\n\t\t\t])\r\n\t\t})\r\n\r\n\t\tidentityTxns.push([\r\n\t\t\tADXToken.address,\r\n\t\t\tADXToken.interface.encodeFunctionData(\"transfer\", [\r\n\t\t\t\twillWithdrawOnMigration ? interactionAddress : ADDR_STAKING_MIGRATOR,\r\n\t\t\t\tidentityAdxRewardsAmount\r\n\t\t\t])\r\n\t\t])\r\n\r\n\t\textraAmount = extraAmount.add(identityAdxRewardsAmount)\r\n\t}\r\n\r\n\t// TODO: check allowance\r\n\tif (!willWithdrawOnMigration && stakeWalletBalance) {\r\n\t\tidentityTxns.push([\r\n\t\t\tADXToken.address,\r\n\t\t\tADXToken.interface.encodeFunctionData(\"transferFrom\", [\r\n\t\t\t\twalletAddr,\r\n\t\t\t\tADDR_STAKING_MIGRATOR,\r\n\t\t\t\tuserWalletBalance\r\n\t\t\t])\r\n\t\t])\r\n\r\n\t\textraAmount = extraAmount.add(userWalletBalance)\r\n\t}\r\n\r\n\tawait executeOnIdentity(\r\n\t\tchosenWalletType,\r\n\t\t[\r\n\t\t\t...identityTxns,\r\n\t\t\t[\r\n\t\t\t\tStakingMigrator.address,\r\n\t\t\t\tStakingMigrator.interface.encodeFunctionData(\"migrate\", [\r\n\t\t\t\t\tamount,\r\n\t\t\t\t\tnonce,\r\n\t\t\t\t\tinteractionAddress,\r\n\t\t\t\t\textraAmount\r\n\t\t\t\t])\r\n\t\t\t]\r\n\t\t],\r\n\t\t{},\r\n\t\tfalse,\r\n\t\tclaimPendingRewards || (!willWithdrawOnMigration && stakeWalletBalance)\r\n\t\t\t? 16_000\r\n\t\t\t: null\r\n\t)\r\n}\r\n\r\nexport async function onStakingPoolV5Deposit(\r\n\tstats,\r\n\tchosenWalletType,\r\n\tadxDepositAmount\r\n) {\r\n\tif (!stats) throw new Error(\"errors.statsNotProvided\")\r\n\tif (!adxDepositAmount) throw new Error(\"errors.noDepositAmount\")\r\n\tif (adxDepositAmount.isZero()) throw new Error(\"errors.zeroDeposit\")\r\n\tif (adxDepositAmount.gt(stats.userBalance))\r\n\t\tthrow new Error(\"errors.amountTooLarge\")\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tconst walletAddr = await signer.getAddress()\r\n\r\n\tconst [allowanceStakingPool] = await Promise.all([\r\n\t\tADXToken.allowance(walletAddr, StakingPool.address)\r\n\t])\r\n\r\n\tconst setAllowance = allowanceStakingPool.lt(adxDepositAmount)\r\n\r\n\tif (setAllowance) {\r\n\t\tconst tokenWithSigner = new Contract(ADDR_ADX, ERC20ABI, signer)\r\n\t\tawait tokenWithSigner.approve(StakingPool.address, MAX_UINT)\r\n\t}\r\n\r\n\tconst stakingPoolWithSigner = new Contract(\r\n\t\tADDR_STAKING_POOL,\r\n\t\tStakingPoolABI,\r\n\t\tsigner\r\n\t)\r\n\r\n\tawait stakingPoolWithSigner.enter(\r\n\t\tadxDepositAmount,\r\n\t\tsetAllowance ? { gasLimit: 136000 } : {}\r\n\t)\r\n}\r\n\r\nexport async function onStakingPoolV5GaslessDeposit(\r\n\tstats,\r\n\tchosenWalletType,\r\n\tadxDepositAmount\r\n) {\r\n\tif (!stats) throw new Error(\"errors.statsNotProvided\")\r\n\tif (!adxDepositAmount) throw new Error(\"errors.noDepositAmount\")\r\n\tif (adxDepositAmount.isZero()) throw new Error(\"errors.zeroDeposit\")\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\tconst walletAddr = await signer.getAddress()\r\n\r\n\tconst gaslessStakeUrl = `${ADEX_RELAYER_HOST}/staking/${walletAddr}/stake-gasless`\r\n\tconst res = await fetch(gaslessStakeUrl, {\r\n\t\tmethod: \"POST\",\r\n\t\theaders: { \"Content-Type\": \"application/json\" }\r\n\t})\r\n\tif (res.status === 500) throw new Error(\"errors.relayerInternal\")\r\n\treturn res.json()\r\n}\r\n\r\nexport async function onStakingPoolV5WhenNoSufficientForGaslessDeposit(\r\n\tstats,\r\n\tchosenWalletType,\r\n\tgaslessAddrAmount\r\n) {\r\n\tif (!stats) throw new Error(\"errors.statsNotProvided\")\r\n\tif (gaslessAddrAmount.isZero()) throw new Error(\"errors.zeroDeposit\")\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\tconst walletAddr = await signer.getAddress()\r\n\r\n\tconst gaslessSweeperWithSigner = new Contract(\r\n\t\tADDR_GASLESS_SWEEPER,\r\n\t\tGaslessSweeperABI,\r\n\t\tsigner\r\n\t)\r\n\r\n\tawait gaslessSweeperWithSigner.sweep(ADDR_STAKING_POOL, [walletAddr])\r\n}\r\n\r\nexport async function onStakingPoolV5Withdraw(\r\n\tstats,\r\n\tchosenWalletType,\r\n\t_,\r\n\tunbondCommitment\r\n) {\r\n\tif (!stats) throw new Error(\"errors.statsNotProvided\")\r\n\tif (!unbondCommitment) throw new Error(\"errors.noUnbondCommitmentProvided\")\r\n\t// TODO: validate unbondCommitment\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\r\n\tconst stakingPoolWithSigner = new Contract(\r\n\t\tADDR_STAKING_POOL,\r\n\t\tStakingPoolABI,\r\n\t\tsigner\r\n\t)\r\n\r\n\tconst { shares, unlocksAt } = unbondCommitment\r\n\r\n\tawait stakingPoolWithSigner.withdraw(shares, unlocksAt, false)\r\n}\r\n\r\nexport async function onStakingPoolV5RageLeave(\r\n\tstats,\r\n\tchosenWalletType,\r\n\trageLeaveADXAmount\r\n) {\r\n\tif (!stats) throw new Error(\"errors.statsNotProvided\")\r\n\tif (!rageLeaveADXAmount) throw new Error(\"errors.noRageLeaveAAmount\")\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\r\n\tconst stakingPoolWithSigner = new Contract(\r\n\t\tADDR_STAKING_POOL,\r\n\t\tStakingPoolABI,\r\n\t\tsigner\r\n\t)\r\n\r\n\tconst {\r\n\t\tbalanceShares,\r\n\t\tcurrentBalanceADXAtCurrentShareValue\r\n\t} = stats.tomStakingV5PoolStats\r\n\r\n\tconst sharesToWithdraw = rageLeaveADXAmount\r\n\t\t.mul(balanceShares)\r\n\t\t.div(currentBalanceADXAtCurrentShareValue)\r\n\r\n\tawait stakingPoolWithSigner.rageLeave(sharesToWithdraw, false)\r\n}\r\n\r\nexport async function onStakingPoolV5UnbondCommitment(\r\n\tstats,\r\n\tchosenWalletType,\r\n\tunbondCommitmentAmountADX\r\n) {\r\n\tif (!stats) throw new Error(\"errors.statsNotProvided\")\r\n\r\n\tconst {\r\n\t\tbalanceSharesAvailable,\r\n\t\tcurrentBalanceADX,\r\n\t\tcurrentBalanceADXAvailable\r\n\t} = stats.tomStakingV5PoolStats\r\n\r\n\tif (!unbondCommitmentAmountADX) throw new Error(\"errors.noWithdrawAmount\")\r\n\tif (currentBalanceADX.isZero()) throw new Error(\"errors.zeroBalanceADX\")\r\n\tif (unbondCommitmentAmountADX.gt(currentBalanceADX))\r\n\t\tthrow new Error(\"errors.amountTooLarge\")\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\r\n\tconst sharesToWithdraw = unbondCommitmentAmountADX\r\n\t\t.mul(balanceSharesAvailable)\r\n\t\t.div(currentBalanceADXAvailable)\r\n\r\n\t// console.log('sharesToWithdraw', sharesToWithdraw.toString())\r\n\r\n\tconst stakingPoolWithSigner = new Contract(\r\n\t\tADDR_STAKING_POOL,\r\n\t\tStakingPoolABI,\r\n\t\tsigner\r\n\t)\r\n\r\n\tawait stakingPoolWithSigner.leave(sharesToWithdraw, false)\r\n}\r\n\r\nexport async function getTomStakingV5PoolData() {\r\n\tconst [\r\n\t\tpoolTotalStaked,\r\n\t\tmintableIncentive,\r\n\t\tsharesTotalSupply,\r\n\t\tincentivePerSecond,\r\n\t\trageReceivedPromilles = BigNumber.from(700),\r\n\t\tunbondDays = ZERO,\r\n\t\tshareValue = ZERO\r\n\t] = await Promise.all([\r\n\t\tADXToken.balanceOf(ADDR_STAKING_POOL),\r\n\t\tADXSupplyController.mintableIncentive(ADDR_STAKING_POOL),\r\n\t\tStakingPool.totalSupply(),\r\n\t\tADXSupplyController.incentivePerSecond(ADDR_STAKING_POOL),\r\n\t\tStakingPool.rageReceivedPromilles(),\r\n\t\tStakingPool.timeToUnbond(),\r\n\t\tStakingPool.shareValue()\r\n\t])\r\n\r\n\treturn {\r\n\t\tpoolTotalStaked,\r\n\t\tmintableIncentive,\r\n\t\tpoolTotalBalanceADX: poolTotalStaked.add(mintableIncentive),\r\n\t\tsharesTotalSupply,\r\n\t\tincentivePerSecond,\r\n\t\tshareValue,\r\n\t\trageReceivedPromilles: rageReceivedPromilles.toNumber(),\r\n\t\tunbondDays: unbondDays.div(60 * 60 * 24).toNumber(),\r\n\t\tcurrentAPY: incentivePerSecond.isZero()\r\n\t\t\t? 0\r\n\t\t\t: incentivePerSecond\r\n\t\t\t\t\t.mul(PRECISION)\r\n\t\t\t\t\t.mul(secondsInYear)\r\n\t\t\t\t\t.div(poolTotalStaked)\r\n\t\t\t\t\t.toNumber() / PRECISION\r\n\t}\r\n}\r\n\r\nexport async function loadUserTomStakingV5PoolStats({ walletAddr } = {}) {\r\n\tconst owner = walletAddr\r\n\tconst poolData = await getTomStakingV5PoolData()\r\n\tif (!owner) {\r\n\t\treturn {\r\n\t\t\t...STAKING_POOL_EMPTY_STATS,\r\n\t\t\t...poolData,\r\n\t\t\tloaded: true\r\n\t\t}\r\n\t}\r\n\r\n\tconst gaslessAddress = getUserGaslessAddress(\r\n\t\tADXToken.address,\r\n\t\tStakingPool.address,\r\n\t\towner\r\n\t)\r\n\r\n\tconst [\r\n\t\tbalanceShares,\r\n\t\tlockedShares,\r\n\t\tgaslessAddrBalance,\r\n\t\tallEnterADXTransferLogs,\r\n\t\tleaveLogs,\r\n\t\twithdrawLogs,\r\n\t\trageLeaveLogs,\r\n\t\tsharesTokensTransfersInLogs,\r\n\t\tsharesTokensTransfersOutLogs\r\n\t] = await Promise.all([\r\n\t\tStakingPool.balanceOf(owner),\r\n\t\tStakingPool.lockedShares(owner),\r\n\t\tADXToken.balanceOf(gaslessAddress),\r\n\t\tprovider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\t...ADXToken.filters.Transfer(null, ADDR_STAKING_POOL, null)\r\n\t\t}),\r\n\t\tprovider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\t...StakingPool.filters.LogLeave(owner, null, null, null)\r\n\t\t}),\r\n\t\tprovider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\t...StakingPool.filters.LogWithdraw(owner, null, null, null, null)\r\n\t\t}),\r\n\t\tprovider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\t...StakingPool.filters.LogRageLeave(owner, null, null, null)\r\n\t\t}),\r\n\t\tprovider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\t...StakingPool.filters.Transfer(null, owner, null)\r\n\t\t}),\r\n\t\tprovider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\t...StakingPool.filters.Transfer(owner, null, null)\r\n\t\t})\r\n\t])\r\n\r\n\tconst { shareValue, sharesTotalSupply } = poolData\r\n\r\n\tconst userShare = sharesTotalSupply.isZero()\r\n\t\t? ZERO\r\n\t\t: balanceShares\r\n\t\t\t\t.mul(PRECISION)\r\n\t\t\t\t.div(sharesTotalSupply)\r\n\t\t\t\t.toNumber() / PRECISION\r\n\r\n\tconst enterAdexTokensByTxHash = allEnterADXTransferLogs.reduce(\r\n\t\t(byHash, log) => {\r\n\t\t\tbyHash[log.transactionHash] = log\r\n\t\t\treturn byHash\r\n\t\t},\r\n\t\t{}\r\n\t)\r\n\r\n\tconst sharesTokensTransfersIn = sharesTokensTransfersInLogs.map(log => {\r\n\t\tconst parsedLog = StakingPool.interface.parseLog(log)\r\n\r\n\t\tconst {\r\n\t\t\tfrom, // [0]\r\n\t\t\tamount // [2]\r\n\t\t} = parsedLog.args\r\n\r\n\t\treturn {\r\n\t\t\ttransactionHash: log.transactionHash,\r\n\t\t\tblockNumber: log.blockNumber,\r\n\t\t\tshares: amount,\r\n\t\t\ttype:\r\n\t\t\t\tfrom === ZERO_ADDR\r\n\t\t\t\t\t? STAKING_POOL_EVENT_TYPES.enter\r\n\t\t\t\t\t: STAKING_POOL_EVENT_TYPES.shareTokensTransferIn,\r\n\t\t\tfrom\r\n\t\t}\r\n\t})\r\n\r\n\t// Only out txns as we have logs for RageLEave and Withdraw and they only burns shares\r\n\t// TODO: detect innerBurn transactions to ZERO_ADDR (burned by the user itself)\r\n\tconst sharesTokensTransfersOut = sharesTokensTransfersOutLogs\r\n\t\t.map(log => {\r\n\t\t\tconst parsedLog = StakingPool.interface.parseLog(log)\r\n\r\n\t\t\tconst {\r\n\t\t\t\tto, // [1]\r\n\t\t\t\tamount // [2]\r\n\t\t\t} = parsedLog.args\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttransactionHash: log.transactionHash,\r\n\t\t\t\tblockNumber: log.blockNumber,\r\n\t\t\t\tshares: amount,\r\n\t\t\t\ttype: STAKING_POOL_EVENT_TYPES.shareTokensTransferOut,\r\n\t\t\t\tto\r\n\t\t\t}\r\n\t\t})\r\n\t\t.filter(x => x.to !== ZERO_ADDR)\r\n\r\n\tconst {\r\n\t\tshareTokensEnterMintByHash,\r\n\t\tshareTokensTransfersInByTxHash\r\n\t} = sharesTokensTransfersIn.reduce(\r\n\t\t(txns, event) => {\r\n\t\t\tif (event.type === STAKING_POOL_EVENT_TYPES.enter) {\r\n\t\t\t\ttxns.shareTokensEnterMintByHash[event.transactionHash] = event\r\n\t\t\t}\r\n\r\n\t\t\tif (event.type === STAKING_POOL_EVENT_TYPES.shareTokensTransferIn) {\r\n\t\t\t\ttxns.shareTokensTransfersInByTxHash[event.transactionHash] = event\r\n\t\t\t}\r\n\r\n\t\t\treturn txns\r\n\t\t},\r\n\t\t{ shareTokensEnterMintByHash: {}, shareTokensTransfersInByTxHash: {} }\r\n\t)\r\n\r\n\tconst sharesTokensTransfersInFromExternal = Object.values(\r\n\t\tshareTokensTransfersInByTxHash\r\n\t)\r\n\r\n\tconst userEnters = Object.values(shareTokensEnterMintByHash)\r\n\t\t.map(sharesMintEvent => {\r\n\t\t\tconst adexTokenTransfersLog =\r\n\t\t\t\tenterAdexTokensByTxHash[sharesMintEvent.transactionHash]\r\n\r\n\t\t\tif (adexTokenTransfersLog) {\r\n\t\t\t\tconst parsedAdxLog = ADXToken.interface.parseLog(adexTokenTransfersLog)\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransactionHash: sharesMintEvent.transactionHash,\r\n\t\t\t\t\ttype: STAKING_POOL_EVENT_TYPES.enter,\r\n\t\t\t\t\tshares: sharesMintEvent.shares,\r\n\t\t\t\t\tadxAmount: parsedAdxLog.args.amount, // [2]\r\n\t\t\t\t\tfrom: parsedAdxLog.args.from,\r\n\t\t\t\t\tblockNumber: sharesMintEvent.blockNumber\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t})\r\n\t\t.filter(x => !!x)\r\n\r\n\tconst userWithdraws = withdrawLogs.map(log => {\r\n\t\tconst parsedWithdrawLog = StakingPool.interface.parseLog(log)\r\n\t\tconst {\r\n\t\t\tshares,\r\n\t\t\tunlocksAt,\r\n\t\t\tmaxTokens,\r\n\t\t\treceivedTokens\r\n\t\t} = parsedWithdrawLog.args\r\n\r\n\t\treturn {\r\n\t\t\ttransactionHash: log.transactionHash,\r\n\t\t\ttype: STAKING_POOL_EVENT_TYPES.withdraw,\r\n\t\t\tshares, //[1]\r\n\t\t\tunlocksAt, //[2]\r\n\t\t\tmaxTokens, //[3]\r\n\t\t\treceivedTokens, //[4]\r\n\t\t\tblockNumber: log.blockNumber\r\n\t\t}\r\n\t})\r\n\r\n\tconst userRageLeaves = rageLeaveLogs.map(log => {\r\n\t\tconst parsedRageLeaveLog = StakingPool.interface.parseLog(log)\r\n\r\n\t\tconst { shares, maxTokens, receivedTokens } = parsedRageLeaveLog.args\r\n\r\n\t\treturn {\r\n\t\t\ttransactionHash: log.transactionHash,\r\n\t\t\ttype: STAKING_POOL_EVENT_TYPES.rageLeave,\r\n\t\t\tshares, //[1]\r\n\t\t\tmaxTokens, //[2]\r\n\t\t\treceivedTokens,\r\n\t\t\tadxAmount: receivedTokens, //[3]\r\n\t\t\tblockNumber: log.blockNumber\r\n\t\t}\r\n\t})\r\n\r\n\tconst now = Date.now() / 1000\r\n\r\n\tconst userLeaves = await Promise.all(\r\n\t\tleaveLogs.map(async log => {\r\n\t\t\tconst parsedLog = StakingPool.interface.parseLog(log)\r\n\r\n\t\t\tconst { shares, unlocksAt, maxTokens } = parsedLog.args\r\n\r\n\t\t\tconst withdrawTx = userWithdraws.find(\r\n\t\t\t\tevent =>\r\n\t\t\t\t\tevent.unlocksAt.toString() === unlocksAt.toString() &&\r\n\t\t\t\t\tevent.shares.toString() === shares.toString() &&\r\n\t\t\t\t\tevent.maxTokens.toString() === maxTokens.toString()\r\n\t\t\t)\r\n\r\n\t\t\tconst adxValue = sharesTotalSupply.isZero()\r\n\t\t\t\t? ZERO // maxTokens\r\n\t\t\t\t: await StakingPool.unbondingCommitmentWorth(owner, shares, unlocksAt)\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttransactionHash: log.transactionHash,\r\n\t\t\t\ttype: STAKING_POOL_EVENT_TYPES.leave,\r\n\t\t\t\tshares, // [1]\r\n\t\t\t\tunlocksAt, //[2]\r\n\t\t\t\tmaxTokens, // [3]\r\n\t\t\t\tadxValue,\r\n\t\t\t\tcanWithdraw: unlocksAt < now && !withdrawTx,\r\n\t\t\t\tblockNumber: log.blockNumber,\r\n\t\t\t\twithdrawTx\r\n\t\t\t}\r\n\t\t})\r\n\t)\r\n\r\n\tconst leavesPendingToUnlock = [...userLeaves].filter(\r\n\t\tevent => event.unlocksAt > now\r\n\t)\r\n\r\n\tconst leavesReadyToWithdraw = [...userLeaves].filter(\r\n\t\tevent => event.unlocksAt < now && !event.withdrawTx\r\n\t)\r\n\r\n\tconst leavesPendingToUnlockTotalMax = leavesPendingToUnlock.reduce(\r\n\t\t(a, b) => a.add(b.maxTokens),\r\n\t\tZERO\r\n\t)\r\n\r\n\tconst leavesPendingToUnlockTotalADX = leavesPendingToUnlock.reduce(\r\n\t\t(a, b) => a.add(b.adxValue),\r\n\t\tZERO\r\n\t)\r\n\r\n\tconst leavesReadyToWithdrawTotalMax = leavesReadyToWithdraw.reduce(\r\n\t\t(a, b) => a.add(b.maxTokens),\r\n\t\tZERO\r\n\t)\r\n\r\n\tconst leavesReadyToWithdrawTotalADX = leavesReadyToWithdraw.reduce(\r\n\t\t(a, b) => a.add(b.adxValue),\r\n\t\tZERO\r\n\t)\r\n\r\n\tif (\r\n\t\tsharesTokensTransfersOut.length ||\r\n\t\tsharesTokensTransfersInFromExternal.length\r\n\t) {\r\n\t\tconst fromBlock = Math.min(\r\n\t\t\tsharesTokensTransfersOut[0]\r\n\t\t\t\t? sharesTokensTransfersOut[0].blockNumber\r\n\t\t\t\t: Number.MAX_SAFE_INTEGER,\r\n\t\t\tsharesTokensTransfersInFromExternal[0]\r\n\t\t\t\t? sharesTokensTransfersInFromExternal[0].blockNumber\r\n\t\t\t\t: Number.MAX_SAFE_INTEGER\r\n\t\t)\r\n\r\n\t\tconst [\r\n\t\t\tallLeaveLogs,\r\n\t\t\tallWithdrawLogs,\r\n\t\t\tallRageLeaveLogs,\r\n\t\t\tallEnterSharesTokensTransfersInLogs\r\n\t\t] = await Promise.all([\r\n\t\t\tprovider.getLogs({\r\n\t\t\t\tfromBlock,\r\n\t\t\t\t...StakingPool.filters.LogLeave(null, null, null, null)\r\n\t\t\t}),\r\n\t\t\tprovider.getLogs({\r\n\t\t\t\tfromBlock,\r\n\t\t\t\t...StakingPool.filters.LogWithdraw(null, null, null, null, null)\r\n\t\t\t}),\r\n\t\t\tprovider.getLogs({\r\n\t\t\t\tfromBlock,\r\n\t\t\t\t...StakingPool.filters.LogRageLeave(null, null, null, null)\r\n\t\t\t}),\r\n\t\t\tprovider.getLogs({\r\n\t\t\t\tfromBlock,\r\n\t\t\t\t...StakingPool.filters.Transfer(ZERO_ADDR, null, null)\r\n\t\t\t})\r\n\t\t])\r\n\r\n\t\tconst allEnters = allEnterSharesTokensTransfersInLogs\r\n\t\t\t.map(sharesMintEvent => {\r\n\t\t\t\tconst adexTokenTransfersLog =\r\n\t\t\t\t\tenterAdexTokensByTxHash[sharesMintEvent.transactionHash]\r\n\r\n\t\t\t\tif (adexTokenTransfersLog) {\r\n\t\t\t\t\tconst { amount } = ADXToken.interface.parseLog(\r\n\t\t\t\t\t\tadexTokenTransfersLog\r\n\t\t\t\t\t).args\r\n\t\t\t\t\tconst { amount: shares } = StakingPool.interface.parseLog(\r\n\t\t\t\t\t\tsharesMintEvent\r\n\t\t\t\t\t).args\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tblockNumber: sharesMintEvent.blockNumber,\r\n\t\t\t\t\t\tshareValue: shares.isZero()\r\n\t\t\t\t\t\t\t? ZERO\r\n\t\t\t\t\t\t\t: amount.mul(POOL_SHARES_TOKEN_DECIMALS_MUL).div(shares)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.filter(x => !!x)\r\n\r\n\t\tconst allWithdraws = allWithdrawLogs.map(log => {\r\n\t\t\tconst parsedWithdrawLog = StakingPool.interface.parseLog(log)\r\n\t\t\tconst { shares, maxTokens } = parsedWithdrawLog.args\r\n\r\n\t\t\treturn {\r\n\t\t\t\tblockNumber: log.blockNumber,\r\n\t\t\t\tshareValue: maxTokens.mul(POOL_SHARES_TOKEN_DECIMALS_MUL).div(shares)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tconst allRageLeaves = allRageLeaveLogs.map(log => {\r\n\t\t\tconst parsedRageLeaveLog = StakingPool.interface.parseLog(log)\r\n\r\n\t\t\tconst { shares, maxTokens } = parsedRageLeaveLog.args\r\n\r\n\t\t\treturn {\r\n\t\t\t\tshareValue: maxTokens.mul(POOL_SHARES_TOKEN_DECIMALS_MUL).div(shares),\r\n\t\t\t\tblockNumber: log.blockNumber\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tconst allLeaves = allLeaveLogs.map(log => {\r\n\t\t\tconst parsedLog = StakingPool.interface.parseLog(log)\r\n\t\t\tconst { shares, maxTokens } = parsedLog.args\r\n\t\t\treturn {\r\n\t\t\t\tblockNumber: log.blockNumber,\r\n\t\t\t\tshareValue: maxTokens.mul(POOL_SHARES_TOKEN_DECIMALS_MUL).div(shares)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tconst allLogs = allEnters\r\n\t\t\t.concat(allWithdraws)\r\n\t\t\t.concat(allLeaves)\r\n\t\t\t.concat(allRageLeaves)\r\n\t\t\t.sort((a, b) => a.blockNumber - b.blockNumber)\r\n\r\n\t\tconst withAdxAmount = events =>\r\n\t\t\tevents.forEach((transferLog, i) => {\r\n\t\t\t\tconst nextLog =\r\n\t\t\t\t\tallLogs.find(log => log.blockNumber >= transferLog.blockNumber) || {}\r\n\r\n\t\t\t\tconst bestShareValue = nextLog.shareValue || shareValue\r\n\r\n\t\t\t\t// approximate share value\r\n\t\t\t\tevents[i].shareValue = bestShareValue\r\n\t\t\t\tevents[i].adxAmount = transferLog.shares\r\n\t\t\t\t\t.mul(bestShareValue)\r\n\t\t\t\t\t.div(POOL_SHARES_TOKEN_DECIMALS_MUL)\r\n\t\t\t})\r\n\r\n\t\twithAdxAmount(sharesTokensTransfersOut)\r\n\t\twithAdxAmount(sharesTokensTransfersInFromExternal)\r\n\t}\r\n\r\n\tconst totalSharesOutTransfersAdxValue = sharesTokensTransfersOut.reduce(\r\n\t\t(a, b) => a.add(b.adxAmount),\r\n\t\tZERO\r\n\t)\r\n\r\n\tconst totalSharesInTransfersAdxValue = sharesTokensTransfersInFromExternal.reduce(\r\n\t\t(a, b) => a.add(b.adxAmount),\r\n\t\tZERO\r\n\t)\r\n\r\n\tconst depositsADXTotal = userEnters.reduce(\r\n\t\t(a, b) => a.add(b.adxAmount),\r\n\t\ttotalSharesInTransfersAdxValue\r\n\t)\r\n\r\n\tconst withdrawsADXTotal = userWithdraws.reduce(\r\n\t\t(a, b) => a.add(b.receivedTokens),\r\n\t\ttotalSharesOutTransfersAdxValue\r\n\t)\r\n\r\n\tconst lockedSharesAdxValue = [...userLeaves]\r\n\t\t.filter(x => !x.withdrawTx)\r\n\t\t.reduce((a, b) => a.add(b.adxValue), ZERO)\r\n\r\n\tconst totalLockedSharesCheck = [...userLeaves]\r\n\t\t.filter(x => !x.withdrawTx)\r\n\t\t.reduce((a, b) => a.add(b.shares), ZERO)\r\n\r\n\tif (!totalLockedSharesCheck.eq(lockedShares)) {\r\n\t\tconsole.error(\r\n\t\t\t\"locked shares different than check sum, user balance can be incorrect\",\r\n\t\t\t\"lockedShares:\",\r\n\t\t\tlockedShares.toString(),\r\n\t\t\t\"totalLockedSharesCheck:\",\r\n\t\t\ttotalLockedSharesCheck.toString()\r\n\t\t)\r\n\t}\r\n\r\n\tconst balanceSharesAvailable = balanceShares.sub(lockedShares)\r\n\r\n\tconst currentBalanceADXAvailable = balanceSharesAvailable\r\n\t\t.mul(shareValue)\r\n\t\t.div(POOL_SHARES_TOKEN_DECIMALS_MUL)\r\n\r\n\t// NOTE: used to calc actual blance in ADX + rewards\r\n\tconst currentBalanceADX = currentBalanceADXAvailable.add(lockedSharesAdxValue)\r\n\r\n\t// NOTE: Used for rage leave because shareValue is can be different than in unbondCommitments\r\n\tconst lockedSharesADXAtCurrentShareValue = lockedShares\r\n\t\t.mul(shareValue)\r\n\t\t.div(POOL_SHARES_TOKEN_DECIMALS_MUL)\r\n\r\n\tconst currentBalanceADXAtCurrentShareValue = currentBalanceADXAvailable.add(\r\n\t\tlockedSharesADXAtCurrentShareValue\r\n\t)\r\n\r\n\tconst totalRewards = currentBalanceADX // includes leavesPendingToUnlockTotalADX and  leavesReadyToWithdrawTotalADX\r\n\t\t.add(withdrawsADXTotal)\r\n\t\t.sub(depositsADXTotal)\r\n\r\n\tconst hasActiveUnbondCommitments = !![...userLeaves].filter(\r\n\t\tx => !x.withdrawTx\r\n\t).length\r\n\r\n\tconst stakings = userEnters\r\n\t\t.concat(userLeaves)\r\n\t\t.concat(userWithdraws)\r\n\t\t.concat(userRageLeaves)\r\n\t\t.concat(sharesTokensTransfersInFromExternal)\r\n\t\t.concat(sharesTokensTransfersOut)\r\n\t\t.sort((a, b) => a.blockNumber - b.blockNumber)\r\n\r\n\tconst withTimestamp = await Promise.all(\r\n\t\tstakings.map(async stakingEvent => {\r\n\t\t\tconst { timestamp } = await provider.getBlock(stakingEvent.blockNumber)\r\n\t\t\treturn {\r\n\t\t\t\t...stakingEvent,\r\n\t\t\t\ttimestamp: timestamp * 1000\r\n\t\t\t}\r\n\t\t})\r\n\t)\r\n\r\n\tconst stats = {\r\n\t\t...poolData,\r\n\t\tbalanceShares,\r\n\t\tbalanceSharesAvailable,\r\n\t\tcurrentBalanceADX,\r\n\t\tcurrentBalanceADXAvailable,\r\n\t\tcurrentBalanceADXAtCurrentShareValue,\r\n\t\ttotalRewards,\r\n\t\ttotalSharesOutTransfersAdxValue,\r\n\t\ttotalSharesInTransfersAdxValue,\r\n\t\tstakings: withTimestamp,\r\n\t\tuserLeaves,\r\n\t\tdepositsADXTotal,\r\n\t\twithdrawsADXTotal,\r\n\t\tleavesPendingToUnlockTotalMax,\r\n\t\tleavesReadyToWithdrawTotalMax,\r\n\t\tleavesPendingToUnlockTotalADX,\r\n\t\tleavesReadyToWithdrawTotalADX,\r\n\t\thasActiveUnbondCommitments,\r\n\t\tloaded: true,\r\n\t\tuserDataLoaded: true,\r\n\t\tuserShare,\r\n\t\tgaslessAddress,\r\n\t\tgaslessAddrBalance\r\n\t}\r\n\r\n\treturn stats\r\n}\r\n\r\nexport async function getGaslessInfo(addr) {\r\n\ttry {\r\n\t\tconst res = await fetch(\r\n\t\t\t`${ADEX_RELAYER_HOST}/staking/${addr}/can-stake-gasless`\r\n\t\t)\r\n\t\tconst resData = await res.json()\r\n\t\tconst canExecuteGasless = res.status === 200 && resData.canExecute === true\r\n\t\tconst canExecuteGaslessError = canExecuteGasless\r\n\t\t\t? null\r\n\t\t\t: {\r\n\t\t\t\t\tmessage: `relayerResErrors.${resData.message}`,\r\n\t\t\t\t\tdata: resData.data\r\n\t\t\t  }\r\n\r\n\t\treturn {\r\n\t\t\tcanExecuteGasless,\r\n\t\t\tcanExecuteGaslessError\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.error(err)\r\n\t\treturn {\r\n\t\t\tcanExecuteGasless: false,\r\n\t\t\tcanExecuteGaslessError: {\r\n\t\t\t\tmessage: \"errors.gaslessStakingTempOff\"\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import { Contract } from \"ethers\"\r\nimport ERC20ABI from \"../abi/ERC20\"\r\nimport ADXLoyaltyPoolTokenABI from \"../abi/ADXLoyaltyPoolToken\"\r\nimport {\r\n\tADDR_ADX,\r\n\tADDR_ADX_LOYALTY_TOKEN,\r\n\tZERO,\r\n\tMAX_UINT\r\n} from \"../helpers/constants\"\r\nimport { STAKING_POOL_EVENT_TYPES } from \"../actions/v5actions\"\r\n\r\nimport { getSigner, getDefaultProvider } from \"../ethereum\"\r\n\r\nconst defaultProvider = getDefaultProvider\r\n\r\nconst provider = defaultProvider\r\nconst Token = new Contract(ADDR_ADX, ERC20ABI, provider)\r\nconst LoyaltyToken = new Contract(\r\n\tADDR_ADX_LOYALTY_TOKEN,\r\n\tADXLoyaltyPoolTokenABI,\r\n\tprovider\r\n)\r\nconst ZERO_ADDR = \"0x0000000000000000000000000000000000000000\"\r\nconst ADX_LP_TOKEN_DECIMALS_MUL = \"1000000000000000000\"\r\nconst PRECISION = 1_000_000_000_000\r\n\r\nexport const LOYALTY_POOP_EMPTY_STATS = {\r\n\tbalanceLpToken: ZERO,\r\n\tbalanceLpADX: ZERO,\r\n\trewardADX: ZERO,\r\n\tpoolTotalStaked: ZERO,\r\n\tcurrentAPY: 0,\r\n\tpoolDepositsLimit: ZERO,\r\n\tloaded: false,\r\n\tuserDataLoaded: false,\r\n\tunbondDays: 0,\r\n\tstakingEvents: [],\r\n\ttotalRewards: ZERO,\r\n\ttotalDeposits: ZERO,\r\n\ttotalWithdraws: ZERO,\r\n\ttotalSharesOutTransfersAdxValue: ZERO,\r\n\ttotalSharesInTransfersAdxValue: ZERO,\r\n\tuserShare: 0\r\n}\r\n\r\nexport async function loadLoyaltyPoolData() {\r\n\tconst [\r\n\t\tpoolTotalStaked,\r\n\t\tcurrentAPY,\r\n\t\tpoolDepositsLimit,\r\n\t\tsharesTotalSupply\r\n\t] = await Promise.all([\r\n\t\tToken.balanceOf(ADDR_ADX_LOYALTY_TOKEN),\r\n\t\tLoyaltyToken.incentivePerTokenPerAnnum(),\r\n\t\tLoyaltyToken.maxTotalADX(),\r\n\t\tLoyaltyToken.totalSupply()\r\n\t])\r\n\r\n\treturn {\r\n\t\t...LOYALTY_POOP_EMPTY_STATS,\r\n\t\tpoolTotalStaked,\r\n\t\tpoolDepositsLimit,\r\n\t\tcurrentAPY:\r\n\t\t\tcurrentAPY\r\n\t\t\t\t.mul(1000)\r\n\t\t\t\t.div(ADX_LP_TOKEN_DECIMALS_MUL)\r\n\t\t\t\t.toNumber() / 1000,\r\n\t\tsharesTotalSupply\r\n\t}\r\n}\r\n\r\nexport async function loadUserLoyaltyPoolsStats(walletAddr) {\r\n\tconst poolData = await loadLoyaltyPoolData()\r\n\tif (!walletAddr) {\r\n\t\treturn {\r\n\t\t\t...poolData,\r\n\t\t\tloaded: true\r\n\t\t}\r\n\t}\r\n\r\n\tconst [\r\n\t\tbalanceLpToken,\r\n\t\tcurrentShareValue,\r\n\t\tlpTokenTransfersInLogs,\r\n\t\tlpTokenTransfersOutLogs,\r\n\t\tadexTokenTransfersInLogs,\r\n\t\tadexTokenTransfersOutLogs\r\n\t] = await Promise.all([\r\n\t\tLoyaltyToken.balanceOf(walletAddr),\r\n\t\tLoyaltyToken.shareValue(),\r\n\t\tprovider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\t...LoyaltyToken.filters.Transfer(null, walletAddr, null)\r\n\t\t}),\r\n\t\tprovider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\t...LoyaltyToken.filters.Transfer(walletAddr, null, null)\r\n\t\t}),\r\n\t\tprovider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\t...Token.filters.Transfer(walletAddr, ADDR_ADX_LOYALTY_TOKEN, null)\r\n\t\t}),\r\n\t\tprovider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\t...Token.filters.Transfer(ADDR_ADX_LOYALTY_TOKEN, walletAddr, null)\r\n\t\t})\r\n\t])\r\n\r\n\tconst balanceLpADX = balanceLpToken\r\n\t\t.mul(currentShareValue)\r\n\t\t.div(ADX_LP_TOKEN_DECIMALS_MUL)\r\n\r\n\tconst currentBalance = {\r\n\t\t...poolData,\r\n\t\tbalanceLpToken,\r\n\t\tbalanceLpADX,\r\n\t\tloaded: true,\r\n\t\tuserDataLoaded: true\r\n\t}\r\n\r\n\tconst adxTransfersInByTxHash = adexTokenTransfersInLogs.reduce(\r\n\t\t(txns, log) => {\r\n\t\t\ttxns[log.transactionHash] = log\r\n\t\t\treturn txns\r\n\t\t},\r\n\t\t{}\r\n\t)\r\n\r\n\tconst sharesTokensTransfersIn = lpTokenTransfersInLogs.map(log => {\r\n\t\tconst parsedLog = LoyaltyToken.interface.parseLog(log)\r\n\r\n\t\tconst {\r\n\t\t\tfrom, // [0]\r\n\t\t\tamount // [2]\r\n\t\t} = parsedLog.args\r\n\r\n\t\treturn {\r\n\t\t\ttransactionHash: log.transactionHash,\r\n\t\t\tblockNumber: log.blockNumber,\r\n\t\t\tshares: amount,\r\n\t\t\ttype:\r\n\t\t\t\tfrom === ZERO_ADDR\r\n\t\t\t\t\t? STAKING_POOL_EVENT_TYPES.enter\r\n\t\t\t\t\t: STAKING_POOL_EVENT_TYPES.shareTokensTransferIn,\r\n\t\t\tfrom,\r\n\t\t\tpool: \"adex-loyalty-pool\"\r\n\t\t}\r\n\t})\r\n\r\n\t// TODO: detect innerBurn transactions to ZERO_ADDR (burned by the user itself)\r\n\tconst sharesTokensTransfersOut = lpTokenTransfersOutLogs.map(log => {\r\n\t\tconst parsedLog = LoyaltyToken.interface.parseLog(log)\r\n\r\n\t\tconst {\r\n\t\t\tto, // [1]\r\n\t\t\tamount // [2]\r\n\t\t} = parsedLog.args\r\n\r\n\t\treturn {\r\n\t\t\ttransactionHash: log.transactionHash,\r\n\t\t\tblockNumber: log.blockNumber,\r\n\t\t\tshares: amount,\r\n\t\t\ttype:\r\n\t\t\t\tto === ZERO_ADDR\r\n\t\t\t\t\t? STAKING_POOL_EVENT_TYPES.withdraw\r\n\t\t\t\t\t: STAKING_POOL_EVENT_TYPES.shareTokensTransferOut,\r\n\t\t\tto,\r\n\t\t\tpool: \"adex-loyalty-pool\"\r\n\t\t}\r\n\t})\r\n\r\n\t// const hasExternalLoyaltyTokenTransfers = sharesTokensTransfersIn.some(\r\n\t// \tlog => log.type === STAKING_POOL_EVENT_TYPES.shareTokensTransferIn\r\n\t// ) || sharesTokensTransfersOut.some(\r\n\t// \tlog => log.type === STAKING_POOL_EVENT_TYPES.shareTokensTransferOut\r\n\t// )\r\n\r\n\tconst userDeposits = sharesTokensTransfersIn.reduce(\r\n\t\t(deposits, log) => {\r\n\t\t\tconst axdTransferLog = adxTransfersInByTxHash[log.transactionHash]\r\n\r\n\t\t\tif (axdTransferLog) {\r\n\t\t\t\tconst adxTransferLog = Token.interface.parseLog(axdTransferLog)\r\n\t\t\t\tconst adxLPT = log.shares\r\n\t\t\t\tconst adx = adxTransferLog.args[2]\r\n\r\n\t\t\t\tdeposits.adx = deposits.adx.add(adx)\r\n\t\t\t\tdeposits.adxLPT = deposits.adxLPT.add(adxLPT)\r\n\t\t\t\tdeposits.logs.push({\r\n\t\t\t\t\ttransactionHash: log.transactionHash,\r\n\t\t\t\t\ttype: STAKING_POOL_EVENT_TYPES.enter,\r\n\t\t\t\t\tshares: adxLPT,\r\n\t\t\t\t\tadxAmount: adx,\r\n\t\t\t\t\tblockNumber: log.blockNumber,\r\n\t\t\t\t\tpool: \"adex-loyalty-pool\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\treturn deposits\r\n\t\t},\r\n\t\t{ adx: ZERO, adxLPT: ZERO, logs: [] }\r\n\t)\r\n\r\n\tconst adxTransfersOutByTxHash = adexTokenTransfersOutLogs.reduce(\r\n\t\t(txns, log) => {\r\n\t\t\ttxns[log.transactionHash] = log\r\n\t\t\treturn txns\r\n\t\t},\r\n\t\t{}\r\n\t)\r\n\r\n\tconst userWithdraws = sharesTokensTransfersOut.reduce(\r\n\t\t(withdraws, log) => {\r\n\t\t\tconst axdTransferLog = adxTransfersOutByTxHash[log.transactionHash]\r\n\r\n\t\t\tif (axdTransferLog && log.type === STAKING_POOL_EVENT_TYPES.withdraw) {\r\n\t\t\t\tconst adxTransferLog = Token.interface.parseLog(axdTransferLog)\r\n\t\t\t\tconst adxLPT = log.shares\r\n\t\t\t\tconst adx = adxTransferLog.args[2]\r\n\r\n\t\t\t\twithdraws.adx = withdraws.adx.add(adx)\r\n\t\t\t\twithdraws.adxLPT = withdraws.adxLPT.add(adxLPT)\r\n\r\n\t\t\t\twithdraws.logs.push({\r\n\t\t\t\t\ttransactionHash: log.transactionHash,\r\n\t\t\t\t\ttype: STAKING_POOL_EVENT_TYPES.withdraw,\r\n\t\t\t\t\tshares: adxLPT,\r\n\t\t\t\t\tadxAmount: adx,\r\n\t\t\t\t\tblockNumber: log.blockNumber,\r\n\t\t\t\t\tpool: \"adex-loyalty-pool\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\treturn withdraws\r\n\t\t},\r\n\t\t{ adx: ZERO, adxLPT: ZERO, logs: [] }\r\n\t)\r\n\r\n\tconst sharesTokensTransfersInFromExternal = [\r\n\t\t...sharesTokensTransfersIn\r\n\t].filter(x => x.type === STAKING_POOL_EVENT_TYPES.shareTokensTransferIn)\r\n\r\n\tconst shareTokensTransferOutToExternal = [...sharesTokensTransfersOut].filter(\r\n\t\tx => x.type === STAKING_POOL_EVENT_TYPES.shareTokensTransferOut\r\n\t)\r\n\r\n\tif (\r\n\t\tshareTokensTransferOutToExternal.length ||\r\n\t\tsharesTokensTransfersInFromExternal.length\r\n\t) {\r\n\t\tconst fromBlock = Math.min(\r\n\t\t\tsharesTokensTransfersOut[0]\r\n\t\t\t\t? sharesTokensTransfersOut[0].blockNumber\r\n\t\t\t\t: Number.MAX_SAFE_INTEGER,\r\n\t\t\tsharesTokensTransfersInFromExternal[0]\r\n\t\t\t\t? sharesTokensTransfersInFromExternal[0].blockNumber\r\n\t\t\t\t: Number.MAX_SAFE_INTEGER\r\n\t\t)\r\n\r\n\t\tconst [\r\n\t\t\tallAdxInLogs,\r\n\t\t\tallSharesOutLogs,\r\n\t\t\tallAdxOutLogs,\r\n\t\t\tallSharesInLogs\r\n\t\t] = await Promise.all([\r\n\t\t\tprovider.getLogs({\r\n\t\t\t\tfromBlock,\r\n\t\t\t\t...Token.filters.Transfer(null, LoyaltyToken.address, null)\r\n\t\t\t}),\r\n\t\t\tprovider.getLogs({\r\n\t\t\t\tfromBlock,\r\n\t\t\t\t...LoyaltyToken.filters.Transfer(ZERO_ADDR, null, null)\r\n\t\t\t}),\r\n\t\t\tprovider.getLogs({\r\n\t\t\t\tfromBlock,\r\n\t\t\t\t...Token.filters.Transfer(LoyaltyToken.address, null, null)\r\n\t\t\t}),\r\n\t\t\tprovider.getLogs({\r\n\t\t\t\tfromBlock,\r\n\t\t\t\t...LoyaltyToken.filters.Transfer(null, ZERO_ADDR, null)\r\n\t\t\t})\r\n\t\t])\r\n\r\n\t\tconst enterAdxTokensByTxHash = allAdxInLogs.reduce((byHash, log) => {\r\n\t\t\tbyHash[log.transactionHash] = log\r\n\t\t\treturn byHash\r\n\t\t}, {})\r\n\r\n\t\tconst outAdxTokensByTxHash = allAdxOutLogs.reduce((byHash, log) => {\r\n\t\t\tbyHash[log.transactionHash] = log\r\n\t\t\treturn byHash\r\n\t\t}, {})\r\n\r\n\t\tconst allEnters = allSharesOutLogs\r\n\t\t\t.map(sharesMintEvent => {\r\n\t\t\t\tconst adexTokenTransfersLog =\r\n\t\t\t\t\tenterAdxTokensByTxHash[sharesMintEvent.transactionHash]\r\n\r\n\t\t\t\tif (adexTokenTransfersLog) {\r\n\t\t\t\t\tconst { value: adxAmount } = Token.interface.parseLog(\r\n\t\t\t\t\t\tadexTokenTransfersLog\r\n\t\t\t\t\t).args\r\n\r\n\t\t\t\t\tconst { amount: shares } = LoyaltyToken.interface.parseLog(\r\n\t\t\t\t\t\tsharesMintEvent\r\n\t\t\t\t\t).args\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tblockNumber: sharesMintEvent.blockNumber,\r\n\t\t\t\t\t\tshareValue: shares.isZero()\r\n\t\t\t\t\t\t\t? ZERO\r\n\t\t\t\t\t\t\t: adxAmount.mul(ADX_LP_TOKEN_DECIMALS_MUL).div(shares)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.filter(x => !!x)\r\n\r\n\t\tconst allWithdraws = allSharesInLogs\r\n\t\t\t.map(sharesMintEvent => {\r\n\t\t\t\tconst adexTokenTransfersLog =\r\n\t\t\t\t\toutAdxTokensByTxHash[sharesMintEvent.transactionHash]\r\n\r\n\t\t\t\tif (adexTokenTransfersLog) {\r\n\t\t\t\t\tconst { value: adxAmount } = Token.interface.parseLog(\r\n\t\t\t\t\t\tadexTokenTransfersLog\r\n\t\t\t\t\t).args\r\n\t\t\t\t\tconst { amount: shares } = LoyaltyToken.interface.parseLog(\r\n\t\t\t\t\t\tsharesMintEvent\r\n\t\t\t\t\t).args\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tblockNumber: sharesMintEvent.blockNumber,\r\n\t\t\t\t\t\tshareValue: shares.isZero()\r\n\t\t\t\t\t\t\t? ZERO\r\n\t\t\t\t\t\t\t: adxAmount.mul(ADX_LP_TOKEN_DECIMALS_MUL).div(shares)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.filter(x => !!x)\r\n\r\n\t\tconst allLogs = allEnters\r\n\t\t\t.concat(allWithdraws)\r\n\t\t\t.sort((a, b) => a.blockNumber - b.blockNumber)\r\n\r\n\t\tconst withAdxAmount = events =>\r\n\t\t\tevents.forEach((transferLog, i) => {\r\n\t\t\t\tconst nextLog =\r\n\t\t\t\t\tallLogs.find(log => log.blockNumber >= transferLog.blockNumber) || {}\r\n\r\n\t\t\t\tconst bestShareValue = nextLog.shareValue || currentShareValue\r\n\r\n\t\t\t\t// approximate share value\r\n\t\t\t\tevents[i].shareValue = bestShareValue\r\n\t\t\t\tevents[i].adxAmount = transferLog.shares\r\n\t\t\t\t\t.mul(bestShareValue)\r\n\t\t\t\t\t.div(ADX_LP_TOKEN_DECIMALS_MUL)\r\n\t\t\t})\r\n\r\n\t\twithAdxAmount(shareTokensTransferOutToExternal)\r\n\t\twithAdxAmount(sharesTokensTransfersInFromExternal)\r\n\t}\r\n\r\n\t// TODO: LP token external transfers - TEST\r\n\tconst allStakingEvents = userDeposits.logs\r\n\t\t.concat(userWithdraws.logs)\r\n\t\t.concat(shareTokensTransferOutToExternal)\r\n\t\t.concat(sharesTokensTransfersInFromExternal)\r\n\t\t.sort((a, b) => a.blockNumber - b.blockNumber)\r\n\r\n\tconst withTimestamp = await Promise.all(\r\n\t\tallStakingEvents.map(async stakingEvent => {\r\n\t\t\tconst { timestamp } = await provider.getBlock(stakingEvent.blockNumber)\r\n\t\t\treturn {\r\n\t\t\t\t...stakingEvent,\r\n\t\t\t\ttimestamp: timestamp * 1000\r\n\t\t\t}\r\n\t\t})\r\n\t)\r\n\r\n\tconst totalSharesOutTransfersAdxValue = shareTokensTransferOutToExternal.reduce(\r\n\t\t(a, b) => a.add(b.adxAmount),\r\n\t\tZERO\r\n\t)\r\n\r\n\tconst totalSharesInTransfersAdxValue = sharesTokensTransfersInFromExternal.reduce(\r\n\t\t(a, b) => a.add(b.adxAmount),\r\n\t\tZERO\r\n\t)\r\n\r\n\tconst totalDeposits = userDeposits.adx.add(totalSharesInTransfersAdxValue)\r\n\tconst totalWithdraws = userWithdraws.adx.add(totalSharesOutTransfersAdxValue)\r\n\r\n\tconst totalRewards = balanceLpADX.add(userWithdraws.adx).sub(userDeposits.adx)\r\n\r\n\tconst userShare = poolData.sharesTotalSupply.isZero()\r\n\t\t? ZERO\r\n\t\t: balanceLpADX\r\n\t\t\t\t.mul(PRECISION)\r\n\t\t\t\t.div(poolData.sharesTotalSupply)\r\n\t\t\t\t.toNumber() / PRECISION\r\n\r\n\tconst stats = {\r\n\t\t...currentBalance,\r\n\t\tstakingEvents: withTimestamp,\r\n\t\ttotalRewards,\r\n\t\ttotalDeposits,\r\n\t\ttotalWithdraws,\r\n\t\ttotalSharesOutTransfersAdxValue,\r\n\t\ttotalSharesInTransfersAdxValue,\r\n\t\tuserShare\r\n\t}\r\n\r\n\treturn stats\r\n}\r\n\r\nexport async function onLoyaltyPoolDeposit(\r\n\tstats,\r\n\tchosenWalletType,\r\n\tadxDepositAmount\r\n) {\r\n\tif (!stats) throw new Error(\"errors.statsNotProvided\")\r\n\tif (!adxDepositAmount) throw new Error(\"errors.noDepositAmount\")\r\n\tif (adxDepositAmount.isZero()) throw new Error(\"errors.zeroDeposit\")\r\n\tif (adxDepositAmount.gt(stats.userBalance))\r\n\t\tthrow new Error(\"errors.amountTooLarge\")\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tconst walletAddr = await signer.getAddress()\r\n\r\n\tconst [allowanceADXLOYALTY] = await Promise.all([\r\n\t\tToken.allowance(walletAddr, LoyaltyToken.address)\r\n\t])\r\n\r\n\tconst setAllowance = allowanceADXLOYALTY.lt(adxDepositAmount)\r\n\r\n\tif (setAllowance) {\r\n\t\tconst tokenWithSigner = new Contract(ADDR_ADX, ERC20ABI, signer)\r\n\t\tawait tokenWithSigner.approve(LoyaltyToken.address, MAX_UINT)\r\n\t}\r\n\r\n\tconst loyaltyTokenWithSigner = new Contract(\r\n\t\tADDR_ADX_LOYALTY_TOKEN,\r\n\t\tADXLoyaltyPoolTokenABI,\r\n\t\tsigner\r\n\t)\r\n\r\n\tawait loyaltyTokenWithSigner.enter(\r\n\t\tadxDepositAmount,\r\n\t\tsetAllowance ? { gasLimit: 150000 } : {}\r\n\t)\r\n}\r\n\r\nexport async function onLoyaltyPoolWithdraw(\r\n\tstats,\r\n\tchosenWalletType,\r\n\twithdrawAmountADX\r\n) {\r\n\tif (!stats) throw new Error(\"errors.statsNotProvided\")\r\n\r\n\tconst { balanceLpADX, balanceLpToken } = stats.loyaltyPoolStats\r\n\r\n\tif (!withdrawAmountADX) throw new Error(\"errors.noWithdrawAmount\")\r\n\tif (balanceLpADX.isZero()) throw new Error(\"errors.zeroDeposit\")\r\n\tif (withdrawAmountADX.gt(balanceLpADX))\r\n\t\tthrow new Error(\"errors.amountTooLarge\")\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\r\n\tconst loyaltyTokenWithSigner = new Contract(\r\n\t\tADDR_ADX_LOYALTY_TOKEN,\r\n\t\tADXLoyaltyPoolTokenABI,\r\n\t\tsigner\r\n\t)\r\n\r\n\tconst lpTokensToWithdraw = withdrawAmountADX\r\n\t\t.mul(balanceLpToken)\r\n\t\t.div(balanceLpADX)\r\n\tawait loyaltyTokenWithSigner.leave(lpTokensToWithdraw)\r\n}\r\n","import { Contract } from \"ethers\"\r\nimport { BigNumber, utils } from \"ethers\"\r\nimport BalanceTree from \"adex-protocol-eth/js/BalanceTree\"\r\nimport StakingABI from \"adex-protocol-eth/abi/Staking\"\r\nimport CoreABI from \"adex-protocol-eth/abi/AdExCore\"\r\nimport ERC20ABI from \"../abi/ERC20\"\r\nimport StakingMigratorABI from \"../abi/StakingMigrator.json\"\r\nimport {\r\n\tADDR_STAKING,\r\n\tADDR_ADX,\r\n\tMAX_UINT,\r\n\tZERO,\r\n\tPOOLS,\r\n\tADDR_CORE,\r\n\tADDR_STAKING_MIGRATOR,\r\n\tMIGRATION_UNBOND_BEFORE\r\n} from \"../helpers/constants\"\r\nimport { getBondId } from \"../helpers/bonds\"\r\nimport { getUserIdentity } from \"../helpers/identity\"\r\nimport { getSigner, getDefaultProvider } from \"../ethereum\"\r\nimport {\r\n\tloadUserLoyaltyPoolsStats,\r\n\tLOYALTY_POOP_EMPTY_STATS\r\n} from \"./loyaltyPoolActions\"\r\nimport { executeOnIdentity, toChannelTuple } from \"./common\"\r\nimport {\r\n\tSTAKING_POOL_EMPTY_STATS,\r\n\tloadUserTomStakingV5PoolStats\r\n} from \"./v5actions\"\r\n\r\nconst defaultProvider = getDefaultProvider\r\n\r\n// const ADDR_ADX_OLD = \"0x4470bb87d77b963a013db939be332f927f2b992e\"\r\n\r\nconst Staking = new Contract(ADDR_STAKING, StakingABI, defaultProvider)\r\nconst Token = new Contract(ADDR_ADX, ERC20ABI, defaultProvider)\r\nconst Core = new Contract(ADDR_CORE, CoreABI, defaultProvider)\r\nconst StakingMigrator = new Contract(\r\n\tADDR_STAKING_MIGRATOR,\r\n\tStakingMigratorABI,\r\n\tdefaultProvider\r\n)\r\n\r\n// const MAX_SLASH = BigNumber.from(\"1000000000000000000\")\r\nconst SECONDS_IN_YEAR = 365 * 24 * 60 * 60\r\n\r\n// 0.2 DAI or ADX\r\nconst OUTSTANDING_REWARD_THRESHOLD = BigNumber.from(\"200000000000000000\")\r\n\r\nexport const POOL_EMPTY_STATS = {\r\n\ttotalStake: ZERO,\r\n\ttotalCurrentTotalActiveStake: ZERO,\r\n\tcurrentAdxIncentiveAPY: 0,\r\n\tlastDaiFeesAPY: 0,\r\n\ttotalAPY: 0,\r\n\tuserRewardsADX: ZERO,\r\n\tuserRewardsDAI: ZERO,\r\n\tloaded: false,\r\n\tuserDataLoaded: false,\r\n\trewardChannels: [],\r\n\tuserBonds: []\r\n}\r\n\r\nexport const EMPTY_STATS = {\r\n\tconnectedWalletAddress: null,\r\n\tloaded: false,\r\n\tuserBonds: [],\r\n\tuserBalance: ZERO,\r\n\ttotalStake: ZERO,\r\n\ttotalStakeTom: ZERO,\r\n\trewardChannels: [],\r\n\tidentityADXIncentiveChannels: [],\r\n\tidentityAdxRewardsAmount: ZERO,\r\n\ttotalRewardADX: ZERO,\r\n\ttotalRewardDAI: ZERO,\r\n\ttomRewardADX: ZERO,\r\n\ttotalLockedOnDeposits: ZERO,\r\n\ttotalPendingToUnlock: ZERO,\r\n\ttotalUnlockedDeposits: ZERO,\r\n\ttotalStaked: ZERO,\r\n\tapyTomADX: 0,\r\n\tuserTotalStake: ZERO,\r\n\ttotalBalanceADX: ZERO,\r\n\tuserWalletBalance: ZERO,\r\n\tuserIdentityBalance: ZERO,\r\n\tgaslessAddrBalance: ZERO,\r\n\t// canExecuteGasless: false,\r\n\t// canExecuteGaslessError: null,\r\n\tloyaltyPoolStats: LOYALTY_POOP_EMPTY_STATS,\r\n\ttomPoolStats: POOL_EMPTY_STATS,\r\n\ttomStakingV5PoolStats: STAKING_POOL_EMPTY_STATS,\r\n\tprices: {},\r\n\tlegacyTokenBalance: ZERO,\r\n\tidentityDeployed: false,\r\n\tuserWalletToIdentityADXAllowance: ZERO,\r\n\ttomBondsMigrationData: {\r\n\t\thasToMigrate: false,\r\n\t\tbondToMigrate: null,\r\n\t\tisWithdrawMigration: false\r\n\t},\r\n\thasPendingTransactions: false\r\n}\r\n\r\nconst sumRewards = all =>\r\n\tall.map(x => x.outstandingReward).reduce((a, b) => a.add(b), ZERO)\r\n\r\nexport const isTomChannelId = channel =>\r\n\tchannel.channelArgs.validators.some(\r\n\t\tval => utils.id(`validator:${val}`) === POOLS[0].id\r\n\t)\r\n\r\nexport function getIncentiveChannelCurrentAPY({ channel, totalStake }) {\r\n\tconst { periodEnd, stats = {} } = channel\r\n\r\n\tconst {\r\n\t\tcurrentRewardPerSecond = \"478927203065134100\",\r\n\t\tcurrentTotalActiveStake\r\n\t} = stats\r\n\r\n\tconst poolTotalStake = BigNumber.from(currentTotalActiveStake || totalStake)\r\n\tconst distributionEnds = new Date(periodEnd).getTime()\r\n\tconst now = Date.now()\r\n\r\n\tif (now >= distributionEnds) {\r\n\t\treturn 0\r\n\t}\r\n\r\n\tconst secondsLeft = Math.floor((distributionEnds - now) / 1000)\r\n\r\n\tconst toDistribute = BigNumber.from(currentRewardPerSecond).mul(secondsLeft)\r\n\r\n\tconst precision = 10_000_000\r\n\r\n\tconst apy = toDistribute\r\n\t\t.mul(SECONDS_IN_YEAR)\r\n\t\t.mul(precision)\r\n\t\t.div(secondsLeft)\r\n\t\t.div(poolTotalStake)\r\n\r\n\treturn apy.toNumber() / precision\r\n}\r\n\r\nexport function getValidatorFeesAPY({ channel, prices, totalStake }) {\r\n\tif (!channel) {\r\n\t\treturn 0\r\n\t}\r\n\r\n\tconst { periodStart, periodEnd, channelArgs, stats = {} } = channel\r\n\tconst { tokenAmount } = channelArgs\r\n\tconst { currentTotalActiveStake } = stats\r\n\r\n\tconst totalActiveStaked = BigNumber.from(\r\n\t\tcurrentTotalActiveStake || totalStake || 0\r\n\t)\r\n\tconst pricePrecision = 1_000_000\r\n\r\n\tconst totalStakeInDaiValue = BigNumber.from(totalActiveStaked)\r\n\t\t.mul(BigNumber.from(Math.floor((prices.USD || 0.2) * pricePrecision)))\r\n\t\t.div(pricePrecision)\r\n\r\n\tconst toDistribute = BigNumber.from(tokenAmount)\r\n\r\n\tconst distributionSeconds = Math.floor(\r\n\t\t(new Date(periodEnd) - new Date(periodStart)) / 1000\r\n\t)\r\n\r\n\tconst apy = toDistribute\r\n\t\t.mul(1000)\r\n\t\t.mul(\r\n\t\t\tBigNumber.from(SECONDS_IN_YEAR)\r\n\t\t\t\t.mul(1000)\r\n\t\t\t\t.div(distributionSeconds)\r\n\t\t)\r\n\t\t.div(totalStakeInDaiValue)\r\n\r\n\treturn apy.toNumber() / (1000 * 1000)\r\n}\r\n\r\nfunction getChannelAPY({ channel, prices, totalStake, type }) {\r\n\tif (type === \"fees\") {\r\n\t\treturn getValidatorFeesAPY({ channel, prices, totalStake })\r\n\t}\r\n\tif (type === \"incentive\") {\r\n\t\treturn getIncentiveChannelCurrentAPY({ channel, totalStake })\r\n\t}\r\n}\r\n\r\nexport async function loadStats(chosenWalletType, prices) {\r\n\tconst [totalStake, userStats] = await Promise.all([\r\n\t\tToken.balanceOf(ADDR_STAKING),\r\n\t\tloadUserStats(chosenWalletType, prices)\r\n\t])\r\n\r\n\treturn { ...userStats, ...totalStake, totalStakeTom: totalStake }\r\n}\r\n\r\nexport async function loadActivePoolsStats(prices) {\r\n\tconst tomPoolStats = await getPoolStats(POOLS[0], prices)\r\n\r\n\treturn { tomPoolStats }\r\n}\r\n\r\nexport async function getPoolStats(pool, prices) {\r\n\tconst rewardChannels = await getRewardChannels(pool)\r\n\tconst totalStake = await Token.balanceOf(ADDR_STAKING)\r\n\r\n\tconst now = Date.now()\r\n\r\n\tconst adxIncentiveRewardsChannels = rewardChannels.filter(\r\n\t\tx =>\r\n\t\t\tx.channelArgs.tokenAddr === ADDR_ADX &&\r\n\t\t\t// hack to remove the legacy channel which ended 3 days earlier than periodEnd\r\n\t\t\tx._id !==\r\n\t\t\t\t\"0x30d87bab0ef1e7f8b4c3b894ca2beed41bbd54c481f31e5791c1e855c9dbf4ba\" &&\r\n\t\t\tnow <= new Date(x.periodEnd).getTime() &&\r\n\t\t\tnow > new Date(x.periodStart).getTime()\r\n\t)\r\n\r\n\tconst feeRewardsChannels = rewardChannels.filter(\r\n\t\tx => x.channelArgs.tokenAddr !== ADDR_ADX\r\n\t)\r\n\r\n\tconst currentActiveIncentiveChannels = adxIncentiveRewardsChannels.sort(\r\n\t\t(a, b) => b.channelArgs.validUntil - a.channelArgs.validUntil\r\n\t)\r\n\r\n\tconst lastFeeRewardChannel = feeRewardsChannels.sort(\r\n\t\t(a, b) => b.channelArgs.validUntil - a.channelArgs.validUntil\r\n\t)[0]\r\n\r\n\tconst totalCurrentTotalActiveStake = currentActiveIncentiveChannels.reduce(\r\n\t\t(totalCurrent, channel) =>\r\n\t\t\ttotalCurrent.add((channel.stats || {}).currentTotalActiveStake || ZERO),\r\n\t\tZERO\r\n\t)\r\n\r\n\tconst currentAdxIncentiveAPY = currentActiveIncentiveChannels.reduce(\r\n\t\t(totalAPY, channel) =>\r\n\t\t\ttotalAPY +\r\n\t\t\tgetIncentiveChannelCurrentAPY({\r\n\t\t\t\tchannel,\r\n\t\t\t\ttotalStake: totalCurrentTotalActiveStake\r\n\t\t\t}),\r\n\t\t0\r\n\t)\r\n\r\n\tconst lastDaiFeesAPY = getValidatorFeesAPY({\r\n\t\tchannel: lastFeeRewardChannel,\r\n\t\ttotalStake,\r\n\t\tprices\r\n\t})\r\n\r\n\tconst stats = {\r\n\t\t...POOL_EMPTY_STATS,\r\n\t\tcurrentAdxIncentiveAPY,\r\n\t\tlastDaiFeesAPY,\r\n\t\ttotalAPY: currentAdxIncentiveAPY + lastDaiFeesAPY,\r\n\t\tloaded: true,\r\n\t\ttotalStake,\r\n\t\ttotalCurrentTotalActiveStake\r\n\t}\r\n\r\n\treturn stats\r\n}\r\n\r\nexport async function loadUserStats(chosenWalletType, prices) {\r\n\tconst totalStake = await Token.balanceOf(ADDR_STAKING)\r\n\r\n\tif (!chosenWalletType.name) {\r\n\t\tconst loyaltyPoolStats = await loadUserLoyaltyPoolsStats()\r\n\t\tconst poolStats = await loadActivePoolsStats(prices)\r\n\t\tconst tomStakingV5PoolStats = await loadUserTomStakingV5PoolStats()\r\n\r\n\t\treturn {\r\n\t\t\t...EMPTY_STATS,\r\n\t\t\tloyaltyPoolStats,\r\n\t\t\t...poolStats,\r\n\t\t\ttomStakingV5PoolStats,\r\n\t\t\tprices,\r\n\t\t\tloaded: true\r\n\t\t}\r\n\t}\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) return { ...EMPTY_STATS, loaded: true }\r\n\r\n\tconst addr = await signer.getAddress()\r\n\tconst identityAddr = getUserIdentity(addr).addr\r\n\tconst identityDeployed =\r\n\t\t(await defaultProvider.getCode(identityAddr)) !== \"0x\"\r\n\r\n\tconst [\r\n\t\t{\r\n\t\t\tuserBonds: userBondsData,\r\n\t\t\t// userBalance,\r\n\t\t\tuserWalletBalance,\r\n\t\t\tuserIdentityBalance\r\n\t\t},\r\n\t\ttomPoolUserRewardChannels,\r\n\t\tloyaltyPoolStats,\r\n\t\tpoolsStats,\r\n\t\ttomStakingV5PoolStatsWithUserData,\r\n\t\tmigrationBonusPromilles = BigNumber.from(1048),\r\n\t\tuserWalletToIdentityADXAllowance,\r\n\t\tlatestTransactionsCount,\r\n\t\tpendingTransactionsCount\r\n\t] = await Promise.all([\r\n\t\tloadBondStats(addr, identityAddr), // TODO: TOM only at the moment\r\n\t\tgetRewards(addr, POOLS[0], prices, totalStake),\r\n\t\tloadUserLoyaltyPoolsStats(addr),\r\n\t\tloadActivePoolsStats(prices),\r\n\t\tloadUserTomStakingV5PoolStats({ walletAddr: addr }),\r\n\t\tStakingMigrator.WITH_BONUS_PROMILLES(), // TODO: uncomment when migrator deployed\r\n\t\tToken.allowance(addr, identityAddr),\r\n\t\t// NOTE: getTransactionCount does not work correct with signer, because \"pending\" may not be supported by signers provider\r\n\t\tdefaultProvider.getTransactionCount(addr, \"latest\"),\r\n\t\tdefaultProvider.getTransactionCount(addr, \"pending\")\r\n\t])\r\n\r\n\tconst hasPendingTransactions =\r\n\t\tlatestTransactionsCount !== pendingTransactionsCount\r\n\tconst { tomPoolStats } = poolsStats\r\n\r\n\tconst tomAdxRewardsChannels = [...tomPoolUserRewardChannels].filter(\r\n\t\tx => x.type === \"incentive\"\r\n\t)\r\n\r\n\tconst identityADXIncentiveChannels = [...tomAdxRewardsChannels].filter(\r\n\t\tchannel => channel.claimFrom !== addr && channel.outstandingReward.gt(ZERO)\r\n\t)\r\n\r\n\tconst identityAdxRewardsAmount = sumRewards(identityADXIncentiveChannels)\r\n\r\n\tconst tomRewardADX = sumRewards(tomAdxRewardsChannels)\r\n\r\n\tconst tomPoolDaiRewardsChannels = [...tomPoolUserRewardChannels].filter(\r\n\t\tx => x.type === \"fees\"\r\n\t)\r\n\r\n\tconst tomRewardDAI = sumRewards(tomPoolDaiRewardsChannels)\r\n\r\n\t// console.log(\"migrationBonusPromille\", migrationBonusPromille)\r\n\t// console.log(\"identityAdxRewardsAmount\", identityAdxRewardsAmount)\r\n\r\n\tconst userBonds = userBondsData.map(bond => ({\r\n\t\t...bond,\r\n\t\tmigrationReward: bond.amount\r\n\t\t\t.mul(migrationBonusPromilles)\r\n\t\t\t.div(1000)\r\n\t\t\t.sub(bond.amount)\r\n\t}))\r\n\r\n\t// console.log(\"userBonds\", userBonds)\r\n\r\n\tconst userTotalStake = userBonds\r\n\t\t.filter(x => x.status === \"Active\")\r\n\t\t.map(x => x.currentAmount)\r\n\t\t.reduce((a, b) => a.add(b), ZERO)\r\n\r\n\t// NOTE: with the migration enabled All unbond requests will be available for withdraw\r\n\tconst tomUnbondRequestedWithdraw = userBonds\r\n\t\t.filter(x => x.status === \"UnbondRequested\")\r\n\t\t.map(x => x.currentAmount)\r\n\t\t.reduce((a, b) => a.add(b), ZERO)\r\n\r\n\tconst tomPoolStatsWithUserData = {\r\n\t\t...tomPoolStats,\r\n\t\tidentityADXIncentiveChannels,\r\n\t\tidentityAdxRewardsAmount,\r\n\t\tuserRewardsADX: tomRewardADX,\r\n\t\tuserRewardsDAI: tomRewardDAI,\r\n\t\tuserDataLoaded: true,\r\n\t\trewardChannels: tomPoolUserRewardChannels,\r\n\t\tuserBonds\r\n\t}\r\n\r\n\tconst {\r\n\t\tcurrentBalanceADX,\r\n\t\tleavesPendingToUnlockTotalADX,\r\n\t\tleavesReadyToWithdrawTotalADX,\r\n\t\tgaslessAddrBalance\r\n\t} = tomStakingV5PoolStatsWithUserData\r\n\r\n\tconst { balanceLpADX } = loyaltyPoolStats\r\n\r\n\tconst totalLockedOnDeposits = currentBalanceADX\r\n\t\t.sub(leavesPendingToUnlockTotalADX)\r\n\t\t.sub(leavesReadyToWithdrawTotalADX)\r\n\r\n\tconst totalPendingToUnlock = leavesPendingToUnlockTotalADX\r\n\tconst totalUnlockedDeposits = balanceLpADX\r\n\t\t.add(leavesReadyToWithdrawTotalADX)\r\n\t\t.add(tomUnbondRequestedWithdraw) // unlocked with migration\r\n\r\n\tconst totalStaked = userTotalStake\r\n\t\t.add(totalLockedOnDeposits)\r\n\t\t.add(totalPendingToUnlock)\r\n\t\t.add(totalUnlockedDeposits)\r\n\t\t.add(tomRewardADX)\r\n\r\n\tconst nonStakedBalance = userWalletBalance\r\n\t\t.add(userIdentityBalance)\r\n\t\t.add(gaslessAddrBalance)\r\n\r\n\tconst totalBalanceADX = nonStakedBalance.add(totalStaked)\r\n\r\n\tconst migratableBonds = [...userBonds].filter(\r\n\t\tx => x.status !== \"Unbonded\" && x.status !== \"Migrated\"\r\n\t)\r\n\r\n\tconst bondToMigrate = migratableBonds.length === 1 ? migratableBonds[0] : null\r\n\r\n\tconst tomBondsMigrationData = {\r\n\t\thasToMigrate: !!migratableBonds.length,\r\n\t\tbondToMigrate,\r\n\t\tisWithdrawMigration:\r\n\t\t\tbondToMigrate &&\r\n\t\t\tbondToMigrate.status === \"UnbondRequested\" &&\r\n\t\t\tbondToMigrate.willUnlock &&\r\n\t\t\tbondToMigrate.willUnlock.getTime() < MIGRATION_UNBOND_BEFORE\r\n\t}\r\n\r\n\treturn {\r\n\t\tidentityAddr,\r\n\t\tidentityDeployed,\r\n\t\tconnectedWalletAddress: addr,\r\n\t\tuserBonds,\r\n\t\tuserBalance: nonStakedBalance, // ADX on wallet, legacy identity and gasless addr\r\n\t\tloaded: true,\r\n\t\trewardChannels: tomPoolUserRewardChannels,\r\n\t\ttotalRewardADX: tomRewardADX,\r\n\t\ttotalRewardDAI: tomRewardDAI,\r\n\t\ttomRewardADX,\r\n\t\tuserTotalStake,\r\n\t\ttotalStaked,\r\n\t\ttotalBalanceADX, // Wallet + Stake + Reward\r\n\t\tuserWalletBalance,\r\n\t\tuserIdentityBalance,\r\n\t\tgaslessAddrBalance,\r\n\t\ttotalLockedOnDeposits,\r\n\t\ttotalUnlockedDeposits,\r\n\t\ttotalPendingToUnlock,\r\n\t\t// canExecuteGasless,\r\n\t\t// canExecuteGaslessError,\r\n\t\tloyaltyPoolStats,\r\n\t\ttomPoolStats: tomPoolStatsWithUserData,\r\n\t\ttomStakingV5PoolStats: tomStakingV5PoolStatsWithUserData,\r\n\t\tprices,\r\n\t\ttomBondsMigrationData,\r\n\t\tuserWalletToIdentityADXAllowance,\r\n\t\thasPendingTransactions\r\n\t}\r\n}\r\n\r\nexport async function loadBondStats(addr, identityAddr) {\r\n\tconst [\r\n\t\t[userWalletBalance, userIdentityBalance],\r\n\t\tlogs,\r\n\t\t// slashLogs,\r\n\t\tmigrationLogs = []\r\n\t] = await Promise.all([\r\n\t\tPromise.all([Token.balanceOf(addr), Token.balanceOf(identityAddr)]),\r\n\t\tdefaultProvider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\taddress: ADDR_STAKING,\r\n\t\t\ttopics: [null, utils.hexZeroPad(identityAddr, 32)]\r\n\t\t}),\r\n\t\t// defaultProvider.getLogs({\r\n\t\t// \tfromBlock: 0,\r\n\t\t// \t...Staking.filters.LogSlash(null, null)\r\n\t\t// }),\r\n\t\tdefaultProvider.getLogs({\r\n\t\t\tfromBlock: 0,\r\n\t\t\t...StakingMigrator.filters.LogBondMigrated(identityAddr, null)\r\n\t\t})\r\n\t])\r\n\r\n\t//TODO: remove identity code\r\n\tconst userBalance = userWalletBalance.add(userIdentityBalance)\r\n\r\n\t// const slashedByPool = slashLogs.reduce((pools, log) => {\r\n\t// \tconst { poolId, newSlashPts } = Staking.interface.parseLog(log).args\r\n\t// \tpools[poolId] = newSlashPts\r\n\t// \treturn pools\r\n\t// }, {})\r\n\r\n\tconst migrationLogsByBondId = migrationLogs.reduce((byHash, log) => {\r\n\t\tconst { bondId } = StakingMigrator.interface.parseLog(log).args\r\n\t\tbyHash[bondId] = log\r\n\t\treturn byHash\r\n\t}, {})\r\n\r\n\tconst userBonds = logs.reduce((bonds, log) => {\r\n\t\tconst topic = log.topics[0]\r\n\t\t// TODO: add is migrations Unbond request and migrated status\r\n\t\t// status = \"MigrationRequested\"\r\n\r\n\t\tif (topic === Staking.interface.getEventTopic(\"LogBond\")) {\r\n\t\t\tconst vals = Staking.interface.parseLog(log).args\r\n\t\t\tconst { owner, amount, poolId, nonce, slashedAtStart, time } = vals\r\n\t\t\tconst bond = { owner, amount, poolId, nonce, slashedAtStart, time }\r\n\r\n\t\t\tconst id = getBondId(bond)\r\n\r\n\t\t\tconst bondMigrationLog = migrationLogsByBondId[id]\r\n\r\n\t\t\tconst bondWithData = {\r\n\t\t\t\tid,\r\n\t\t\t\tstatus: bondMigrationLog ? \"Migrated\" : \"Active\",\r\n\t\t\t\tcurrentAmount: bond.amount,\r\n\t\t\t\t// .mul(MAX_SLASH.sub(slashedByPool[poolId] || ZERO))\r\n\t\t\t\t// .div(MAX_SLASH.sub(slashedAtStart)),\r\n\t\t\t\t...bond\r\n\t\t\t}\r\n\r\n\t\t\tconst replacedBondIndex = bonds.findIndex(x => x.id === bondWithData.id)\r\n\r\n\t\t\tif (replacedBondIndex > -1) {\r\n\t\t\t\tbonds[replacedBondIndex] = bondWithData\r\n\t\t\t} else {\r\n\t\t\t\tbonds.push(bondWithData)\r\n\t\t\t}\r\n\t\t} else if (\r\n\t\t\ttopic === Staking.interface.getEventTopic(\"LogUnbondRequested\")\r\n\t\t) {\r\n\t\t\t// NOTE: assuming that .find() will return something is safe, as long as the logs are properly ordered\r\n\t\t\tconst { bondId, willUnlock } = Staking.interface.parseLog(log).args\r\n\t\t\tconst bond = bonds.find(({ id }) => id === bondId)\r\n\r\n\t\t\tif (bond.status !== \"Migrated\") {\r\n\t\t\t\tbond.status = \"UnbondRequested\"\r\n\t\t\t}\r\n\r\n\t\t\tbond.willUnlock = new Date(willUnlock * 1000)\r\n\t\t} else if (topic === Staking.interface.getEventTopic(\"LogUnbonded\")) {\r\n\t\t\tconst { bondId } = Staking.interface.parseLog(log).args\r\n\t\t\tconst bond = bonds.find(({ id }) => id === bondId)\r\n\t\t\tbond.status = \"Unbonded\"\r\n\t\t}\r\n\r\n\t\treturn bonds\r\n\t}, [])\r\n\r\n\treturn {\r\n\t\tuserBonds,\r\n\t\tuserBalance,\r\n\t\tuserWalletBalance,\r\n\t\tuserIdentityBalance\r\n\t}\r\n}\r\n\r\nexport async function getRewardChannels(rewardPool) {\r\n\tconst resp = await fetch(`${rewardPool.url}/fee-rewards`)\r\n\tconst rewardChannels = await resp.json()\r\n\treturn rewardChannels\r\n}\r\n\r\nexport async function getRewards(addr, rewardPool, prices, totalStake) {\r\n\tconst identityAddr = getUserIdentity(addr).addr\r\n\tconst rewardChannels = await getRewardChannels(rewardPool)\r\n\tconst validUntil = Math.floor(Date.now() / 1000)\r\n\tconst forUser = await Promise.all(\r\n\t\trewardChannels.map(async rewardChannel => {\r\n\t\t\tif (rewardChannel.channelArgs.validUntil < validUntil) return null\r\n\t\t\tconst claimFrom = rewardChannel.balances[addr] ? addr : identityAddr\r\n\t\t\tif (!rewardChannel.balances[claimFrom]) return null\r\n\t\t\tconst balanceTree = new BalanceTree(rewardChannel.balances)\r\n\t\t\tconst outstandingReward = BigNumber.from(\r\n\t\t\t\trewardChannel.balances[claimFrom]\r\n\t\t\t).sub(await Core.withdrawnPerUser(rewardChannel.channelId, claimFrom))\r\n\t\t\tconst type =\r\n\t\t\t\trewardChannel.channelArgs.tokenAddr === ADDR_ADX ? \"incentive\" : \"fees\"\r\n\r\n\t\t\t// Min threshold only for fees channels\r\n\t\t\tif (type === \"fees\" && outstandingReward.lt(OUTSTANDING_REWARD_THRESHOLD))\r\n\t\t\t\treturn null\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...rewardChannel,\r\n\t\t\t\toutstandingReward,\r\n\t\t\t\tclaimFrom,\r\n\t\t\t\tproof: balanceTree.getProof(claimFrom),\r\n\t\t\t\tstateRoot: balanceTree.mTree.getRoot(),\r\n\t\t\t\tamount: rewardChannel.balances[claimFrom],\r\n\t\t\t\ttype,\r\n\t\t\t\tcurrentAPY: getChannelAPY({\r\n\t\t\t\t\tchannel: rewardChannel,\r\n\t\t\t\t\tprices,\r\n\t\t\t\t\ttotalStake,\r\n\t\t\t\t\ttype\r\n\t\t\t\t}),\r\n\t\t\t\tpoolId: rewardPool.id\r\n\t\t\t}\r\n\t\t})\r\n\t)\r\n\treturn forUser.filter(x => x)\r\n}\r\n\r\nexport async function createNewBond(\r\n\tstats,\r\n\tchosenWalletType,\r\n\t{ amount, poolId, nonce },\r\n\tgasless\r\n) {\r\n\tif (!poolId) return\r\n\tif (!stats.userBalance) return\r\n\tif (amount.gt(stats.userBalance)) throw new Error(\"errors.amountTooLarge\")\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\r\n\tconst walletAddr = await signer.getAddress()\r\n\tconst { addr } = getUserIdentity(walletAddr)\r\n\r\n\tconst bond = [\r\n\t\tamount,\r\n\t\tpoolId,\r\n\t\tnonce || BigNumber.from(Math.floor(Date.now() / 1000))\r\n\t]\r\n\r\n\tconst [allowance, allowanceStaking, balanceOnIdentity] = await Promise.all([\r\n\t\tToken.allowance(walletAddr, addr),\r\n\t\tToken.allowance(addr, Staking.address),\r\n\t\tToken.balanceOf(addr)\r\n\t])\r\n\r\n\t// Edge case: if we're gasless, the ADX is already on the identity and it's not deployed (constructor will be executed)\r\n\tif (\r\n\t\tgasless &&\r\n\t\tamount.eq(balanceOnIdentity) &&\r\n\t\t(await defaultProvider.getCode(addr)) === \"0x\"\r\n\t) {\r\n\t\treturn executeOnIdentity(chosenWalletType, [], {}, true)\r\n\t}\r\n\t// @TODO consider handling this edge case in non-gasless cases when there's some ADX on the identity\r\n\t// or at least `if (needsDeploying && balanceOnIdentity.gt(ZERO)) throw` cause otherwise the tx would just fail\r\n\t// because the constructor will bond this amount first\r\n\t// see https://github.com/AdExNetwork/adex-staking/issues/71\r\n\r\n\t// Eg bond amount is 10 but we only have 60, we need another 40\r\n\tconst needed = amount.sub(balanceOnIdentity)\r\n\tconst setAllowance = needed.gt(ZERO) && !allowance.gte(amount)\r\n\tif (setAllowance) {\r\n\t\tconst tokenWithSigner = new Contract(ADDR_ADX, ERC20ABI, signer)\r\n\t\tawait tokenWithSigner.approve(addr, MAX_UINT)\r\n\t}\r\n\r\n\tif (\r\n\t\t!stats.identityDeployed &&\r\n\t\tbalanceOnIdentity.gt(ZERO) &&\r\n\t\tneeded.gt(ZERO)\r\n\t) {\r\n\t\tthrow new Error(\"errors.cantDeployAndStakeMore\")\r\n\t}\r\n\r\n\tlet identityTxns = []\r\n\tif (needed.gt(ZERO))\r\n\t\tidentityTxns.push([\r\n\t\t\tToken.address,\r\n\t\t\tToken.interface.encodeFunctionData(\"transferFrom\", [\r\n\t\t\t\twalletAddr,\r\n\t\t\t\taddr,\r\n\t\t\t\tneeded\r\n\t\t\t])\r\n\t\t])\r\n\tif (allowanceStaking.lt(amount))\r\n\t\tidentityTxns.push([\r\n\t\t\tToken.address,\r\n\t\t\tToken.interface.encodeFunctionData(\"approve\", [Staking.address, MAX_UINT])\r\n\t\t])\r\n\r\n\tconst active = stats.userBonds.find(\r\n\t\tx => x.status === \"Active\" && x.poolId === poolId\r\n\t)\r\n\tconst stakingData = active\r\n\t\t? Staking.interface.encodeFunctionData(\"replaceBond\", [\r\n\t\t\t\tactive,\r\n\t\t\t\t[active.amount.add(amount), poolId, active.nonce]\r\n\t\t  ])\r\n\t\t: Staking.interface.encodeFunctionData(\"addBond\", [bond])\r\n\tidentityTxns.push([Staking.address, stakingData])\r\n\r\n\treturn executeOnIdentity(\r\n\t\tchosenWalletType,\r\n\t\tidentityTxns,\r\n\t\tsetAllowance ? { gasLimit: 450000 } : {},\r\n\t\tgasless\r\n\t)\r\n}\r\n\r\nexport async function onUnbondOrRequest(\r\n\tisUnbond,\r\n\tchosenWalletType,\r\n\t{ amount, poolId, nonce }\r\n) {\r\n\tconst bond = [amount, poolId, nonce || ZERO]\r\n\tif (isUnbond) {\r\n\t\tconst signer = await getSigner(chosenWalletType)\r\n\t\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\t\tconst walletAddr = await signer.getAddress()\r\n\t\tawait executeOnIdentity(chosenWalletType, [\r\n\t\t\t[Staking.address, Staking.interface.encodeFunctionData(\"unbond\", [bond])],\r\n\t\t\t[\r\n\t\t\t\tToken.address,\r\n\t\t\t\tToken.interface.encodeFunctionData(\"transfer\", [walletAddr, amount])\r\n\t\t\t]\r\n\t\t])\r\n\t} else {\r\n\t\tawait executeOnIdentity(chosenWalletType, [\r\n\t\t\t[\r\n\t\t\t\tStaking.address,\r\n\t\t\t\tStaking.interface.encodeFunctionData(\"requestUnbond\", [bond])\r\n\t\t\t]\r\n\t\t])\r\n\t}\r\n}\r\n\r\nexport async function claimRewards(chosenWalletType, rewardChannels) {\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\tconst walletAddr = await signer.getAddress()\r\n\r\n\t// @TODO: this is obsolete, it should be removed at some point (when no more DAI rewards on wallets are left)\r\n\tconst coreWithSigner = new Contract(ADDR_CORE, CoreABI, signer)\r\n\tconst legacyChannels = rewardChannels.filter(\r\n\t\tchannel => channel.claimFrom === walletAddr\r\n\t)\r\n\tfor (const channel of legacyChannels) {\r\n\t\tconst channelTuple = toChannelTuple(channel.channelArgs)\r\n\t\tawait coreWithSigner.channelWithdraw(\r\n\t\t\tchannelTuple,\r\n\t\t\tchannel.stateRoot,\r\n\t\t\tchannel.signatures,\r\n\t\t\tchannel.proof,\r\n\t\t\tchannel.amount\r\n\t\t)\r\n\t}\r\n\r\n\tconst identityChannels = rewardChannels.filter(\r\n\t\tchannel => channel.claimFrom !== walletAddr\r\n\t)\r\n\tconst toTransfer = {}\r\n\tidentityChannels.forEach(channel => {\r\n\t\tconst { tokenAddr } = channel.channelArgs\r\n\t\tconst amnt = toTransfer[tokenAddr] || ZERO\r\n\t\ttoTransfer[tokenAddr] = amnt.add(channel.outstandingReward)\r\n\t})\r\n\tconst identityTxns = identityChannels\r\n\t\t.map(channel => {\r\n\t\t\tconst channelTuple = toChannelTuple(channel.channelArgs)\r\n\t\t\treturn [\r\n\t\t\t\tCore.address,\r\n\t\t\t\tCore.interface.encodeFunctionData(\"channelWithdraw\", [\r\n\t\t\t\t\tchannelTuple,\r\n\t\t\t\t\tchannel.stateRoot,\r\n\t\t\t\t\tchannel.signatures,\r\n\t\t\t\t\tchannel.proof,\r\n\t\t\t\t\tchannel.amount\r\n\t\t\t\t])\r\n\t\t\t]\r\n\t\t})\r\n\t\t.concat(\r\n\t\t\tObject.entries(toTransfer).map(([tokenAddr, amount]) => [\r\n\t\t\t\ttokenAddr,\r\n\t\t\t\tToken.interface.encodeFunctionData(\"transfer\", [walletAddr, amount])\r\n\t\t\t])\r\n\t\t)\r\n\r\n\tif (identityTxns.length) {\r\n\t\tawait executeOnIdentity(chosenWalletType, identityTxns)\r\n\t}\r\n}\r\n\r\nexport async function reBond(chosenWalletType, { amount, poolId, nonce }) {\r\n\tconst bond = [amount, poolId, nonce || ZERO]\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\tconst walletAddr = await signer.getAddress()\r\n\tconst { addr } = getUserIdentity(walletAddr)\r\n\tconst allowanceStaking = await Token.allowance(addr, Staking.address)\r\n\treturn executeOnIdentity(\r\n\t\tchosenWalletType,\r\n\t\t(allowanceStaking.lt(amount)\r\n\t\t\t? [\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\tToken.address,\r\n\t\t\t\t\t\tToken.interface.encodeFunctionData(\"approve\", [\r\n\t\t\t\t\t\t\tStaking.address,\r\n\t\t\t\t\t\t\tMAX_UINT\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t]\r\n\t\t\t  ]\r\n\t\t\t: []\r\n\t\t).concat([\r\n\t\t\t[\r\n\t\t\t\tStaking.address,\r\n\t\t\t\tStaking.interface.encodeFunctionData(\"replaceBond\", [bond, bond])\r\n\t\t\t]\r\n\t\t])\r\n\t)\r\n}\r\n\r\nexport async function identityWithdraw(chosenWalletType) {\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\tconst walletAddr = await signer.getAddress()\r\n\tconst { addr } = getUserIdentity(walletAddr)\r\n\r\n\tconst identityBalance = await Token.balanceOf(addr)\r\n\r\n\tconst identityTxns = [\r\n\t\t[\r\n\t\t\tToken.address,\r\n\t\t\tToken.interface.encodeFunctionData(\"transfer\", [\r\n\t\t\t\twalletAddr,\r\n\t\t\t\tidentityBalance\r\n\t\t\t])\r\n\t\t]\r\n\t]\r\n\r\n\tawait executeOnIdentity(chosenWalletType, identityTxns, {}, false, null)\r\n}\r\n","export async function fetchJSON(url, opts) {\r\n\tconst resp = await fetch(url, opts)\r\n\treturn resp.json()\r\n}\r\n\r\nexport async function postJSON(url, body) {\r\n\treturn fetchJSON(url, {\r\n\t\tmethod: \"POST\",\r\n\t\theaders: { \"content-type\": \"application/json\" },\r\n\t\tbody: JSON.stringify(body)\r\n\t})\r\n}\r\n","export class TranslatableError extends Error {\r\n\tconstructor(message, values) {\r\n\t\tsuper(message)\r\n\t\tthis.values = values\r\n\t}\r\n}\r\n","import {\r\n\tDEPOSIT_POOLS,\r\n\tPOOLS,\r\n\tZERO,\r\n\tDAI_TOKEN_ADDR,\r\n\tADDR_CORE\r\n} from \"../helpers/constants\"\r\nimport {\r\n\tonLoyaltyPoolDeposit,\r\n\tonLoyaltyPoolWithdraw\r\n} from \"./loyaltyPoolActions\"\r\nimport { claimRewards } from \"./actions\"\r\nimport {\r\n\tonStakingPoolV5Deposit,\r\n\tonStakingPoolV5UnbondCommitment,\r\n\tonStakingPoolV5Withdraw,\r\n\tonStakingPoolV5RageLeave\r\n} from \"./v5actions\"\r\nimport { fetchJSON } from \"../helpers/fetch\"\r\nimport { formatDAI } from \"../helpers/formatting\"\r\nimport ERC20ABI from \"../abi/ERC20\"\r\nimport { Contract } from \"ethers\"\r\nimport { getDefaultProvider } from \"../ethereum\"\r\nimport { TranslatableError } from \"../helpers/errors\"\r\n\r\nconst defaultProvider = getDefaultProvider\r\n\r\nconst MARKET_URL = \"https://market.adex.network\"\r\nconst TOM_URL = \"https://tom.adex.network\"\r\nconst DaiToken = new Contract(DAI_TOKEN_ADDR, ERC20ABI, defaultProvider)\r\n\r\nexport const DEPOSIT_ACTION_TYPES = {\r\n\tdeposit: \"deposit\",\r\n\tunbondCommitment: \"unbondCommitment\",\r\n\twithdraw: \"withdraw\",\r\n\trageLeave: \"rageLeave\"\r\n}\r\n\r\nexport const getDepositPool = poolId =>\r\n\tDEPOSIT_POOLS.concat(POOLS).find(x => x.id === poolId)\r\n\r\nexport const getDepositActionByPoolId = poolId => {\r\n\tif (poolId === DEPOSIT_POOLS[0].id) {\r\n\t\treturn onLoyaltyPoolDeposit\r\n\t}\r\n\tif (poolId === DEPOSIT_POOLS[1].id) {\r\n\t\treturn onStakingPoolV5Deposit\r\n\t}\r\n\r\n\tthrow new TranslatableError(\"errors.noActionForPool\", {\r\n\t\tactionName: \"deposit\",\r\n\t\tpoolId\r\n\t})\r\n}\r\n\r\nexport const getWithdrawActionByPoolId = poolId => {\r\n\tif (poolId === DEPOSIT_POOLS[0].id) {\r\n\t\treturn onLoyaltyPoolWithdraw\r\n\t}\r\n\tif (poolId === POOLS[0].id) {\r\n\t\treturn claimRewards\r\n\t}\r\n\r\n\tif (poolId === DEPOSIT_POOLS[1].id) {\r\n\t\treturn onStakingPoolV5Withdraw\r\n\t}\r\n\r\n\tthrow new TranslatableError(\"errors.noActionForPool\", {\r\n\t\tactionName: \"withdraw\",\r\n\t\tpoolId\r\n\t})\r\n}\r\n\r\nexport const getUnbondCommitmentActionByPoolId = poolId => {\r\n\tif (poolId === DEPOSIT_POOLS[1].id) {\r\n\t\treturn onStakingPoolV5UnbondCommitment\r\n\t}\r\n\r\n\tthrow new TranslatableError(\"errors.noActionForPool\", {\r\n\t\tactionName: \"unbond commitment (leave)\",\r\n\t\tpoolId\r\n\t})\r\n}\r\n\r\nexport const getRageLeaveActionByPoolId = poolId => {\r\n\tif (poolId === DEPOSIT_POOLS[1].id) {\r\n\t\treturn onStakingPoolV5RageLeave\r\n\t}\r\n\r\n\tthrow new TranslatableError(\"errors.noActionForPool\", {\r\n\t\tactionName: \"unbond commitment (leave)\",\r\n\t\tpoolId\r\n\t})\r\n}\r\n\r\nexport const getMaxWithdrawAmountByPoolId = (poolId, stats) => {\r\n\tif (poolId === DEPOSIT_POOLS[0].id) {\r\n\t\treturn stats.balanceLpADX || ZERO\r\n\t}\r\n\r\n\tif (poolId === DEPOSIT_POOLS[1].id) {\r\n\t\treturn stats.currentBalanceADXAvailable || ZERO\r\n\t}\r\n\r\n\treturn ZERO\r\n}\r\n\r\nexport const getMaxRageLeaveAmountByPoolId = (poolId, stats) => {\r\n\tif (poolId === DEPOSIT_POOLS[1].id) {\r\n\t\treturn stats.currentBalanceADXAtCurrentShareValue || ZERO\r\n\t}\r\n\r\n\treturn ZERO\r\n}\r\n\r\nexport const getMaxUnbondCommitmentAmountByPoolId = (poolId, stats) => {\r\n\tif (poolId === DEPOSIT_POOLS[1].id) {\r\n\t\treturn stats.currentBalanceADXAvailable || ZERO\r\n\t}\r\n\r\n\treturn ZERO\r\n}\r\n\r\nexport const getPoolStatsByPoolId = (stats, poolId) => {\r\n\tif (poolId === DEPOSIT_POOLS[0].id) {\r\n\t\treturn stats.loyaltyPoolStats\r\n\t}\r\n\tif (poolId === POOLS[0].id) {\r\n\t\treturn stats.tomPoolStats\r\n\t}\r\n\tif (poolId === DEPOSIT_POOLS[1].id) {\r\n\t\treturn stats.tomStakingV5PoolStats\r\n\t}\r\n}\r\n\r\nexport const getDepositActionByTypeAndPoolId = (actionType, poolId) => {\r\n\tswitch (actionType) {\r\n\t\tcase DEPOSIT_ACTION_TYPES.withdraw:\r\n\t\t\treturn getWithdrawActionByPoolId(poolId)\r\n\t\tcase DEPOSIT_ACTION_TYPES.deposit:\r\n\t\t\treturn getDepositActionByPoolId(poolId)\r\n\t\tcase DEPOSIT_ACTION_TYPES.unbondCommitment:\r\n\t\t\treturn getUnbondCommitmentActionByPoolId(poolId)\r\n\t\tcase DEPOSIT_ACTION_TYPES.rageLeave:\r\n\t\t\treturn getRageLeaveActionByPoolId(poolId)\r\n\t\tdefault:\r\n\t\t\tthrow new TranslatableError(\"errors.invalidActionType\", { actionType })\r\n\t}\r\n}\r\n\r\nexport const getDepositActionMaxAmountByTypeAndPoolId = (\r\n\tactionType,\r\n\tpoolId,\r\n\tpoolStats,\r\n\tuserWalletBalance\r\n) => {\r\n\tswitch (actionType) {\r\n\t\tcase DEPOSIT_ACTION_TYPES.withdraw:\r\n\t\t\treturn getMaxWithdrawAmountByPoolId(poolId, poolStats)\r\n\t\tcase DEPOSIT_ACTION_TYPES.rageLeave:\r\n\t\t\treturn getMaxRageLeaveAmountByPoolId(poolId, poolStats)\r\n\t\tcase DEPOSIT_ACTION_TYPES.unbondCommitment:\r\n\t\t\treturn getMaxUnbondCommitmentAmountByPoolId(poolId, poolStats)\r\n\t\tcase DEPOSIT_ACTION_TYPES.deposit:\r\n\t\t\treturn userWalletBalance\r\n\t\tdefault:\r\n\t\t\treturn ZERO\r\n\t}\r\n}\r\n\r\nexport const getWithdrawActionBySelectedRewardChannels = (\r\n\trewards,\r\n\tchosenWalletType,\r\n\tstats\r\n) => {\r\n\tconst actions = Object.entries(\r\n\t\trewards.reduce((byPool, r) => {\r\n\t\t\tconst { poolId } = r\r\n\t\t\tbyPool[poolId] = [...(byPool[poolId] || []), r]\r\n\t\t\treturn byPool\r\n\t\t}, {})\r\n\t).map(([poolId, rwds]) => {\r\n\t\tif (poolId === DEPOSIT_POOLS[0].id) {\r\n\t\t\treturn onLoyaltyPoolWithdraw.bind(\r\n\t\t\t\tnull,\r\n\t\t\t\tstats,\r\n\t\t\t\tchosenWalletType,\r\n\t\t\t\trwds[0].outstandingReward\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (poolId === POOLS[0].id) {\r\n\t\t\tconst rewardChannels = rwds.map(r => r.rewardChannel)\r\n\t\t\treturn claimRewards.bind(null, chosenWalletType, rewardChannels)\r\n\t\t}\r\n\t\treturn () => {}\r\n\t})\r\n\r\n\treturn actions\r\n}\r\n\r\nconst sumValidatorAnalyticsResValue = res =>\r\n\tObject.values(res.aggr || {}).reduce((a, b) => a.add(b.value), ZERO)\r\n\r\nconst toChartData = (data, valueLabel, currency) => {\r\n\tconst noLast = [...(data.aggr || [{}])]\r\n\tnoLast.pop()\r\n\treturn noLast.reduce(\r\n\t\t(data, { time, value }) => {\r\n\t\t\tdata.labels.push(new Date(time).toLocaleString())\r\n\t\t\tdata.datasets.push(parseFloat(currency ? formatDAI(value) : value))\r\n\r\n\t\t\treturn data\r\n\t\t},\r\n\t\t{ labels: [], datasets: [], valueLabel, currency }\r\n\t)\r\n}\r\n\r\nexport const getValidatorTomStats = async () => {\r\n\tconst channels = await fetchJSON(MARKET_URL + \"/campaigns?all\")\r\n\tconst {\r\n\t\ttotalDeposits,\r\n\t\ttotalPayouts,\r\n\t\tuniqueUnits,\r\n\t\tuniquePublishers,\r\n\t\tuniqueAdvertisers\r\n\t} = channels.reduce(\r\n\t\t(data, { creator, depositAmount, status, spec }) => {\r\n\t\t\tdata.totalDeposits = data.totalDeposits.add(depositAmount)\r\n\t\t\tdata.totalPayouts = data.totalPayouts.add(\r\n\t\t\t\tObject.values(status.lastApprovedBalances || {}).reduce(\r\n\t\t\t\t\t(a, b) => a.add(b),\r\n\t\t\t\t\tZERO\r\n\t\t\t\t)\r\n\t\t\t)\r\n\r\n\t\t\tspec.adUnits.forEach(({ ipfs }) => {\r\n\t\t\t\tdata.uniqueUnits[ipfs] = true\r\n\t\t\t})\r\n\t\t\tObject.keys(status.lastApprovedBalances).forEach(key => {\r\n\t\t\t\tif (key !== creator) {\r\n\t\t\t\t\tdata.uniquePublishers[key.toLowerCase()] = true\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tdata.uniqueAdvertisers[creator.toLowerCase()] = true\r\n\r\n\t\t\treturn data\r\n\t\t},\r\n\t\t{\r\n\t\t\ttotalDeposits: ZERO,\r\n\t\t\ttotalPayouts: ZERO,\r\n\t\t\tuniqueUnits: {},\r\n\t\t\tuniquePublishers: {},\r\n\t\t\tuniqueAdvertisers: {}\r\n\t\t}\r\n\t)\r\n\r\n\tconst dailyPayoutsData = await fetchJSON(\r\n\t\tTOM_URL + \"/analytics?metric=eventPayouts&timeframe=day\"\r\n\t)\r\n\tconst yearlyTransactionsData = await fetchJSON(\r\n\t\tTOM_URL + \"/analytics?metric=eventCounts&timeframe=year\"\r\n\t)\r\n\tconst dailyTransactionsData = await fetchJSON(\r\n\t\tTOM_URL + \"/analytics?metric=eventCounts&timeframe=day\"\r\n\t)\r\n\tconst monthlyTransactionsData = await fetchJSON(\r\n\t\tTOM_URL + \"/analytics?metric=eventCounts&timeframe=month\"\r\n\t)\r\n\r\n\tconst lockupOnChain = await DaiToken.balanceOf(ADDR_CORE)\r\n\r\n\treturn {\r\n\t\ttotalCampaigns: channels.length,\r\n\t\tuniqueUnits: Object.keys(uniqueUnits).length,\r\n\t\tuniquePublishers: Object.keys(uniquePublishers).length,\r\n\t\tuniqueAdvertisers: Object.keys(uniqueAdvertisers).length,\r\n\t\ttotalDeposits,\r\n\t\ttotalPayouts,\r\n\t\tdailyPayoutsData: toChartData(dailyPayoutsData, \"stats.labelPayout\", \"DAI\"),\r\n\t\tdailyPayoutsVolume: sumValidatorAnalyticsResValue(dailyPayoutsData),\r\n\t\tyearlyTransactionsData: toChartData(\r\n\t\t\tyearlyTransactionsData,\r\n\t\t\t\"stats.labelTransactions\"\r\n\t\t),\r\n\t\tyearlyTransactions: sumValidatorAnalyticsResValue(yearlyTransactionsData),\r\n\t\tdailyTransactionsData: toChartData(\r\n\t\t\tdailyTransactionsData,\r\n\t\t\t\"stats.labelTransactions\"\r\n\t\t),\r\n\t\tdailyTransactions: sumValidatorAnalyticsResValue(dailyTransactionsData),\r\n\t\tmonthlyTransactionsData: toChartData(\r\n\t\t\tmonthlyTransactionsData,\r\n\t\t\t\"stats.labelTransactions\"\r\n\t\t),\r\n\t\tmonthlyTransactions: sumValidatorAnalyticsResValue(monthlyTransactionsData),\r\n\t\tlockupOnChain\r\n\t}\r\n}\r\n\r\nexport const getValidatorStatsByPoolId = poolId => {\r\n\tif (poolId === POOLS[0].id) {\r\n\t\treturn getValidatorTomStats\r\n\t}\r\n\r\n\treturn () => ({})\r\n}\r\n","import { Contract, utils } from \"ethers\"\r\nimport { ADDR_ADX, FARM_POOLS, ZERO, MAX_UINT } from \"../helpers/constants\"\r\nimport ERC20ABI from \"../abi/ERC20\"\r\nimport MasterChefABI from \"../abi/MasterChef\"\r\nimport { getSigner, getDefaultProvider } from \"../ethereum\"\r\nimport { getUserIdentity } from \"../helpers/identity\"\r\nimport { executeOnIdentity } from \"./common\"\r\nimport { formatTokens, formatADX } from \"../helpers/formatting\"\r\nimport { TranslatableError } from \"../helpers/errors\"\r\n\r\n// const MASTER_CHEF_ADDR = \"0x2f0e755e0007E6569379a43E453F264b91336379\" // goerli\r\nconst MASTER_CHEF_ADDR = \"0xC0223ab23b519260AE7C52Dfb0a3dff65Da8385A\"\r\n// const AVG_ETH_BLOCK_TAME = 13.08\r\nconst DAYS_IN_YEAR = 365\r\n// const SECS_IN_YEAR = DAYS_IN_YEAR * 24 * 60 * 60\r\n// const TOTAL_FARM_ADX_REWARDS = 5_000_000\r\n// const DAYS_TO_DISTRIBUTE_REWARDS = 30\r\n\r\n// const AVG_BLOCKS_PER_YEAR = SECS_IN_YEAR / AVG_ETH_BLOCK_TAME\r\n\r\nconst defaultProvider = getDefaultProvider\r\n\r\nconst MasterChef = new Contract(\r\n\tMASTER_CHEF_ADDR,\r\n\tMasterChefABI,\r\n\tdefaultProvider\r\n)\r\n\r\nconst ADXToken = new Contract(ADDR_ADX, ERC20ABI, defaultProvider)\r\n\r\nconst getOtherTokenAndPoolPrice = (known, unknown) => {\r\n\tconst totalLPPrice =\r\n\t\t(parseFloat(utils.formatUnits(known.poolBalance, known.decimals)) /\r\n\t\t\tknown.weight) *\r\n\t\tknown.usdPrice\r\n\tconst unknownPrice =\r\n\t\t(totalLPPrice * unknown.weight) /\r\n\t\tparseFloat(utils.formatUnits(unknown.poolBalance, unknown.decimals))\r\n\r\n\treturn { unknownPrice, totalLPPrice }\r\n}\r\n\r\nconst getDepositLPTokenToADXValue = async ({ externalPrices }) => {\r\n\tif (!externalPrices || !externalPrices.USD) {\r\n\t\tthrow new Error(\"errors.cantCallLPPricesWithoutADXUSDValue\")\r\n\t}\r\n\r\n\tconst adxPrice = externalPrices.USD\r\n\r\n\tconst { allTokenContracts, allTokensInUSD } = FARM_POOLS.reduce(\r\n\t\t(data, { lpTokenData }) => {\r\n\t\t\tlpTokenData.forEach(token => {\r\n\t\t\t\tif (!data.allTokenContracts[token.token]) {\r\n\t\t\t\t\tdata.allTokenContracts[token.token] = new Contract(\r\n\t\t\t\t\t\ttoken.addr,\r\n\t\t\t\t\t\tERC20ABI,\r\n\t\t\t\t\t\tdefaultProvider\r\n\t\t\t\t\t)\r\n\t\t\t\t\tdata.allTokensInUSD[token.token] = null\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\treturn data\r\n\t\t},\r\n\t\t{ allTokenContracts: {}, allTokensInUSD: {} }\r\n\t)\r\n\r\n\tallTokensInUSD[\"ADX\"] = adxPrice\r\n\r\n\tconst poolDataMap = FARM_POOLS.map(\r\n\t\tasync ({ poolId, depositAssetName, depositAssetAddr, lpTokenData }) => {\r\n\t\t\treturn {\r\n\t\t\t\ttokenName: depositAssetName,\r\n\t\t\t\ttokenAddr: depositAssetAddr,\r\n\t\t\t\tlpTokenData: await Promise.all(\r\n\t\t\t\t\tlpTokenData.map(async ({ token, addr, weight }, index) => ({\r\n\t\t\t\t\t\tpoolId,\r\n\t\t\t\t\t\ttoken,\r\n\t\t\t\t\t\taddr,\r\n\t\t\t\t\t\tdecimals: await allTokenContracts[token].decimals(),\r\n\t\t\t\t\t\tpoolBalance: await allTokenContracts[token].balanceOf(\r\n\t\t\t\t\t\t\tdepositAssetAddr\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tusdPrice: allTokensInUSD[token] || null,\r\n\t\t\t\t\t\tweight\r\n\t\t\t\t\t}))\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t)\r\n\r\n\tconst poolDataWithBalances = await Promise.all(poolDataMap)\r\n\r\n\tconst maxIters = 1 + poolDataWithBalances.length * 2\r\n\tlet iters = 0\r\n\r\n\twhile (Object.values(allTokensInUSD).includes(null) && iters <= maxIters) {\r\n\t\tpoolDataWithBalances.map(poolData => {\r\n\t\t\tconst { lpTokenData } = poolData\r\n\t\t\tconst [t1, t2] = lpTokenData\r\n\r\n\t\t\tt1.usdPrice = t1.usdPrice || allTokensInUSD[t1.token]\r\n\t\t\tt2.usdPrice = t2.usdPrice || allTokensInUSD[t2.token]\r\n\r\n\t\t\tif (t1.usdPrice && !t2.usdPrice) {\r\n\t\t\t\tconst { unknownPrice, totalLPPrice } = getOtherTokenAndPoolPrice(t1, t2)\r\n\t\t\t\tpoolData.poolTotalPriceUSD = poolData.poolTotalPriceUSD || totalLPPrice\r\n\t\t\t\tt2.usdPrice = unknownPrice\r\n\t\t\t\tallTokensInUSD[t2.token] = t2.usdPrice\r\n\t\t\t} else if (!t1.usdPrice && t2.usdPrice) {\r\n\t\t\t\tconst { unknownPrice, totalLPPrice } = getOtherTokenAndPoolPrice(t2, t1)\r\n\t\t\t\tpoolData.poolTotalPriceUSD = poolData.poolTotalPriceUSD || totalLPPrice\r\n\t\t\t\tt1.usdPrice = unknownPrice\r\n\t\t\t\tallTokensInUSD[t1.token] = t1.usdPrice\r\n\t\t\t}\r\n\r\n\t\t\tpoolData.lpTokenData = [t1, t2]\r\n\r\n\t\t\treturn poolData\r\n\t\t})\r\n\r\n\t\titers += 1\r\n\t}\r\n\r\n\tif (Object.values(allTokensInUSD).includes(null)) {\r\n\t\tthrow new Error(\"errors.canCalcLPTokensPrices\")\r\n\t}\r\n\r\n\tconst lpTokensToADXData = poolDataWithBalances.reduce(\r\n\t\t(lpTokensToADX, data) => {\r\n\t\t\tconst { poolTotalPriceUSD, lpTokenData } = data\r\n\t\t\tlpTokensToADX[data.tokenName] = {\r\n\t\t\t\tpoolTotalPriceUSD,\r\n\t\t\t\tpoolTotalADXValue: utils.parseUnits(\r\n\t\t\t\t\t((data.poolTotalPriceUSD / adxPrice) * 1_000_000).toFixed(0),\r\n\t\t\t\t\t12\r\n\t\t\t\t),\r\n\t\t\t\tlpTokenData\r\n\t\t\t}\r\n\r\n\t\t\treturn lpTokensToADX\r\n\t\t},\r\n\t\t{}\r\n\t)\r\n\r\n\treturn lpTokensToADXData\r\n}\r\n\r\nconst getPoolStats = async ({\r\n\tpool,\r\n\twalletAddr,\r\n\tidentityAddr,\r\n\texternalPrices,\r\n\tpoolsPricesData\r\n}) => {\r\n\tconst depositTokenContract = new Contract(\r\n\t\tpool.depositAssetAddr,\r\n\t\tERC20ABI,\r\n\t\tdefaultProvider\r\n\t)\r\n\r\n\tconst [\r\n\t\ttotalSupply,\r\n\t\ttotalStaked,\r\n\t\twalletBalance,\r\n\t\tpendingADX,\r\n\t\tuserInfo,\r\n\t\tpoolInfo,\r\n\t\tadxPerBlock,\r\n\t\ttotalAllocPoint\r\n\t] = await Promise.all([\r\n\t\tdepositTokenContract.totalSupply(),\r\n\t\tdepositTokenContract.balanceOf(MasterChef.address),\r\n\t\twalletAddr ? depositTokenContract.balanceOf(walletAddr) : null,\r\n\t\tidentityAddr ? MasterChef.pendingADX(pool.poolId, identityAddr) : null,\r\n\t\tidentityAddr ? MasterChef.userInfo(pool.poolId, identityAddr) : null,\r\n\t\tMasterChef.poolInfo(pool.poolId),\r\n\t\tMasterChef.ADXPerBlock(),\r\n\t\tMasterChef.totalAllocPoint()\r\n\t])\r\n\tconst precision = 10_000_000\r\n\r\n\tconst userLPBalance = userInfo ? userInfo[0] : null\r\n\r\n\tconst useShare =\r\n\t\tuserLPBalance && totalStaked.gt(ZERO)\r\n\t\t\t? userLPBalance\r\n\t\t\t\t\t.mul(precision)\r\n\t\t\t\t\t.div(totalStaked)\r\n\t\t\t\t\t.toNumber() / precision\r\n\t\t\t: null\r\n\r\n\tconst poolAllocPoints = poolInfo[1].toNumber()\r\n\tconst totalStakedFloat = parseFloat(\r\n\t\tformatTokens(totalStaked, pool.depositAssetDecimals)\r\n\t)\r\n\r\n\tconst totalRewardsADX =\r\n\t\tparseFloat(\r\n\t\t\tformatADX(\r\n\t\t\t\tadxPerBlock.mul(parseInt(pool.latRewardBlock - pool.firstRewardBlock))\r\n\t\t\t)\r\n\t\t) *\r\n\t\t(poolAllocPoints / totalAllocPoint)\r\n\tconst totalPoolRewardsUSD = totalRewardsADX * externalPrices.USD\r\n\r\n\tconst lpTokenPrice =\r\n\t\tpoolsPricesData[pool.depositAssetName].poolTotalPriceUSD /\r\n\t\tparseFloat(formatTokens(totalSupply, pool.depositAssetDecimals))\r\n\r\n\tconst lpTokenStakedValueUSD = totalStakedFloat * lpTokenPrice\r\n\r\n\tconst rewardsDistributedPerMonthInUSD =\r\n\t\ttotalPoolRewardsUSD * (30 / pool.rewardsDurationDays)\r\n\r\n\tconst rewardsDistributedPerYearInUSD =\r\n\t\ttotalPoolRewardsUSD * (DAYS_IN_YEAR / pool.rewardsDurationDays)\r\n\r\n\tconst poolAPY = rewardsDistributedPerYearInUSD / (lpTokenStakedValueUSD || 1)\r\n\tconst poolMPY = rewardsDistributedPerMonthInUSD / (lpTokenStakedValueUSD || 1)\r\n\r\n\tconst lpTokenDataWithPrices = poolsPricesData[\r\n\t\tpool.depositAssetName\r\n\t].lpTokenData.map(data => {\r\n\t\tdata.unitsPerLP = data.usdPrice\r\n\t\t\t? (lpTokenPrice * data.weight) / data.usdPrice\r\n\t\t\t: null\r\n\t\treturn data\r\n\t})\r\n\r\n\treturn {\r\n\t\tpoolId: pool.poolId,\r\n\t\tlpTokenPrice,\r\n\t\tlpTokenDataWithPrices: lpTokenDataWithPrices,\r\n\t\ttotalSupply,\r\n\t\ttotalStaked,\r\n\t\tlpTokenStakedValueUSD,\r\n\t\twalletBalance,\r\n\t\tpendingADX,\r\n\t\tuserInfo,\r\n\t\tuserLPBalance,\r\n\t\tuseShare,\r\n\t\tpoolInfo,\r\n\t\tpoolAPY,\r\n\t\tpoolMPY\r\n\t}\r\n}\r\n\r\nexport const getFarmPoolsStats = async ({\r\n\tchosenWalletType,\r\n\texternalPrices\r\n}) => {\r\n\ttry {\r\n\t\tconst signer =\r\n\t\t\tchosenWalletType && chosenWalletType.library\r\n\t\t\t\t? await getSigner(chosenWalletType)\r\n\t\t\t\t: null\r\n\r\n\t\tconst walletAddr = signer ? await signer.getAddress() : null\r\n\t\tconst identityAddr = walletAddr ? getUserIdentity(walletAddr).addr : null\r\n\r\n\t\tconst poolsPricesData = await getDepositLPTokenToADXValue({\r\n\t\t\texternalPrices\r\n\t\t})\r\n\t\tconst poolsCalls = FARM_POOLS.map(pool =>\r\n\t\t\tgetPoolStats({\r\n\t\t\t\tpool,\r\n\t\t\t\twalletAddr,\r\n\t\t\t\tidentityAddr,\r\n\t\t\t\texternalPrices,\r\n\t\t\t\tpoolsPricesData\r\n\t\t\t})\r\n\t\t)\r\n\t\tconst allPoolStats = await Promise.all(poolsCalls)\r\n\r\n\t\tconst statsByPoolId = allPoolStats.reduce((byId, stats) => {\r\n\t\t\tbyId[stats.poolId] = stats\r\n\t\t\treturn byId\r\n\t\t}, {})\r\n\t\t// const blockNumber = await defaultProvider.getBlockNumber()\r\n\t\tconst totalRewards = [...Object.values(statsByPoolId)]\r\n\t\t\t.filter(x => !!x.pendingADX && x.pendingADX.gt(ZERO))\r\n\t\t\t.reduce((a, b) => a.add(b.pendingADX), ZERO)\r\n\r\n\t\treturn {\r\n\t\t\t// blockNumber,\r\n\t\t\tpollStatsLoaded: true,\r\n\t\t\tuserStatsLoaded: !!signer,\r\n\t\t\ttotalRewards,\r\n\t\t\tstatsByPoolId\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error(\"error getFarmPoolsStats\", error)\r\n\t\treturn {\r\n\t\t\tpollStatsLoaded: false,\r\n\t\t\tuserStatsLoaded: false,\r\n\t\t\ttotalRewards: ZERO,\r\n\t\t\tstatsByPoolId: {}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport async function onLiquidityPoolDeposit({\r\n\tpool,\r\n\tstats,\r\n\tchosenWalletType,\r\n\tactionAmount,\r\n\tpendingADX\r\n}) {\r\n\tif (!stats || !pool) throw new Error(\"errors.statsNotProvided\")\r\n\tif (!actionAmount) throw new Error(\"errors.noDepositAmount\")\r\n\tif (actionAmount.isZero())\r\n\t\tthrow new TranslatableError(\"errors.zeroDepositToken\", {\r\n\t\t\tcurrency: pool.depositAssetName\r\n\t\t})\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\r\n\tconst walletAddr = await signer.getAddress()\r\n\tconst identityAddr = getUserIdentity(walletAddr).addr\r\n\r\n\tconst LPToken = new Contract(\r\n\t\tpool.depositAssetAddr, // just for testing\r\n\t\tERC20ABI,\r\n\t\tdefaultProvider\r\n\t)\r\n\r\n\tconst [\r\n\t\tallowance,\r\n\t\tallowanceMC,\r\n\t\tbalanceOnWallet,\r\n\t\tbalanceOnIdentity,\r\n\t\tidentityCode\r\n\t] = await Promise.all([\r\n\t\tLPToken.allowance(walletAddr, identityAddr),\r\n\t\tLPToken.allowance(identityAddr, MASTER_CHEF_ADDR),\r\n\t\tLPToken.balanceOf(walletAddr),\r\n\t\tLPToken.balanceOf(identityAddr),\r\n\t\tdefaultProvider.getCode(identityAddr)\r\n\t])\r\n\r\n\tconst isDeployed = identityCode !== \"0x\"\r\n\r\n\tif (actionAmount.gt(balanceOnWallet)) {\r\n\t\tthrow new Error(\"errors.amountTooLarge\")\r\n\t}\r\n\r\n\tconst setAllowance = actionAmount.gt(ZERO) && !allowance.gte(actionAmount)\r\n\r\n\tconst needed = actionAmount.sub(balanceOnIdentity)\r\n\r\n\t// set allowance to identity\r\n\tif (setAllowance) {\r\n\t\tconst tokenWithSigner = LPToken.connect(signer)\r\n\t\tawait tokenWithSigner.approve(identityAddr, MAX_UINT)\r\n\t}\r\n\r\n\tlet identityTxns = []\r\n\r\n\tif (needed.gt(ZERO))\r\n\t\tidentityTxns.push([\r\n\t\t\tLPToken.address,\r\n\t\t\tLPToken.interface.encodeFunctionData(\"transferFrom\", [\r\n\t\t\t\twalletAddr,\r\n\t\t\t\tidentityAddr,\r\n\t\t\t\tneeded\r\n\t\t\t])\r\n\t\t])\r\n\r\n\tif (allowanceMC.lt(actionAmount)) {\r\n\t\tidentityTxns.push([\r\n\t\t\tLPToken.address,\r\n\t\t\tLPToken.interface.encodeFunctionData(\"approve\", [\r\n\t\t\t\tMASTER_CHEF_ADDR,\r\n\t\t\t\tMAX_UINT\r\n\t\t\t])\r\n\t\t])\r\n\t}\r\n\r\n\tidentityTxns.push([\r\n\t\tMasterChef.address,\r\n\t\tMasterChef.interface.encodeFunctionData(\"deposit\", [\r\n\t\t\tpool.poolId,\r\n\t\t\tactionAmount\r\n\t\t])\r\n\t])\r\n\r\n\tif (!!pendingADX && pendingADX.gt(ZERO)) {\r\n\t\tidentityTxns.push([\r\n\t\t\tADXToken.address,\r\n\t\t\tADXToken.interface.encodeFunctionData(\"transfer\", [\r\n\t\t\t\twalletAddr,\r\n\t\t\t\tpendingADX\r\n\t\t\t])\r\n\t\t])\r\n\t}\r\n\r\n\treturn executeOnIdentity(\r\n\t\tchosenWalletType,\r\n\t\tidentityTxns,\r\n\t\tsetAllowance ? { gasLimit: isDeployed ? 269_420 : 469_420 } : {}\r\n\t)\r\n}\r\n\r\nexport async function onLiquidityPoolWithdraw({\r\n\tpool,\r\n\tstats,\r\n\tchosenWalletType,\r\n\tactionAmount,\r\n\tpendingADX\r\n}) {\r\n\tif (!stats || !pool) throw new Error(\"errors.statsNotProvided\")\r\n\tif (!actionAmount) throw new Error(\"errors.noDepositAmount\")\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\r\n\tconst walletAddr = await signer.getAddress()\r\n\tconst identityAddr = getUserIdentity(walletAddr).addr\r\n\r\n\tconst LPToken = new Contract(pool.depositAssetAddr, ERC20ABI, defaultProvider)\r\n\r\n\tconst [userInfo] = await Promise.all([\r\n\t\tMasterChef.userInfo(pool.poolId, identityAddr)\r\n\t])\r\n\r\n\tconst userLPBalance = userInfo ? userInfo[0] : ZERO\r\n\r\n\tif (actionAmount.gt(userLPBalance)) {\r\n\t\tthrow new Error(\"errors.amountTooLarge\")\r\n\t}\r\n\r\n\tlet identityTxns = []\r\n\r\n\tidentityTxns.push([\r\n\t\tMasterChef.address,\r\n\t\tMasterChef.interface.encodeFunctionData(\"withdraw\", [\r\n\t\t\tpool.poolId,\r\n\t\t\tactionAmount\r\n\t\t])\r\n\t])\r\n\r\n\tidentityTxns.push([\r\n\t\tLPToken.address,\r\n\t\tLPToken.interface.encodeFunctionData(\"transfer\", [walletAddr, actionAmount])\r\n\t])\r\n\r\n\tif (!!pendingADX && pendingADX.gt(ZERO)) {\r\n\t\tidentityTxns.push([\r\n\t\t\tADXToken.address,\r\n\t\t\tADXToken.interface.encodeFunctionData(\"transfer\", [\r\n\t\t\t\twalletAddr,\r\n\t\t\t\tpendingADX\r\n\t\t\t])\r\n\t\t])\r\n\t}\r\n\r\n\treturn executeOnIdentity(chosenWalletType, identityTxns)\r\n}\r\n\r\nexport async function onHarvestAll({ farmStats, chosenWalletType }) {\r\n\tif (!farmStats) throw new Error(\"errors.statsNotProvided\")\r\n\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tif (!signer) throw new Error(\"errors.failedToGetSigner\")\r\n\r\n\tconst walletAddr = await signer.getAddress()\r\n\tconst identityAddr = getUserIdentity(walletAddr).addr\r\n\r\n\tconst { statsByPoolId, totalRewards } = farmStats\r\n\r\n\tconst poolsToHarvest = [...Object.values(statsByPoolId)].filter(\r\n\t\tpool => pool.pendingADX && pool.pendingADX.gt(ZERO)\r\n\t)\r\n\r\n\tif (!poolsToHarvest.length) {\r\n\t\tthrow new Error(\"errors.nothingToHarvest\")\r\n\t}\r\n\r\n\tconst totalADXRewards = poolsToHarvest.reduce(\r\n\t\t(a, b) => a.add(b.pendingADX),\r\n\t\tZERO\r\n\t)\r\n\r\n\tif (!totalRewards.eq(totalADXRewards)) {\r\n\t\tthrow new Error(\"errors.invalidTotalRewards\")\r\n\t}\r\n\r\n\tconst identityTxns = poolsToHarvest.reduce((txns, pool) => {\r\n\t\tconst { poolId } = pool\r\n\t\ttxns.push([\r\n\t\t\tMasterChef.address,\r\n\t\t\tMasterChef.interface.encodeFunctionData(\"withdraw\", [poolId, ZERO])\r\n\t\t])\r\n\r\n\t\treturn txns\r\n\t}, [])\r\n\r\n\tconst toHarvest = (await ADXToken.balanceOf(identityAddr)).add(\r\n\t\ttotalADXRewards\r\n\t)\r\n\tidentityTxns.push([\r\n\t\tADXToken.address,\r\n\t\tADXToken.interface.encodeFunctionData(\"transfer\", [walletAddr, toHarvest])\r\n\t])\r\n\r\n\treturn executeOnIdentity(chosenWalletType, identityTxns)\r\n}\r\n","import React from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport { Link } from \"@material-ui/core\"\r\nimport { OpenInNew } from \"@material-ui/icons\"\r\nimport clsx from \"clsx\"\r\n\r\nexport const styles = theme => ({\r\n\texternalIcon: {\r\n\t\tmarginLeft: theme.spacing(0.5),\r\n\t\tfontSize: \"small\"\r\n\t},\r\n\tlink: {\r\n\t\tdisplay: \"inline-flex\",\r\n\t\talignItems: \"center\"\r\n\t}\r\n})\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nconst getUrl = url => {\r\n\turl = (url || \"\").replace(/^(https?:)?\\/\\//i, \"\")\r\n\tif (url) {\r\n\t\turl = \"//\" + url\r\n\t}\r\n\r\n\treturn url\r\n}\r\n\r\nconst Anchor = ({\r\n\thref,\r\n\ttarget,\r\n\tchildren,\r\n\tlabel,\r\n\tunderline,\r\n\texternalIcon,\r\n\tcolor,\r\n\tcomponent,\r\n\tclassName,\r\n\tid,\r\n\t...rest\r\n}) => {\r\n\tconst classes = useStyles()\r\n\r\n\tconst isExternal = target && target === \"_blank\"\r\n\tconst url = isExternal ? getUrl(href) : href\r\n\r\n\tconst linkProps = {\r\n\t\tunderline: underline || \"none\",\r\n\t\tcolor: color || \"inherit\",\r\n\t\tdraggable: \"false\",\r\n\t\t...(isExternal && { rel: \"noopener noreferrer\" }),\r\n\t\ttarget,\r\n\t\thref: url,\r\n\t\tstyle: { wordBreak: \"break-all\" }, // TODO: add it where needed only\r\n\t\t...(component ? { component } : {}),\r\n\t\t...rest\r\n\t}\r\n\treturn (\r\n\t\t<Link {...linkProps} className={clsx(className, classes.link)}>\r\n\t\t\t{!component && (children || label)}\r\n\t\t\t{!component && externalIcon && (\r\n\t\t\t\t<OpenInNew className={classes.externalIcon} />\r\n\t\t\t)}\r\n\t\t</Link>\r\n\t)\r\n}\r\n\r\nexport const ExternalAnchor = ({ href, children, style, color, ...rest }) => (\r\n\t<Anchor\r\n\t\tstyle={{ fontWeight: \"bold\" }}\r\n\t\tunderline=\"always\"\r\n\t\ttarget=\"_blank\"\r\n\t\tcolor={color || \"secondary\"}\r\n\t\texternalIcon\r\n\t\thref={href}\r\n\t\t{...rest}\r\n\t>\r\n\t\t{children}\r\n\t</Anchor>\r\n)\r\n\r\nexport default Anchor\r\n","import React, { useEffect, useState, useContext } from \"react\"\r\nimport { useLocation } from \"react-router-dom\"\r\nimport { getPoolStatsByPoolId, onMigrationToV5Finalize } from \"../actions\"\r\nimport {\r\n\ttoIdAttributeString,\r\n\tformatADXPretty,\r\n\tformatDate\r\n} from \"../helpers/formatting\"\r\nimport { DEPOSIT_POOLS, STAKING_RULES_URL, ZERO } from \"../helpers/constants\"\r\nimport {\r\n\tGrid,\r\n\tTypography,\r\n\tButton,\r\n\tFormControl,\r\n\tFormControlLabel,\r\n\tCheckbox,\r\n\tBox\r\n} from \"@material-ui/core\"\r\nimport AppContext from \"../AppContext\"\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\nimport { ExternalAnchor } from \"./Anchor\"\r\nimport Tooltip from \"./Tooltip\"\r\nimport { AmountText } from \"./cardCommon\"\r\nimport { utils } from \"ethers\"\r\n\r\nconst activePool = DEPOSIT_POOLS[1]\r\n\r\nexport default function MigrationForm({\r\n\tcloseDialog,\r\n\tbond,\r\n\tisWithdrawMigration,\r\n\tpoolLabel,\r\n\tcreated\r\n}) {\r\n\tconst location = useLocation()\r\n\tconst { t } = useTranslation()\r\n\tconst { stats, chosenWalletType, account, wrapDoingTxns } = useContext(\r\n\t\tAppContext\r\n\t)\r\n\r\n\tconst {\r\n\t\tuserWalletBalance,\r\n\t\ttomPoolStats,\r\n\t\ttomStakingV5PoolStats,\r\n\t\tuserWalletToIdentityADXAllowance\r\n\t} = stats\r\n\tconst { identityAdxRewardsAmount } = tomPoolStats\r\n\tconst { unbondDays } = tomStakingV5PoolStats\r\n\r\n\tconst [claimPendingRewards, setClaimPendingRewards] = useState(true)\r\n\tconst [stakeWalletBalance, setStakeWalletBalance] = useState(false)\r\n\tconst [confirmEnterTo, setConfirmEnterTo] = useState(false)\r\n\tconst [enterTo, setEnterTo] = useState(null)\r\n\r\n\tconst [confirmed, setConfirmed] = useState(false)\r\n\r\n\tconst params = new URLSearchParams(location.search)\r\n\tconst enterToParam = params.get(\"enterTo\")\r\n\r\n\tconst [poolStats, setPoolStats] = useState({})\r\n\r\n\tconst withdrawOnMigration = isWithdrawMigration // TODO: double check this\r\n\r\n\tuseEffect(() => {\r\n\t\ttry {\r\n\t\t\tsetEnterTo(utils.getAddress(enterToParam))\r\n\t\t} catch {\r\n\t\t\tsetEnterTo(null)\r\n\t\t}\r\n\t}, [enterToParam])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst newPoolStats = getPoolStatsByPoolId(stats, activePool.id)\r\n\r\n\t\tsetPoolStats(newPoolStats)\r\n\t}, [stats])\r\n\r\n\tconst onAction = async () => {\r\n\t\tif (!bond) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetConfirmed(false)\r\n\t\tif (closeDialog) closeDialog()\r\n\r\n\t\tconst interactionAddress = enterTo && confirmEnterTo ? enterTo : null\r\n\r\n\t\tawait wrapDoingTxns(\r\n\t\t\tonMigrationToV5Finalize.bind(\r\n\t\t\t\tnull,\r\n\t\t\t\tchosenWalletType,\r\n\t\t\t\tbond,\r\n\t\t\t\tclaimPendingRewards,\r\n\t\t\t\tstakeWalletBalance,\r\n\t\t\t\twithdrawOnMigration,\r\n\t\t\t\tstats,\r\n\t\t\t\tinteractionAddress\r\n\t\t\t)\r\n\t\t)()\r\n\t}\r\n\r\n\tconst confirmationLabel = withdrawOnMigration ? (\r\n\t\t<Trans\r\n\t\t\ti18nKey=\"bonds.confirmationLabelMigrationWithdraw\"\r\n\t\t\tvalues={{\r\n\t\t\t\tamount: formatADXPretty(\r\n\t\t\t\t\tbond.amount.add(claimPendingRewards ? identityAdxRewardsAmount : ZERO)\r\n\t\t\t\t),\r\n\t\t\t\tcurrency: \"ADX\",\r\n\t\t\t\twalletAddr: account\r\n\t\t\t}}\r\n\t\t\tcomponents={{\r\n\t\t\t\tamount: <AmountText fontSize={21}></AmountText>\r\n\t\t\t}}\r\n\t\t/>\r\n\t) : (\r\n\t\t<Trans\r\n\t\t\ti18nKey=\"bonds.confirmationLabel\"\r\n\t\t\tvalues={{\r\n\t\t\t\tunbondDays,\r\n\t\t\t\ttotalBondAmount: formatADXPretty(\r\n\t\t\t\t\tbond.amount\r\n\t\t\t\t\t\t.add(bond.migrationReward || ZERO)\r\n\t\t\t\t\t\t.add(stakeWalletBalance ? userWalletBalance : ZERO)\r\n\t\t\t\t\t\t.add(claimPendingRewards ? identityAdxRewardsAmount : ZERO)\r\n\t\t\t\t),\r\n\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t}}\r\n\t\t\tcomponents={{\r\n\t\t\t\tamount: <AmountText fontSize={21}></AmountText>,\r\n\t\t\t\te1: (\r\n\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\tid=\"new-bond-form-adex-network-tos\"\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\thref=\"https://www.adex.network/tos/\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\t\te2: STAKING_RULES_URL ? (\r\n\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\tid=\"new-bond-form-adex-staking-rules\"\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\thref={STAKING_RULES_URL}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<></>\r\n\t\t\t\t)\r\n\t\t\t}}\r\n\t\t/>\r\n\t)\r\n\r\n\tconst disableMigrationMsg = !confirmed ? t(\"bonds.tosNotConfirmed\") : \"\"\r\n\r\n\treturn (\r\n\t\t<Box width={1}>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t<Typography variant=\"subtitle1\">\r\n\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\ti18nKey=\"bonds.bondInfo\"\r\n\t\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\t\tamount: formatADXPretty(bond.amount),\r\n\t\t\t\t\t\t\t\tcurrency: \"ADX\",\r\n\t\t\t\t\t\t\t\tpool: t(poolLabel),\r\n\t\t\t\t\t\t\t\tcreated: formatDate(created),\r\n\t\t\t\t\t\t\t\tmigrationBonus: withdrawOnMigration\r\n\t\t\t\t\t\t\t\t\t? t(\"common.NA\")\r\n\t\t\t\t\t\t\t\t\t: formatADXPretty(bond.migrationReward),\r\n\t\t\t\t\t\t\t\tmigrationBonusCurrency: withdrawOnMigration ? \"\" : \"ADX\"\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\tbox: <Box mt={0.5}></Box>,\r\n\t\t\t\t\t\t\t\tamount: <AmountText fontSize={17}></AmountText>\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\r\n\t\t\t\t{!withdrawOnMigration && (\r\n\t\t\t\t\t<Grid item xs={12} container spacing={2}>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t{t(\"common.poolRewardPolicy\")}:\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t{t(activePool.rewardPolicy)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t{t(\"common.poolSlashingPolicy\")}:\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t{t(activePool.slashPolicy)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t{t(\"deposits.lockupPeriodLabel\")}:\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t{t(\"deposits.lockupDays\", { count: unbondDays })}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">{t(\"common.poolAPY\")}:</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\t\ti18nKey=\"bonds.currentYield\"\r\n\t\t\t\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\t\t\t\tapy: (poolStats.currentAPY * 100).toFixed(2),\r\n\t\t\t\t\t\t\t\t\t\tsign: \"%\"\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\t\t\tfarmer: (\r\n\t\t\t\t\t\t\t\t\t\t\t<span role=\"img\" aria-label=\"farmer\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t🌾\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{!identityAdxRewardsAmount.isZero() && (\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\tstyle={{ userSelect: \"none\" }}\r\n\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\t\ti18nKey={`bonds.${\r\n\t\t\t\t\t\t\t\t\t\twithdrawOnMigration\r\n\t\t\t\t\t\t\t\t\t\t\t? \"migrationClaimPendingRewards\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"migrationStakePendingRewards\"\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\t\t\t\tamount: formatADXPretty(identityAdxRewardsAmount),\r\n\t\t\t\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\t\t\tamount: <AmountText fontSize={17}></AmountText>\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\tid={`new-migration-v5-form-claim-pending-rewards-check`}\r\n\t\t\t\t\t\t\t\t\tchecked={claimPendingRewards}\r\n\t\t\t\t\t\t\t\t\tonChange={ev => setClaimPendingRewards(ev.target.checked)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t></FormControlLabel>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{!withdrawOnMigration &&\r\n\t\t\t\t\t!userWalletBalance.isZero() &&\r\n\t\t\t\t\tuserWalletToIdentityADXAllowance.gt(userWalletBalance) && (\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\tstyle={{ userSelect: \"none\" }}\r\n\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\t\t\ti18nKey={\"bonds.stakeWalletBalance\"}\r\n\t\t\t\t\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\t\t\t\t\tamount: formatADXPretty(userWalletBalance),\r\n\t\t\t\t\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\t\t\t\tamount: <AmountText fontSize={17}></AmountText>\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tid={`new-migration-v5-form-stake-wallet-balance-check`}\r\n\t\t\t\t\t\t\t\t\t\tchecked={stakeWalletBalance}\r\n\t\t\t\t\t\t\t\t\t\tonChange={ev => setStakeWalletBalance(ev.target.checked)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t></FormControlLabel>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t{!!enterTo && (\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\tstyle={{ userSelect: \"none\" }}\r\n\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\t\ti18nKey={`bonds.${\r\n\t\t\t\t\t\t\t\t\t\twithdrawOnMigration\r\n\t\t\t\t\t\t\t\t\t\t\t? \"migrationEnterToUnbondWithdraw\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"migrationEnterTo\"\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\t\t\t\taddress: enterTo\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\tid={`new-migration-v5-enter-to-extra-field`}\r\n\t\t\t\t\t\t\t\t\tchecked={confirmEnterTo}\r\n\t\t\t\t\t\t\t\t\tonChange={ev => setConfirmEnterTo(ev.target.checked)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t></FormControlLabel>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* <Grid item xs={12}>\r\n\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\tstyle={{ userSelect: \"none\" }}\r\n\t\t\t\t\t\tlabel={t(\"bonds.stakeWalletBalance\", {\r\n\t\t\t\t\t\t\tamount: formatADXPretty(userWalletBalance),\r\n\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\tid={`new-migration-v5-form-stake-wallet-balance-check`}\r\n\t\t\t\t\t\t\t\tchecked={stakeWalletBalance}\r\n\t\t\t\t\t\t\t\tonChange={ev => setStakeWalletBalance(ev.target.checked)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t></FormControlLabel>\r\n\t\t\t\t</Grid> */}\r\n\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\tstyle={{ userSelect: \"none\" }}\r\n\t\t\t\t\t\tlabel={confirmationLabel}\r\n\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\tid={`new-migration-v5-form-tos-check`}\r\n\t\t\t\t\t\t\t\tchecked={confirmed}\r\n\t\t\t\t\t\t\t\tonChange={ev => setConfirmed(ev.target.checked)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t></FormControlLabel>\r\n\t\t\t\t</Grid>\r\n\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<Tooltip title={disableMigrationMsg}>\r\n\t\t\t\t\t\t<FormControl style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tid={`new-migration-to-v5-stake-btn-${toIdAttributeString(\r\n\t\t\t\t\t\t\t\t\tactivePool ? activePool.poolId : \"-not-selected\"\r\n\t\t\t\t\t\t\t\t)}`}\r\n\t\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\t\tdisabled={!!disableMigrationMsg}\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tonClick={onAction}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{withdrawOnMigration\r\n\t\t\t\t\t\t\t\t\t? t(\"bonds.unbondNow\")\r\n\t\t\t\t\t\t\t\t\t: t(\"bonds.migrateNow\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React from \"react\"\r\nimport {\r\n\tTableRow,\r\n\tTableCell,\r\n\tBox,\r\n\tTable,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTableBody\r\n} from \"@material-ui/core\"\r\nimport { Alert } from \"@material-ui/lab\"\r\nimport {\r\n\tUNBOND_DAYS,\r\n\tZERO,\r\n\tMIGRATION_UNBOND_BEFORE\r\n} from \"../helpers/constants\"\r\nimport { formatADXPretty, formatDate } from \"../helpers/formatting\"\r\nimport { AmountText } from \"./cardCommon\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { getPool, getBondId } from \"../helpers/bonds\"\r\n\r\nimport WithDialog from \"./WithDialog\"\r\nimport MigrationForm from \"./MigrationForm\"\r\n\r\nconst MigrationDialog = WithDialog(MigrationForm)\r\n\r\nexport default function Bonds({ stats }) {\r\n\tconst { t } = useTranslation()\r\n\t// Render all stats cards + bond table\r\n\tconst bondStatus = bond => {\r\n\t\tif (bond.status === \"UnbondRequested\") {\r\n\t\t\tconst willUnlock = bond.willUnlock.getTime()\r\n\t\t\tconst now = Date.now()\r\n\t\t\tif (willUnlock > now) {\r\n\t\t\t\tconst days = Math.ceil((willUnlock - now) / 86400000)\r\n\t\t\t\treturn t(\"bonds.canUnbondIn\", { count: days })\r\n\t\t\t} else {\r\n\t\t\t\treturn t(\"bonds.canUnbond\")\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (bond.status === \"Active\") {\r\n\t\t\treturn `Active, earning ${(stats.tomPoolStats.totalAPY * 100).toFixed(\r\n\t\t\t\t2\r\n\t\t\t)}% APY`\r\n\t\t}\r\n\t\treturn bond.status\r\n\t}\r\n\r\n\tconst renderBondRow = bond => {\r\n\t\tconst pool = getPool(bond.poolId)\r\n\t\tconst poolLabel = pool ? pool.label : bond.poolId\r\n\t\tconst created = new Date(\r\n\t\t\t(bond.nonce.gt(ZERO) ? bond.nonce : bond.time).toNumber() * 1000\r\n\t\t)\r\n\t\tconst bondId = getBondId(bond)\r\n\t\tconst isWithdrawMigration =\r\n\t\t\tbond.status === \"UnbondRequested\" &&\r\n\t\t\tbond.willUnlock &&\r\n\t\t\tbond.willUnlock.getTime() < MIGRATION_UNBOND_BEFORE\r\n\r\n\t\t// const unbondDisableMsg =\r\n\t\t// \tbond.status === \"Unbonded\"\r\n\t\t// \t\t? t(\"bonds.alreadyUnbonded\")\r\n\t\t// \t\t: !bond.willUnlock\r\n\t\t// \t\t\t? t(\"bonds.unbondNotReady\")\r\n\t\t// \t\t\t: bond.willUnlock.getTime() > Date.now()\r\n\t\t// \t\t\t\t? t(\"bonds.willUnlockIn\", {\r\n\t\t// \t\t\t\t\tunlockTime: new Date(bond.willUnlock.getTime()).toLocaleDateString()\r\n\t\t// \t\t\t\t})\r\n\t\t// \t\t\t\t: \"\"\r\n\r\n\t\t// const migrationDisableMsg = \"\"\r\n\t\t// bond.status === \"Migrated\"\r\n\t\t// \t? t(\"bonds.alreadyMigrated\")\r\n\t\t// \t: !bond.willUnlock\r\n\t\t// \t\t? t(\"bonds.migrationNotReady\")\r\n\t\t// \t\t: bond.willUnlock.getTime() > Date.now()\r\n\t\t// \t\t\t? t(\"bonds.willUnlockIn\", {\r\n\t\t// \t\t\t\tunlockTime: new Date(bond.willUnlock.getTime()).toLocaleDateString()\r\n\t\t// \t\t\t})\r\n\t\t// \t\t\t: \"\"\r\n\r\n\t\treturn (\r\n\t\t\t<TableRow key={bondId}>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t<AmountText\r\n\t\t\t\t\t\ttext={`${formatADXPretty(bond.currentAmount)} ${\"ADX\"}`}\r\n\t\t\t\t\t\tfontSize={17}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{t(poolLabel)}</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{formatDate(created)}</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{bondStatus(bond)}</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t{(bond.status === \"Active\" || bond.status === \"UnbondRequested\") && (\r\n\t\t\t\t\t\t<Box display=\"inline-block\" m={0.5}>\r\n\t\t\t\t\t\t\t<MigrationDialog\r\n\t\t\t\t\t\t\t\tid=\"staking-pool-tom-deposit-form\"\r\n\t\t\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\t\tisWithdrawMigration\r\n\t\t\t\t\t\t\t\t\t\t? t(\"bonds.unbond\")\r\n\t\t\t\t\t\t\t\t\t\t: t(\"bonds.requestMigrate\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbtnLabel={\r\n\t\t\t\t\t\t\t\t\tisWithdrawMigration\r\n\t\t\t\t\t\t\t\t\t\t? t(\"bonds.unbond\")\r\n\t\t\t\t\t\t\t\t\t\t: t(\"bonds.requestMigrate\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tbond={bond}\r\n\t\t\t\t\t\t\t\tpoolLabel={poolLabel}\r\n\t\t\t\t\t\t\t\tcreated={created}\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tisWithdrawMigration={isWithdrawMigration}\r\n\t\t\t\t\t\t\t\t// disabled={!!disabledDepositsMsg}\r\n\t\t\t\t\t\t\t\t// tooltipTitle={disabledDepositsMsg}\r\n\t\t\t\t\t\t\t\t// depositPool={DEPOSIT_POOLS[1].id}\r\n\t\t\t\t\t\t\t\t// actionType={DEPOSIT_ACTION_TYPES.deposit}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<TableContainer xs={12}>\r\n\t\t\t\t<Table aria-label=\"Bonds table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t<TableCell>{t(\"bonds.bondAmount\")}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"common.pool\")}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"common.created\")}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"common.status\")}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"common.actions\")}</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{[...(stats.userBonds || [])]\r\n\t\t\t\t\t\t\t.filter(x => x.status !== \"Unbonded\" && x.status !== \"Migrated\")\r\n\t\t\t\t\t\t\t.reverse()\r\n\t\t\t\t\t\t\t.map(renderBondRow)}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\r\n\t\t\t{!stats.loaded || stats.userBonds.length ? null : (\r\n\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t<Alert variant=\"filled\" severity=\"info\">\r\n\t\t\t\t\t\t{t(\"bonds.bondExplanationMsg\", { count: UNBOND_DAYS })}\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React from \"react\"\r\nimport { Box } from \"@material-ui/core\"\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\"\r\nimport { CardRow } from \"./cardCommon\"\r\n\r\nexport default function StatsCard({\r\n\tsize,\r\n\ttitle,\r\n\ttitleInfo,\r\n\tsubtitle,\r\n\tsubtitleInfo,\r\n\textra,\r\n\textraInfo,\r\n\tmoreExtra,\r\n\tmoreExtraInfo,\r\n\tloaded,\r\n\tactions,\r\n\tmultilineLinesAmounts,\r\n\tjustify\r\n}) {\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t{title && (\r\n\t\t\t\t<CardRow\r\n\t\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\t\tfontWeight={size === \"large\" ? \"fontWeightBold\" : \"fontWeightRegular\"}\r\n\t\t\t\t\tfontSize={size === \"large\" ? 18 : 15}\r\n\t\t\t\t\ttext={title}\r\n\t\t\t\t\tisAmountText\r\n\t\t\t\t\tinfoText={titleInfo}\r\n\t\t\t\t\tjustify={justify}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t{subtitle && (\r\n\t\t\t\t<CardRow\r\n\t\t\t\t\tcolor=\"special.main\"\r\n\t\t\t\t\tfontWeight={size === \"large\" ? \"fontWeightBold\" : \"fontWeightRegular\"}\r\n\t\t\t\t\tfontSize={size === \"large\" ? 21 : 17}\r\n\t\t\t\t\ttext={subtitle}\r\n\t\t\t\t\tisAmountText\r\n\t\t\t\t\tmultilineLinesAmounts={multilineLinesAmounts}\r\n\t\t\t\t\tinfoText={subtitleInfo}\r\n\t\t\t\t\tjustify={justify}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t{extra && (\r\n\t\t\t\t<CardRow\r\n\t\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\t\tfontWeight={size === \"large\" ? \"fontWeightBold\" : \"fontWeightRegular\"}\r\n\t\t\t\t\tfontSize={size === \"large\" ? 18 : 15}\r\n\t\t\t\t\ttext={extra}\r\n\t\t\t\t\tisAmountText\r\n\t\t\t\t\tinfoText={extraInfo}\r\n\t\t\t\t\tjustify={justify}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t{moreExtra && (\r\n\t\t\t\t<CardRow\r\n\t\t\t\t\tcolor=\"special.primary\"\r\n\t\t\t\t\tfontWeight={size === \"large\" ? \"fontWeightBold\" : \"fontWeightRegular\"}\r\n\t\t\t\t\tfontSize={size === \"large\" ? 18 : 15}\r\n\t\t\t\t\ttext={moreExtra}\r\n\t\t\t\t\tisAmountText\r\n\t\t\t\t\tinfoText={moreExtraInfo}\r\n\t\t\t\t\tjustify={justify}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t{actions || <></>}\r\n\r\n\t\t\t{!loaded ? <LinearProgress /> : <></>}\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\"\r\nimport {\r\n\tgetDepositPool,\r\n\tgetDepositActionByTypeAndPoolId,\r\n\tgetPoolStatsByPoolId,\r\n\tisValidNumberString,\r\n\tgetDepositActionMaxAmountByTypeAndPoolId,\r\n\tDEPOSIT_ACTION_TYPES\r\n} from \"../actions\"\r\nimport {\r\n\tparseADX,\r\n\tformatADX,\r\n\tformatADXPretty,\r\n\ttoIdAttributeString,\r\n\tformatDateTime\r\n} from \"../helpers/formatting\"\r\nimport { DEPOSIT_POOLS, STAKING_RULES_URL, ZERO } from \"../helpers/constants\"\r\nimport {\r\n\tGrid,\r\n\tTextField,\r\n\tTypography,\r\n\tButton,\r\n\tFormControl,\r\n\tInputLabel,\r\n\tSelect,\r\n\tMenuItem,\r\n\tFormControlLabel,\r\n\tCheckbox,\r\n\tBox,\r\n\tFormHelperText\r\n} from \"@material-ui/core\"\r\nimport Tooltip from \"./Tooltip\"\r\nimport AppContext from \"../AppContext\"\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\nimport StatsCard from \"./StatsCard\"\r\nimport { Alert } from \"@material-ui/lab\"\r\nimport { BigNumber } from \"ethers\"\r\nimport { ExternalAnchor } from \"./Anchor\"\r\nimport { AmountText } from \"./cardCommon\"\r\n\r\nexport default function DepositForm({\r\n\tdepositPool,\r\n\tcloseDialog,\r\n\tactionType = DEPOSIT_ACTION_TYPES.deposit\r\n}) {\r\n\tconst { t } = useTranslation()\r\n\tconst { stats, chosenWalletType, wrapDoingTxns } = useContext(AppContext)\r\n\r\n\tconst [actionAmount, setActionAmount] = useState(\"0.0\")\r\n\tconst [actionAmountBN, setActionAmountBN] = useState(BigNumber.from(\"0\"))\r\n\tconst [amountErr, setAmountErr] = useState(false)\r\n\tconst [amountErrText, setAmountErrText] = useState(\"\")\r\n\tconst [amountErrVals, setAmountErrVals] = useState({})\r\n\tconst [selectErr, setSelectErr] = useState(false)\r\n\tconst [selectErrText, setSelectErrText] = useState(\"\")\r\n\tconst [dirtyInputs, setDirtyInputs] = useState(false)\r\n\tconst [confirmation, setConfirmation] = useState(false)\r\n\tconst [rageConfirmed, setRageConfirmed] = useState(false)\r\n\tconst [rageOverAvailableConfirmed, setRageOverAvailableConfirmed] = useState(\r\n\t\tfalse\r\n\t)\r\n\tconst [activePool, setActivePool] = useState({})\r\n\tconst [unbondCommitment, setUnbondCommitment] = useState(null)\r\n\tconst [activeUnbondCommitments, setActiveUnbondCommitments] = useState(null)\r\n\tconst [maxAmount, setMaxAmount] = useState(ZERO)\r\n\tconst [maxAmountAvailableForRage, setMaxAmountAvailableForRage] = useState(\r\n\t\tZERO\r\n\t)\r\n\tconst [poolStats, setPoolStats] = useState({})\r\n\r\n\tuseEffect(() => {\r\n\t\tconst newActivePool = getDepositPool(depositPool || {})\r\n\t\tconst newPoolStats = newActivePool\r\n\t\t\t? getPoolStatsByPoolId(stats, newActivePool.id)\r\n\t\t\t: {}\r\n\t\tconst newMaxAmount = getDepositActionMaxAmountByTypeAndPoolId(\r\n\t\t\tactionType,\r\n\t\t\tnewActivePool.id,\r\n\t\t\tnewPoolStats,\r\n\t\t\tstats.userWalletBalance\r\n\t\t)\r\n\r\n\t\tconst newMaxAmountAvailable = getDepositActionMaxAmountByTypeAndPoolId(\r\n\t\t\tDEPOSIT_ACTION_TYPES.unbondCommitment,\r\n\t\t\tnewActivePool.id,\r\n\t\t\tnewPoolStats,\r\n\t\t\tstats.userWalletBalance\r\n\t\t)\r\n\r\n\t\tconst newActiveUnbondCommitments = newPoolStats.userLeaves\r\n\t\t\t? [...newPoolStats.userLeaves].filter(x => !x.withdrawTx)\r\n\t\t\t: null\r\n\r\n\t\tsetPoolStats(newPoolStats)\r\n\t\tsetActiveUnbondCommitments(newActiveUnbondCommitments)\r\n\t\tsetActivePool(newActivePool)\r\n\t\tsetMaxAmount(newMaxAmount)\r\n\t\tsetMaxAmountAvailableForRage(newMaxAmountAvailable)\r\n\t}, [actionType, depositPool, stats])\r\n\r\n\tconst onAction = async () => {\r\n\t\tif (!activePool) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetConfirmation(false)\r\n\t\tif (closeDialog) closeDialog()\r\n\r\n\t\tconst action = getDepositActionByTypeAndPoolId(actionType, activePool.id)\r\n\r\n\t\tawait wrapDoingTxns(\r\n\t\t\taction.bind(\r\n\t\t\t\tnull,\r\n\t\t\t\tstats,\r\n\t\t\t\tchosenWalletType,\r\n\t\t\t\tparseADX(actionAmount),\r\n\t\t\t\tunbondCommitment\r\n\t\t\t)\r\n\t\t)()\r\n\t}\r\n\r\n\tconst confirmationLabel =\r\n\t\tactionType === DEPOSIT_ACTION_TYPES.deposit ||\r\n\t\tactionType === DEPOSIT_ACTION_TYPES.unbondCommitment ? (\r\n\t\t\t<Trans\r\n\t\t\t\ti18nKey={`deposits.${\r\n\t\t\t\t\tactionType === DEPOSIT_ACTION_TYPES.deposit\r\n\t\t\t\t\t\t? \"depositConfirmationLabel\"\r\n\t\t\t\t\t\t: \"unbondConfirmationLabel\"\r\n\t\t\t\t}`}\r\n\t\t\t\tvalues={{\r\n\t\t\t\t\tunbondDays: poolStats.unbondDays,\r\n\t\t\t\t\tamount: actionAmount,\r\n\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t}}\r\n\t\t\t\tcomponents={{\r\n\t\t\t\t\tamount: <AmountText fontSize={21}></AmountText>,\r\n\t\t\t\t\te1: (\r\n\t\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\t\tid=\"new-deposit-form-adex-network-tos\"\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\thref=\"https://www.adex.network/tos/\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t),\r\n\t\t\t\t\te2: STAKING_RULES_URL ? (\r\n\t\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\t\tid=\"new-bond-form-adex-staking-rules\"\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\thref={STAKING_RULES_URL}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<></>\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t) : null\r\n\r\n\tconst rageLeaveConfirmed =\r\n\t\tactionType !== DEPOSIT_ACTION_TYPES.rageLeave ||\r\n\t\t(actionAmountBN.gt(maxAmountAvailableForRage)\r\n\t\t\t? rageConfirmed && rageOverAvailableConfirmed\r\n\t\t\t: rageConfirmed)\r\n\t// rageConfirmed || actionType !== DEPOSIT_ACTION_TYPES.rageLeave\r\n\r\n\tconst confirmed = (!confirmationLabel || confirmation) && rageLeaveConfirmed\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAmountErr(false)\r\n\t\tsetSelectErr(false)\r\n\t\tsetAmountErrText(\"\")\r\n\t\tsetAmountErrVals({})\r\n\r\n\t\tif (\r\n\t\t\tactionType === DEPOSIT_ACTION_TYPES.withdraw &&\r\n\t\t\tactivePool.id === DEPOSIT_POOLS[1].id &&\r\n\t\t\t!unbondCommitment\r\n\t\t) {\r\n\t\t\tsetAmountErr(false)\r\n\t\t\tsetAmountErrText(\"\")\r\n\r\n\t\t\tsetSelectErr(true)\r\n\t\t\tsetSelectErrText(\"errors.unbondCommitmentNotSelected\")\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tactionType === DEPOSIT_ACTION_TYPES.withdraw &&\r\n\t\t\tactivePool.id === DEPOSIT_POOLS[1].id &&\r\n\t\t\tunbondCommitment\r\n\t\t) {\r\n\t\t\tsetSelectErr(false)\r\n\t\t\tsetSelectErrText(\"\")\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (!isValidNumberString(actionAmount)) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(\"errors.invalidAmountInput\")\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst amountInputSplit = actionAmount.split(\".\")\r\n\r\n\t\tif (amountInputSplit[1] && amountInputSplit[1].length > 18) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(\"errors.invalidDecimals\")\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst amountWithMaxDecimalsVal = `${\r\n\t\t\tamountInputSplit[0]\r\n\t\t}${(amountInputSplit[1] !== undefined\r\n\t\t\t? `.${amountInputSplit[1]}`\r\n\t\t\t: \"\"\r\n\t\t).substr(0, 19)}`\r\n\r\n\t\tconst amountBN = parseADX(amountWithMaxDecimalsVal)\r\n\r\n\t\tsetActionAmountBN(amountBN)\r\n\t\tsetActionAmount(amountWithMaxDecimalsVal)\r\n\r\n\t\tconst minStakingAmountBN = activePool\r\n\t\t\t? parseADX(activePool.minStakingAmount || \"0\")\r\n\t\t\t: ZERO\r\n\t\tif (amountBN.gt(maxAmount)) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(\"errors.lowADXAmount\")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (activePool && amountBN.lte(minStakingAmountBN)) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(\"errors.lessThanMinPoolADX\")\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tactionType === DEPOSIT_ACTION_TYPES.deposit &&\r\n\t\t\tpoolStats &&\r\n\t\t\tpoolStats.poolTotalStaked &&\r\n\t\t\tpoolStats.poolDepositsLimit &&\r\n\t\t\tamountBN.add(poolStats.poolTotalStaked).gt(poolStats.poolDepositsLimit)\r\n\t\t) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(\"errors.amountOverPoolLimit\")\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tactionType === DEPOSIT_ACTION_TYPES.deposit &&\r\n\t\t\tpoolStats &&\r\n\t\t\tactivePool.id === DEPOSIT_POOLS[1].id &&\r\n\t\t\tamountBN.add(poolStats.currentBalanceADX).gt(activePool.userDepositsLimit)\r\n\t\t) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(\"errors.poolMaxDepositReached\")\r\n\t\t\tsetAmountErrVals({\r\n\t\t\t\tcurrentDeposited: formatADXPretty(poolStats.currentBalanceADX),\r\n\t\t\t\tdepositAmount: formatADXPretty(amountBN),\r\n\t\t\t\tuserDepositsLimit: formatADXPretty(\r\n\t\t\t\t\tBigNumber.from(activePool.userDepositsLimit)\r\n\t\t\t\t),\r\n\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t})\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\t}, [\r\n\t\tactionAmount,\r\n\t\tactionType,\r\n\t\tactivePool,\r\n\t\tmaxAmount,\r\n\t\tpoolStats,\r\n\t\tunbondCommitment\r\n\t])\r\n\r\n\tconst onAmountChange = amountStr => {\r\n\t\tsetActionAmount(amountStr)\r\n\t\tsetDirtyInputs(true)\r\n\t}\r\n\r\n\tconst onUnbondCommitmentChange = ev => {\r\n\t\tsetUnbondCommitment(ev.target.value)\r\n\t\tsetDirtyInputs(true)\r\n\t}\r\n\r\n\tconst getActionBtnText = () => {\r\n\t\tswitch (actionType) {\r\n\t\t\tcase DEPOSIT_ACTION_TYPES.deposit:\r\n\t\t\t\treturn t(\"common.depositCurrency\", { currency: \"ADX\" })\r\n\t\t\tcase DEPOSIT_ACTION_TYPES.withdraw:\r\n\t\t\t\treturn t(\"common.withdrawCurrency\", { currency: \"ADX\" })\r\n\t\t\tcase DEPOSIT_ACTION_TYPES.unbondCommitment:\r\n\t\t\t\treturn t(\"deposits.makeUnbondCommitment\")\r\n\t\t\tcase DEPOSIT_ACTION_TYPES.rageLeave:\r\n\t\t\t\treturn t(\"deposits.rageLeave\")\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"Do it now\"\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box width={1}>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t{actionType === DEPOSIT_ACTION_TYPES.withdraw &&\r\n\t\t\t\tactiveUnbondCommitments ? (\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<FormControl fullWidth required>\r\n\t\t\t\t\t\t\t<InputLabel>\r\n\t\t\t\t\t\t\t\t{t(\"deposits.selectUnbondCommitmentToWithdraw\")}\r\n\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tid={`new-${actionType}-unbond-commitment-withdraw-select`}\r\n\t\t\t\t\t\t\t\tvalue={unbondCommitment || \"\"}\r\n\t\t\t\t\t\t\t\tonChange={onUnbondCommitmentChange}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<MenuItem value={\"\"}>\r\n\t\t\t\t\t\t\t\t\t<em>{t(\"common.none\")}</em>\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t{activeUnbondCommitments.map(uc => {\r\n\t\t\t\t\t\t\t\t\tconst disabled = !uc.canWithdraw\r\n\t\t\t\t\t\t\t\t\tconst unlocksAt = uc.unlocksAt.toNumber()\r\n\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\t\t\t\t\t\tid={`new-${actionType}-form-values-${unlocksAt}`}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={unlocksAt}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={uc}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Box px={1}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{StatsCard({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tloaded: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: `${t(\"deposits.unlocksAt\")} ${formatDateTime(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tMath.ceil(unlocksAt * 1000)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsubtitle: `value ${formatADXPretty(uc.adxValue)} ADX`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\textra: uc.canWithdraw\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: !!uc.withdrawTx\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? t(\"deposits.alreadyWithdrawn\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: t(\"deposits.notUnlockedYet\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t<FormHelperText>\r\n\t\t\t\t\t\t\t\t{t(\"deposits.selectUnbondCommitmentToWithdrawInfo\")}\r\n\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tid={`new-${actionType}-form-amount-field`}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tlabel={t(\"common.labelADXAmount\")}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tvalue={actionAmount}\r\n\t\t\t\t\t\t\terror={dirtyInputs && amountErr}\r\n\t\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t\tonAmountChange(ev.target.value)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\thelperText={t(\r\n\t\t\t\t\t\t\t\tdirtyInputs && amountErr ? amountErrText : \"\",\r\n\t\t\t\t\t\t\t\tamountErrVals\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Box mt={1}>\r\n\t\t\t\t\t\t\t{actionType === DEPOSIT_ACTION_TYPES.rageLeave &&\r\n\t\t\t\t\t\t\t\tmaxAmountAvailableForRage.lt(maxAmount) && (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\tid={`new-${actionType}-form-available-only-amount-btn`}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tonAmountChange(formatADX(maxAmountAvailableForRage))\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{t(\"common.maxAmountBtnRageOver\", {\r\n\t\t\t\t\t\t\t\t\t\t\tamount: formatADXPretty(maxAmountAvailableForRage),\r\n\t\t\t\t\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tid={`new-${actionType}-form-max-amount-btn`}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tonAmountChange(formatADX(maxAmount))\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t(\"common.maxAmountBtn\", {\r\n\t\t\t\t\t\t\t\t\tamount: formatADXPretty(maxAmount),\r\n\t\t\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{/* \r\n\t\t\t\t\t\tmaxAmountAvailableForRage */}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{actionType === DEPOSIT_ACTION_TYPES.rageLeave && (\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Alert severity=\"warning\">\r\n\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\tstyle={{ userSelect: \"none\" }}\r\n\t\t\t\t\t\t\t\tlabel={t(\"deposits.rageLeaveWarning\", {\r\n\t\t\t\t\t\t\t\t\tlockupPeriod: poolStats.unbondDays,\r\n\t\t\t\t\t\t\t\t\tpercent: (poolStats.rageReceivedPromilles / 10).toFixed(2),\r\n\t\t\t\t\t\t\t\t\ttoken: \"ADX\"\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tid={`new-${actionType}-tos-check`}\r\n\t\t\t\t\t\t\t\t\t\tchecked={rageConfirmed}\r\n\t\t\t\t\t\t\t\t\t\tonChange={ev => setRageConfirmed(ev.target.checked)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t></FormControlLabel>\r\n\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{actionType === DEPOSIT_ACTION_TYPES.rageLeave &&\r\n\t\t\t\t\tactionAmountBN.gt(maxAmountAvailableForRage) && (\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Alert severity=\"warning\">\r\n\t\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\t\tstyle={{ userSelect: \"none\" }}\r\n\t\t\t\t\t\t\t\t\tlabel={t(\"deposits.rageLeaveWarningOverAvailable\", {\r\n\t\t\t\t\t\t\t\t\t\tavailable: formatADXPretty(maxAmountAvailableForRage),\r\n\t\t\t\t\t\t\t\t\t\tpercent: (poolStats.rageReceivedPromilles / 10).toFixed(2),\r\n\t\t\t\t\t\t\t\t\t\t// total: (poolStats.rageReceivedPromilles / 10).toFixed(2),\r\n\t\t\t\t\t\t\t\t\t\ttoken: \"ADX\"\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\tid={`new-${actionType}-tos-check`}\r\n\t\t\t\t\t\t\t\t\t\t\tchecked={rageOverAvailableConfirmed}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={ev =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetRageOverAvailableConfirmed(ev.target.checked)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t></FormControlLabel>\r\n\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t{activePool && (\r\n\t\t\t\t\t<Grid item xs={12} container spacing={2}>\r\n\t\t\t\t\t\t{actionType === DEPOSIT_ACTION_TYPES.deposit && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t\t\t{t(\"common.poolRewardPolicy\")}:\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t\t\t{t(activePool.rewardPolicy)}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t\t\t{t(\"common.poolSlashingPolicy\")}:\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t\t\t{t(activePool.slashPolicy)}\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"h6\">{t(\"common.poolAPY\")}:</Typography>\r\n\t\t\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\t\t\t\ti18nKey=\"bonds.currentYield\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tapy: (poolStats.currentAPY * 100).toFixed(2),\r\n\t\t\t\t\t\t\t\t\t\t\t\tsign: \"%\"\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tfarmer: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span role=\"img\" aria-label=\"farmer\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t🌾\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{(actionType === DEPOSIT_ACTION_TYPES.deposit ||\r\n\t\t\t\t\t\t\tactionType === DEPOSIT_ACTION_TYPES.unbondCommitment) && (\r\n\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t\t{t(\"deposits.lockupPeriodLabel\")}:\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t\t{t(\"deposits.lockupDays\", { count: poolStats.unbondDays })}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{confirmationLabel && (\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\tstyle={{ userSelect: \"none\" }}\r\n\t\t\t\t\t\t\tlabel={confirmationLabel}\r\n\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\tid={`new-${actionType}-form-tos-check`}\r\n\t\t\t\t\t\t\t\t\tchecked={confirmation}\r\n\t\t\t\t\t\t\t\t\tonChange={ev => setConfirmation(ev.target.checked)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t></FormControlLabel>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<Tooltip title={t(amountErrText || selectErrText || \"\")}>\r\n\t\t\t\t\t\t<FormControl style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tid={`new-${actionType}-stake-btn-${toIdAttributeString(\r\n\t\t\t\t\t\t\t\t\tactivePool ? activePool.poolId || actionType : \"-not-selected\"\r\n\t\t\t\t\t\t\t\t)}`}\r\n\t\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t!confirmed || !!amountErr || !activePool || !!selectErr\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tonClick={onAction}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{getActionBtnText()}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport {\r\n\tTableRow,\r\n\tTableCell,\r\n\tBox,\r\n\tTable,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTableBody,\r\n\tSvgIcon\r\n} from \"@material-ui/core\"\r\nimport { Alert } from \"@material-ui/lab\"\r\nimport { DEPOSIT_POOLS, iconByPoolId } from \"../helpers/constants\"\r\nimport { formatADXPretty } from \"../helpers/formatting\"\r\nimport AppContext from \"../AppContext\"\r\nimport WithDialog from \"./WithDialog\"\r\nimport DepositForm from \"./DepositForm\"\r\nimport { AmountText } from \"./cardCommon\"\r\nimport { DEPOSIT_ACTION_TYPES } from \"../actions\"\r\n\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nconst DepositsDialog = WithDialog(DepositForm)\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\ticonBox: {\r\n\t\t\tborderRadius: \"100%\",\r\n\t\t\twidth: 42,\r\n\t\t\theight: 42,\r\n\t\t\tbackgroundColor: theme.palette.common.white,\r\n\t\t\tcolor: theme.palette.common.black,\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\"\r\n\t\t}\r\n\t}\r\n})\r\n\r\nconst getStakingPool = ({\r\n\tt,\r\n\tstats,\r\n\tdisabledDepositsMsg,\r\n\tdisabledWithdrawsMsg,\r\n\tdisableActionsMsg,\r\n\thasExternalStakingTokenTransfers\r\n}) => {\r\n\tconst { tomStakingV5PoolStats } = stats\r\n\r\n\treturn {\r\n\t\tpoolId: \"adex-staking-pool\",\r\n\t\tlabel: t(\"common.tomStakingPool\"),\r\n\t\tcurrentAPY: tomStakingV5PoolStats.currentAPY,\r\n\t\tbalance: (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<AmountText\r\n\t\t\t\t\t\ttext={`${formatADXPretty(\r\n\t\t\t\t\t\t\ttomStakingV5PoolStats.currentBalanceADXAvailable\r\n\t\t\t\t\t\t)} ${\"ADX\"}`}\r\n\t\t\t\t\t\tfontSize={17}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{hasExternalStakingTokenTransfers && \" *\"}\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t{/* <AmountText\r\n\t\t\t\t\t\ttext={`(=${formatADXPretty(\r\n\t\t\t\t\t\t\ttomStakingV5PoolStats.balanceShares\r\n\t\t\t\t\t\t)} ${\"shares\"})`}\r\n\t\t\t\t\t\tfontSize={17}\r\n\t\t\t\t\t/> */}\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t{`(${t(\"deposits.poolShare\")}: ${(\r\n\t\t\t\t\t\t\ttomStakingV5PoolStats.userShare * 100\r\n\t\t\t\t\t\t).toFixed(4)}%)`}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Fragment>\r\n\t\t),\r\n\t\tallTimeReward: (\r\n\t\t\t<Box>\r\n\t\t\t\t<AmountText\r\n\t\t\t\t\ttext={`${formatADXPretty(\r\n\t\t\t\t\t\ttomStakingV5PoolStats.totalRewards\r\n\t\t\t\t\t)} ${\"ADX\"}`}\r\n\t\t\t\t\tfontSize={17}\r\n\t\t\t\t/>\r\n\t\t\t\t{hasExternalStakingTokenTransfers && \" *\"}\r\n\t\t\t</Box>\r\n\t\t),\r\n\t\tdepositsADXTotal: (\r\n\t\t\t<Box>\r\n\t\t\t\t<AmountText\r\n\t\t\t\t\ttext={`${formatADXPretty(\r\n\t\t\t\t\t\ttomStakingV5PoolStats.depositsADXTotal\r\n\t\t\t\t\t)} ${\"ADX\"}`}\r\n\t\t\t\t\tfontSize={17}\r\n\t\t\t\t/>\r\n\t\t\t\t{hasExternalStakingTokenTransfers && \" *\"}\r\n\t\t\t</Box>\r\n\t\t),\r\n\t\tpendingToUnlockTotalADX: (\r\n\t\t\t<AmountText\r\n\t\t\t\ttext={`${formatADXPretty(\r\n\t\t\t\t\ttomStakingV5PoolStats.leavesPendingToUnlockTotalADX\r\n\t\t\t\t)} ${\"ADX\"}`}\r\n\t\t\t\tfontSize={17}\r\n\t\t\t/>\r\n\t\t),\r\n\t\twithdrawsADXTotal: (\r\n\t\t\t<Box>\r\n\t\t\t\t<AmountText\r\n\t\t\t\t\ttext={`${formatADXPretty(\r\n\t\t\t\t\t\ttomStakingV5PoolStats.withdrawsADXTotal\r\n\t\t\t\t\t)} ${\"ADX\"}`}\r\n\t\t\t\t\tfontSize={17}\r\n\t\t\t\t/>\r\n\t\t\t\t{hasExternalStakingTokenTransfers && \" *\"}\r\n\t\t\t</Box>\r\n\t\t),\r\n\t\treadyToWithdrawTotalADX: (\r\n\t\t\t<AmountText\r\n\t\t\t\ttext={`${formatADXPretty(\r\n\t\t\t\t\ttomStakingV5PoolStats.leavesReadyToWithdrawTotalADX\r\n\t\t\t\t)} ${\"ADX\"}`}\r\n\t\t\t\tfontSize={17}\r\n\t\t\t/>\r\n\t\t),\r\n\t\tactions: [\r\n\t\t\t<DepositsDialog\r\n\t\t\t\tid=\"staking-pool-tom-deposit-form\"\r\n\t\t\t\ttitle={t(\"deposits.depositTo\", { pool: t(\"common.tomStakingPool\") })}\r\n\t\t\t\tbtnLabel={t(\"common.deposit\")}\r\n\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tdisabled={!!disabledDepositsMsg}\r\n\t\t\t\ttooltipTitle={disabledDepositsMsg}\r\n\t\t\t\tdepositPool={DEPOSIT_POOLS[1].id}\r\n\t\t\t\tactionType={DEPOSIT_ACTION_TYPES.deposit}\r\n\t\t\t/>,\r\n\t\t\t<DepositsDialog\r\n\t\t\t\tid=\"staking-pool-tom-leave-form\"\r\n\t\t\t\ttitle={t(\"deposits.unbondCommitmentFrom\", {\r\n\t\t\t\t\tpool: t(\"common.tomStakingPool\")\r\n\t\t\t\t})}\r\n\t\t\t\tbtnLabel={t(\"common.unbond\")}\r\n\t\t\t\tcolor=\"default\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tdisabled={!!disableActionsMsg}\r\n\t\t\t\tdepositPool={DEPOSIT_POOLS[1].id}\r\n\t\t\t\ttooltipTitle={disableActionsMsg}\r\n\t\t\t\tactionType={DEPOSIT_ACTION_TYPES.unbondCommitment}\r\n\t\t\t/>,\r\n\t\t\t<DepositsDialog\r\n\t\t\t\tid=\"staking-pool-tom-withdraw-form\"\r\n\t\t\t\ttitle={t(\"deposits.withdrawFrom\", { pool: t(\"common.tomStakingPool\") })}\r\n\t\t\t\tbtnLabel={t(\"common.withdraw\")}\r\n\t\t\t\tcolor=\"default\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tdisabled={!!disabledWithdrawsMsg}\r\n\t\t\t\tdepositPool={DEPOSIT_POOLS[1].id}\r\n\t\t\t\ttooltipTitle={disabledWithdrawsMsg}\r\n\t\t\t\tactionType={DEPOSIT_ACTION_TYPES.withdraw}\r\n\t\t\t/>,\r\n\t\t\t<DepositsDialog\r\n\t\t\t\tid=\"staking-pool-tom-rage-leave-form\"\r\n\t\t\t\ttitle={t(\"deposits.rageLeaveFrom\", {\r\n\t\t\t\t\tpool: t(\"common.tomStakingPool\")\r\n\t\t\t\t})}\r\n\t\t\t\tbtnLabel={t(\"deposits.rageLeave\")}\r\n\t\t\t\tcolor=\"default\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tdisabled={!!disableActionsMsg}\r\n\t\t\t\tdepositPool={DEPOSIT_POOLS[1].id}\r\n\t\t\t\ttooltipTitle={disableActionsMsg}\r\n\t\t\t\tactionType={DEPOSIT_ACTION_TYPES.rageLeave}\r\n\t\t\t/>\r\n\t\t]\r\n\t}\r\n}\r\n\r\nconst getLoyaltyPoolDeposit = ({\r\n\tt,\r\n\tstats,\r\n\tdisabledDepositsMsg,\r\n\tdisabledWithdrawsMsg,\r\n\thasExternalStakingTokenTransfers\r\n}) => {\r\n\tconst { loyaltyPoolStats } = stats\r\n\treturn {\r\n\t\tpoolId: \"adex-loyalty-pool\",\r\n\t\tlabel: t(\"common.loPo\"),\r\n\t\tcurrentAPY: loyaltyPoolStats.currentAPY,\r\n\t\tbalance: (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<AmountText\r\n\t\t\t\t\t\ttext={`${formatADXPretty(loyaltyPoolStats.balanceLpADX)} ${\"ADX\"}`}\r\n\t\t\t\t\t\tfontSize={17}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{hasExternalStakingTokenTransfers && \" *\"}\r\n\t\t\t\t</Box>\r\n\t\t\t\t{\r\n\t\t\t\t\t<Box>{`(${t(\"deposits.poolShare\")}: ${(\r\n\t\t\t\t\t\tloyaltyPoolStats.userShare * 100\r\n\t\t\t\t\t).toFixed(4)}%)`}</Box>\r\n\t\t\t\t}\r\n\t\t\t</Fragment>\r\n\t\t),\r\n\t\tallTimeReward: loyaltyPoolStats.totalRewards ? (\r\n\t\t\t<Box>\r\n\t\t\t\t<AmountText\r\n\t\t\t\t\ttext={`${formatADXPretty(loyaltyPoolStats.totalRewards)} ${\"ADX\"}`}\r\n\t\t\t\t\tfontSize={17}\r\n\t\t\t\t/>\r\n\t\t\t\t{hasExternalStakingTokenTransfers && \" *\"}\r\n\t\t\t</Box>\r\n\t\t) : (\r\n\t\t\tt(\"common.unknown\")\r\n\t\t),\r\n\t\tdepositsADXTotal: loyaltyPoolStats.totalDeposits ? (\r\n\t\t\t<Box>\r\n\t\t\t\t<AmountText\r\n\t\t\t\t\ttext={`${formatADXPretty(loyaltyPoolStats.totalDeposits)} ${\"ADX\"}`}\r\n\t\t\t\t\tfontSize={17}\r\n\t\t\t\t/>\r\n\t\t\t\t{hasExternalStakingTokenTransfers && \" *\"}\r\n\t\t\t</Box>\r\n\t\t) : (\r\n\t\t\tt(\"common.unknown\")\r\n\t\t),\r\n\t\tpendingToUnlockTotalADX: t(\"common.NA\"),\r\n\t\treadyToWithdrawTotalADX: t(\"common.NA\"),\r\n\t\twithdrawsADXTotal: loyaltyPoolStats.totalWithdraws ? (\r\n\t\t\t<Box>\r\n\t\t\t\t<AmountText\r\n\t\t\t\t\ttext={`${formatADXPretty(loyaltyPoolStats.totalWithdraws)} ${\"ADX\"}`}\r\n\t\t\t\t\tfontSize={17}\r\n\t\t\t\t/>\r\n\t\t\t\t{hasExternalStakingTokenTransfers && \" *\"}\r\n\t\t\t</Box>\r\n\t\t) : (\r\n\t\t\tt(\"common.unknown\")\r\n\t\t),\r\n\t\tactions: [\r\n\t\t\t<DepositsDialog\r\n\t\t\t\tid=\"loyalty-pool-deposit-form\"\r\n\t\t\t\ttitle={t(\"deposits.depositTo\", { pool: t(\"common.loPo\") })}\r\n\t\t\t\tbtnLabel={t(\"common.deposit\")}\r\n\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tdisabled={!!disabledDepositsMsg}\r\n\t\t\t\ttooltipTitle={disabledDepositsMsg}\r\n\t\t\t\tdepositPool={DEPOSIT_POOLS[0].id}\r\n\t\t\t\tactionType={DEPOSIT_ACTION_TYPES.deposit}\r\n\t\t\t/>,\r\n\t\t\t<DepositsDialog\r\n\t\t\t\tid=\"loyalty-pool-withdraw-form\"\r\n\t\t\t\ttitle={t(\"deposits.withdrawFrom\", { pool: t(\"common.loPo\") })}\r\n\t\t\t\tbtnLabel={t(\"common.withdraw\")}\r\n\t\t\t\tcolor=\"default\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tdisabled={!!disabledWithdrawsMsg}\r\n\t\t\t\tdepositPool={DEPOSIT_POOLS[0].id}\r\n\t\t\t\ttooltipTitle={disabledWithdrawsMsg}\r\n\t\t\t\tactionType={DEPOSIT_ACTION_TYPES.withdraw}\r\n\t\t\t/>\r\n\t\t]\r\n\t}\r\n}\r\n\r\nconst updateDeposits = (deposits, newDeposit) => {\r\n\tconst index = deposits.findIndex(x => x.poolId === newDeposit.poolId)\r\n\tconst newDeposits = [...deposits]\r\n\r\n\tif (index > -1) {\r\n\t\tnewDeposits[index] = newDeposit\r\n\t} else {\r\n\t\tnewDeposits.push(newDeposit)\r\n\t}\r\n\r\n\treturn newDeposits\r\n}\r\n\r\nexport default function Deposits() {\r\n\tconst { t } = useTranslation()\r\n\tconst classes = useStyles()\r\n\tconst [deposits, setDeposits] = useState([])\r\n\tconst { stats, chosenWalletType } = useContext(AppContext)\r\n\tconst { loyaltyPoolStats, tomStakingV5PoolStats } = stats\r\n\r\n\tconst {\r\n\t\ttotalSharesOutTransfersAdxValue,\r\n\t\ttotalSharesInTransfersAdxValue\r\n\t} = tomStakingV5PoolStats\r\n\r\n\tconst {\r\n\t\ttotalSharesOutTransfersAdxValue: totalSharesOutTransfersAdxValueLP,\r\n\t\ttotalSharesInTransfersAdxValue: totalSharesInTransfersAdxValueLP\r\n\t} = loyaltyPoolStats\r\n\r\n\tconst hasExternalStakingTokenTransfers =\r\n\t\t!totalSharesOutTransfersAdxValue.isZero() ||\r\n\t\t!totalSharesInTransfersAdxValue.isZero()\r\n\r\n\tconst hasExternalStakingTokenTransfersLP =\r\n\t\t!totalSharesOutTransfersAdxValueLP.isZero() ||\r\n\t\t!totalSharesInTransfersAdxValueLP.isZero()\r\n\r\n\tconst disableActionsMsg = !chosenWalletType.name\r\n\t\t? t(\"common.connectWallet\")\r\n\t\t: !loyaltyPoolStats.loaded\r\n\t\t? t(\"common.loadingData\")\r\n\t\t: \"\"\r\n\r\n\t// TODO: UPDATE if more deposit pools\r\n\tconst disableDepositsMsg =\r\n\t\tdisableActionsMsg ||\r\n\t\t(loyaltyPoolStats.poolTotalStaked.gte(loyaltyPoolStats.poolDepositsLimit)\r\n\t\t\t? t(\"deposits.depositsLimitReached\")\r\n\t\t\t: \"\")\r\n\r\n\tuseEffect(() => {\r\n\t\tconst { loyaltyPoolStats, tomStakingV5PoolStats } = stats\r\n\t\tlet loadedDeposits = [...deposits]\r\n\t\tif (loyaltyPoolStats.loaded) {\r\n\t\t\t// const disabledDepositsMsg = !chosenWalletType.name ?\r\n\t\t\t// \t'Connect wallet' :\r\n\t\t\t// \t(loyaltyPoolStats.poolTotalStaked.gte(loyaltyPoolStats.poolDepositsLimit) ?\r\n\t\t\t// \t\t'Pool deposits limit reached' : ''\r\n\t\t\t// \t)\r\n\t\t\tconst disabledWithdrawsMsg = disableActionsMsg\r\n\r\n\t\t\tconst loyaltyPoolDeposit = getLoyaltyPoolDeposit({\r\n\t\t\t\tt,\r\n\t\t\t\tstats,\r\n\t\t\t\tdisabledDepositsMsg: disableDepositsMsg,\r\n\t\t\t\tdisabledWithdrawsMsg,\r\n\t\t\t\thasExternalStakingTokenTransfers: hasExternalStakingTokenTransfersLP\r\n\t\t\t})\r\n\t\t\tloadedDeposits = updateDeposits(loadedDeposits, loyaltyPoolDeposit)\r\n\t\t}\r\n\r\n\t\tif (tomStakingV5PoolStats.loaded) {\r\n\t\t\tconst disableDepositsMsg = disableActionsMsg\r\n\r\n\t\t\tconst disabledWithdrawsMsg =\r\n\t\t\t\tdisableActionsMsg ||\r\n\t\t\t\t(!tomStakingV5PoolStats.hasActiveUnbondCommitments\r\n\t\t\t\t\t? t(\"deposits.unbondToWithdraw\")\r\n\t\t\t\t\t: \"\")\r\n\r\n\t\t\tconst stakingPoolDeposit = getStakingPool({\r\n\t\t\t\tt,\r\n\t\t\t\tstats,\r\n\t\t\t\tdisableActionsMsg,\r\n\t\t\t\tdisabledDepositsMsg: disableDepositsMsg,\r\n\t\t\t\tdisabledWithdrawsMsg,\r\n\t\t\t\thasExternalStakingTokenTransfers\r\n\t\t\t})\r\n\r\n\t\t\tloadedDeposits = updateDeposits(loadedDeposits, stakingPoolDeposit)\r\n\t\t}\r\n\r\n\t\tsetDeposits(loadedDeposits)\r\n\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [stats])\r\n\r\n\tconst renderDepositRow = deposit => {\r\n\t\tconst PoolIcon = iconByPoolId(deposit)\r\n\t\treturn (\r\n\t\t\t<TableRow key={deposit.poolId}>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\tjustifyContent=\"flex-start\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{PoolIcon && (\r\n\t\t\t\t\t\t\t<Box mr={1}>\r\n\t\t\t\t\t\t\t\t<Box classes={{ root: classes.iconBox }}>\r\n\t\t\t\t\t\t\t\t\t<SvgIcon fontSize=\"large\" color=\"inherit\">\r\n\t\t\t\t\t\t\t\t\t\t<PoolIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Box>{deposit.label}</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{`${(deposit.currentAPY * 100).toFixed(\r\n\t\t\t\t\t2\r\n\t\t\t\t)} %`}</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{deposit.balance}</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{deposit.allTimeReward}</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{deposit.depositsADXTotal}</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{deposit.withdrawsADXTotal}</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{deposit.pendingToUnlockTotalADX}</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{deposit.readyToWithdrawTotalADX}</TableCell>\r\n\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\t\t\talignItems=\"stretch\"\r\n\t\t\t\t\t\tjustifyContent=\"center\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{deposit.actions.map((action, index) => (\r\n\t\t\t\t\t\t\t<Box key={index} my={0.25}>\r\n\t\t\t\t\t\t\t\t{action}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t{/* <Box>\r\n\t\t\t\t<DepositsDialog\r\n\t\t\t\t\tid=\"deposits-table-open-deposit-modal-btn\"\r\n\t\t\t\t\ttitle=\"Add new deposit\"\r\n\t\t\t\t\tbtnLabel=\"New Deposit\"\r\n\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tdisabled={!!disableDepositsMsg}\r\n\t\t\t\t\ttooltipTitle={disableDepositsMsg}\r\n\t\t\t\t/>\r\n\t\t\t</Box> */}\r\n\t\t\t<Box mb={2}>\r\n\t\t\t\t<TableContainer xs={12}>\r\n\t\t\t\t\t<Table aria-label=\"Bonds table\">\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>{t(\"common.pool\")}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell>{t(\"common.APY\")}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"common.balance\")}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t{t(\"deposits.allTimeRewards\")}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t{t(\"deposits.depositsADXTotal\")}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t{t(\"deposits.withdrawsADXTotal\")}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t{t(\"deposits.pendingToUnlockTotal\")}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t{t(\"deposits.readyToWithdrawTotal\")}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"common.actions\")}</TableCell>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>{[...(deposits || [])].map(renderDepositRow)}</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t</Box>\r\n\t\t\t{hasExternalStakingTokenTransfers && (\r\n\t\t\t\t<Alert variant=\"filled\" severity=\"info\">\r\n\t\t\t\t\t{`* ${t(\"deposits.hasExternalStakingTokenTransfersAlert\", {\r\n\t\t\t\t\t\tpool: t(\"common.tomStakingPool\"),\r\n\t\t\t\t\t\ttoken: \"ADX-STAKING\"\r\n\t\t\t\t\t})}}`}\r\n\t\t\t\t</Alert>\r\n\t\t\t)}\r\n\t\t\t{hasExternalStakingTokenTransfersLP && (\r\n\t\t\t\t<Alert variant=\"filled\" severity=\"info\">\r\n\t\t\t\t\t{`* ${t(\"deposits.hasExternalStakingTokenTransfersAlert\", {\r\n\t\t\t\t\t\tpool: t(\"common.loPo\"),\r\n\t\t\t\t\t\ttoken: \"ADX-LOYALTY\"\r\n\t\t\t\t\t})}}`}\r\n\t\t\t\t</Alert>\r\n\t\t\t)}\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React, { useContext } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport {\r\n\tTableRow,\r\n\tTableCell,\r\n\tBox,\r\n\tTable,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTableBody,\r\n\tSvgIcon\r\n} from \"@material-ui/core\"\r\nimport {\r\n\tformatADXPretty,\r\n\tformatDateTime,\r\n\tformatTxnHash\r\n} from \"../helpers/formatting\"\r\nimport AppContext from \"../AppContext\"\r\nimport { AmountText } from \"./cardCommon\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { ExternalAnchor } from \"./Anchor\"\r\nimport { iconByPoolId } from \"../helpers/constants\"\r\nimport { STAKING_POOL_EVENT_TYPES } from \"../actions/v5actions\"\r\n\r\nconst stakingPoolLabel = {\r\n\t\"adex-loyalty-pool\": \"common.loPo\",\r\n\t\"adex-staking-pool\": \"common.tomStakingPool\"\r\n}\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\ticonBox: {\r\n\t\t\tborderRadius: \"100%\",\r\n\t\t\twidth: 42,\r\n\t\t\theight: 42,\r\n\t\t\tbackgroundColor: theme.palette.common.white,\r\n\t\t\tcolor: theme.palette.common.black,\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\"\r\n\t\t}\r\n\t}\r\n})\r\n\r\nconst StakingEventRow = ({ stakingEvent }) => {\r\n\tconst { t } = useTranslation()\r\n\tconst classes = useStyles()\r\n\tconst PoolIcon = iconByPoolId({\r\n\t\tpoolId: stakingEvent.pool || \"adex-staking-pool\"\r\n\t})\r\n\tconst isExternalShareTokenTransfer =\r\n\t\tstakingEvent.type === STAKING_POOL_EVENT_TYPES.shareTokensTransferIn ||\r\n\t\tstakingEvent.type === STAKING_POOL_EVENT_TYPES.shareTokensTransferOut\r\n\r\n\treturn (\r\n\t\t<TableRow>\r\n\t\t\t<TableCell>\r\n\t\t\t\t<Box\r\n\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tjustifyContent=\"flex-start\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{PoolIcon && (\r\n\t\t\t\t\t\t<Box mr={1}>\r\n\t\t\t\t\t\t\t<Box classes={{ root: classes.iconBox }}>\r\n\t\t\t\t\t\t\t\t<SvgIcon fontSize=\"large\" color=\"inherit\">\r\n\t\t\t\t\t\t\t\t\t<PoolIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t{t(stakingPoolLabel[stakingEvent.pool || \"adex-staking-pool\"])}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t{t(`eventTypes.${stakingEvent.type}`)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t<AmountText\r\n\t\t\t\t\ttext={`${formatADXPretty(\r\n\t\t\t\t\t\tstakingEvent.adxAmount || stakingEvent.maxTokens\r\n\t\t\t\t\t)} ${\"ADX\"}`}\r\n\t\t\t\t\tfontSize={17}\r\n\t\t\t\t/>\r\n\t\t\t\t{isExternalShareTokenTransfer && \" *\"}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t{formatDateTime(new Date(stakingEvent.timestamp))}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t{stakingEvent.type === STAKING_POOL_EVENT_TYPES.enter && \"-\"}\r\n\t\t\t\t{stakingEvent.type === STAKING_POOL_EVENT_TYPES.leave && (\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t{t(\"deposits.unlocksAtInfo\", {\r\n\t\t\t\t\t\t\t\tunlocksAt: formatDateTime(\r\n\t\t\t\t\t\t\t\t\tMath.ceil(stakingEvent.unlocksAt * 1000)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)}\r\n\t\t\t\t{stakingEvent.type === STAKING_POOL_EVENT_TYPES.rageLeave && (\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t{t(\"deposits.maxTokens\", {\r\n\t\t\t\t\t\t\t\tmaxTokens: `${formatADXPretty(stakingEvent.maxTokens)}`,\r\n\t\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t{t(\"deposits.receivedTokens\", {\r\n\t\t\t\t\t\t\t\treceivedTokens: `${formatADXPretty(\r\n\t\t\t\t\t\t\t\t\tstakingEvent.receivedTokens\r\n\t\t\t\t\t\t\t\t)}`,\r\n\t\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)}\r\n\t\t\t\t{isExternalShareTokenTransfer && (\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<AmountText\r\n\t\t\t\t\t\t\t\ttext={`${formatADXPretty(stakingEvent.shares)} ${\"ADX-SHARE\"}`}\r\n\t\t\t\t\t\t\t\tfontSize={17}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box></Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t{\r\n\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\tid={`staking-v5-tx-on-etherscan-${stakingEvent.transactionHash}`}\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\thref={`https://etherscan.io/tx/${stakingEvent.transactionHash}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{formatTxnHash(stakingEvent.transactionHash)}\r\n\t\t\t\t\t</ExternalAnchor>\r\n\t\t\t\t}\r\n\t\t\t</TableCell>\r\n\t\t</TableRow>\r\n\t)\r\n}\r\n\r\nexport default function StakingPoolTxnsHistory() {\r\n\tconst { t } = useTranslation()\r\n\tconst { stats } = useContext(AppContext)\r\n\tconst { tomStakingV5PoolStats, loyaltyPoolStats } = stats\r\n\tconst { stakings: stakingPoolEvents } = tomStakingV5PoolStats\r\n\tconst { stakingEvents: loyaltyPoolEvents } = loyaltyPoolStats\r\n\r\n\tconst stakings = stakingPoolEvents\r\n\t\t.concat(loyaltyPoolEvents)\r\n\t\t.sort((a, b) => a.blockNumber - b.blockNumber)\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<Box>\r\n\t\t\t\t<TableContainer xs={12}>\r\n\t\t\t\t\t<Table aria-label=\"Bonds table\">\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>{t(\"common.pool\")}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"deposits.eventType\")}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"deposits.amount\")}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"deposits.from\")}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"deposits.extraInfo\")}</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"deposits.txnHash\")}</TableCell>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{[...(stakings || [])].reverse().map((stakingEvent, i) => (\r\n\t\t\t\t\t\t\t\t<StakingEventRow\r\n\t\t\t\t\t\t\t\t\tkey={stakingEvent.blockNumber + stakingEvent.type + i}\r\n\t\t\t\t\t\t\t\t\tstakingEvent={stakingEvent}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React, { useContext } from \"react\"\r\nimport AppContext from \"../AppContext\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport { Box, Typography } from \"@material-ui/core\"\r\nimport { AddSharp as AddIcon } from \"@material-ui/icons\"\r\nimport { toIdAttributeString } from \"../helpers/formatting\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport WithDialog from \"./WithDialog\"\r\nimport DepositForm from \"./DepositForm\"\r\nimport { DEPOSIT_POOLS } from \"../helpers/constants\"\r\nimport { DEPOSIT_ACTION_TYPES } from \"../actions\"\r\n\r\nconst DepositsDialog = WithDialog(DepositForm)\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfabIcon: {\r\n\t\tmarginRight: theme.spacing(1)\r\n\t}\r\n}))\r\n\r\nconst SectionHeader = ({ title, actions }) => {\r\n\tconst { t } = useTranslation()\r\n\tconst classes = useStyles()\r\n\r\n\tconst { stats, chosenWalletType } = useContext(AppContext)\r\n\tconst canStake = !!chosenWalletType.name && !!stats.connectedWalletAddress\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\tflexDirection=\"row\"\r\n\t\t\tjustifyContent=\"space-between\"\r\n\t\t\talignItems=\"center\"\r\n\t\t\tflexWrap=\"wrap\"\r\n\t\t>\r\n\t\t\t<Box color=\"text.main\" mb={1}>\r\n\t\t\t\t<Typography variant=\"h3\" style={{ wordBreak: \"break-word\" }}>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Box>\r\n\t\t\t<Box mb={1}>\r\n\t\t\t\t{!!actions\r\n\t\t\t\t\t? actions\r\n\t\t\t\t\t: chosenWalletType.name && (\r\n\t\t\t\t\t\t\t<DepositsDialog\r\n\t\t\t\t\t\t\t\tid={`section-header-fab-stake-adx-${toIdAttributeString(\r\n\t\t\t\t\t\t\t\t\ttitle\r\n\t\t\t\t\t\t\t\t)}`}\r\n\t\t\t\t\t\t\t\ttitle={t(\"deposits.depositTo\", {\r\n\t\t\t\t\t\t\t\t\tpool: t(\"common.tomStakingPool\")\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\tbtnLabel={t(\"bonds.stakeADX\")}\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\t\t\tvariant=\"extended\"\r\n\t\t\t\t\t\t\t\tfabButton\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\ticon={<AddIcon className={classes.fabIcon} />}\r\n\t\t\t\t\t\t\t\tdisabled={!stats.loaded || !canStake}\r\n\t\t\t\t\t\t\t\ttooltipTitle={t(\"common.connectWallet\")}\r\n\t\t\t\t\t\t\t\tdepositPool={DEPOSIT_POOLS[1].id}\r\n\t\t\t\t\t\t\t\tactionType={DEPOSIT_ACTION_TYPES.deposit}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t  )}\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default SectionHeader\r\n","import React, { useContext } from \"react\"\r\nimport {\r\n\tBox,\r\n\tTypography,\r\n\tAccordion,\r\n\tAccordionSummary,\r\n\tAccordionDetails\r\n} from \"@material-ui/core\"\r\nimport { ExpandMore } from \"@material-ui/icons\"\r\nimport AppContext from \"../AppContext\"\r\nimport Bonds from \"./Bonds\"\r\nimport Deposits from \"./Deposits\"\r\nimport StakingPoolTxnsHistory from \"./StakingPoolTxnsHistory\"\r\nimport SectionHeader from \"./SectionHeader\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nconst Stakings = () => {\r\n\tconst { t } = useTranslation()\r\n\tconst {\r\n\t\tstats,\r\n\t\tsetToUnbond,\r\n\t\tonUnbond,\r\n\t\tonMigrationFinalize,\r\n\t\tonClaimRewards,\r\n\t\tonRebond\r\n\t} = useContext(AppContext)\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<SectionHeader title={t(\"common.staked\")} />\r\n\t\t\t<Box mt={2}>\r\n\t\t\t\t<Box color=\"text.main\">\r\n\t\t\t\t\t<Typography variant=\"h5\" gutterBottom>\r\n\t\t\t\t\t\t{t(\"common.bonds\")}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box mt={2} bgcolor=\"background.darkerPaper\" boxShadow={25}>\r\n\t\t\t\t\t<Box p={3}>\r\n\t\t\t\t\t\t{Bonds({\r\n\t\t\t\t\t\t\tstats,\r\n\t\t\t\t\t\t\tonRequestUnbond: setToUnbond,\r\n\t\t\t\t\t\t\tonUnbond,\r\n\t\t\t\t\t\t\tonMigrationFinalize,\r\n\t\t\t\t\t\t\tonClaimRewards,\r\n\t\t\t\t\t\t\tonRebond\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t\t<Box mt={2}>\r\n\t\t\t\t<Box color=\"text.main\">\r\n\t\t\t\t\t<Typography variant=\"h5\" gutterBottom>\r\n\t\t\t\t\t\t{t(\"common.deposits\")}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\r\n\t\t\t\t<Box mt={3} bgcolor=\"background.darkerPaper\" boxShadow={25}>\r\n\t\t\t\t\t<Box p={3}>\r\n\t\t\t\t\t\t<Deposits />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t\t<Box mt={2}>\r\n\t\t\t\t<Accordion square>\r\n\t\t\t\t\t<AccordionSummary\r\n\t\t\t\t\t\texpandIcon={<ExpandMore />}\r\n\t\t\t\t\t\taria-controls=\"panel1a-content\"\r\n\t\t\t\t\t\tid=\"panel1a-header\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Typography>{t(\"deposits.txnsHistory\")}</Typography>\r\n\t\t\t\t\t</AccordionSummary>\r\n\t\t\t\t\t<AccordionDetails>\r\n\t\t\t\t\t\t<Box mt={2} bgcolor=\"background.darkerPaper\" width={1}>\r\n\t\t\t\t\t\t\t{StakingPoolTxnsHistory({\r\n\t\t\t\t\t\t\t\tstats\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</AccordionDetails>\r\n\t\t\t\t</Accordion>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default Stakings\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1544\",\n  \"data-name\": \"Group 1544\",\n  transform: \"translate(0 0)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1083\",\n  \"data-name\": \"Path 1083\",\n  d: \"M807.436-579.082c.041.026.068.074.108.1.11.085.191.28.367.169.149-.093.082-.273.079-.417a.738.738,0,0,0-.158-.334c-.068-.119-.187-.242-.184-.361.016-.549-.46-.714-.761-1.111C806.808-580.246,806.722-579.548,807.436-579.082Z\",\n  transform: \"translate(-788.213 591.413)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1084\",\n  \"data-name\": \"Path 1084\",\n  d: \"M789.523-576.75a.507.507,0,0,0-.481.481.507.507,0,0,0,.481.481.51.51,0,0,0,.482-.481A.508.508,0,0,0,789.523-576.75Z\",\n  transform: \"translate(-780.138 589.47)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1085\",\n  \"data-name\": \"Path 1085\",\n  d: \"M797.478-585.725c.533-.325,1.033-.7,1.547-1.055v-.117c-.534-.361-1.063-.729-1.6-1.079-.342-.221-.4-.443-.1-.748.232-.238.433-.5.653-.752.7-.788.7-.787-.324-1.142-.332-.115-.661-.241-1-.348s-.41-.3-.243-.619c.244-.467.465-.947.7-1.421.151-.31.072-.48-.29-.5-.487-.032-.973-.113-1.459-.107s-.612-.208-.515-.649c.1-.477.179-.959.275-1.438.075-.375-.051-.513-.436-.427-.457.1-.922.169-1.379.27s-.7-.036-.7-.55c0-.447-.08-.895-.092-1.342-.013-.49-.237-.5-.6-.321-.436.22-.882.418-1.317.641-.317.162-.509.092-.622-.251-.165-.5-.358-.992-.518-1.494-.123-.382-.305-.4-.584-.149s-.556.492-.841.73c-.8.672-.634.761-1.282-.2-.284-.419-.581-.831-.871-1.246h-.117c-.364.554-.739,1.1-1.089,1.666-.2.316-.383.327-.648.085-.359-.33-.752-.625-1.1-.962-.383-.368-.58-.26-.721.205-.124.41-.312.8-.423,1.216-.144.539-.419.573-.856.322-.371-.214-.773-.374-1.152-.575-.411-.218-.571-.059-.6.356-.035.506-.088,1.011-.113,1.517-.016.344-.177.438-.495.371-.516-.107-1.038-.185-1.551-.3-.408-.094-.495.091-.431.434.093.5.185,1,.3,1.493.093.411-.061.577-.472.593-.487.018-.972.085-1.459.109-.392.019-.48.2-.322.53.216.459.423.924.661,1.371.185.346.106.54-.259.659-.5.163-1,.344-1.495.514-.33.112-.382.288-.146.554.349.4.682.8,1.035,1.2.254.281.247.486-.09.7-.542.347-1.064.726-1.594,1.091v.117c.524.375,1.038.764,1.576,1.118.356.234.364.442.083.744-.347.371-.661.772-.99,1.158-.229.268-.173.443.161.554.426.143.847.3,1.27.45.665.236.663.235.346.9-.2.423-.4.849-.6,1.274-.119.255-.065.411.24.432.487.034.973.08,1.461.1.458.022.7.172.563.693-.122.471-.188.958-.272,1.439-.058.333.073.482.422.411.478-.1.959-.186,1.436-.286.384-.08.6.036.622.459.021.448.067.9.1,1.343.05.61.132.661.666.406a12.268,12.268,0,0,0,1.151-.582c.478-.294.693-.137.819.361.106.416.264.818.4,1.224.206.6.229.6.726.177.342-.292.686-.582,1.011-.893s.548-.3.788.092c.327.532.688,1.044,1.034,1.564H786c.366-.575.741-1.146,1.1-1.727.177-.289.332-.247.549-.043.412.387.849.748,1.266,1.132.273.251.423.189.533-.148.169-.519.369-1.029.533-1.549.112-.352.3-.411.618-.253.47.237.948.46,1.423.688.3.145.473.091.489-.286.021-.487.082-.972.109-1.458.023-.43.226-.6.649-.509.458.1.919.18,1.378.275.4.082.552-.063.47-.467-.085-.421-.156-.844-.231-1.267-.11-.619.007-.761.65-.8.389-.022.779-.046,1.169-.064.452-.02.594-.2.362-.625-.24-.447-.443-.913-.67-1.367-.145-.291-.084-.474.239-.577.5-.161.994-.351,1.5-.511.362-.115.433-.286.175-.583-.32-.368-.605-.77-.951-1.112C796.973-585.257,797.065-585.473,797.478-585.725Zm-7.909-6.648c.221-.187.468-.265.7-.021.956,1,1.913,2.008,2.855,3.026a1.46,1.46,0,0,1,.357,1.038c-.008,1.649,0,3.3,0,4.948a3.213,3.213,0,0,1-.118.892l-.985-.985c0-.94,0-1.88,0-2.821a.623.623,0,0,0-.209-.5c-.245-.231-.469-.487-.72-.711a1.537,1.537,0,0,1-.556-1.337,2.5,2.5,0,0,0-.961-2.394,2.842,2.842,0,0,1-.419-.478A.434.434,0,0,1,789.569-592.373Zm-1.378-1.167c.694,0,.786.09.786.77,0,1.837.008,3.674-.006,5.511,0,.343.069.486.45.479a1.326,1.326,0,0,1,1.526,1.335c.025.2.039.4.058.6l-3.594-3.594h.4c.418,0,.512-.092.513-.5q.007-1.7,0-3.41c0-.442-.087-.53-.524-.531q-2.417,0-4.835,0l-.654-.654Zm1.057,13.554q-2.156,0-4.312,0c-1.424,0-2.849,0-4.274,0-.433,0-.6-.182-.588-.589.011-.312.165-.52.479-.5.374.024.425-.148.425-.466q-.01-4.449,0-8.9l.653.653c0,.272,0,.544,0,.817,0,.442.087.53.524.531h.824l6,6c0,.349,0,.7,0,1.048,0,.227.086.3.309.31.457.019.607.181.591.583C789.861-580.133,789.691-579.987,789.248-579.986Zm3.914.32-14.2-14.2.761-.761,14.2,14.2Z\",\n  transform: \"translate(-772.74 600.039)\"\n}));\n\nvar SvgGaslessIc = function SvgGaslessIc(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 26.285,\n    height: 26.403,\n    viewBox: \"0 0 26.285 26.403\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgGaslessIc, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/gasless-ic.8cc8ae7b.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useContext, useEffect, useState } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport { Box, SvgIcon, Typography, IconButton } from \"@material-ui/core\"\r\nimport {\r\n\tFileCopySharp as CopyIcon,\r\n\tHelpSharp as HelpIcon\r\n} from \"@material-ui/icons\"\r\nimport copy from \"copy-to-clipboard\"\r\nimport { ReactComponent as GaslessIcon } from \"./../resources/gasless-ic.svg\"\r\nimport SectionHeader from \"./SectionHeader\"\r\nimport AppContext from \"../AppContext\"\r\nimport { getGaslessInfo } from \"../actions\"\r\nimport { MIN_BALANCE_FOR_GASLESS_TXNS } from \"../helpers/constants\"\r\nimport StatsCard from \"./StatsCard\"\r\nimport { formatADXPretty } from \"../helpers/formatting\"\r\nimport NewGaslessBondForm from \"./NewGaslessBondForm\"\r\nimport WithDialog from \"./WithDialog\"\r\nimport { ExternalAnchor } from \"./Anchor\"\r\nimport Tooltip from \"./Tooltip\"\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\n\r\nconst GaslessDepositDialog = WithDialog(NewGaslessBondForm)\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\toverlay: {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tleft: 0,\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tbackgroundColor: \"transparent\"\r\n\t\t},\r\n\t\tnoUserData: {\r\n\t\t\topacity: 0.23\r\n\t\t},\r\n\t\taddress: {\r\n\t\t\twordBreak: \"break-all\"\r\n\t\t},\r\n\t\tmodal: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\"\r\n\t\t},\r\n\t\tbullets: {\r\n\t\t\t[theme.breakpoints.up(\"md\")]: {\r\n\t\t\t\tmaxWidth: 800\r\n\t\t\t}\r\n\t\t},\r\n\t\tactions: {\r\n\t\t\tmaxWidth: 400,\r\n\t\t\tmargin: theme.spacing(1)\r\n\t\t}\r\n\t}\r\n})\r\n\r\nconst defaultGaslessInfo = {\r\n\tcanExecuteGasless: false,\r\n\tcanExecuteGaslessError: {\r\n\t\tmessage: \"common.connectWallet\"\r\n\t}\r\n}\r\n\r\nconst Gasless = () => {\r\n\tconst { t } = useTranslation()\r\n\r\n\tconst classes = useStyles()\r\n\tconst [gaslessInfo, setGaslessInfo] = useState(defaultGaslessInfo)\r\n\r\n\tconst { stats, setConnectWallet, addSnack, account } = useContext(AppContext)\r\n\r\n\tconst { tomStakingV5PoolStats } = stats\r\n\r\n\tconst {\r\n\t\tuserDataLoaded,\r\n\t\tgaslessAddress,\r\n\t\tgaslessAddrBalance\r\n\t} = tomStakingV5PoolStats\r\n\r\n\tconst {\r\n\t\tcanExecuteGasless,\r\n\t\tcanExecuteGaslessError: gaslessError\r\n\t} = gaslessInfo\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function updateGasless() {\r\n\t\t\tconsole.log(\"account\", account)\r\n\r\n\t\t\tconst info = await getGaslessInfo(account)\r\n\t\t\tsetGaslessInfo(info)\r\n\t\t}\r\n\r\n\t\tif (account) {\r\n\t\t\tupdateGasless()\r\n\t\t} else {\r\n\t\t\tsetGaslessInfo(defaultGaslessInfo)\r\n\t\t}\r\n\t}, [account])\r\n\r\n\tconst walletConnected = gaslessAddress && userDataLoaded\r\n\r\n\tconst mainErr = !walletConnected\r\n\t\t? t(\"common.connectWallet\")\r\n\t\t: !canExecuteGasless\r\n\t\t? t(gaslessError.message || \"\", gaslessError.data || {})\r\n\t\t: \"\"\r\n\r\n\tconst canExecuteGaslessError =\r\n\t\tmainErr || (gaslessAddrBalance.isZero() ? t(\"errors.nothingToStake\") : \"\")\r\n\r\n\tconst insufficientForGasless =\r\n\t\t!gaslessAddrBalance.isZero() &&\r\n\t\tgaslessAddrBalance.lt(MIN_BALANCE_FOR_GASLESS_TXNS)\r\n\r\n\tconst onTxRes = (res, btnId) => {\r\n\t\tif (res && res.txId) {\r\n\t\t\taddSnack(\r\n\t\t\t\tt(\"gasless.txSent\", { txId: res.txId }),\r\n\t\t\t\t\"success\",\r\n\t\t\t\t20000,\r\n\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\tid={btnId}\r\n\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\thref={`https://etherscan.io/tx/${res.txId}`}\r\n\t\t\t\t>\r\n\t\t\t\t\t{t(\"common.seeOnEtherscan\")}\r\n\t\t\t\t</ExternalAnchor>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<SectionHeader\r\n\t\t\t\ttitle={t(\"gasless.staking\")}\r\n\t\t\t\tactions={\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\t\t\tfontSize={88}\r\n\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SvgIcon color=\"inherit\" fontSize=\"inherit\">\r\n\t\t\t\t\t\t\t<GaslessIcon width=\"100%\" height=\"100%\" color=\"secondary\" />\r\n\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t<Box>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\tclassName={classes.content}\r\n\t\t\t\t\t\t\tmt={4}\r\n\t\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\t\t\t\talignItems=\"flex-start\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t<Typography component=\"div\" variant=\"h5\">\r\n\t\t\t\t\t\t\t\t\t{t(\"gasless.accountAddr\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\tmy={2}\r\n\t\t\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\t\t\tjustifyContent=\"flex-start\"\r\n\t\t\t\t\t\t\t\tflexGrow={0}\r\n\t\t\t\t\t\t\t\t// flexWrap=\"wrap\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\t\t\t\tjustifyContent=\"flex-start\"\r\n\t\t\t\t\t\t\t\t\tbgcolor=\"background.card\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\t\t\t\t\t\tfontSize={23}\r\n\t\t\t\t\t\t\t\t\tboxShadow={25}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => !gaslessAddress && setConnectWallet(true)}\r\n\t\t\t\t\t\t\t\t\t\tm={1}\r\n\t\t\t\t\t\t\t\t\t\tmx={2}\r\n\t\t\t\t\t\t\t\t\t\tclasses={{ root: classes.address }}\r\n\t\t\t\t\t\t\t\t\t\t{...(!gaslessAddress\r\n\t\t\t\t\t\t\t\t\t\t\t? { style: { cursor: \"pointer\" } }\r\n\t\t\t\t\t\t\t\t\t\t\t: {})}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{gaslessAddress || t(\"gasless.connectWalletToSeeAddr\")}\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t{gaslessAddress && (\r\n\t\t\t\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"mobile-burger-btn\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"open drawer\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcopy(gaslessAddress)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taddSnack(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tt(\"gasless.copiedToClipboard\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tidentityAddr: gaslessAddress\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"success\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CopyIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t\t\t<Tooltip title={t(\"gasless.addrTooltip\")}>\r\n\t\t\t\t\t\t\t\t\t\t<HelpIcon color=\"primary\" />\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box className={classes.bullets}>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\" gutterBottom>\r\n\t\t\t\t\t\t\t\t\t{\" • \"}\r\n\t\t\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\t\t\ti18nKey=\"gasless.bullet1\"\r\n\t\t\t\t\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\t\t\t\t\tminBalance: formatADXPretty(MIN_BALANCE_FOR_GASLESS_TXNS),\r\n\t\t\t\t\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\" gutterBottom>\r\n\t\t\t\t\t\t\t\t\t{\" • \"}\r\n\t\t\t\t\t\t\t\t\t<Trans i18nKey=\"gasless.bullet2\" />\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\" gutterBottom>\r\n\t\t\t\t\t\t\t\t\t{\" • \"}\r\n\t\t\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\t\t\ti18nKey=\"gasless.bullet3\"\r\n\t\t\t\t\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\t\t\t\t\tcount: 12\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"row\" flexWrap=\"wrap\">\r\n\t\t\t\t\t\t\t\t<Box className={classes.actions}>\r\n\t\t\t\t\t\t\t\t\t{walletConnected && (\r\n\t\t\t\t\t\t\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{StatsCard({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize: \"large\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tloaded: userDataLoaded,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: t(\"gasless.adxBalanceOnAddr\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsubtitle: gaslessAddrBalance\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? formatADXPretty(gaslessAddrBalance) + \" ADX\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\textra:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcanExecuteGaslessError || t(\"gasless.readyForStake\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t\t\t\t\t\t<GaslessDepositDialog\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"staking-pool-tom-gasless-deposit-form\"\r\n\t\t\t\t\t\t\t\t\t\t\ttitle={t(\"deposits.depositTo\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\tpool: t(\"common.tomStakingPool\")\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\tbtnLabel={t(\"common.deposit\")}\r\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!!canExecuteGaslessError}\r\n\t\t\t\t\t\t\t\t\t\t\ttooltipTitle={canExecuteGaslessError}\r\n\t\t\t\t\t\t\t\t\t\t\tonTxRes={onTxRes}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t\t\t\t\t{insufficientForGasless && canExecuteGaslessError && (\r\n\t\t\t\t\t\t\t\t\t\t<Box mt={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Box mb={2}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Typography variant=\"caption\" gutterBottom>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t(\"deposits.depositGaslessNoGaslessBtnInfo\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t\t<GaslessDepositDialog\r\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"staking-pool-tom-gasless-deposit-form-no-gasless\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={t(\"deposits.depositTo\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpool: t(\"common.tomStakingPool\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\tbtnLabel={t(\"deposits.depositGaslessNoGaslessBtn\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\tnoGasless={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\t// disabled={!!canExecuteGaslessError}\r\n\t\t\t\t\t\t\t\t\t\t\t\t// tooltipTitle={canExecuteGaslessError}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonTxRes={onTxRes}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t\t\t\t{!canExecuteGaslessError && (\r\n\t\t\t\t\t\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\t\t\t\ti18nKey=\"gasless.info\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\t\t\t\t\texternal: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"new-bond-form-adex-network-tos\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`https://etherscan.io/address/${gaslessAddress}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default Gasless\r\n","import React, { useState, useContext } from \"react\"\r\nimport { formatADXPretty } from \"../helpers/formatting\"\r\nimport { STAKING_RULES_URL, DEPOSIT_POOLS } from \"../helpers/constants\"\r\nimport {\r\n\tgetDepositPool,\r\n\tonStakingPoolV5GaslessDeposit,\r\n\tonStakingPoolV5WhenNoSufficientForGaslessDeposit\r\n} from \"../actions\"\r\nimport {\r\n\tGrid,\r\n\tTypography,\r\n\tButton,\r\n\tFormControl,\r\n\tFormControlLabel,\r\n\tCheckbox,\r\n\tBox\r\n} from \"@material-ui/core\"\r\nimport { ExternalAnchor } from \"./Anchor\"\r\nimport StatsCard from \"./StatsCard\"\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\nimport AppContext from \"../AppContext\"\r\nimport { AmountText } from \"./cardCommon\"\r\n\r\nexport default function NewGaslessBondForm({\r\n\tcloseDialog,\r\n\tonTxRes,\r\n\tnoGasless\r\n} = {}) {\r\n\tconst { t } = useTranslation()\r\n\tconst activePool = getDepositPool(DEPOSIT_POOLS[1].id) || {}\r\n\tconst { stats, chosenWalletType, wrapDoingTxns } = useContext(AppContext)\r\n\r\n\tconst { tomStakingV5PoolStats } = stats\r\n\tconst {\r\n\t\t// gaslessAddress,\r\n\t\tgaslessAddrBalance: adxDepositAmount,\r\n\t\tunbondDays\r\n\t} = tomStakingV5PoolStats\r\n\r\n\tconst [confirmation, setConfirmation] = useState(false)\r\n\r\n\tconst onAction = async () => {\r\n\t\tsetConfirmation(false)\r\n\t\tif (closeDialog) closeDialog()\r\n\r\n\t\tif (noGasless) {\r\n\t\t\tawait wrapDoingTxns(\r\n\t\t\t\tonStakingPoolV5WhenNoSufficientForGaslessDeposit.bind(\r\n\t\t\t\t\tnull,\r\n\t\t\t\t\tstats,\r\n\t\t\t\t\tchosenWalletType,\r\n\t\t\t\t\ttomStakingV5PoolStats.gaslessAddrBalance\r\n\t\t\t\t)\r\n\t\t\t)()\r\n\t\t} else {\r\n\t\t\tconst res = await onStakingPoolV5GaslessDeposit(\r\n\t\t\t\tstats,\r\n\t\t\t\tchosenWalletType,\r\n\t\t\t\tadxDepositAmount\r\n\t\t\t)\r\n\r\n\t\t\tonTxRes && onTxRes(res, \"new-gasless-deposit-snack\")\r\n\t\t}\r\n\t}\r\n\r\n\tconst confirmationLabel = (\r\n\t\t<Trans\r\n\t\t\ti18nKey=\"deposits.depositConfirmationLabel\"\r\n\t\t\tvalues={{\r\n\t\t\t\tunbondDays,\r\n\t\t\t\tamount: formatADXPretty(adxDepositAmount),\r\n\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t}}\r\n\t\t\tcomponents={{\r\n\t\t\t\tamount: <AmountText fontSize={21}></AmountText>,\r\n\t\t\t\te1: (\r\n\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\tid=\"new-gasless-deposit-form-adex-network-tos\"\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\thref=\"https://www.adex.network/tos/\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\t\te2: STAKING_RULES_URL ? (\r\n\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\tid=\"new-gasless-deposit-form-adex-staking-rules\"\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\thref={STAKING_RULES_URL}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<></>\r\n\t\t\t\t)\r\n\t\t\t}}\r\n\t\t/>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\twidth={666}\r\n\t\t\tmaxWidth={1}\r\n\t\t\tm={1}\r\n\t\t\tmaxHeight=\"90vh\"\r\n\t\t\tp={2}\r\n\t\t\tpb={4}\r\n\t\t\tbgcolor=\"background.paper\"\r\n\t\t\toverflow=\"auto\"\r\n\t\t>\r\n\t\t\t<Typography variant=\"h4\">\r\n\t\t\t\t{t(\r\n\t\t\t\t\tnoGasless ? \"gasless.addNewDepositNoGasless\" : \"gasless.addNewDeposit\"\r\n\t\t\t\t)}\r\n\t\t\t</Typography>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<Box mb={1.5}>\r\n\t\t\t\t\t\t{StatsCard({\r\n\t\t\t\t\t\t\tsize: \"large\",\r\n\t\t\t\t\t\t\tloaded: true,\r\n\t\t\t\t\t\t\ttitle: t(\"gasless.adxBalanceOnAddr\"),\r\n\t\t\t\t\t\t\tsubtitle: adxDepositAmount\r\n\t\t\t\t\t\t\t\t? formatADXPretty(adxDepositAmount) + \" ADX\"\r\n\t\t\t\t\t\t\t\t: \"\",\r\n\t\t\t\t\t\t\textra: t(\"common.poolWithName\", {\r\n\t\t\t\t\t\t\t\tname: t(activePool.label)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\r\n\t\t\t\t{!!activePool && (\r\n\t\t\t\t\t<Grid item xs={12} container spacing={2}>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t{t(\"common.poolRewardPolicy\")}:\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t{t(activePool.rewardPolicy)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t{t(\"common.poolSlashingPolicy\")}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t{t(activePool.slashPolicy)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\tstyle={{ userSelect: \"none\" }}\r\n\t\t\t\t\t\tlabel={confirmationLabel}\r\n\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\tid=\"new-bond-form-tos-check\"\r\n\t\t\t\t\t\t\t\tchecked={confirmation}\r\n\t\t\t\t\t\t\t\tonChange={ev => setConfirmation(ev.target.checked)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t></FormControlLabel>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<FormControl style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tid={`new-gasless-bond-stake-action-btn`}\r\n\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\tdisabled={!confirmation}\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={onAction}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t(\"bonds.stakeADX\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</FormControl>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1659\",\n  \"data-name\": \"Group 1659\",\n  transform: \"translate(-945.955 485.702)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1158\",\n  \"data-name\": \"Path 1158\",\n  d: \"M955.83-477.875h-9.048a.812.812,0,0,1-.642-.251.651.651,0,0,1-.182-.443c0-.688-.009-1.377,0-2.065a1.355,1.355,0,0,1,1.306-1.261c.386-.008.772,0,1.159,0,.109,0,.139-.016.088-.131a2.607,2.607,0,0,1,2.116-3.649,2.587,2.587,0,0,1,2.1.713c.53.484,1.065.963,1.594,1.448.072.066.115.056.185,0a1.987,1.987,0,0,1,2.648-.009c.084.071.131.068.209,0,.537-.492,1.071-.986,1.617-1.467a2.5,2.5,0,0,1,2.666-.528,2.522,2.522,0,0,1,1.7,2.088,2.346,2.346,0,0,1-.185,1.378c-.073.159-.07.161.1.162.362,0,.723,0,1.085,0a1.355,1.355,0,0,1,1.36,1.345c.006.644,0,1.288,0,1.931a.73.73,0,0,1-.713.744c-.06,0-.119,0-.179,0Zm-3.563-4.021h1.425c.046,0,.108.021.128-.043s-.031-.089-.068-.123q-1.038-.941-2.078-1.882a1.074,1.074,0,0,0-.642-.281,1.171,1.171,0,0,0-1.281,1.1,1.164,1.164,0,0,0,1.181,1.231C951.377-481.894,951.822-481.9,952.267-481.9Zm7.1,0h.638c.213,0,.426,0,.638,0a1.533,1.533,0,0,0,.3-.026,1.167,1.167,0,0,0,.962-.981,1.145,1.145,0,0,0-.57-1.166,1.138,1.138,0,0,0-1.353.136c-.69.616-1.374,1.238-2.06,1.859-.039.035-.1.07-.074.133s.093.044.144.044C958.451-481.895,958.911-481.9,959.371-481.9Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1159\",\n  \"data-name\": \"Path 1159\",\n  d: \"M957.017-471.371v-5.185c0-.229,0-.23.229-.23h6.968c.235,0,.235,0,.235.242q0,4.511,0,9.019a1.564,1.564,0,0,1-.288,1.022,1.329,1.329,0,0,1-1.075.544c-1.966.007-3.932,0-5.9.006-.16,0-.173-.077-.173-.2Q957.02-468.763,957.017-471.371Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1160\",\n  \"data-name\": \"Path 1160\",\n  d: \"M954.651-471.369v5.2c0,.214,0,.215-.215.215q-2.9,0-5.792,0a1.363,1.363,0,0,1-1.409-1.4q0-4.605,0-9.209c0-.216,0-.217.21-.217h6.995c.211,0,.211,0,.211.218Q954.652-473.968,954.651-471.369Z\"\n}));\n\nvar SvgGiftIc = function SvgGiftIc(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 19.759,\n    height: 19.749,\n    viewBox: \"0 0 19.759 19.749\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgGiftIc, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/gift-ic.9db901d6.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\"\r\nimport {\r\n\tDialog,\r\n\tDialogTitle,\r\n\tDialogContent,\r\n\tDialogActions,\r\n\tButton\r\n} from \"@material-ui/core\"\r\nimport { toIdAttributeString } from \"../helpers/formatting\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nexport default function ConfirmationDialog({\r\n\tisOpen,\r\n\tonDeny,\r\n\tonConfirm,\r\n\tcontent,\r\n\ttitle,\r\n\tconfirmActionName\r\n}) {\r\n\tconst { t } = useTranslation()\r\n\r\n\treturn (\r\n\t\t<Dialog open={isOpen} onClose={onDeny}>\r\n\t\t\t<DialogTitle id=\"alert-dialog-title\">\r\n\t\t\t\t{title || t(\"common.areYouSure\")}\r\n\t\t\t</DialogTitle>\r\n\t\t\t<DialogContent>{content}</DialogContent>\r\n\t\t\t<DialogActions>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tid={`confirmation-dialog-deny-${toIdAttributeString(\r\n\t\t\t\t\t\tconfirmActionName\r\n\t\t\t\t\t)}`}\r\n\t\t\t\t\tonClick={onDeny}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{t(\"common.cancel\")}\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tid={`confirmation-dialog-confirm-${toIdAttributeString(\r\n\t\t\t\t\t\tconfirmActionName\r\n\t\t\t\t\t)}`}\r\n\t\t\t\t\tonClick={onConfirm}\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tdisableElevation\r\n\t\t\t\t>\r\n\t\t\t\t\t{confirmActionName}\r\n\t\t\t\t</Button>\r\n\t\t\t</DialogActions>\r\n\t\t</Dialog>\r\n\t)\r\n}\r\n","import React, { forwardRef } from \"react\"\r\nimport { withRouter } from \"react-router-dom\"\r\n\r\nconst WithRouterLink = Component => {\r\n\tconst Decorated = props => {\r\n\t\tconst resolveToLocation = to => {\r\n\t\t\tconst path = typeof to === \"object\" ? to : { pathname: to }\r\n\t\t\tconst href = props.history.createHref(path)\r\n\t\t\treturn href\r\n\t\t}\r\n\r\n\t\tconst handleClick = async event => {\r\n\t\t\tevent.preventDefault()\r\n\t\t\tevent.stopPropagation()\r\n\t\t\tconst { to, onClick } = props\r\n\r\n\t\t\tif (onClick && typeof onClick === \"function\") {\r\n\t\t\t\tawait onClick()\r\n\t\t\t\tprops.history.push(to)\r\n\t\t\t} else {\r\n\t\t\t\tprops.history.push(to)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst {\r\n\t\t\tforwardedRef,\r\n\t\t\tto,\r\n\t\t\tmatch,\r\n\t\t\tlocation,\r\n\t\t\thistory,\r\n\t\t\tstaticContext,\r\n\t\t\tonClick,\r\n\t\t\t...rest\r\n\t\t} = props\r\n\t\tconst toLocation = resolveToLocation(to)\r\n\r\n\t\treturn (\r\n\t\t\t<Component\r\n\t\t\t\tref={forwardedRef}\r\n\t\t\t\t{...rest}\r\n\t\t\t\thref={toLocation}\r\n\t\t\t\tonClick={handleClick}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n\r\n\tconst WithRouter = withRouter(Decorated)\r\n\r\n\treturn forwardRef((props, ref) => (\r\n\t\t<WithRouter {...props} forwardedRef={ref} />\r\n\t))\r\n}\r\n\r\nexport default WithRouterLink\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\"\r\nimport {\r\n\tTableRow,\r\n\tTableCell,\r\n\tBox,\r\n\tTable,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTableBody,\r\n\tTypography,\r\n\tCheckbox,\r\n\tButton,\r\n\tSvgIcon\r\n} from \"@material-ui/core\"\r\nimport { Alert } from \"@material-ui/lab\"\r\nimport Tooltip from \"./Tooltip\"\r\nimport {\r\n\tformatAmountPretty,\r\n\t// formatADXPretty,\r\n\tgetDAIInUSD,\r\n\tgetADXInUSD,\r\n\tgetUSDFormatted\r\n} from \"../helpers/formatting\"\r\nimport AppContext from \"../AppContext\"\r\nimport {\r\n\t// DEPOSIT_POOLS,\r\n\tZERO,\r\n\ticonByPoolId\r\n\t// UNBOND_DAYS\r\n} from \"../helpers/constants\"\r\nimport { getWithdrawActionBySelectedRewardChannels } from \"../actions\"\r\nimport { ReactComponent as GiftIcon } from \"./../resources/gift-ic.svg\"\r\nimport ConfirmationDialog from \"./ConfirmationDialog\"\r\nimport StatsCard from \"./StatsCard\"\r\nimport { AmountText } from \"./cardCommon\"\r\nimport WithRouterLink from \"./WithRouterLink\"\r\nimport {\r\n\tuseTranslation\r\n\t// Trans\r\n} from \"react-i18next\"\r\n\r\nconst RRButton = WithRouterLink(Button)\r\n\r\nconst getTotalSelectedRewards = (rewards, selected, getTotal) => {\r\n\treturn rewards\r\n\t\t.filter(r => (selected === \"all\" ? true : selected[r.id]))\r\n\t\t.reduce((amounts, r) => {\r\n\t\t\tamounts[r.currency] = (amounts[r.currency] || ZERO).add(\r\n\t\t\t\tr[getTotal ? \"amount\" : \"outstandingReward\"] || ZERO\r\n\t\t\t)\r\n\r\n\t\t\treturn amounts\r\n\t\t}, {})\r\n}\r\n\r\nconst totalAmountsLabel = amounts =>\r\n\tObject.entries(amounts)\r\n\t\t.map(\r\n\t\t\t([currency, amount]) =>\r\n\t\t\t\t`${formatAmountPretty(amount, currency)} ${currency}`\r\n\t\t)\r\n\t\t.join(\"; \")\r\n\r\nexport default function Rewards() {\r\n\tconst { t } = useTranslation()\r\n\r\n\tconst { stats, chosenWalletType, wrapDoingTxns, prices } = useContext(\r\n\t\tAppContext\r\n\t)\r\n\tconst [rewards, setRewards] = useState([])\r\n\tconst { tomStakingV5PoolStats, loyaltyPoolStats, tomPoolStats } = stats\r\n\tconst [selected, setSelected] = useState({})\r\n\tconst [totalAmountsSelected, setTotalAmountsSelected] = useState({})\r\n\tconst [claimOpen, setClaimOpen] = useState(false)\r\n\r\n\tconst totalRewardsAmounts = getTotalSelectedRewards(rewards, \"all\", true)\r\n\tconst totalOutstandingRewardsAmounts = getTotalSelectedRewards(rewards, \"all\")\r\n\r\n\tconst totalRewardsInUsd =\r\n\t\tgetADXInUSD(prices, totalRewardsAmounts[\"ADX\"] || ZERO) +\r\n\t\tgetDAIInUSD(totalRewardsAmounts[\"DAI\"] || ZERO)\r\n\r\n\tconst totalOutstandingRewardsInUsd =\r\n\t\tgetADXInUSD(prices, totalOutstandingRewardsAmounts[\"ADX\"] || ZERO) +\r\n\t\tgetDAIInUSD(totalOutstandingRewardsAmounts[\"DAI\"] || ZERO)\r\n\r\n\tconst selectedRewards = rewards.filter(x => selected[x.id])\r\n\tconst loaded =\r\n\t\t// loyaltyPoolStats.userDataLoaded &&\r\n\t\ttomPoolStats.userDataLoaded\r\n\r\n\tconst disableActionsMsg = !chosenWalletType.name\r\n\t\t? t(\"common.connectWallet\")\r\n\t\t: !loaded\r\n\t\t? t(\"common.loadingData\")\r\n\t\t: !rewards.length\r\n\t\t? t(\"rewards.noRewards\")\r\n\t\t: !selectedRewards.length\r\n\t\t? t(\"common.noSelection\")\r\n\t\t: \"\"\r\n\r\n\tuseEffect(() => {\r\n\t\tconst {\r\n\t\t\trewardChannels: tomRewardChannels,\r\n\t\t\tuserDataLoaded: tomUserDataLoaded\r\n\t\t} = tomPoolStats\r\n\r\n\t\t// const {\r\n\t\t// \tcurrentAPY: loPoCurrentAPY,\r\n\t\t// \trewardADX: loPoRewardADX,\r\n\t\t// \tuserDataLoaded: loPoUserDataLoaded\r\n\t\t// } = loyaltyPoolStats\r\n\r\n\t\tif (\r\n\t\t\ttomUserDataLoaded\r\n\t\t\t// && loPoUserDataLoaded\r\n\t\t) {\r\n\t\t\t// const loPoReward = {\r\n\t\t\t// \tid: \"loyalty_pool\",\r\n\t\t\t// \tname: t(\"rewards.loPoReward\"),\r\n\t\t\t// \tamount: loPoRewardADX,\r\n\t\t\t// \toutstandingReward: loPoRewardADX,\r\n\t\t\t// \tcurrency: \"ADX\",\r\n\t\t\t// \tcurrentAPY: loPoCurrentAPY,\r\n\t\t\t// \tpoolId: DEPOSIT_POOLS[0].id\r\n\t\t\t// }\r\n\r\n\t\t\tconst rewards = tomRewardChannels.map((channel, index) => {\r\n\t\t\t\tconst startDate = new Date(channel.periodStart)\r\n\t\t\t\tconst endDate = new Date(channel.periodEnd)\r\n\t\t\t\tconst rewardData = {\r\n\t\t\t\t\tid: `tom_${\r\n\t\t\t\t\t\tchannel.type\r\n\t\t\t\t\t}_${startDate.getTime()}_${endDate.getTime()}_${channel._id}`,\r\n\t\t\t\t\tname: t(\"rewards.poolName\", {\r\n\t\t\t\t\t\tpool: \"Tom\",\r\n\t\t\t\t\t\ttype: t(`common.${channel.type}`),\r\n\t\t\t\t\t\textra:\r\n\t\t\t\t\t\t\tchannel.type === \"fees\"\r\n\t\t\t\t\t\t\t\t? `${endDate.toLocaleString(\"default\", {\r\n\t\t\t\t\t\t\t\t\t\tmonth: \"long\"\r\n\t\t\t\t\t\t\t\t  })} ${endDate.getFullYear()}`\r\n\t\t\t\t\t\t\t\t: `${startDate.getMonth() +\r\n\t\t\t\t\t\t\t\t\t\t1}.${startDate.getFullYear()} - ${endDate.getMonth() +\r\n\t\t\t\t\t\t\t\t\t\t1}.${endDate.getFullYear()}`\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tamount: channel.amount,\r\n\t\t\t\t\toutstandingReward: channel.outstandingReward,\r\n\t\t\t\t\tcurrency: channel.type === \"fees\" ? \"DAI\" : \"ADX\",\r\n\t\t\t\t\tcurrentAPY: channel.currentAPY,\r\n\t\t\t\t\tpoolId: channel.poolId,\r\n\t\t\t\t\trewardChannel: channel\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn rewardData\r\n\t\t\t})\r\n\r\n\t\t\tsetRewards([\r\n\t\t\t\t// loPoReward,\r\n\t\t\t\t...rewards\r\n\t\t\t])\r\n\t\t}\r\n\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [\r\n\t\t// loyaltyPoolStats,\r\n\t\ttomPoolStats\r\n\t])\r\n\r\n\tconst onSelectChange = (id, value) => {\r\n\t\tconst newSelected = { ...selected }\r\n\t\tnewSelected[id] = value\r\n\r\n\t\tconst totalAmountSelected = getTotalSelectedRewards(rewards, newSelected)\r\n\r\n\t\tsetTotalAmountsSelected(totalAmountSelected)\r\n\t\tsetSelected(newSelected)\r\n\t}\r\n\r\n\tconst onClaim = async () => {\r\n\t\tsetSelected({})\r\n\t\tsetTotalAmountsSelected({})\r\n\t\tconst actions = getWithdrawActionBySelectedRewardChannels(\r\n\t\t\tselectedRewards,\r\n\t\t\tchosenWalletType,\r\n\t\t\tstats\r\n\t\t)\r\n\r\n\t\tfor (let i = 0; i < actions.length; i++) {\r\n\t\t\tawait wrapDoingTxns(actions[i])()\r\n\t\t}\r\n\t}\r\n\r\n\tconst totalSelectedLabel = totalAmountsLabel(totalAmountsSelected)\r\n\tconst totalRewardsLabel = totalAmountsLabel(totalRewardsAmounts) || \"0.00\"\r\n\tconst totalOutstandingRewardsLabel =\r\n\t\ttotalAmountsLabel(totalOutstandingRewardsAmounts) || \"0.00\"\r\n\r\n\tconst renderRewardRow = (reward, selected) => {\r\n\t\treturn (\r\n\t\t\t<TableRow key={reward.id}>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\tdisabled={reward.outstandingReward.isZero()}\r\n\t\t\t\t\t\tchecked={!!selected[reward.id]}\r\n\t\t\t\t\t\tonChange={ev => onSelectChange(reward.id, !!ev.target.checked)}\r\n\t\t\t\t\t\tinputProps={{ \"aria-label\": \"primary checkbox\" }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t<Box>{reward.name}</Box>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t<AmountText\r\n\t\t\t\t\t\ttext={`${formatAmountPretty(reward.amount, reward.currency)} ${\r\n\t\t\t\t\t\t\treward.currency\r\n\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\tfontSize={17}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t<AmountText\r\n\t\t\t\t\t\ttext={`${formatAmountPretty(\r\n\t\t\t\t\t\t\treward.outstandingReward,\r\n\t\t\t\t\t\t\treward.currency\r\n\t\t\t\t\t\t)} ${reward.currency}`}\r\n\t\t\t\t\t\tfontSize={17}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{`${(reward.currentAPY * 100).toFixed(\r\n\t\t\t\t\t2\r\n\t\t\t\t)} %`}</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderDepositRewardsRow = ({ deposit }) => {\r\n\t\tconst PoolIcon = iconByPoolId(deposit)\r\n\r\n\t\treturn (\r\n\t\t\t<TableRow key={deposit.poolId}>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{PoolIcon && (\r\n\t\t\t\t\t\t<Box mr={1}>\r\n\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t// classes={{ root: classes.iconBox }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<SvgIcon fontSize=\"large\" color=\"inherit\">\r\n\t\t\t\t\t\t\t\t\t<PoolIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t<Box>{t(deposit.label)}</Box>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t<AmountText\r\n\t\t\t\t\t\ttext={`${formatAmountPretty(deposit.totalRewards, \"ADX\")} ADX`}\r\n\t\t\t\t\t\tfontSize={17}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">\r\n\t\t\t\t\t<RRButton to={{ pathname: \"/stakings\" }}>\r\n\t\t\t\t\t\t{t(\"rewards.seeDetailsBtn\")}\r\n\t\t\t\t\t</RRButton>\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell align=\"right\">{`${(deposit.currentAPY * 100).toFixed(\r\n\t\t\t\t\t2\r\n\t\t\t\t)} %`}</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box mt={2}>\r\n\t\t\t<Box m={1} color=\"text.main\">\r\n\t\t\t\t<Typography variant=\"h5\" gutterBottom>\r\n\t\t\t\t\t{t(\"common.rewards\")}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Box>\r\n\t\t\t<Box display=\"flex\" flexDirection=\"row\">\r\n\t\t\t\t<Box\r\n\t\t\t\t\tm={1}\r\n\t\t\t\t\tp={2}\r\n\t\t\t\t\tbgcolor=\"background.darkerPaper\"\r\n\t\t\t\t\tboxShadow={25}\r\n\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Box m={1} fontSize={55}>\r\n\t\t\t\t\t\t<SvgIcon fontSize=\"inherit\" color=\"primary\">\r\n\t\t\t\t\t\t\t<GiftIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t{StatsCard({\r\n\t\t\t\t\t\t\tloaded,\r\n\t\t\t\t\t\t\ttitle: t(\"rewards.total\"),\r\n\t\t\t\t\t\t\tsubtitle: totalRewardsLabel,\r\n\t\t\t\t\t\t\textra: getUSDFormatted(totalRewardsInUsd),\r\n\t\t\t\t\t\t\tmultilineLinesAmounts: true\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\r\n\t\t\t\t<Box m={1} p={2} bgcolor=\"background.darkerPaper\" boxShadow={25}>\r\n\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t{StatsCard({\r\n\t\t\t\t\t\t\tloaded,\r\n\t\t\t\t\t\t\ttitle: t(\"rewards.unclaimed\"),\r\n\t\t\t\t\t\t\tsubtitle: totalOutstandingRewardsLabel,\r\n\t\t\t\t\t\t\textra: getUSDFormatted(totalOutstandingRewardsInUsd),\r\n\t\t\t\t\t\t\tmultilineLinesAmounts: true\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\r\n\t\t\t<Box m={1} bgcolor=\"background.darkerPaper\" boxShadow={25}>\r\n\t\t\t\t<Box\r\n\t\t\t\t\tp={2}\r\n\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\tjustifyContent=\"space-between\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t{!!Object.keys(totalAmountsSelected).length && (\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<Typography type=\"h5\">{t(\"rewards.totalSelected\")}:</Typography>\r\n\t\t\t\t\t\t\t\t<Typography type=\"h4\">{totalSelectedLabel}</Typography>\r\n\t\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"row\">\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Tooltip title={disableActionsMsg}>\r\n\t\t\t\t\t\t\t\t<Box display=\"inline-block\">\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tid=\"btn-rewards-page-claim\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => setClaimOpen(true)}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={!!disableActionsMsg}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{t(\"common.claim\")}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box p={2}>\r\n\t\t\t\t\t<TableContainer xs={12}>\r\n\t\t\t\t\t\t<Table aria-label=\"Rewards table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t<TableCell></TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{t(\"rewards.name\")}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"rewards.total\")}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"rewards.unclaimed\")}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{t(\"common.currentAPY\")}</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{tomStakingV5PoolStats.totalRewards &&\r\n\t\t\t\t\t\t\t\t\t!tomStakingV5PoolStats.totalRewards.isZero() &&\r\n\t\t\t\t\t\t\t\t\trenderDepositRewardsRow({\r\n\t\t\t\t\t\t\t\t\t\tdeposit: {\r\n\t\t\t\t\t\t\t\t\t\t\ttotalRewards: tomStakingV5PoolStats.totalRewards,\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentAPY: tomStakingV5PoolStats.currentAPY,\r\n\t\t\t\t\t\t\t\t\t\t\tpoolId: \"adex-staking-pool\",\r\n\t\t\t\t\t\t\t\t\t\t\tlabel: \"common.tomStakingPool\"\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t{loyaltyPoolStats.totalRewards &&\r\n\t\t\t\t\t\t\t\t\t!loyaltyPoolStats.totalRewards.isZero() &&\r\n\t\t\t\t\t\t\t\t\trenderDepositRewardsRow({\r\n\t\t\t\t\t\t\t\t\t\tdeposit: {\r\n\t\t\t\t\t\t\t\t\t\t\ttotalRewards: loyaltyPoolStats.totalRewards,\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentAPY: loyaltyPoolStats.currentAPY,\r\n\t\t\t\t\t\t\t\t\t\t\tpoolId: \"adex-loyalty-pool\",\r\n\t\t\t\t\t\t\t\t\t\t\tlabel: \"common.loPo\"\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t{[...(rewards || [])].map(r => renderRewardRow(r, selected))}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\r\n\t\t\t\t\t{(!stats.loaded || !rewards.length) && (\r\n\t\t\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t\t\t<Alert variant=\"filled\" severity=\"info\">\r\n\t\t\t\t\t\t\t\t{t(\"rewards.tableInfo\")}\r\n\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Box>\r\n\r\n\t\t\t\t{ConfirmationDialog({\r\n\t\t\t\t\tisOpen: claimOpen,\r\n\t\t\t\t\tonDeny: () => setClaimOpen(false),\r\n\t\t\t\t\tonConfirm: () => {\r\n\t\t\t\t\t\tsetClaimOpen(false)\r\n\t\t\t\t\t\tonClaim()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconfirmActionName: t(\"common.claim\"),\r\n\t\t\t\t\tcontent: (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Box mb={1}>\r\n\t\t\t\t\t\t\t\t<Typography>{t(\"dialogs.claimConfirmation\")}</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t{selectedRewards.map(reward => (\r\n\t\t\t\t\t\t\t\t<Box key={reward.id}>\r\n\t\t\t\t\t\t\t\t\t{reward.name}\r\n\t\t\t\t\t\t\t\t\t{\": \"}\r\n\t\t\t\t\t\t\t\t\t{formatAmountPretty(\r\n\t\t\t\t\t\t\t\t\t\treward.outstandingReward,\r\n\t\t\t\t\t\t\t\t\t\treward.currency\r\n\t\t\t\t\t\t\t\t\t)}{\" \"}\r\n\t\t\t\t\t\t\t\t\t{reward.currency}\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t\t\t<Box mt={1}>\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t{t(\"dialogs.forTotal\", { total: totalSelectedLabel })}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React, { useEffect, useState, useContext, useCallback } from \"react\"\r\nimport { getFarmPoolsStats } from \"./actions/farm\"\r\nimport AppContext from \"./AppContext\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nexport const FarmContext = React.createContext()\r\n\r\nconst REFRESH_INTERVAL_NO_WALLET = 300_000 // 300 sec\r\nconst REFRESH_INTERVAL_WALLET = 60_000 // 60 sec\r\n\r\nfunction useFarm() {\r\n\tconst { t } = useTranslation()\r\n\tconst { chosenWalletType, prices, addSnack, userIdle } = useContext(\r\n\t\tAppContext\r\n\t)\r\n\tconst [pricesLoaded, setPricesLoaded] = useState(false)\r\n\tconst [farmStats, setStats] = useState({})\r\n\tconst [getStats, setGetFarmStats] = useState(false)\r\n\r\n\tconst refreshFarmStats = useCallback(async () => {\r\n\t\tconst doUpdate = getStats && !userIdle && pricesLoaded\r\n\r\n\t\tif (doUpdate) {\r\n\t\t\ttry {\r\n\t\t\t\tconst stats = await getFarmPoolsStats({\r\n\t\t\t\t\tchosenWalletType,\r\n\t\t\t\t\texternalPrices: prices\r\n\t\t\t\t})\r\n\t\t\t\tsetStats(stats)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"err loading farm stats\", e)\r\n\t\t\t\tif (e.code === 4001) {\r\n\t\t\t\t\taddSnack(t(\"errors.authDeniedByUser\"), \"error\", 20_000)\r\n\t\t\t\t} else {\r\n\t\t\t\t\taddSnack(\r\n\t\t\t\t\t\tt(\"errors.loadingStats\", {\r\n\t\t\t\t\t\t\terror: !!e ? e.message || e.toString() : \"\"\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\"error\",\r\n\t\t\t\t\t\t20_000\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [getStats, userIdle, chosenWalletType.name, pricesLoaded, t])\r\n\r\n\tuseEffect(() => {\r\n\t\trefreshFarmStats()\r\n\t\tconst intvl = setInterval(\r\n\t\t\trefreshFarmStats,\r\n\t\t\tchosenWalletType.name\r\n\t\t\t\t? REFRESH_INTERVAL_WALLET\r\n\t\t\t\t: REFRESH_INTERVAL_NO_WALLET\r\n\t\t)\r\n\r\n\t\treturn () => {\r\n\t\t\tif (intvl) {\r\n\t\t\t\tclearInterval(intvl)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [chosenWalletType.name, refreshFarmStats])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!!prices && Object.keys(prices).length) {\r\n\t\t\tsetPricesLoaded(true)\r\n\t\t}\r\n\t}, [prices, setPricesLoaded])\r\n\r\n\treturn {\r\n\t\tfarmStats,\r\n\t\tsetGetFarmStats\r\n\t}\r\n}\r\n\r\nexport const FarmProvider = ({ children }) => {\r\n\tconst farmHooks = useFarm()\r\n\treturn (\r\n\t\t<FarmContext.Provider value={farmHooks}>{children}</FarmContext.Provider>\r\n\t)\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_2\",\n  \"data-name\": \"Layer 2\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_1-2\",\n  \"data-name\": \"Layer 1\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M156,15.85a12.37,12.37,0,0,0-9.34,20.49L128.18,48A25.12,25.12,0,0,1,93.1,39.4L84.45,24.61a12.38,12.38,0,1,0-3.57,0L73.42,38.35a25.14,25.14,0,0,1-35.64,9.14L21.24,36.88a12.38,12.38,0,1,0-8.86,3.74,12.47,12.47,0,0,0,4.07-.7L37,96.26h92.84L151.33,39.7A12.38,12.38,0,1,0,156,15.85ZM92.15,83.52l-9.54-5-9.54,5L74.89,72.9l-7.72-7.52,10.67-1.55,4.77-9.66,4.77,9.66L98,65.38,90.33,72.9Z\"\n})));\n\nvar SvgCrownIc = function SvgCrownIc(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 168.38 96.26\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCrownIc, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/crown-ic.7cdc10d9.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport { Box, LinearProgress, Typography, SvgIcon } from \"@material-ui/core\"\r\nimport { SwapHorizSharp as AssetsLinkIcon } from \"@material-ui/icons\"\r\nimport { ReactComponent as SpecialIcon } from \"./../resources/crown-ic.svg\"\r\nimport { CardRow } from \"./cardCommon\"\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\nimport { ExternalAnchor } from \"./Anchor\"\r\nimport {\r\n\ttoIdAttributeString,\r\n\tformatADXPretty,\r\n\tgetUSDFormatted,\r\n\tformatLPToken\r\n\t// formatTokens\r\n} from \"../helpers/formatting\"\r\nimport WithDialog from \"./WithDialog\"\r\nimport FarmForm from \"./FarmForm\"\r\n\r\nconst FarmFormDialog = WithDialog(FarmForm)\r\n// const REWARDS_ACTIVE_FROM_BLOCK = 11296000\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\tconst iconBoxBorder = ({ special }) =>\r\n\t\tspecial ? `3px solid ${theme.palette.special.main}` : \"none\"\r\n\r\n\treturn {\r\n\t\ticonBox: {\r\n\t\t\tborderRadius: \"35px\",\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: 189,\r\n\t\t\theight: 69,\r\n\t\t\ttop: -35,\r\n\t\t\tbackground: `linear-gradient(90deg, ${theme.palette.common.black} 69px, ${theme.palette.common.white} 69px)`,\r\n\t\t\tcolor: theme.palette.common.black,\r\n\t\t\t// boxShadow: theme.type === \"light\" ? theme.shadows[25] : \"none\",\r\n\t\t\tboxShadow: theme.shadows[25],\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"row\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"space-around\",\r\n\t\t\tpaddingLeft: 69 + theme.spacing(1),\r\n\t\t\tpaddingRight: theme.spacing(1),\r\n\t\t\tborder: iconBoxBorder\r\n\t\t},\r\n\t\tplatformIconBox: {\r\n\t\t\tcolor: theme.palette.common.white,\r\n\t\t\twidth: 69,\r\n\t\t\theight: \"100%\",\r\n\t\t\tborderTopLeftRadius: \"100%\",\r\n\t\t\tborderBottomLeftRadius: \"100%\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"row\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tleft: 0,\r\n\t\t\ttop: 0\r\n\t\t},\r\n\t\tspecialIcon: {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: 42,\r\n\t\t\theight: 42,\r\n\t\t\tleft: -18,\r\n\t\t\ttop: -23,\r\n\t\t\ttransform: `rotate(320deg)`,\r\n\t\t\tcolor: theme.palette.special.main\r\n\t\t},\r\n\t\toverlay: {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tleft: 0,\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tbackgroundColor: theme.palette.overlay\r\n\t\t},\r\n\t\tloading: {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\theight: \"100%\",\r\n\t\t\tborderRadius: \"35px\",\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\topacity: 0.69\r\n\t\t},\r\n\t\tcomingSoon: {\r\n\t\t\twidth: 160,\r\n\t\t\theight: \"auto\"\r\n\t\t},\r\n\t\ticonSpecial: {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: 69,\r\n\t\t\theight: 69,\r\n\t\t\ttop: -theme.spacing(3),\r\n\t\t\tcolor: theme.palette.special.maxWidth\r\n\t\t},\r\n\t\tgetLink: {\r\n\t\t\tmarginLeft: theme.spacing(1)\r\n\t\t},\r\n\t\tstrong: {\r\n\t\t\tmarginRight: theme.spacing(1)\r\n\t\t}\r\n\t}\r\n})\r\n\r\nexport const FarmPoolData = ({\r\n\tpollStatsLoaded,\r\n\tuserStatsLoaded,\r\n\tpool,\r\n\tstats,\r\n\tblockNumber\r\n}) => {\r\n\tconst { t } = useTranslation()\r\n\tconst classes = useStyles()\r\n\r\n\tconst {\r\n\t\tplatform,\r\n\t\tdepositAssetName,\r\n\t\tgetDepositAssetUrl,\r\n\t\trewardAssetName\r\n\t} = pool\r\n\r\n\tconst {\r\n\t\tlpTokenStakedValueUSD,\r\n\t\tlpTokenDataWithPrices,\r\n\t\tuseShare,\r\n\t\twalletBalance,\r\n\t\tuserLPBalance\r\n\t} = stats\r\n\r\n\t// const totalDepositTokenBalance =\r\n\t// \tpollStatsLoaded\r\n\t// \t\t? `${formatADXPretty(stats.totalSupply)} ${pool.depositAssetName\r\n\t// \t\t}`\r\n\t// \t\t: t(\"farm.NA\")\r\n\r\n\tconst totalDepositTokenStaked = pollStatsLoaded\r\n\t\t? `${formatADXPretty(stats.totalStaked)} ${pool.depositAssetName}`\r\n\t\t: t(\"farm.NA\")\r\n\r\n\tconst totalDepositTokenStakedUSD = pollStatsLoaded\r\n\t\t? `${getUSDFormatted(lpTokenStakedValueUSD)}`\r\n\t\t: t(\"farm.NA\")\r\n\r\n\tconst userStakedShare = userStatsLoaded\r\n\t\t? `${(useShare * 100).toFixed(4)} %`\r\n\t\t: t(\"farm.NA\")\r\n\r\n\tconst poolMPY = pollStatsLoaded ? stats.poolMPY * 100 : null\r\n\r\n\tconst currentMPY =\r\n\t\tpollStatsLoaded && poolMPY ? `${poolMPY.toFixed(2)} %` : t(\"farm.NA\")\r\n\r\n\tconst mpyInfo = [\r\n\t\tt(\"pools.currentDailyYield\", {\r\n\t\t\tyield: pollStatsLoaded ? (poolMPY / 30).toFixed(4) + \" %\" : t(\"farm.NA\")\r\n\t\t})\r\n\t]\r\n\r\n\t// const poolAPY = pollStatsLoaded ? stats.poolAPY * 100 : null\r\n\t// const currentAPY =\r\n\t// \tpollStatsLoaded ? `${poolAPY.toFixed(4)} %` : t(\"farm.NA\")\r\n\r\n\t// const weeklyYield =\r\n\t// \tpollStatsLoaded\r\n\t// \t\t? `${(poolAPY / (365 / 7)).toFixed(4)} %`\r\n\t// \t\t: t(\"farm.NA\")\r\n\r\n\t// const weeklyYieldInfo =\r\n\t// \t[\r\n\t// \t\tt(\"pools.currentDailyYield\", {\r\n\t// \t\t\tyield: pollStatsLoaded\r\n\t// \t\t\t\t? (poolAPY / 365).toFixed(4)\r\n\t// \t\t\t\t: t(\"farm.NA\")\r\n\t// \t\t})\r\n\t// \t]\r\n\r\n\tconst liquidityInfoText = t(\"farm.liquidityInfo\")\r\n\tconst liquidityStakedLP = userStatsLoaded\r\n\t\t? `${formatADXPretty(userLPBalance)} ${depositAssetName}`\r\n\t\t: t(\"farm.NA\")\r\n\r\n\tconst liquidityStakedLPInfo =\r\n\t\tuserStatsLoaded && !userLPBalance.isZero()\r\n\t\t\t? ` (${formatLPToken({\r\n\t\t\t\t\tlpValueBN: userLPBalance,\r\n\t\t\t\t\tlpTokenDataWithPrices,\r\n\t\t\t\t\tlpTokenName: depositAssetName\r\n\t\t\t  })})`\r\n\t\t\t: \"\"\r\n\r\n\tconst liquidityOnWalletLP = userStatsLoaded\r\n\t\t? `${formatADXPretty(walletBalance)} ${depositAssetName}`\r\n\t\t: t(\"farm.NA\")\r\n\r\n\tconst liquidityOnWalletLPInfo =\r\n\t\tuserStatsLoaded && !walletBalance.isZero()\r\n\t\t\t? ` (${formatLPToken({\r\n\t\t\t\t\tlpValueBN: walletBalance,\r\n\t\t\t\t\tlpTokenDataWithPrices,\r\n\t\t\t\t\tlpTokenName: depositAssetName\r\n\t\t\t  })})`\r\n\t\t\t: \"\"\r\n\r\n\tconst pendingADX = userStatsLoaded\r\n\t\t? `${formatADXPretty(stats.pendingADX)} ADX`\r\n\t\t: t(\"farm.NA\")\r\n\r\n\treturn (\r\n\t\t<Box width={1}>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={16}\r\n\t\t\t\ttext={\r\n\t\t\t\t\t<Trans\r\n\t\t\t\t\t\ti18nKey=\"farm.platform\"\r\n\t\t\t\t\t\tvalues={{ platform }}\r\n\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\tstrong: <strong className={classes.strong}></strong>\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={16}\r\n\t\t\t\ttext={\r\n\t\t\t\t\t<Trans\r\n\t\t\t\t\t\ti18nKey=\"farm.depositAsset\"\r\n\t\t\t\t\t\tvalues={{ depositAsset: depositAssetName }}\r\n\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\tstrong: <strong className={classes.strong}></strong>,\r\n\t\t\t\t\t\t\tgetLink: (\r\n\t\t\t\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tid={toIdAttributeString(\r\n\t\t\t\t\t\t\t\t\t\t`get-liquidity-deposit-${depositAssetName}`\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\thref={getDepositAssetUrl}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.getLink}\r\n\t\t\t\t\t\t\t\t></ExternalAnchor>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={16}\r\n\t\t\t\ttext={\r\n\t\t\t\t\t<Trans\r\n\t\t\t\t\t\ti18nKey=\"farm.rewardAsset\"\r\n\t\t\t\t\t\tvalues={{ rewardAsset: rewardAssetName }}\r\n\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\tstrong: <strong className={classes.strong}></strong>\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tmb={2}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* {blockNumber && blockNumber >= REWARDS_ACTIVE_FROM_BLOCK ? ( */}\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={\r\n\t\t\t\t\t<Trans\r\n\t\t\t\t\t\ti18nKey=\"farm.currentMPYLabel\"\r\n\t\t\t\t\t\tvalues={{ mpy: currentMPY }}\r\n\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\tstrong: (\r\n\t\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\t\tml={1}\r\n\t\t\t\t\t\t\t\t\tdisplay=\"inline\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"special.main\"\r\n\t\t\t\t\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\t\t\t\t\tfontSize={20}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tinfoText={mpyInfo}\r\n\t\t\t\tmb={2}\r\n\t\t\t/>\r\n\t\t\t{/* ) : (\r\n\t\t\t\t<CardRow\r\n\t\t\t\t\tcolor=\"special.main\"\r\n\t\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\ttext={\r\n\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\ti18nKey=\"farm.farmStartsInfo\"\r\n\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\texternalLink: (\r\n\t\t\t\t\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.getLink}\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\tid={`farm-starts-info-link-pool=${id}`}\r\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t\thref={`https://etherscan.io/block/countdown/11296000`}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmb={2}\r\n\t\t\t\t/>\r\n\t\t\t)} */}\r\n\r\n\t\t\t{/* <CardRow\r\n\t\t\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\ttext={t(\"pools.weeklyYield\", { yield: weeklyYield })}\r\n\t\t\t\t\t\tinfoText={weeklyYieldInfo}\r\n\t\t\t\t\t\tmb={2}\r\n\t\t\t\t\t/> */}\r\n\r\n\t\t\t{/* <CardRow\r\n\t\t\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\ttext={t(\"farm.totalDepositTokenBalance\", { depositAssetName })}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\t\t\tfontWeight={\"text.primary\"}\r\n\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\ttext={totalDepositTokenBalance}\r\n\t\t\t\t\t\tisAmountText\r\n\t\t\t\t\t\tmb={0.5}\r\n\t\t\t\t\t/> */}\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={t(\"farm.totalDepositTokenStaked\", {\r\n\t\t\t\t\tdepositAsset: depositAssetName\r\n\t\t\t\t})}\r\n\t\t\t/>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"special.main\"\r\n\t\t\t\tfontWeight={\"text.primary\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={totalDepositTokenStaked}\r\n\t\t\t\tisAmountText\r\n\t\t\t/>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\tfontWeight={\"text.primary\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={totalDepositTokenStakedUSD}\r\n\t\t\t\tisAmountText\r\n\t\t\t\tmb={0.5}\r\n\t\t\t/>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={t(\"farm.userStakedShare\")}\r\n\t\t\t/>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\tfontWeight={\"text.primary\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={userStakedShare}\r\n\t\t\t\tmb={2}\r\n\t\t\t/>\r\n\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={20}\r\n\t\t\t\ttext={t(\"farm.myLiquidity\")}\r\n\t\t\t\tinfoText={liquidityInfoText}\r\n\t\t\t\tmb={0.5}\r\n\t\t\t/>\r\n\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={t(\"farm.myStaked\")}\r\n\t\t\t/>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"special.main\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Box>{liquidityStakedLP}</Box>\r\n\t\t\t\t\t\t{liquidityStakedLPInfo && (\r\n\t\t\t\t\t\t\t<Box color=\"text.primary\">{liquidityStakedLPInfo}</Box>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t}\r\n\t\t\t\tmb={0.5}\r\n\t\t\t/>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={t(\"farm.onWallet\")}\r\n\t\t\t/>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"special.main\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Box>{liquidityOnWalletLP}</Box>\r\n\t\t\t\t\t\t{liquidityStakedLPInfo && (\r\n\t\t\t\t\t\t\t<Box color=\"text.primary\">{liquidityOnWalletLPInfo}</Box>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t}\r\n\t\t\t\tmb={0.5}\r\n\t\t\t/>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={t(\"farm.myReward\")}\r\n\t\t\t/>\r\n\t\t\t<CardRow\r\n\t\t\t\tcolor=\"special.main\"\r\n\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\tfontSize={14}\r\n\t\t\t\ttext={pendingADX}\r\n\t\t\t\tmb={2}\r\n\t\t\t/>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default function FarmCard({\r\n\tloading,\r\n\tdisabled,\r\n\tdisabledInfo,\r\n\tpollStatsLoaded,\r\n\tuserStatsLoaded,\r\n\tpool,\r\n\tstats,\r\n\tblockNumber\r\n}) {\r\n\tconst { t } = useTranslation()\r\n\tconst { id, name, special, latRewardBlock } = pool\r\n\tconst classes = useStyles({ special })\r\n\r\n\tconst platformIcon = (\r\n\t\t<SvgIcon fontSize=\"large\" color=\"inherit\">\r\n\t\t\t<pool.platformIcon width=\"99%\" height=\"99%\" />\r\n\t\t</SvgIcon>\r\n\t)\r\n\r\n\tconst assetsIcons = [\r\n\t\tpool.assetsIcons.map((Icon, i) => (\r\n\t\t\t<SvgIcon key={i} fontSize=\"large\" color=\"inherit\">\r\n\t\t\t\t<Icon width=\"99%\" height=\"99%\" />\r\n\t\t\t</SvgIcon>\r\n\t\t))\r\n\t]\r\n\r\n\tconst canDeposit = blockNumber < latRewardBlock\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tbgcolor={\"background.card\"}\r\n\t\t\tp={3}\r\n\t\t\tmy={4}\r\n\t\t\tmx={2}\r\n\t\t\tpt={6}\r\n\t\t\twidth={320}\r\n\t\t\tmaxWidth=\"100%\"\r\n\t\t\tminHeight={420}\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\tflexDirection=\"column\"\r\n\t\t\talignItems=\"center\"\r\n\t\t\tboxShadow={25}\r\n\t\t\tposition=\"relative\"\r\n\t\t>\r\n\t\t\t<Box mb={2}>\r\n\t\t\t\t<Typography align=\"center\" variant=\"h5\" color=\"textPrimary\">\r\n\t\t\t\t\t{name}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Box>\r\n\r\n\t\t\t<FarmPoolData\r\n\t\t\t\tpollStatsLoaded={pollStatsLoaded}\r\n\t\t\t\tuserStatsLoaded={userStatsLoaded}\r\n\t\t\t\tpool={pool}\r\n\t\t\t\tstats={stats}\r\n\t\t\t\tblockNumber={blockNumber}\r\n\t\t\t/>\r\n\r\n\t\t\t<Box width={1}>\r\n\t\t\t\t<Box mb={1}>\r\n\t\t\t\t\t<FarmFormDialog\r\n\t\t\t\t\t\tid={`deposit-liquidity-pool-${id}`}\r\n\t\t\t\t\t\ttitle={t(\"farm.depositDialogTitle\", { name })}\r\n\t\t\t\t\t\tbtnLabel={t(\"common.deposit\")}\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\ttooltipTitle={\r\n\t\t\t\t\t\t\tdisabled ? disabledInfo : !canDeposit ? t(\"farm.farmEnded\") : \"\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdisabled={disabled || !canDeposit}\r\n\t\t\t\t\t\tpool={pool}\r\n\t\t\t\t\t\tstats={stats}\r\n\t\t\t\t\t\tblockNumber={blockNumber}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<FarmFormDialog\r\n\t\t\t\t\t\tid={`withdraw-liquidity-pool-${id}`}\r\n\t\t\t\t\t\ttitle={t(\"farm.withdrawDialogTitle\", { name })}\r\n\t\t\t\t\t\tbtnLabel={t(\"common.withdraw\")}\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\tcolor=\"default\"\r\n\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\ttooltipTitle={disabled ? disabledInfo : \"\"}\r\n\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\twithdraw\r\n\t\t\t\t\t\tpool={pool}\r\n\t\t\t\t\t\tstats={stats}\r\n\t\t\t\t\t\tblockNumber={blockNumber}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\r\n\t\t\t{!!loading && (\r\n\t\t\t\t<Box\r\n\t\t\t\t\tclasses={{ root: classes.overlay }}\r\n\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tjustifyContent=\"center\"\r\n\t\t\t\t></Box>\r\n\t\t\t)}\r\n\r\n\t\t\t<Box classes={{ root: classes.iconBox }}>\r\n\t\t\t\t<Box classes={{ root: classes.platformIconBox }}>\r\n\t\t\t\t\t{platformIcon || null}\r\n\t\t\t\t</Box>\r\n\t\t\t\t{(assetsIcons || []).reduce((prev, curr) => [\r\n\t\t\t\t\tprev,\r\n\t\t\t\t\t<AssetsLinkIcon />,\r\n\t\t\t\t\tcurr\r\n\t\t\t\t])}\r\n\t\t\t\t{!!loading && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<LinearProgress\r\n\t\t\t\t\t\t\tclasses={{ root: classes.loading }}\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{!!special && (\r\n\t\t\t\t\t<SvgIcon fontSize=\"large\" className={classes.specialIcon}>\r\n\t\t\t\t\t\t<SpecialIcon width=\"99%\" height=\"99%\" />\r\n\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React, { useState, useContext, useCallback } from \"react\"\r\nimport {\r\n\tonLiquidityPoolDeposit,\r\n\tonLiquidityPoolWithdraw,\r\n\tisValidNumberString\r\n} from \"../actions\"\r\nimport {\r\n\tparseTokens,\r\n\tformatTokens,\r\n\tformatADXPretty,\r\n\ttoIdAttributeString\r\n} from \"../helpers/formatting\"\r\nimport { ZERO } from \"../helpers/constants\"\r\nimport {\r\n\tTextField,\r\n\tButton,\r\n\tFormControlLabel,\r\n\tCheckbox,\r\n\tBox\r\n} from \"@material-ui/core\"\r\nimport { Alert } from \"@material-ui/lab\"\r\nimport AppContext from \"../AppContext\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { FarmPoolData } from \"./FarmCard\"\r\nimport Tooltip from \"./Tooltip\"\r\n\r\nexport default function FarmForm({\r\n\tcloseDialog,\r\n\tpool,\r\n\tstats,\r\n\twithdraw,\r\n\tblockNumber\r\n}) {\r\n\tconst { t } = useTranslation()\r\n\tconst { chosenWalletType, wrapDoingTxns } = useContext(AppContext)\r\n\r\n\tconst [actionAmount, setActionAmount] = useState(\"\")\r\n\tconst [amountErr, setAmountErr] = useState(false)\r\n\tconst [amountErrText, setAmountErrText] = useState(\"\")\r\n\tconst [confirmation, setConfirmation] = useState(false)\r\n\r\n\tconst actionName = withdraw ? \"withdraw\" : \"deposit\"\r\n\tconst { depositAssetDecimals, depositAssetName } = pool\r\n\r\n\tconst { pendingADX, userLPBalance, walletBalance } = stats\r\n\r\n\tconst maxAmount = withdraw ? userLPBalance || ZERO : walletBalance\r\n\tconst showRewards = withdraw && pendingADX && pendingADX.gt(ZERO)\r\n\tconst showRewardsOnDeposit = !withdraw && pendingADX && pendingADX.gt(ZERO)\r\n\r\n\tconst confirmationLabel = pool.confirmationLabel\r\n\tconst confirmed = !confirmationLabel || confirmation\r\n\r\n\tconst disableActionsMsg = !confirmed\r\n\t\t? t(\"farm.noConfirmed\")\r\n\t\t: !pool || !stats\r\n\t\t? t(\"errors.statsNotProvided\")\r\n\t\t: \"\"\r\n\r\n\tconst disableDepositsMsg = !!disableActionsMsg\r\n\t\t? disableActionsMsg\r\n\t\t: !!amountErr\r\n\t\t? amountErrText\r\n\t\t: !walletBalance || walletBalance.isZero()\r\n\t\t? t(\"farm.zeroBalanceDeposit\", { currency: depositAssetName })\r\n\t\t: !actionAmount\r\n\t\t? t(\"errors.amountNotSelected\")\r\n\t\t: \"\"\r\n\r\n\tconst disableWithdrawMsg = !!disableActionsMsg\r\n\t\t? disableActionsMsg\r\n\t\t: !!amountErr\r\n\t\t? amountErrText\r\n\t\t: !userLPBalance || userLPBalance.isZero()\r\n\t\t? t(\"farm.zeroBalanceWithdraw\", { currency: depositAssetName })\r\n\t\t: !actionAmount\r\n\t\t? t(\"errors.amountNotSelected\")\r\n\t\t: \"\"\r\n\r\n\tconst disableRewardsWithdrawMsg = !!disableActionsMsg\r\n\t\t? disableActionsMsg\r\n\t\t: !pendingADX || pendingADX.isZero()\r\n\t\t? t(\"farm.noRewards\", { currency: \"ADX\" })\r\n\t\t: \"\"\r\n\r\n\tconst onAction = useCallback(\r\n\t\tamount => {\r\n\t\t\tsetConfirmation(false)\r\n\r\n\t\t\tconst action = withdraw ? onLiquidityPoolWithdraw : onLiquidityPoolDeposit\r\n\r\n\t\t\tif (closeDialog) closeDialog()\r\n\r\n\t\t\twrapDoingTxns(\r\n\t\t\t\taction.bind(null, {\r\n\t\t\t\t\tpool,\r\n\t\t\t\t\tstats,\r\n\t\t\t\t\tchosenWalletType,\r\n\t\t\t\t\tactionAmount: parseTokens(amount, depositAssetDecimals),\r\n\t\t\t\t\tpendingADX\r\n\t\t\t\t})\r\n\t\t\t)()\r\n\t\t},\r\n\t\t[\r\n\t\t\tchosenWalletType,\r\n\t\t\tcloseDialog,\r\n\t\t\tdepositAssetDecimals,\r\n\t\t\tpendingADX,\r\n\t\t\tpool,\r\n\t\t\tstats,\r\n\t\t\twithdraw,\r\n\t\t\twrapDoingTxns\r\n\t\t]\r\n\t)\r\n\r\n\tconst onRewardsWithdraw = () => {\r\n\t\tonAction(\"0.00\")\r\n\t}\r\n\r\n\tconst validateFields = params => {\r\n\t\tconst { userInputAmount } = params\r\n\r\n\t\tif (!isValidNumberString(userInputAmount)) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(t(\"errors.invalidAmountInput\"))\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst amountBN = parseTokens(userInputAmount, depositAssetDecimals)\r\n\r\n\t\tconst minStakingAmountBN = parseTokens(\r\n\t\t\tpool.minStakingAmount || \"0\",\r\n\t\t\tdepositAssetDecimals\r\n\t\t)\r\n\r\n\t\tif (amountBN.gt(maxAmount)) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(t(\"errors.lowADXAmount\"))\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (pool && amountBN.lte(minStakingAmountBN)) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(\r\n\t\t\t\tt(\"errors.lessDanMinPoolAmount\", { currency: depositAssetName })\r\n\t\t\t)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\t!withdraw &&\r\n\t\t\tpool &&\r\n\t\t\tstats.poolTotalStaked &&\r\n\t\t\tpool.poolDepositsLimit &&\r\n\t\t\tamountBN.add(stats.poolTotalStaked).gt(pool.poolDepositsLimit)\r\n\t\t) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(t(\"errors.amountOverPoolLimit\"))\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetAmountErr(false)\r\n\t\treturn\r\n\t}\r\n\r\n\tconst onAmountChange = amountStr => {\r\n\t\tsetActionAmount(amountStr)\r\n\t\tvalidateFields({\r\n\t\t\tuserInputAmount: amountStr\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box width={1}>\r\n\t\t\t<Box>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tid={`new-farm-${actionName}-form-amount-field`}\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tlabel={t(\"farm.labelLPTokenAmount\", { token: depositAssetName })}\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tvalue={actionAmount}\r\n\t\t\t\t\terror={amountErr}\r\n\t\t\t\t\tplaceholder=\"0.00\"\r\n\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\tonAmountChange(ev.target.value)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\thelperText={amountErr ? amountErrText : null}\r\n\t\t\t\t/>\r\n\t\t\t\t<Box mt={1}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tid={`new-farm-${actionName}-form-max-amount-btn`}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tonAmountChange(formatTokens(maxAmount, depositAssetDecimals))\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t(\"common.maxAmountBtn\", {\r\n\t\t\t\t\t\t\tamount: formatADXPretty(maxAmount),\r\n\t\t\t\t\t\t\tcurrency: depositAssetName\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t\t<Box>\r\n\t\t\t\t{showRewards && (\r\n\t\t\t\t\t<Box my={2}>\r\n\t\t\t\t\t\t<Alert variant=\"filled\" severity=\"info\">\r\n\t\t\t\t\t\t\t{t(\"farm.withdrawRewardsAlert\", {\r\n\t\t\t\t\t\t\t\tpendingADX: formatADXPretty(pendingADX),\r\n\t\t\t\t\t\t\t\tdepositAssetName\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{showRewardsOnDeposit && (\r\n\t\t\t\t\t<Box my={2}>\r\n\t\t\t\t\t\t<Alert variant=\"filled\" severity=\"info\">\r\n\t\t\t\t\t\t\t{t(\"farm.depositRewardsAlert\", {\r\n\t\t\t\t\t\t\t\tpendingADX: formatADXPretty(pendingADX),\r\n\t\t\t\t\t\t\t\tdepositAssetName\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<FarmPoolData\r\n\t\t\t\t\tpollStatsLoaded={true}\r\n\t\t\t\t\tuserStatsLoaded={true}\r\n\t\t\t\t\tpool={pool}\r\n\t\t\t\t\tstats={stats}\r\n\t\t\t\t\tblockNumber={blockNumber}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\r\n\t\t\t{confirmationLabel && (\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\tstyle={{ userSelect: \"none\" }}\r\n\t\t\t\t\t\tlabel={t(confirmationLabel)}\r\n\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\tid={`new-${actionName}-form-tos-check`}\r\n\t\t\t\t\t\t\t\tchecked={confirmation}\r\n\t\t\t\t\t\t\t\tonChange={ev => setConfirmation(ev.target.checked)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t></FormControlLabel>\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t\t<Box>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<Tooltip title={withdraw ? disableWithdrawMsg : disableDepositsMsg}>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tid={`new-${actionName}-farm-btn-${toIdAttributeString(\r\n\t\t\t\t\t\t\t\t\tpool.poolId\r\n\t\t\t\t\t\t\t\t)}`}\r\n\t\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\twithdraw ? !!disableWithdrawMsg : !!disableDepositsMsg\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tonClick={() => onAction(actionAmount)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{withdraw\r\n\t\t\t\t\t\t\t\t\t? t(\"common.withdrawCurrency\", { currency: depositAssetName })\r\n\t\t\t\t\t\t\t\t\t: t(\"common.depositCurrency\", { currency: depositAssetName })}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</Box>\r\n\r\n\t\t\t\t{showRewards && (\r\n\t\t\t\t\t<Box mt={1}>\r\n\t\t\t\t\t\t<Tooltip title={disableRewardsWithdrawMsg}>\r\n\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tid={`new-reward-only-withdraw-farm-btn-${toIdAttributeString(\r\n\t\t\t\t\t\t\t\t\t\tpool.poolId\r\n\t\t\t\t\t\t\t\t\t)}`}\r\n\t\t\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tdisabled={!!disableRewardsWithdrawMsg}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tonClick={onRewardsWithdraw}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t(\"farm.withdrawRewardsBtn\", { token: \"ADX\" })}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport { Box, Typography } from \"@material-ui/core\"\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\nimport { ExternalAnchor } from \"./Anchor\"\r\nimport eddieTheFarmerInfo from \"../resources/eddie-farmer-info-card.svg\"\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\tgetLink: {\r\n\t\t\tmarginLeft: theme.spacing(1)\r\n\t\t}\r\n\t}\r\n})\r\n\r\nexport default function FarmCard() {\r\n\tconst { t } = useTranslation()\r\n\tconst classes = useStyles()\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tbgcolor={\"background.card\"}\r\n\t\t\tp={3}\r\n\t\t\tmy={4}\r\n\t\t\tmx={2}\r\n\t\t\twidth={320}\r\n\t\t\tmaxWidth=\"100%\"\r\n\t\t\tminHeight={420}\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\tflexDirection=\"column\"\r\n\t\t\talignItems=\"center\"\r\n\t\t\tboxShadow={25}\r\n\t\t\tposition=\"relative\"\r\n\t\t>\r\n\t\t\t<img\r\n\t\t\t\tsrc={eddieTheFarmerInfo}\r\n\t\t\t\talt={t(\"farm.eddieFarmer\")}\r\n\t\t\t\tstyle={{ maxWidth: 222 }}\r\n\t\t\t/>\r\n\t\t\t<Box my={3}>\r\n\t\t\t\t<Typography align=\"center\" variant=\"h5\" color=\"textPrimary\">\r\n\t\t\t\t\t{t(\"farm.farmInfoCardText\")}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Box>\r\n\r\n\t\t\t<Typography align=\"center\" variant=\"h6\" color=\"textPrimary\">\r\n\t\t\t\t<Trans\r\n\t\t\t\t\ti18nKey=\"farm.farmInfoCardTextLink\"\r\n\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\texternalLink: (\r\n\t\t\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\t\t\tclassName={classes.getLink}\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tid={`farm-info-card-blogpost-link`}\r\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\thref={`https://www.adex.network/blog/adex-farming/`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</Typography>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M162.5,971.3l-13.6-136.6c0-12.5,16-1.4,36.2-1.4l0,0c20.1,0,36.3-11.1,36.3,1.4l0,0L210,967.9C210,997,162.5,985.2,162.5,971.3z M104.3,526.5c-99.5-45-91.5-115.8-91.5-115.8c-12.5,25,14.1,243,117.9,243C177.2,653.8,216.2,576.8,104.3,526.5z M104.3,372.5C4.8,327.6,12.9,256.8,12.9,256.8c-12.5,24.9,14.1,243,117.9,243C177.2,499.8,216.2,422.9,104.3,372.5z M104.3,223C4.8,178.4,12.9,107.4,12.9,107.4c-12.5,25,14.1,243,117.9,243C177.2,350.3,216.2,273.5,104.3,223z M242.3,653.8c103.7,0,130.3-218,117.9-243c0,0,8.1,70.8-91.6,115.8C156.9,576.8,195.8,653.8,242.3,653.8z M104.3,684.4c-99.5-45-91.5-115.8-91.5-115.8c-12.5,25,14.1,243,117.9,243C177.2,811.6,216.2,734.6,104.3,684.4z M242.3,811.6c103.7,0,130.3-218,117.9-243c0,0,8.1,70.8-91.6,115.8C156.9,734.6,195.8,811.6,242.3,811.6z M242.3,499.8c103.7,0,130.3-218.1,117.9-243c0,0,8.1,70.8-91.6,115.7C156.9,422.9,195.8,499.8,242.3,499.8z M242.3,350.3c103.7,0,130.3-218,117.9-243c0,0,8.1,70.9-91.6,115.6C156.9,273.5,195.8,350.3,242.3,350.3z M193.8,234.7c110.1,0-6.1-234.6-6.1-234.6C173.7,22.1,83.7,234.7,193.8,234.7z M491.3,989.6l66.4-116.2l0,0c5.3-11.2-14.1-8.1-32.2-16.5l0,0c-18.4-8.5-28.3-25.4-33.5-14l-45.3,129.5C440.9,985.2,478.9,1015.9,491.3,989.6z M581.3,544.7c-71.2-82.7-34.1-143.5-34.1-143.5c-21.9,17.3-89.5,226.4,4.5,270.1C593.8,690.9,661.6,637.5,581.3,544.7z M646.2,404.9c-71.2-82.5-34.1-143.3-34.1-143.3c-21.9,17.3-89.6,226.4,4.4,270.2C658.7,551.2,726.5,498,646.2,404.9z M709.2,269.5C637.8,187.1,675.1,126,675.1,126c-22,17.3-89.6,226.3,4.5,270.1C721.7,415.6,789.4,362.5,709.2,269.5z M653,718.4c94.1,43.5,210-142.8,209.2-170.8c0,0-22.5,67.7-131.8,66.4C607.8,612.6,610.8,698.7,653,718.4z M514.9,687.8c-71.3-82.7-34.3-143.4-34.3-143.4c-21.9,17.3-89.5,226.4,4.5,269.9C527.5,833.9,595.1,780.6,514.9,687.8z M586.5,861.4c94,43.7,210-142.8,209.3-170.8c0,0-22.5,67.7-131.8,66.4C541.4,755.7,544.3,841.9,586.5,861.4z M717.8,578.7c94.1,43.7,210-143,209.2-170.8c0,0-22.5,67.6-131.7,66.4C672.7,473,675.6,559.2,717.8,578.7z M780.8,443.1c94.1,43.8,210-142.7,209.2-170.7c0,0-22.6,67.9-131.7,66.4C735.7,337.5,738.7,423.6,780.8,443.1z M785.4,317.7c99.8,46.3,93.3-215.3,93.3-215.3C856.8,116.6,685.7,271.3,785.4,317.7z\"\n}));\n\nvar SvgWheatIcon = function SvgWheatIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 1000 1000\",\n    enableBackground: \"new 0 0 1000 1000\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWheatIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/wheat-icon.caa79971.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useContext, useEffect, useState } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport { FarmContext } from \"../FarmProvider\"\r\nimport AppContext from \"../AppContext\"\r\nimport {\r\n\tBox,\r\n\tuseMediaQuery,\r\n\tButton,\r\n\tFormHelperText,\r\n\tSvgIcon\r\n} from \"@material-ui/core\"\r\nimport FarmCard from \"./FarmCard\"\r\nimport FarmInfoCard from \"./FarmInfoCard\"\r\nimport SectionHeader from \"./SectionHeader\"\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\nimport { FARM_POOLS, ZERO } from \"../helpers/constants\"\r\nimport ConfirmationDialog from \"./ConfirmationDialog\"\r\nimport { ReactComponent as HarvestIcon } from \"./../resources/wheat-icon.svg\"\r\nimport { onHarvestAll } from \"../actions\"\r\nimport {\r\n\tformatADXPretty\r\n\t// formatTokens\r\n} from \"../helpers/formatting\"\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\tharvestBtn: {},\r\n\t\tharvestIcon: {\r\n\t\t\tcolor: ({ canHarvest }) =>\r\n\t\t\t\tcanHarvest ? theme.palette.special.main : \"inherit\"\r\n\t\t}\r\n\t}\r\n})\r\n\r\nconst Farm = () => {\r\n\tconst { t } = useTranslation()\r\n\tconst { farmStats, setGetFarmStats } = useContext(FarmContext)\r\n\tconst { chosenWalletType, wrapDoingTxns } = useContext(AppContext)\r\n\tconst {\r\n\t\tpollStatsLoaded,\r\n\t\tuserStatsLoaded,\r\n\t\tstatsByPoolId,\r\n\t\t// blockNumber,\r\n\t\ttotalRewards\r\n\t} = farmStats || {}\r\n\r\n\tconst canStake = !!chosenWalletType.name && userStatsLoaded //&& !!appStats.connectedWalletAddress\r\n\tconst justifyCenter = useMediaQuery(theme => theme.breakpoints.down(\"xs\"))\r\n\tconst [harvestOpen, setHarvestOpen] = useState(false)\r\n\tconst canHarvest = userStatsLoaded && !!totalRewards //&& totalRewards.gt(ZERO)\r\n\tconst classes = useStyles({ canHarvest })\r\n\r\n\tuseEffect(() => {\r\n\t\tsetGetFarmStats(true)\r\n\t\treturn () => {\r\n\t\t\tsetGetFarmStats(false)\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [])\r\n\r\n\tconst onHarvest = async () => {\r\n\t\tawait wrapDoingTxns(\r\n\t\t\tonHarvestAll.bind(null, {\r\n\t\t\t\tfarmStats,\r\n\t\t\t\tchosenWalletType\r\n\t\t\t})\r\n\t\t)()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<SectionHeader\r\n\t\t\t\ttitle={t(\"common.farm\")}\r\n\t\t\t\tactions={\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tid=\"btn-farm-harvest-all-rewards\"\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={() => setHarvestOpen(true)}\r\n\t\t\t\t\t\t\t\tdisabled={!canHarvest}\r\n\t\t\t\t\t\t\t\tstartIcon={\r\n\t\t\t\t\t\t\t\t\t<SvgIcon fontSize=\"inherit\" className={classes.harvestIcon}>\r\n\t\t\t\t\t\t\t\t\t\t<HarvestIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t(\"farm.harvest\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<FormHelperText>\r\n\t\t\t\t\t\t\t\t{canHarvest\r\n\t\t\t\t\t\t\t\t\t? `${formatADXPretty(totalRewards || ZERO)} ADX`\r\n\t\t\t\t\t\t\t\t\t: null}\r\n\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t<Box mt={2}>\r\n\t\t\t\t<Box\r\n\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\tflex={1}\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\tflexWrap=\"wrap\"\r\n\t\t\t\t\talignItems=\"stretch\"\r\n\t\t\t\t\tjustifyContent={justifyCenter ? \"center\" : \"flex-start\"}\r\n\t\t\t\t>\r\n\t\t\t\t\t<FarmInfoCard />\r\n\t\t\t\t\t{FARM_POOLS.map(pool => {\r\n\t\t\t\t\t\tconst stats = statsByPoolId ? statsByPoolId[pool.poolId] || {} : {}\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<FarmCard\r\n\t\t\t\t\t\t\t\tkey={pool.token}\r\n\t\t\t\t\t\t\t\t// blockNumber={blockNumber}\r\n\t\t\t\t\t\t\t\tloading={!pollStatsLoaded}\r\n\t\t\t\t\t\t\t\tpollStatsLoaded={pollStatsLoaded}\r\n\t\t\t\t\t\t\t\tuserStatsLoaded={userStatsLoaded}\r\n\t\t\t\t\t\t\t\tdisabled={!canStake}\r\n\t\t\t\t\t\t\t\tdisabledInfo={t(\"common.connectWallet\")}\r\n\t\t\t\t\t\t\t\tpool={pool}\r\n\t\t\t\t\t\t\t\tstats={stats}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t\t{ConfirmationDialog({\r\n\t\t\t\tisOpen: harvestOpen,\r\n\t\t\t\tonDeny: () => setHarvestOpen(false),\r\n\t\t\t\tonConfirm: () => {\r\n\t\t\t\t\tsetHarvestOpen(false)\r\n\t\t\t\t\tonHarvest()\r\n\t\t\t\t},\r\n\t\t\t\tconfirmActionName: t(\"farm.harvest\"),\r\n\t\t\t\tcontent: (\r\n\t\t\t\t\t<Trans\r\n\t\t\t\t\t\ti18nKey=\"dialogs.harvestAllConfirmation\"\r\n\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\tamount: formatADXPretty(totalRewards || ZERO),\r\n\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default Farm\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1546\",\n  \"data-name\": \"Group 1546\",\n  transform: \"translate(0 -1.242)\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle_723\",\n  \"data-name\": \"Rectangle 723\",\n  width: 6.162,\n  height: 19.828,\n  transform: \"translate(7.414 1.242)\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle_724\",\n  \"data-name\": \"Rectangle 724\",\n  width: 6.162,\n  height: 14.058,\n  transform: \"translate(14.953 7.012)\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle_725\",\n  \"data-name\": \"Rectangle 725\",\n  width: 6.162,\n  height: 8.204,\n  transform: \"translate(0 12.866)\"\n}));\n\nvar SvgStatsIc = function SvgStatsIc(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 21.115,\n    height: 19.828,\n    viewBox: \"0 0 21.115 19.828\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgStatsIc, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/stats-ic.2488c863.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\"\r\n\r\nconst ValidatorStatsContext = React.createContext()\r\n\r\nexport default ValidatorStatsContext\r\n","import { createMuiTheme, responsiveFontSizes } from \"@material-ui/core/styles\"\r\nimport lime from \"@material-ui/core/colors/lime\"\r\nimport { fade } from \"@material-ui/core/styles/colorManipulator\"\r\n\r\nconst WHITE = \"#fafafa\"\r\nconst BLACK = \"#0f0f0f\"\r\nexport const PRIMARY = \"#494560\"\r\nexport const SECONDARY = \"#ff4269\"\r\nexport const ALEX_GREY = \"#3f3e3e\"\r\nexport const ALEX_GREY_LIGHT = \"#666\"\r\nexport const WARNING = \"#FEB006\"\r\nexport const SUCCESS = \"#14dc9c\"\r\nexport const INFO = \"#1b75bc\"\r\nexport const ERROR = \"#ff6969\"\r\n\r\n// DARK THEME\r\nexport const TEXT_MAIN = \"#7B7597\"\r\nexport const TEXT_DEFAULT = \"#e2dff5\"\r\nexport const PAPER = \"#29253B\"\r\nexport const DARKER_PAPER = \"#1A1825\"\r\nexport const BACKGROUND_DEFAULT = \"#131313\"\r\nexport const SPECIAL_CONTRAST = \"#6942ff\"\r\n\r\n//LIGHT THEME\r\nexport const TEXT_SECONDARY_LIGHT = \"#7f74b5\"\r\nexport const TEXT_MAIN_LIGHT = \"#534c78\"\r\nexport const PAPER_LIGHT = \"#fefefe\"\r\nexport const DARKER_PAPER_LIGHT = \"#eee\"\r\nexport const BACKGROUND_DEFAULT_LIGHT = WHITE\r\nexport const SPECIAL_CONTRAST_LIGHT = \"#1BC69F\" //  SECONDARY// \"#3c1fcc\"\r\n\r\nconst paletteCommon = {\r\n\tprimary: { main: PRIMARY, contrastText: WHITE },\r\n\tsecondary: { main: SECONDARY, contrastText: WHITE },\r\n\tgrey: { main: ALEX_GREY, contrastText: WHITE },\r\n\tlightGrey: { main: ALEX_GREY_LIGHT, contrastText: WHITE },\r\n\twarning: {\r\n\t\tmain: WARNING,\r\n\t\tcontrastText: BLACK\r\n\t},\r\n\tsuccess: {\r\n\t\tmain: SUCCESS,\r\n\t\tcontrastText: BLACK\r\n\t},\r\n\tinfo: {\r\n\t\tmain: INFO,\r\n\t\tcontrastText: WHITE\r\n\t},\r\n\terror: {\r\n\t\tmain: ERROR,\r\n\t\tcontrastText: WHITE\r\n\t},\r\n\tfirst: lime,\r\n\tcommon: {\r\n\t\twhite: WHITE,\r\n\t\tblack: BLACK\r\n\t}\r\n}\r\n\r\nconst paletteLight = {\r\n\ttype: \"light\",\r\n\t...paletteCommon,\r\n\tspecial: { main: SPECIAL_CONTRAST_LIGHT, contrastText: WHITE },\r\n\ttext: {\r\n\t\tmain: TEXT_MAIN_LIGHT,\r\n\t\tprimary: fade(BLACK, 0.9),\r\n\t\tsecondary: fade(BLACK, 0.69),\r\n\t\tdisabled: fade(BLACK, 0.42),\r\n\t\thint: fade(BLACK, 0.13)\r\n\t},\r\n\tbackground: {\r\n\t\tdefault: BACKGROUND_DEFAULT_LIGHT,\r\n\t\tpaper: PAPER_LIGHT,\r\n\t\tdarkerPaper: DARKER_PAPER_LIGHT,\r\n\t\tspecial: SPECIAL_CONTRAST_LIGHT,\r\n\t\tspecialSecondary: BLACK,\r\n\t\tactive: fade(TEXT_MAIN, 0.42),\r\n\t\tcontrast: TEXT_MAIN,\r\n\t\tcontrastText: WHITE,\r\n\t\tcard: DARKER_PAPER_LIGHT\r\n\t}\r\n}\r\n\r\nconst paletteDark = {\r\n\ttype: \"dark\",\r\n\t...paletteCommon,\r\n\tspecial: { main: WARNING, contrastText: BLACK },\r\n\ttext: {\r\n\t\tmain: TEXT_MAIN,\r\n\t\tprimary: fade(WHITE, 0.69),\r\n\t\tsecondary: fade(WHITE, 0.42),\r\n\t\tdisabled: fade(WHITE, 0.1948),\r\n\t\thint: fade(WHITE, 0.13)\r\n\t},\r\n\tdivider: fade(WHITE, 0.13),\r\n\tbackground: {\r\n\t\tdarkerPaper: DARKER_PAPER,\r\n\t\tpaper: PAPER,\r\n\t\tdefault: BLACK,\r\n\t\tspecial: SPECIAL_CONTRAST,\r\n\t\tspecialSecondary: BLACK,\r\n\t\tactive: PRIMARY,\r\n\t\tcontrast: WHITE,\r\n\t\tcontrastText: BLACK,\r\n\t\tcard: PAPER\r\n\t},\r\n\toverlay: fade(DARKER_PAPER, 0.69),\r\n\taction: {\r\n\t\taction: fade(WHITE, 0.46),\r\n\t\thover: fade(WHITE, 0.069),\r\n\t\thoverOpacity: 0.069,\r\n\t\tselected: fade(WHITE, 0.1914),\r\n\t\tselectedOpacity: 0.1914,\r\n\t\tdisabled: fade(WHITE, 0.1948),\r\n\t\tdisabledOpacity: 0.48,\r\n\t\tfocus: fade(WHITE, 0.18),\r\n\t\tfocusOpacity: 0.18,\r\n\t\tactivatedOpacity: 0.18\r\n\t}\r\n}\r\n\r\nconst typography = {\r\n\tfontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n\tfontSize: 14.2\r\n}\r\n\r\nconst defaultTheme = createMuiTheme({\r\n\tpalette: { ...paletteCommon }\r\n})\r\n\r\nconst darkShadows = [...defaultTheme.shadows, \"3px 4px 15px 0px rgba(0,0,0,1)\"]\r\n\r\nconst lightShadows = [\r\n\t...defaultTheme.shadows,\r\n\t\"1px 1px 5px 0px rgba(69,69,69,0.30)\"\r\n]\r\n\r\nconst commonTheme = createMuiTheme({\r\n\t...defaultTheme,\r\n\ttypography,\r\n\toverrides: {\r\n\t\tMuiButton: {\r\n\t\t\troot: {\r\n\t\t\t\tborderRadius: 0\r\n\t\t\t},\r\n\t\t\toutlined: {\r\n\t\t\t\tborderRadius: 0,\r\n\t\t\t\tborderColor: ALEX_GREY\r\n\t\t\t},\r\n\t\t\tcontained: {\r\n\t\t\t\tbackgroundColor: ALEX_GREY,\r\n\t\t\t\tcolor: WHITE,\r\n\t\t\t\tboxShadow: 0,\r\n\t\t\t\t\"&:hover\": {\r\n\t\t\t\t\tbackgroundColor: ALEX_GREY_LIGHT\r\n\t\t\t\t},\r\n\t\t\t\t\"&$focusVisible\": {\r\n\t\t\t\t\tbackgroundColor: ALEX_GREY_LIGHT\r\n\t\t\t\t},\r\n\t\t\t\t\"&:active\": {\r\n\t\t\t\t\tbackgroundColor: ALEX_GREY_LIGHT\r\n\t\t\t\t}\r\n\t\t\t\t// \"&:disabled\": {\r\n\t\t\t\t// \tbackgroundColor: fade(WHITE, 0.12),\r\n\t\t\t\t// \tcolor: fade(WHITE, 0.26)\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiFab: {\r\n\t\t\troot: {\r\n\t\t\t\tboxShadow: 0,\r\n\t\t\t\t// \"&:disabled\": {\r\n\t\t\t\t// \tbackgroundColor: fade(WHITE, 0.12),\r\n\t\t\t\t// \tcolor: fade(WHITE, 0.26)\r\n\t\t\t\t// },\r\n\t\t\t\t\"&:active\": {\r\n\t\t\t\t\tboxShadow: 0\r\n\t\t\t\t},\r\n\t\t\t\t\"&$focusVisible\": {\r\n\t\t\t\t\tboxShadow: 0\r\n\t\t\t\t},\r\n\t\t\t\t\"&$disabled\": {\r\n\t\t\t\t\tboxShadow: 0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiTableCell: {\r\n\t\t\thead: {\r\n\t\t\t\twhiteSpace: \"nowrap\",\r\n\t\t\t\tcolor: defaultTheme.palette.text.main,\r\n\t\t\t\tfontWeight: 700\r\n\t\t\t},\r\n\t\t\troot: {\r\n\t\t\t\twhiteSpace: \"nowrap\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiPaper: {\r\n\t\t\trounded: {\r\n\t\t\t\tborderRadius: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiTooltip: {\r\n\t\t\ttooltip: {\r\n\t\t\t\tborderRadius: 0,\r\n\t\t\t\tfontSize: \"0.9em\",\r\n\t\t\t\tbackgroundColor: fade(DARKER_PAPER, 0.9),\r\n\t\t\t\tpadding: defaultTheme.spacing(2)\r\n\t\t\t},\r\n\t\t\tarrow: { color: fade(DARKER_PAPER, 0.9) }\r\n\t\t},\r\n\t\tMuiDrawer: {\r\n\t\t\tpaperAnchorLeft: {\r\n\t\t\t\tborderRight: 0\r\n\t\t\t},\r\n\t\t\tpaperAnchorDockedLeft: {\r\n\t\t\t\tborderRight: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiAlert: {\r\n\t\t\troot: {\r\n\t\t\t\tborderRadius: 0,\r\n\t\t\t\tmaxWidth: \"100%\",\r\n\t\t\t\talignItems: \"center\"\r\n\t\t\t},\r\n\t\t\tmessage: {\r\n\t\t\t\twordBreak: \"break-word\"\r\n\t\t\t},\r\n\t\t\toutlinedSuccess: {\r\n\t\t\t\tbackgroundColor: BLACK\r\n\t\t\t},\r\n\t\t\toutlinedInfo: {\r\n\t\t\t\tbackgroundColor: BLACK\r\n\t\t\t},\r\n\t\t\toutlinedWarning: {\r\n\t\t\t\tbackgroundColor: BLACK\r\n\t\t\t},\r\n\t\t\toutlinedError: {\r\n\t\t\t\tbackgroundColor: WHITE\r\n\t\t\t},\r\n\t\t\tfilledSuccess: {\r\n\t\t\t\tcolor: defaultTheme.palette.success.contrastText\r\n\t\t\t},\r\n\t\t\tfilledInfo: {\r\n\t\t\t\tcolor: defaultTheme.palette.info.contrastText\r\n\t\t\t},\r\n\t\t\tfilledWarning: {\r\n\t\t\t\tcolor: defaultTheme.palette.warning.contrastText\r\n\t\t\t},\r\n\t\t\tfilledError: {\r\n\t\t\t\tcolor: defaultTheme.palette.error.contrastText\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiBackdrop: {\r\n\t\t\troot: {\r\n\t\t\t\tbackgroundColor: fade(BLACK, 0.69)\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiFilledInput: {\r\n\t\t\troot: {\r\n\t\t\t\tborderRadius: 0,\r\n\t\t\t\tborderTopLeftRadius: 0,\r\n\t\t\t\tborderTopRightRadius: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiOutlinedInput: {\r\n\t\t\troot: {\r\n\t\t\t\tborderRadius: 0\r\n\t\t\t}\r\n\t\t}\r\n\t\t// MuiDrawer: {\r\n\t\t// \troot: {\r\n\t\t// \t\ttop: 0,\r\n\t\t// \t\tleft: 0,\r\n\t\t// \t\tbottom: 'auto',\r\n\t\t// \t\tright: 'auto',\r\n\t\t// \t\twidth: '100vw',\r\n\t\t// \t\theight: '100vh',\r\n\t\t// \t\tposition: 'fixed'\r\n\t\t// \t},\r\n\t\t// \tpaper: {\r\n\t\t// \t\ttop: 0,\r\n\t\t// \t\tleft: 0,\r\n\t\t// \t\theight: '100%',\r\n\t\t// \t\tposition: 'absolute'\r\n\t\t// \t}\r\n\t\t// }\r\n\t}\r\n})\r\n\r\nconst defaultThemeWithOverrides = responsiveFontSizes(commonTheme, {\r\n\tbreakpoints: [\"xs\", \"sm\", \"md\", \"lg\", \"xl\"],\r\n\tfactor: 3\r\n})\r\n\r\nexport const darkTheme = createMuiTheme({\r\n\t...defaultThemeWithOverrides,\r\n\tpalette: paletteDark,\r\n\tshadows: darkShadows,\r\n\ttype: \"dark\"\r\n})\r\n\r\nexport const lightTheme = createMuiTheme({\r\n\t...defaultThemeWithOverrides,\r\n\tpalette: paletteLight,\r\n\tshadows: lightShadows,\r\n\ttype: \"light\"\r\n})\r\n","export const hexToRgbaColorString = (hex, alpha) => {\r\n\tif (!hex || typeof hex !== \"string\") {\r\n\t\tthrow new Error(\"Invalid color\")\r\n\t} else if (hex.length === 4) {\r\n\t\thex = hex + hex.substr(1, 4)\r\n\t}\r\n\r\n\tif (typeof alpha === \"object\" || typeof alpha === \"undefined\") {\r\n\t\talpha = 1\r\n\t}\r\n\r\n\tconst hexToDec = h => {\r\n\t\treturn parseInt(\"0x\" + h, 16)\r\n\t}\r\n\r\n\tlet r = hexToDec(hex.substr(1, 2))\r\n\tlet g = hexToDec(hex.substr(3, 2))\r\n\tlet b = hexToDec(hex.substr(5, 2))\r\n\r\n\treturn `rgba(${r},${g},${b},${alpha})`\r\n}\r\n","import React from \"react\"\r\nimport { Line } from \"react-chartjs-2\"\r\nimport { SECONDARY } from \"../themeMUi\"\r\nimport { Box, Typography, CircularProgress } from \"@material-ui/core\"\r\nimport { hexToRgbaColorString } from \"../helpers/colors\"\r\nimport { useWindowSize } from \"../hooks/windowSize\"\r\nimport { formatNumberPretty } from \"../helpers/formatting\"\r\n\r\nconst commonDsProps = {\r\n\tfill: true,\r\n\tlineTension: 0.333,\r\n\tborderWidth: 2,\r\n\tpointRadius: 2,\r\n\tpointHitRadius: 10\r\n}\r\n\r\nconst DEFAULT_FONT_SIZE = 14.2\r\nconst FONT = \"Roboto\"\r\n\r\nconst DefaultLabel = ({ label = \"\", align }) =>\r\n\tlabel.split(\"-\").map((x, index, all) => (\r\n\t\t<Typography key={x + index} component=\"div\" variant=\"caption\" align={align}>\r\n\t\t\t{x}\r\n\t\t</Typography>\r\n\t))\r\n\r\nexport const StatsChart = ({\r\n\tdata,\r\n\tdataSynced = false,\r\n\tdataActive = true,\r\n\tdefaultLabels = [],\r\n\toptions = {},\r\n\txLabel = \"\",\r\n\tyLabel = \"DATA\",\r\n\tyColor = SECONDARY,\r\n\tcurrency,\r\n\txSelect\r\n}) => {\r\n\tconst windowSize = useWindowSize()\r\n\tconst chartHeight = Math.min(\r\n\t\tMath.max(Math.floor((windowSize.height || 0) / 2.2), 240),\r\n\t\t333\r\n\t)\r\n\r\n\tconst chartData = {\r\n\t\tlabels: dataSynced ? data.labels : defaultLabels,\r\n\t\tdatasets: [\r\n\t\t\t{\r\n\t\t\t\t...commonDsProps,\r\n\t\t\t\tbackgroundColor: hexToRgbaColorString(yColor, 0.13),\r\n\t\t\t\tborderColor: hexToRgbaColorString(yColor, 1),\r\n\t\t\t\tpointBackgroundColor: hexToRgbaColorString(yColor, 1),\r\n\t\t\t\tlabel: yLabel,\r\n\t\t\t\tdata: dataSynced ? data.datasets : [],\r\n\t\t\t\tyAxisID: \"y-axis-1\",\r\n\t\t\t\thidden: !dataActive\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\r\n\tconst linesOptions = {\r\n\t\tanimation: false,\r\n\t\tresponsive: true,\r\n\t\tlayout: {\r\n\t\t\tpadding: {\r\n\t\t\t\ttop: 16\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// This and fixed height are used for proper mobile display of the chart\r\n\t\tmaintainAspectRatio: false,\r\n\t\ttitle: {\r\n\t\t\tdisplay: false,\r\n\t\t\ttext: options.title\r\n\t\t},\r\n\t\tlegend: {\r\n\t\t\tdisplay: false\r\n\t\t},\r\n\t\ttooltips: {\r\n\t\t\tbackgroundColor: \"black\",\r\n\t\t\tmode: \"index\",\r\n\t\t\tintersect: false,\r\n\t\t\ttitleFontSize: DEFAULT_FONT_SIZE,\r\n\t\t\tbodyFontSize: DEFAULT_FONT_SIZE,\r\n\t\t\tbodyFontFamily: FONT,\r\n\t\t\ttitleFontFamily: FONT,\r\n\t\t\txPadding: 8,\r\n\t\t\tyPadding: 8,\r\n\t\t\tcornerRadius: 0,\r\n\t\t\tbodySpacing: 4,\r\n\t\t\tcaretSize: 8,\r\n\t\t\tdisplayColors: true,\r\n\t\t\tcallbacks: {\r\n\t\t\t\tlabel: function(t, d) {\r\n\t\t\t\t\t// This adds currency (DAI) to label in the tooltips if needed\r\n\t\t\t\t\tvar xLabel = d.datasets[t.datasetIndex].label\r\n\t\t\t\t\tvar yLabel = currency\r\n\t\t\t\t\t\t? `${formatNumberPretty(t.yLabel)} ${currency}`\r\n\t\t\t\t\t\t: `${formatNumberPretty(t.yLabel)}`\r\n\t\t\t\t\treturn `${xLabel}: ${yLabel}`\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\thover: {\r\n\t\t\tmode: \"index\",\r\n\t\t\tintersect: false\r\n\t\t},\r\n\r\n\t\tscales: {\r\n\t\t\txAxes: [\r\n\t\t\t\t{\r\n\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t\tdrawBorder: true,\r\n\t\t\t\t\t\tdrawTicks: true,\r\n\t\t\t\t\t\tcolor: SECONDARY\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscaleLabel: {\r\n\t\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\t\tlabelString: xLabel,\r\n\t\t\t\t\t\tfontSize: DEFAULT_FONT_SIZE,\r\n\t\t\t\t\t\tfontFamily: FONT,\r\n\t\t\t\t\t\tcolor: SECONDARY\r\n\t\t\t\t\t},\r\n\t\t\t\t\tticks: {\r\n\t\t\t\t\t\tautoSkip: true,\r\n\t\t\t\t\t\tmaxTicksLimit: 2,\r\n\t\t\t\t\t\tmaxRotation: 0,\r\n\t\t\t\t\t\tpadding: -24,\r\n\t\t\t\t\t\tfontSize: DEFAULT_FONT_SIZE,\r\n\t\t\t\t\t\tfontFamily: FONT,\r\n\t\t\t\t\t\tcallback: () => \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tyAxes: [\r\n\t\t\t\t{\r\n\t\t\t\t\t// NOTE: this one is just to show constant size grid lines\r\n\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\t\tdrawBorder: false,\r\n\t\t\t\t\t\tdrawTicks: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\tticks: {\r\n\t\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\t\tbeginAtZero: true,\r\n\t\t\t\t\t\tmaxTicksLimit: 11,\r\n\t\t\t\t\t\tstepSize: 1,\r\n\t\t\t\t\t\tmin: 0,\r\n\t\t\t\t\t\tmax: 10,\r\n\t\t\t\t\t\tcallback: () => \"\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscaleLabel: {\r\n\t\t\t\t\t\tdisplay: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttype: \"linear\",\r\n\t\t\t\t\tid: \"y-axis-dummy-grid-lines\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\tcolor: SECONDARY,\r\n\t\t\t\t\tticks: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t\tbeginAtZero: true,\r\n\t\t\t\t\t\tfontColor: yColor,\r\n\t\t\t\t\t\tcallback: label =>\r\n\t\t\t\t\t\t\tformatNumberPretty(label) + (currency ? ` ${currency}` : \"\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscaleLabel: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t\tcolor: SECONDARY\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\tdisplay: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttype: \"linear\",\r\n\t\t\t\t\tid: \"y-axis-1\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box width={1}>\r\n\t\t\t<Box height={chartHeight} width={1} color={yColor}>\r\n\t\t\t\t{dataSynced ? (\r\n\t\t\t\t\t<Line height={chartHeight} data={chartData} options={linesOptions} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\twidth={1}\r\n\t\t\t\t\t\theight={1}\r\n\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\tjustifyContent=\"center\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CircularProgress color=\"inherit\" size={chartHeight / 4} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t\t<Box\r\n\t\t\t\tmaxWidth={1}\r\n\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\tjustifyContent=\"space-between\"\r\n\t\t\t\talignItems=\"center\"\r\n\t\t\t\tpx={1}\r\n\t\t\t\tflexWrap=\"wrap\"\r\n\t\t\t>\r\n\t\t\t\t<Box flexGrow=\"1\">\r\n\t\t\t\t\t<DefaultLabel label={defaultLabels[0]} align=\"left\" />\r\n\t\t\t\t</Box>\r\n\r\n\t\t\t\t<Box flexGrow=\"1\">{xSelect}</Box>\r\n\r\n\t\t\t\t<Box flexGrow=\"1\">\r\n\t\t\t\t\t<DefaultLabel label={defaultLabels[1]} align=\"right\" />\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import { useState, useEffect } from \"react\"\r\n\r\nexport function useWindowSize() {\r\n\tconst hasWindow = typeof window === \"object\"\r\n\r\n\tfunction getWindowSize() {\r\n\t\treturn {\r\n\t\t\twidth: hasWindow ? window.innerWidth : 0,\r\n\t\t\theight: hasWindow ? window.innerHeight : 0\r\n\t\t}\r\n\t}\r\n\r\n\tconst [windowSize, setWindowSize] = useState(getWindowSize)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!hasWindow) {\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tfunction onResize() {\r\n\t\t\tsetWindowSize(getWindowSize())\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"resize\", onResize)\r\n\r\n\t\treturn () => window.removeEventListener(\"resize\", onResize)\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [hasWindow])\r\n\r\n\treturn windowSize\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\"\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\"\r\nimport {\r\n\tBox,\r\n\tMenuItem,\r\n\tSelect,\r\n\tFormControl,\r\n\tGrid,\r\n\tSvgIcon,\r\n\tList,\r\n\tListItem,\r\n\tListItemText\r\n} from \"@material-ui/core\"\r\nimport clsx from \"clsx\"\r\nimport { useLocation } from \"react-router-dom\"\r\nimport { ReactComponent as StatsIcon } from \"./../resources/stats-ic.svg\"\r\nimport SectionHeader from \"./SectionHeader\"\r\nimport ValidatorStatsContext from \"../ValidatorStatsContext\"\r\nimport { DEPOSIT_POOLS } from \"../helpers/constants\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport StatsCard from \"./StatsCard\"\r\nimport { StatsChart } from \"./StatsChart\"\r\nimport { formatADXPretty, formatNumberPretty } from \"../helpers/formatting\"\r\n\r\nconst ACTIVE_BORDER_WIDTH = 3\r\n\r\nconst poolsSrc = DEPOSIT_POOLS.filter(x => x.hasValidatorStats).map(x => ({\r\n\tvalue: x.validatorId,\r\n\tlabel: x.label,\r\n\tpool: x\r\n}))\r\n\r\nconst chartStatsKeys = [\r\n\t\"dailyTransactionsData\",\r\n\t\"monthlyTransactionsData\",\r\n\t\"yearlyTransactionsData\",\r\n\t\"dailyPayoutsData\"\r\n]\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\tcard: {\r\n\t\t\tposition: \"relative\",\r\n\t\t\tbackgroundColor: theme.palette.background.paper\r\n\t\t},\r\n\t\tactive: {\r\n\t\t\tbackgroundColor: theme.palette.background.darkerPaper,\r\n\t\t\tborder: `${ACTIVE_BORDER_WIDTH}px solid ${theme.palette.background.special}`\r\n\t\t},\r\n\t\tinteractive: {\r\n\t\t\tcursor: \"pointer\"\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: theme.spacing(3),\r\n\t\t\theight: theme.spacing(3),\r\n\t\t\ttop: theme.spacing(1),\r\n\t\t\tright: theme.spacing(1),\r\n\t\t\tcolor: theme.palette.background.special\r\n\t\t}\r\n\t}\r\n})\r\n\r\nconst useQuery = () => {\r\n\treturn new URLSearchParams(useLocation().search)\r\n}\r\n\r\nconst ValidatorStatsCard = ({\r\n\tlabel,\r\n\tvalue,\r\n\tloaded,\r\n\tcurrentKey,\r\n\tchartKey,\r\n\tsetKey\r\n}) => {\r\n\tconst classes = useStyles()\r\n\tconst active = chartKey && currentKey && currentKey === chartKey\r\n\tconst interactive = !!chartKey\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tclassName={clsx(classes.card, {\r\n\t\t\t\t[classes.active]: active,\r\n\t\t\t\t[classes.interactive]: interactive\r\n\t\t\t})}\r\n\t\t\tm={1}\r\n\t\t\tpy={2}\r\n\t\t\tpx={5}\r\n\t\t\tboxShadow={25}\r\n\t\t\tonClick={() => chartKey && setKey(chartKey)}\r\n\t\t\tflexGrow={1}\r\n\t\t>\r\n\t\t\t{interactive && (\r\n\t\t\t\t<SvgIcon className={classes.icon} fontSize=\"inherit\">\r\n\t\t\t\t\t<StatsIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t</SvgIcon>\r\n\t\t\t)}\r\n\t\t\t<Box>\r\n\t\t\t\t{StatsCard({\r\n\t\t\t\t\tloaded: loaded,\r\n\t\t\t\t\ttitle: label,\r\n\t\t\t\t\tsubtitle: value\r\n\t\t\t\t})}\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport function PropItem({ name, value }) {\r\n\treturn (\r\n\t\t<ListItem>\r\n\t\t\t<ListItemText primary={name} secondary={value} />\r\n\t\t</ListItem>\r\n\t)\r\n}\r\n\r\nconst XSelect = ({ chartDataKey, setChartDataKey, t }) => (\r\n\t<FormControl fullWidth size=\"small\" variant=\"outlined\" color=\"primary\">\r\n\t\t<Select\r\n\t\t\tlabelId=\"pool-stats-key-select-input-labe\"\r\n\t\t\tid=\"pool-stats-key-select\"\r\n\t\t\tvalue={chartDataKey}\r\n\t\t\tonChange={e => {\r\n\t\t\t\tsetChartDataKey(e.target.value)\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{chartStatsKeys.map(key => (\r\n\t\t\t\t<MenuItem key={key} value={key}>\r\n\t\t\t\t\t{t(`stats.${key}`)}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t))}\r\n\t\t</Select>\r\n\t</FormControl>\r\n)\r\n\r\nconst getDefaultLabels = (labels = []) => [\r\n\tlabels[0] || \"\",\r\n\tlabels[labels.length - 1] || \"\"\r\n]\r\n\r\nexport default function Stats() {\r\n\tconst theme = useTheme()\r\n\tconst { t } = useTranslation()\r\n\tconst query = useQuery()\r\n\r\n\tconst [chartDataKey, setChartDataKey] = useState(\"dailyTransactionsData\")\r\n\tconst [chartData, setChartData] = useState({})\r\n\r\n\tconst { loaded, poolId, setPoolId, pool, setPool, stats } = useContext(\r\n\t\tValidatorStatsContext\r\n\t)\r\n\r\n\tuseEffect(() => {\r\n\t\t// NOTE: if not deep copy there is some s**t with the chart\r\n\t\t// - cache maybe and it mixes up everything\r\n\t\tsetChartData(JSON.parse(JSON.stringify({ ...(stats[chartDataKey] || {}) })))\r\n\t}, [chartDataKey, stats])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst validator = query.get(\"validator\")\r\n\t\tconst selected = validator\r\n\t\t\t? poolsSrc.filter(x => t(x.label === validator))[0]\r\n\t\t\t: {}\r\n\r\n\t\tonPoolSelect(selected.value || poolsSrc[0].value)\r\n\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [])\r\n\r\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\tfunction onPoolSelect(poolId) {\r\n\t\tsetPoolId(poolId)\r\n\t\tsetPool(poolsSrc.find(x => x.value === poolId).pool)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<SectionHeader title={t(\"common.validatorStats\")} />\r\n\t\t\t<Box m={1} mb={0}>\r\n\t\t\t\t<FormControl variant=\"outlined\" size=\"small\">\r\n\t\t\t\t\t{/* <InputLabel id=\"pool-stats-select-input-label\">\r\n\t\t\t\t\t\t{t(\"common.pool\")}\r\n\t\t\t\t\t</InputLabel> */}\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tlabelId=\"pool-stats-select-input-labe\"\r\n\t\t\t\t\t\tid=\"pool-stats-select\"\r\n\t\t\t\t\t\tvalue={poolId}\r\n\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\tonPoolSelect(e.target.value)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{poolsSrc.map(({ value, label }) => (\r\n\t\t\t\t\t\t\t<MenuItem key={value} value={value}>\r\n\t\t\t\t\t\t\t\t{t(label)}\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</FormControl>\r\n\t\t\t</Box>\r\n\t\t\t<Box mt={2}>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t<Grid item xs={12} md={12} lg={7}>\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\tm={1}\r\n\t\t\t\t\t\t\tmt={2}\r\n\t\t\t\t\t\t\twidth={1}\r\n\t\t\t\t\t\t\tp={1}\r\n\t\t\t\t\t\t\tbgcolor=\"background.darkerPaper\"\r\n\t\t\t\t\t\t\tboxShadow={25}\r\n\t\t\t\t\t\t\tborder={ACTIVE_BORDER_WIDTH}\r\n\t\t\t\t\t\t\tborderColor={\"background.special\"}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<StatsChart\r\n\t\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\t\ttitle: t(`stats.${chartDataKey}`)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tdefaultLabels={getDefaultLabels(chartData.labels)}\r\n\t\t\t\t\t\t\t\tdata={chartData}\r\n\t\t\t\t\t\t\t\tdataActive={true}\r\n\t\t\t\t\t\t\t\tdataSynced={loaded}\r\n\t\t\t\t\t\t\t\txLabel={t(`stats.${chartDataKey}`)}\r\n\t\t\t\t\t\t\t\tyLabel={t(chartData.valueLabel)}\r\n\t\t\t\t\t\t\t\tyColor={theme.palette.background.special}\r\n\t\t\t\t\t\t\t\tcurrency={chartData.currency}\r\n\t\t\t\t\t\t\t\txSelect={XSelect({\r\n\t\t\t\t\t\t\t\t\tchartDataKey,\r\n\t\t\t\t\t\t\t\t\tsetChartDataKey,\r\n\t\t\t\t\t\t\t\t\tt\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12} md={12} lg={5}>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<List dense disablePadding>\r\n\t\t\t\t\t\t\t\t<PropItem name={t(\"common.name\")} value={t(pool.label)} />\r\n\t\t\t\t\t\t\t\t<PropItem name={t(\"common.purpose\")} value={t(pool.purpose)} />\r\n\t\t\t\t\t\t\t\t<PropItem\r\n\t\t\t\t\t\t\t\t\tname={t(\"common.slashing\")}\r\n\t\t\t\t\t\t\t\t\tvalue={t(pool.slashPolicy)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<PropItem\r\n\t\t\t\t\t\t\t\t\tname={t(\"common.rewards\")}\r\n\t\t\t\t\t\t\t\t\tvalue={t(pool.rewardPolicy)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<PropItem\r\n\t\t\t\t\t\t\t\t\tname={t(\"common.lockup\")}\r\n\t\t\t\t\t\t\t\t\tvalue={t(pool.lockupPeriodText, {\r\n\t\t\t\t\t\t\t\t\t\tcount: pool.lockupPeriod || 0\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<PropItem\r\n\t\t\t\t\t\t\t\t\tname={t(\"common.apyStability\")}\r\n\t\t\t\t\t\t\t\t\tvalue={t(pool.apyStability)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Box>\r\n\t\t\t<Box mt={2} display=\"flex\" flexDirection=\"row\" flexWrap=\"wrap\">\r\n\t\t\t\t<ValidatorStatsCard\r\n\t\t\t\t\tlabel={t(\"stats.dailyTransactions\")}\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tstats.dailyTransactions\r\n\t\t\t\t\t\t\t? formatNumberPretty(stats.dailyTransactions)\r\n\t\t\t\t\t\t\t: \"-\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tloaded={loaded}\r\n\t\t\t\t\tcurrentKey={chartDataKey}\r\n\t\t\t\t\tchartKey={\"dailyTransactionsData\"}\r\n\t\t\t\t\tsetKey={setChartDataKey}\r\n\t\t\t\t/>\r\n\t\t\t\t<ValidatorStatsCard\r\n\t\t\t\t\tlabel={t(\"stats.monthlyTransactions\")}\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tstats.monthlyTransactions\r\n\t\t\t\t\t\t\t? formatNumberPretty(stats.monthlyTransactions)\r\n\t\t\t\t\t\t\t: \"-\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tloaded={loaded}\r\n\t\t\t\t\tcurrentKey={chartDataKey}\r\n\t\t\t\t\tchartKey={\"monthlyTransactionsData\"}\r\n\t\t\t\t\tsetKey={setChartDataKey}\r\n\t\t\t\t/>\r\n\t\t\t\t<ValidatorStatsCard\r\n\t\t\t\t\tlabel={t(\"stats.yearlyTransactions\")}\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tstats.yearlyTransactions\r\n\t\t\t\t\t\t\t? formatNumberPretty(stats.yearlyTransactions)\r\n\t\t\t\t\t\t\t: \"-\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tloaded={loaded}\r\n\t\t\t\t\tcurrentKey={chartDataKey}\r\n\t\t\t\t\tchartKey={\"yearlyTransactionsData\"}\r\n\t\t\t\t\tsetKey={setChartDataKey}\r\n\t\t\t\t/>\r\n\t\t\t\t<ValidatorStatsCard\r\n\t\t\t\t\tlabel={t(\"stats.dailyPayoutsVolume\")}\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tstats.dailyPayoutsVolume\r\n\t\t\t\t\t\t\t? formatADXPretty(stats.dailyPayoutsVolume) + \" DAI\"\r\n\t\t\t\t\t\t\t: \"-\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tloaded={loaded}\r\n\t\t\t\t\tcurrentKey={chartDataKey}\r\n\t\t\t\t\tchartKey={\"dailyPayoutsData\"}\r\n\t\t\t\t\tsetKey={setChartDataKey}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<ValidatorStatsCard\r\n\t\t\t\t\tlabel={t(\"stats.totalCampaigns\")}\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tstats.totalCampaigns\r\n\t\t\t\t\t\t\t? formatNumberPretty(stats.totalCampaigns)\r\n\t\t\t\t\t\t\t: \"-\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tloaded={loaded}\r\n\t\t\t\t/>\r\n\t\t\t\t<ValidatorStatsCard\r\n\t\t\t\t\tlabel={t(\"stats.uniqueUnits\")}\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tstats.uniqueUnits ? formatNumberPretty(stats.uniqueUnits) : \"-\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tloaded={loaded}\r\n\t\t\t\t/>\r\n\t\t\t\t<ValidatorStatsCard\r\n\t\t\t\t\tlabel={t(\"stats.uniquePublishers\")}\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tstats.uniquePublishers\r\n\t\t\t\t\t\t\t? formatNumberPretty(stats.uniquePublishers)\r\n\t\t\t\t\t\t\t: \"-\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tloaded={loaded}\r\n\t\t\t\t/>\r\n\t\t\t\t<ValidatorStatsCard\r\n\t\t\t\t\tlabel={t(\"stats.uniqueAdvertisers\")}\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tstats.uniqueAdvertisers\r\n\t\t\t\t\t\t\t? formatNumberPretty(stats.uniqueAdvertisers)\r\n\t\t\t\t\t\t\t: \"-\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tloaded={loaded}\r\n\t\t\t\t/>\r\n\t\t\t\t<ValidatorStatsCard\r\n\t\t\t\t\tlabel={t(\"stats.totalDeposits\")}\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tstats.totalDeposits\r\n\t\t\t\t\t\t\t? formatADXPretty(stats.totalDeposits) + \" DAI\"\r\n\t\t\t\t\t\t\t: \"-\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tloaded={loaded}\r\n\t\t\t\t/>\r\n\t\t\t\t<ValidatorStatsCard\r\n\t\t\t\t\tlabel={t(\"stats.totalPayouts\")}\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tstats.totalPayouts\r\n\t\t\t\t\t\t\t? formatADXPretty(stats.totalPayouts) + \" DAI\"\r\n\t\t\t\t\t\t\t: \"-\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tloaded={loaded}\r\n\t\t\t\t/>\r\n\t\t\t\t<ValidatorStatsCard\r\n\t\t\t\t\tlabel={t(\"stats.lockupOnChain\")}\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tstats.lockupOnChain\r\n\t\t\t\t\t\t\t? formatADXPretty(stats.lockupOnChain) + \" DAI\"\r\n\t\t\t\t\t\t\t: \"-\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tloaded={loaded}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"translate(222.283 597.452)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-165.533-585.571c-1.471-.154-2.685-.228-3.881-.415a5.679,5.679,0,0,1-4.824-5.962,5.72,5.72,0,0,1,5.316-5.412c3.187-.136,6.384-.066,9.577-.07,4.367,0,8.735-.063,13.1.03a5.778,5.778,0,0,1,5.567,7.481c-.635,2.362-3.2,4.108-6.189,4.2-.694.02-1.389,0-2.258,0,0,2.27-.046,4.416.056,6.556.014.285.756.714,1.2.772a65.788,65.788,0,0,1,19.029,5.6,62.2,62.2,0,0,1,14.022,8.85c.719.6,1.207.688,1.859-.052,1.145-1.3,2.357-2.541,3.685-3.961-.357-.32-.892-.741-1.359-1.228a3.411,3.411,0,0,1-.25-4.707,3.7,3.7,0,0,1,4.943-.5c1.2.968,2.286,2.087,3.411,3.151,1.977,1.87,3.956,3.738,5.916,5.627,1.563,1.507,1.769,3.427.565,4.884a3.71,3.71,0,0,1-5.178.426c-.806-.676-1.264-.654-1.95.092a35.9,35.9,0,0,1-3.038,2.92c-.735.63-.708,1.054-.128,1.832a96.617,96.617,0,0,1,5.642,8.034A57.776,57.776,0,0,1-93.169-527.2a59.463,59.463,0,0,1,.246,18.073,59.427,59.427,0,0,1-11.733,28.06,62.53,62.53,0,0,1-19.929,17.232,44.509,44.509,0,0,1-6.091,2.724,121.413,121.413,0,0,1-11.8,3.98,63.854,63.854,0,0,1-23.688,1.111,63.662,63.662,0,0,1-22.63-7.086c-14.35-7.736-24.655-19.092-30.2-34.537a57.37,57.37,0,0,1-3.18-16.033,57.884,57.884,0,0,1,8.541-34.426,63.154,63.154,0,0,1,31.6-26.3,64.676,64.676,0,0,1,15.424-4.028c.385-.05,1.009-.52,1.022-.816C-165.492-581.341-165.533-583.445-165.533-585.571ZM-116.582-482.8a50.567,50.567,0,0,0,13.607-31.582c-1.042,0-1.831-.029-2.618.005-3.841.165-3.667-.522-3.605-3.874.028-1.536.617-2.055,2.206-2.078,1.256-.018,2.513,0,3.735,0,1.446-7.154-7.472-27.519-13.634-31.274-.5.471-1.008.948-1.512,1.433-2.7,2.6-2.944,2.59-5.586-.139-1.1-1.136-1.119-1.878-.019-2.98.89-.892,1.818-1.746,2.707-2.6-.092-.178-.115-.285-.18-.34-9.243-7.75-20-11.716-31.923-12.754-.251-.022-.673.373-.781.661a3.306,3.306,0,0,0-.041,1.255c.2,4.233-.538,4.021-4.273,3.965a1.776,1.776,0,0,1-1.951-1.921c-.022-1.033-.02-2.066-.012-3.1.006-.748-.342-1.023-1.064-.862a7.068,7.068,0,0,1-.964.183,53.837,53.837,0,0,0-24.063,7.815c-2.407,1.467-4.649,3.2-7.073,4.888.73.7,1.2,1.153,1.676,1.6,2.748,2.582,2.744,2.973-.057,5.438-1.235,1.087-1.926,1.094-3.167-.029-.925-.838-1.815-1.715-2.71-2.564-6.912,5.575-14.863,23.814-13.611,31.319,1.273,0,2.577-.019,3.88,0,1.492.028,2.119.645,2.194,2.126.026.515.023,1.033,0,1.549-.065,1.784-.533,2.246-2.3,2.265-1.3.014-2.593,0-4.04,0,.78,12.331,5.563,22.6,13.644,31.589l1.821-1.714c2.7-2.549,2.881-2.546,5.523.082,1.125,1.118,1.145,2.021.032,3.116-.923.908-1.872,1.789-2.861,2.73.407.36.7.646,1.026.9a55.921,55.921,0,0,0,16.749,9.245,60.342,60.342,0,0,0,14.145,2.925c.927.091,1.293-.176,1.238-1.131-.06-1.03-.032-2.066,0-3.1a1.763,1.763,0,0,1,1.873-1.848c2.832-.23,3.987.12,4.289,1.37a3.723,3.723,0,0,1,.049.841c.005.892.057,1.789-.013,2.676-.081,1.029.323,1.268,1.307,1.186a56.251,56.251,0,0,0,26.8-9.216c1.733-1.146,3.358-2.454,5.051-3.7-.694-.712-1.2-1.255-1.727-1.769-2.693-2.6-2.685-2.981.153-5.431,1.237-1.068,1.9-1.046,3.158.114C-118.579-484.658-117.659-483.8-116.582-482.8Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M90.872-306.352h-5.99v-17.426c1.789,0,3.6-.048,5.4.041.356.018.73.524,1.022.868,1.818,2.139,3.614,4.3,5.705,6.791V-323.7h5.98v17.389c-1.705,0-3.424.051-5.135-.042-.355-.019-.721-.536-1.014-.881-1.9-2.245-3.783-4.507-5.967-7.115Z\",\n  transform: \"translate(-220.606 -196.543)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-48.262-316.215c-.1,4.386-2.926,7.842-7.586,8.957-5.611,1.343-11.787-1.9-12.4-7.984a8.225,8.225,0,0,1,1.86-6.294,10.039,10.039,0,0,1,9.921-3.6,9.148,9.148,0,0,1,7.679,6.182A17.525,17.525,0,0,1-48.262-316.215Zm-10.078-3.869a3.84,3.84,0,0,0-3.821,4,3.894,3.894,0,0,0,3.872,3.969,3.808,3.808,0,0,0,3.812-3.993A3.865,3.865,0,0,0-58.339-320.084Z\",\n  transform: \"translate(-110.59 -195.454)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M27.755-316.128c-.119,4.308-2.926,7.72-7.53,8.855-5.674,1.4-11.834-1.933-12.451-7.911a8.258,8.258,0,0,1,1.819-6.3,10.018,10.018,0,0,1,9.9-3.651,9.153,9.153,0,0,1,7.761,6.27A17.311,17.311,0,0,1,27.755-316.128Zm-10.022,4.014a3.808,3.808,0,0,0,3.809-4,3.866,3.866,0,0,0-3.867-3.972,3.842,3.842,0,0,0-3.819,4A3.9,3.9,0,0,0,17.733-312.114Z\",\n  transform: \"translate(-165.189 -195.455)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-116.77-322.405l-2.7,3.621c-2.068-.454-3.9-.9-5.76-1.225-.39-.067-.862.342-1.3.531.371.345.687.878,1.122,1,1.659.482,3.386.738,5.033,1.253,2.662.832,4.016,2.463,4.056,4.62a5.33,5.33,0,0,1-3.931,5.25,14.661,14.661,0,0,1-12.785-1.7,7.35,7.35,0,0,1-.718-.613l2.887-3.34c2.177.619,4.067,1.268,6.01,1.646.675.131,1.48-.409,2.226-.642a8.313,8.313,0,0,0-1.838-1.171c-1.6-.508-3.3-.726-4.874-1.3-1.949-.71-3.437-1.982-3.477-4.294a5.053,5.053,0,0,1,3.3-5.106C-125.134-325.588-120.906-325-116.77-322.405Z\",\n  transform: \"translate(-63.585 -195.785)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-23.021-369.079l-2.873-4.113-.315.077v5.838h-4.381v-13.039c1.384,0,2.737-.056,4.079.037a1.756,1.756,0,0,1,1.038.776c.828,1.171,1.585,2.392,2.486,3.771.807-1.235,1.568-2.238,2.15-3.337a2.266,2.266,0,0,1,2.374-1.28c3.19.063,3.191.018,3.191,3.18q0,4.153,0,8.306c0,.5-.045,1-.073,1.569h-4.458v-5.84l-.329-.111Z\",\n  transform: \"translate(-137.675 -155.923)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M61.058-375.16v-5.279h4.45v12.979c-1.173,0-2.29.059-3.4-.032A1.933,1.933,0,0,1,61-368.164c-1.454-1.642-2.862-3.324-4.588-5.346v5.977H51.92V-380.3a4.7,4.7,0,0,1,5.738,1.543q1.507,1.766,3.037,3.513C60.738-375.2,60.851-375.206,61.058-375.16Z\",\n  transform: \"translate(-196.933 -155.686)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-81.233-367.778c-3-.036-5.4-1.193-6.767-3.935a6.121,6.121,0,0,1,.77-6.984,7.31,7.31,0,0,1,7.532-2.657c4.176.845,6.308,3.677,5.912,7.688C-74.115-370.338-77.349-367.783-81.233-367.778Zm0-3.906a2.821,2.821,0,0,0,2.933-2.9,2.95,2.95,0,0,0-2.83-3.052,2.817,2.817,0,0,0-2.9,2.928A2.8,2.8,0,0,0-81.234-371.683Z\",\n  transform: \"translate(-95.903 -155.069)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M118.237-379.492l-2.427,2.859a19.4,19.4,0,0,0-1.937-.879,3.055,3.055,0,0,0-3.471.828,3.2,3.2,0,0,0-.507,3.663,3.114,3.114,0,0,0,3.066,1.824c1.186.027,1.79-.427,1.342-1.775l-2.09-.214v-2.441h6.565c0,1.819.036,3.631-.033,5.44a1.459,1.459,0,0,1-.719.924,9.591,9.591,0,0,1-9.277.57A6.16,6.16,0,0,1,105-374.364a6.39,6.39,0,0,1,3.182-6.024A8.609,8.609,0,0,1,118.237-379.492Z\",\n  transform: \"translate(-235.051 -155.02)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-123.944-378.071l-3.463,1.962c-2.246-1.787-3.459-1.939-4.606-.6a3.4,3.4,0,0,0,.2,4.372c1.217,1.116,2.777.8,4.391-.938l3.519,1.924c-1.286,2.757-4.475,4.122-7.922,3.457a6.788,6.788,0,0,1-5.537-6.391,6.8,6.8,0,0,1,4.914-6.887C-128.922-382.2-125.647-381.053-123.944-378.071Z\",\n  transform: \"translate(-60.981 -155.067)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M34.163-366.909H29.821v-12.913h4.342Z\",\n  transform: \"translate(-181.061 -156.302)\"\n}));\n\nvar SvgComingSoonIc = function SvgComingSoonIc(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 129.934,\n    height: 142.038,\n    viewBox: \"0 0 129.934 142.038\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgComingSoonIc, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/coming-soon-ic.556674d8.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Fragment } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport {\r\n\tBox,\r\n\tButton,\r\n\tCircularProgress,\r\n\tTypography,\r\n\tSvgIcon\r\n} from \"@material-ui/core\"\r\nimport { ReactComponent as ComingSoonImg } from \"./../resources/coming-soon-ic.svg\"\r\nimport { CardRow } from \"./cardCommon\"\r\nimport Tooltip from \"./Tooltip\"\r\nimport WithRouterLink from \"./WithRouterLink\"\r\nimport { ReactComponent as StatsIcon } from \"./../resources/stats-ic.svg\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nconst ButtonWithLink = WithRouterLink(Button)\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\ticonBox: {\r\n\t\t\tborderRadius: \"100%\",\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: 69,\r\n\t\t\theight: 69,\r\n\t\t\ttop: -theme.spacing(3),\r\n\t\t\tbackgroundColor: theme.palette.common.white,\r\n\t\t\tcolor: theme.palette.common.black,\r\n\t\t\tboxShadow: theme.type === \"light\" ? theme.shadows[25] : 0,\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\"\r\n\t\t},\r\n\t\toverlay: {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tleft: 0,\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tbackgroundColor: theme.palette.overlay\r\n\t\t},\r\n\t\tloading: {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\theight: \"100%\",\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0\r\n\t\t},\r\n\t\tcomingSoon: {\r\n\t\t\twidth: 160,\r\n\t\t\theight: \"auto\"\r\n\t\t}\r\n\t}\r\n})\r\n\r\nexport default function PoolCard({\r\n\tid,\r\n\ticon,\r\n\tname,\r\n\ttotalStakedADX,\r\n\ttotalStakedUSD,\r\n\tcurrentAPY,\r\n\tweeklyYield,\r\n\tweeklyYieldInfo,\r\n\tonStakeBtnClick,\r\n\tloading,\r\n\tdisabled,\r\n\tdisabledInfo,\r\n\tlockupPeriodTitle,\r\n\tlockupPeriodInfo,\r\n\tlockupPeriod,\r\n\tloaded,\r\n\tactions,\r\n\tcomingSoon,\r\n\tactionBtn,\r\n\textraData = [],\r\n\tstatsPath\r\n}) {\r\n\tconst { t } = useTranslation()\r\n\tconst classes = useStyles()\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tbgcolor={\"background.card\"}\r\n\t\t\tp={3}\r\n\t\t\tmy={3}\r\n\t\t\tmx={1.5}\r\n\t\t\tpt={7}\r\n\t\t\twidth={270}\r\n\t\t\tmaxWidth=\"100%\"\r\n\t\t\tminHeight={420}\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\tflexDirection=\"column\"\r\n\t\t\talignItems=\"center\"\r\n\t\t\tboxShadow={25}\r\n\t\t\tposition=\"relative\"\r\n\t\t>\r\n\t\t\t<Box mb={3}>\r\n\t\t\t\t<Typography align=\"center\" variant=\"h5\" color=\"textPrimary\">\r\n\t\t\t\t\t{name}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Box>\r\n\r\n\t\t\t{comingSoon ? (\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<SvgIcon className={classes.comingSoon} color=\"primary\">\r\n\t\t\t\t\t\t<ComingSoonImg\r\n\t\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\t\t// width={160}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t</Box>\r\n\t\t\t) : (\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\ttext={t(\"common.totalStaked\")}\r\n\t\t\t\t\t\t// infoText={t('common.totalStaked')}\r\n\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\tcolor=\"special.main\"\r\n\t\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\t\tfontSize={20}\r\n\t\t\t\t\t\ttext={totalStakedADX}\r\n\t\t\t\t\t\tisAmountText\r\n\t\t\t\t\t\t// infoText={totalStakedADX}\r\n\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\ttext={totalStakedUSD}\r\n\t\t\t\t\t\tisAmountText\r\n\t\t\t\t\t\t// infoText={totalStakedADX}\r\n\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\tmb={3}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\ttext={t(\"pools.currentAPYLabel\")}\r\n\t\t\t\t\t\t// infoText={\"Current annual yield (APY)\"}\r\n\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\tcolor=\"special.main\"\r\n\t\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\t\tfontSize={20}\r\n\t\t\t\t\t\ttext={currentAPY}\r\n\t\t\t\t\t\tisAmountText\r\n\t\t\t\t\t\t// infoText={currentAPY}\r\n\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\ttext={t(\"pools.weeklyYield\", { yield: weeklyYield })}\r\n\t\t\t\t\t\tinfoText={weeklyYieldInfo}\r\n\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\tmb={3}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\ttext={lockupPeriodTitle}\r\n\t\t\t\t\t\tinfoText={lockupPeriodInfo}\r\n\t\t\t\t\t\t// infoText={\"Current annual yield (APY)\"}\r\n\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\ttext={lockupPeriod}\r\n\t\t\t\t\t\t// infoText={\"Current annual yield (APY)\"}\r\n\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\tmb={3}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{extraData.map(data => (\r\n\t\t\t\t\t\t<Fragment key={data.id}>\r\n\t\t\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\t\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\t\t\ttext={data.title}\r\n\t\t\t\t\t\t\t\tinfoText={data.titleInfo}\r\n\t\t\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t{data.importantValue && (\r\n\t\t\t\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\t\t\t\tcolor=\"special.main\"\r\n\t\t\t\t\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\t\t\t\t\tfontSize={20}\r\n\t\t\t\t\t\t\t\t\ttext={data.importantValue}\r\n\t\t\t\t\t\t\t\t\tisAmountText\r\n\t\t\t\t\t\t\t\t\tinfoText={data.valueInfo}\r\n\t\t\t\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{data.normalValue && (\r\n\t\t\t\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\t\t\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\t\t\t\ttext={data.normalValue}\r\n\t\t\t\t\t\t\t\t\tinfoText={data.valueInfo}\r\n\t\t\t\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\t\t\t\tmb={3}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{data.extra && (\r\n\t\t\t\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\t\t\t\t\t\tfontWeight={\"fontWeightRegular\"}\r\n\t\t\t\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\t\t\t\ttext={data.extra}\r\n\t\t\t\t\t\t\t\t\tinfoText={data.extrInfo}\r\n\t\t\t\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\t\t\t\tmb={3}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t{!!statsPath && (\r\n\t\t\t\t\t\t<Box mb={2}>\r\n\t\t\t\t\t\t\t<ButtonWithLink\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tcolor=\"default\"\r\n\t\t\t\t\t\t\t\tto={statsPath}\r\n\t\t\t\t\t\t\t\tstartIcon={\r\n\t\t\t\t\t\t\t\t\t<SvgIcon fontSize=\"inherit\" color=\"inherit\">\r\n\t\t\t\t\t\t\t\t\t\t<StatsIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t(\"common.poolStats\")}\r\n\t\t\t\t\t\t\t</ButtonWithLink>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<Tooltip title={disabled ? disabledInfo : \"\"}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{actionBtn || (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tid={`stake-pool-${id}`}\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\t\tonClick={onStakeBtnClick}\r\n\t\t\t\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t(\"common.stake\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\r\n\t\t\t{!!loading && (\r\n\t\t\t\t<Box\r\n\t\t\t\t\tclasses={{ root: classes.overlay }}\r\n\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tjustifyContent=\"center\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Typography align=\"center\" component=\"div\" variant=\"h3\"></Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\r\n\t\t\t<Box classes={{ root: classes.iconBox }}>\r\n\t\t\t\t{icon || null}\r\n\t\t\t\t{!!loading && (\r\n\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\tclasses={{ root: classes.loading }}\r\n\t\t\t\t\t\tsize={69}\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"filter\", {\n  id: \"Path_1168\",\n  x: 11.521,\n  y: 113.598,\n  width: 145.899,\n  height: 118.003,\n  filterUnits: \"userSpaceOnUse\"\n}, /*#__PURE__*/React.createElement(\"feOffset\", {\n  dx: 10,\n  dy: 3,\n  input: \"SourceAlpha\"\n}), /*#__PURE__*/React.createElement(\"feGaussianBlur\", {\n  stdDeviation: 3,\n  result: \"blur\"\n}), /*#__PURE__*/React.createElement(\"feFlood\", {\n  floodOpacity: 0.161\n}), /*#__PURE__*/React.createElement(\"feComposite\", {\n  operator: \"in\",\n  in2: \"blur\"\n}), /*#__PURE__*/React.createElement(\"feComposite\", {\n  in: \"SourceGraphic\"\n})), /*#__PURE__*/React.createElement(\"filter\", {\n  id: \"Path_1169\",\n  x: 9.921,\n  y: 115.427,\n  width: 145.901,\n  height: 118.003,\n  filterUnits: \"userSpaceOnUse\"\n}, /*#__PURE__*/React.createElement(\"feOffset\", {\n  dx: -10,\n  dy: 3,\n  input: \"SourceAlpha\"\n}), /*#__PURE__*/React.createElement(\"feGaussianBlur\", {\n  stdDeviation: 3,\n  result: \"blur-2\"\n}), /*#__PURE__*/React.createElement(\"feFlood\", {\n  floodOpacity: 0.161\n}), /*#__PURE__*/React.createElement(\"feComposite\", {\n  operator: \"in\",\n  in2: \"blur-2\"\n}), /*#__PURE__*/React.createElement(\"feComposite\", {\n  in: \"SourceGraphic\"\n})), /*#__PURE__*/React.createElement(\"filter\", {\n  id: \"Path_1170\",\n  x: 0,\n  y: 144.227,\n  width: 163.528,\n  height: 94.837,\n  filterUnits: \"userSpaceOnUse\"\n}, /*#__PURE__*/React.createElement(\"feOffset\", {\n  dy: 3,\n  input: \"SourceAlpha\"\n}), /*#__PURE__*/React.createElement(\"feGaussianBlur\", {\n  stdDeviation: 5,\n  result: \"blur-3\"\n}), /*#__PURE__*/React.createElement(\"feFlood\", {\n  floodOpacity: 0.161\n}), /*#__PURE__*/React.createElement(\"feComposite\", {\n  operator: \"in\",\n  in2: \"blur-3\"\n}), /*#__PURE__*/React.createElement(\"feComposite\", {\n  in: \"SourceGraphic\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1695\",\n  \"data-name\": \"Group 1695\",\n  transform: \"translate(-96.002 -732)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1171\",\n  \"data-name\": \"Path 1171\",\n  d: \"M-6223.623-543.645c-54.988,33.69-83.644,70.09-51.5,92.163s70.089,52.664,96.034,30.592,22.459-46.081,45.307-60.022,42.209-67.767-6.583-75.511S-6223.623-543.645-6223.623-543.645Z\",\n  transform: \"translate(6443.376 1355.756)\",\n  fill: \"#fff\",\n  opacity: 0.1\n}), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1658\",\n  \"data-name\": \"Group 1658\",\n  transform: \"matrix(0.995, 0.105, -0.105, 0.995, 122.426, 797.436)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1167\",\n  \"data-name\": \"Path 1167\",\n  d: \"M0,54.46,65.286.94a4.151,4.151,0,0,1,5.261,0l65.287,53.52L67.916,115.218Z\",\n  transform: \"translate(0)\",\n  fill: \"#484557\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1659\",\n  \"data-name\": \"Group 1659\",\n  transform: \"matrix(0.995, -0.105, 0.105, 0.995, 36.912, 56.043)\"\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  id: \"Ellipse_85\",\n  \"data-name\": \"Ellipse 85\",\n  cx: 27.328,\n  cy: 27.328,\n  r: 27.328,\n  transform: \"matrix(0.966, 0.259, -0.259, 0.966, 14.146, 0)\",\n  fill: \"#ff4269\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1659-2\",\n  \"data-name\": \"Group 1659\",\n  transform: \"matrix(0.966, 0.259, -0.259, 0.966, 24.684, 16.757)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1155\",\n  \"data-name\": \"Path 1155\",\n  d: \"M12.571,9.964H1.053a1.034,1.034,0,0,1-.817-.32A.828.828,0,0,1,0,9.082c0-.876-.012-1.753.005-2.629A1.724,1.724,0,0,1,1.671,4.848c.491-.01.983-.005,1.475,0,.139,0,.177-.02.112-.167A3.332,3.332,0,0,1,8.619.942c.675.616,1.356,1.226,2.029,1.843.092.084.146.071.235,0a2.529,2.529,0,0,1,3.371-.011c.107.09.167.087.266,0C15.2,2.14,15.884,1.511,16.579.9A3.177,3.177,0,0,1,19.973.227a3.21,3.21,0,0,1,2.17,2.658,2.988,2.988,0,0,1-.235,1.754c-.093.2-.089.205.127.206.461,0,.92,0,1.381,0a1.725,1.725,0,0,1,1.731,1.712c.008.82.005,1.64,0,2.458a.93.93,0,0,1-.908.947c-.076,0-.151,0-.228,0ZM8.035,4.845H9.849c.058,0,.137.027.163-.055s-.04-.113-.087-.157Q8.6,3.436,7.28,2.237a1.369,1.369,0,0,0-.818-.358,1.486,1.486,0,1,0-.127,2.965C6.9,4.848,7.469,4.845,8.035,4.845Zm9.043,0h.812c.271,0,.542,0,.812,0a1.947,1.947,0,0,0,.375-.033A1.486,1.486,0,0,0,20.3,3.563a1.481,1.481,0,0,0-2.448-1.311c-.878.784-1.749,1.576-2.622,2.366-.05.045-.122.089-.094.169s.118.056.183.056C15.907,4.847,16.493,4.845,17.078,4.845Z\",\n  transform: \"translate(0 0)\",\n  fill: \"#f7fafc\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1156\",\n  \"data-name\": \"Path 1156\",\n  d: \"M0,6.893V.293C0,0,0,0,.294,0h8.87c.3,0,.3,0,.3.308q0,5.742,0,11.481a1.99,1.99,0,0,1-.367,1.3,1.691,1.691,0,0,1-1.368.693c-2.5.009-5.005,0-7.508.008-.2,0-.22-.1-.22-.258Q.006,10.213,0,6.893Z\",\n  transform: \"translate(14.079 11.35)\",\n  fill: \"#f7fafc\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1157\",\n  \"data-name\": \"Path 1157\",\n  d: \"M9.441,6.9v6.617c0,.272,0,.274-.274.274q-3.687,0-7.373,0A1.735,1.735,0,0,1,0,12Q0,6.137,0,.276C0,0,0,0,.268,0h8.9c.269,0,.269,0,.269.278Q9.443,3.587,9.441,6.9Z\",\n  transform: \"translate(1.629 11.35)\",\n  fill: \"#f7fafc\"\n}))), /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"matrix(0.99, -0.1, 0.1, 0.99, -33.12, -62.32)\",\n  filter: \"url(#Path_1168)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1168-2\",\n  \"data-name\": \"Path 1168\",\n  d: \"M118.337,88.117H4.293A4.294,4.294,0,0,1,0,83.822V0Z\",\n  transform: \"matrix(0.99, 0.1, -0.1, 0.99, 20.73, 119.6)\",\n  fill: \"#7b7597\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"matrix(0.99, -0.1, 0.1, 0.99, -33.12, -62.32)\",\n  filter: \"url(#Path_1169)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1169-2\",\n  \"data-name\": \"Path 1169\",\n  d: \"M0,88.117H114.043a4.3,4.3,0,0,0,4.3-4.295V0Z\",\n  transform: \"matrix(0.99, 0.1, -0.1, 0.99, 38.13, 121.43)\",\n  fill: \"#7b7597\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"matrix(0.99, -0.1, 0.1, 0.99, -33.12, -62.32)\",\n  filter: \"url(#Path_1170)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1170-2\",\n  \"data-name\": \"Path 1170\",\n  d: \"M0,51.653,61.922.892a3.936,3.936,0,0,1,4.991,0l61.922,50.761Z\",\n  transform: \"matrix(0.99, 0.1, -0.1, 0.99, 20.4, 156.23)\",\n  fill: \"#908aac\"\n}))), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1172\",\n  \"data-name\": \"Path 1172\",\n  d: \"M1463.765,1907.449l.814,3.615a.6.6,0,0,0,.359.422l3.44,1.378a.6.6,0,0,1,.083,1.064l-3.187,1.892a.594.594,0,0,0-.29.471l-.247,3.7a.6.6,0,0,1-.987.407l-2.784-2.446a.594.594,0,0,0-.538-.13l-3.593.907a.6.6,0,0,1-.691-.812l1.465-3.4a.6.6,0,0,0-.042-.552l-1.973-3.137a.6.6,0,0,1,.559-.909l3.689.342a.594.594,0,0,0,.512-.211l2.374-2.846A.6.6,0,0,1,1463.765,1907.449Z\",\n  transform: \"translate(-1170.38 -1117.073)\",\n  fill: \"#ff4269\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1175\",\n  \"data-name\": \"Path 1175\",\n  d: \"M8.264.464l.814,3.615a.6.6,0,0,0,.359.422l3.44,1.378a.6.6,0,0,1,.083,1.064L9.774,8.835a.594.594,0,0,0-.29.471L9.236,13a.6.6,0,0,1-.987.407L5.466,10.966a.594.594,0,0,0-.538-.13l-3.593.907a.6.6,0,0,1-.691-.812l1.465-3.4a.6.6,0,0,0-.042-.552L.093,3.838a.6.6,0,0,1,.559-.909l3.689.342a.594.594,0,0,0,.512-.211L7.227.214A.6.6,0,0,1,8.264.464Z\",\n  transform: \"translate(182.053 753.689) rotate(-30)\",\n  fill: \"#feb006\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1176\",\n  \"data-name\": \"Path 1176\",\n  d: \"M5.525.31l.544,2.417a.4.4,0,0,0,.24.282l2.3.921a.4.4,0,0,1,.055.711L6.534,5.906a.4.4,0,0,0-.194.315L6.174,8.693a.4.4,0,0,1-.659.272L3.654,7.33a.4.4,0,0,0-.36-.087l-2.4.606A.4.4,0,0,1,.43,7.307l.979-2.275a.4.4,0,0,0-.028-.369L.062,2.565a.4.4,0,0,1,.374-.607L2.9,2.187a.4.4,0,0,0,.342-.141L4.831.143A.4.4,0,0,1,5.525.31Z\",\n  transform: \"matrix(0.966, 0.259, -0.259, 0.966, 265.169, 867.102)\",\n  fill: \"#7b7597\",\n  opacity: 0.5\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  id: \"Ellipse_83\",\n  \"data-name\": \"Ellipse 83\",\n  cx: 5.385,\n  cy: 5.385,\n  r: 5.385,\n  transform: \"translate(322.44 849.846)\",\n  fill: \"#feb006\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  id: \"Ellipse_84\",\n  \"data-name\": \"Ellipse 84\",\n  cx: 3.199,\n  cy: 3.199,\n  r: 3.199,\n  transform: \"translate(206.571 782.074)\",\n  fill: \"#f7fafc\",\n  opacity: 0.4\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  id: \"Ellipse_86\",\n  \"data-name\": \"Ellipse 86\",\n  cx: 2.106,\n  cy: 2.106,\n  r: 2.106,\n  transform: \"translate(111.471 818.146)\",\n  fill: \"#7b7597\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1173\",\n  \"data-name\": \"Path 1173\",\n  d: \"M1154.925,1954.689c1.1.9,1.71,2.838,2.263,4.492a.435.435,0,0,0,.844-.075c.248-1.683.488-3.609,1.178-4.642.557-.833,2.384-1.588,4.018-2.05a.434.434,0,0,0-.042-.846,10.9,10.9,0,0,1-3.932-1.29c-1.169-.842-1.42-2.294-1.719-3.884a.436.436,0,0,0-.851-.021,11.73,11.73,0,0,1-1.556,3.762c-1.528,1.841-6.711,2.125-6.769,2.688C1148.231,1954.075,1153.578,1953.589,1154.925,1954.689Z\",\n  transform: \"translate(-1005.333 -1100.582)\",\n  fill: \"#fff\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1174\",\n  \"data-name\": \"Path 1174\",\n  d: \"M7.648,10.07c1.276,1.043,1.991,3.3,2.635,5.23a.507.507,0,0,0,.982-.087c.288-1.96.568-4.2,1.371-5.4.649-.97,2.776-1.848,4.678-2.387a.506.506,0,0,0-.048-.985,12.691,12.691,0,0,1-4.578-1.5c-1.361-.98-1.654-2.671-2-4.522A.507.507,0,0,0,9.695.389a13.661,13.661,0,0,1-1.812,4.38C6.1,6.912.069,7.243,0,7.9-.146,9.356,6.079,8.79,7.648,10.07Z\",\n  transform: \"translate(265.799 732) rotate(90)\",\n  fill: \"#7b7597\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1660\",\n  \"data-name\": \"Group 1660\",\n  transform: \"translate(195.603 803.162)\"\n}, /*#__PURE__*/React.createElement(\"ellipse\", {\n  id: \"Ellipse_85-2\",\n  \"data-name\": \"Ellipse 85\",\n  cx: 24.008,\n  cy: 24.008,\n  rx: 24.008,\n  ry: 24.008,\n  transform: \"matrix(0.966, 0.259, -0.259, 0.966, 12.427, 0)\",\n  fill: \"#feb006\"\n})), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1177\",\n  \"data-name\": \"Path 1177\",\n  d: \"M14.26.8l1.405,6.238a1.028,1.028,0,0,0,.62.728l5.936,2.378a1.027,1.027,0,0,1,.143,1.835l-5.5,3.265a1.025,1.025,0,0,0-.5.813l-.427,6.381a1.027,1.027,0,0,1-1.7.7l-4.8-4.219A1.024,1.024,0,0,0,8.5,18.7L2.3,20.263a1.026,1.026,0,0,1-1.193-1.4l2.528-5.873a1.028,1.028,0,0,0-.073-.953L.16,6.622a1.027,1.027,0,0,1,.965-1.569l6.366.591a1.025,1.025,0,0,0,.883-.364L12.47.37A1.027,1.027,0,0,1,14.26.8Z\",\n  transform: \"translate(217.999 817.965) rotate(19)\",\n  fill: \"#fff\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1663\",\n  \"data-name\": \"Group 1663\",\n  transform: \"translate(111.062 762.668) rotate(-11)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1661\",\n  \"data-name\": \"Group 1661\",\n  transform: \"translate(0 32.952) rotate(-45)\"\n}, /*#__PURE__*/React.createElement(\"ellipse\", {\n  id: \"Ellipse_85-3\",\n  \"data-name\": \"Ellipse 85\",\n  cx: 19.025,\n  cy: 19.025,\n  rx: 19.025,\n  ry: 19.025,\n  transform: \"matrix(0.966, 0.259, -0.259, 0.966, 9.848, 0)\",\n  fill: \"#ff4269\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1662\",\n  \"data-name\": \"Group 1662\",\n  transform: \"translate(23.949 23.666)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1155-2\",\n  \"data-name\": \"Path 1155\",\n  d: \"M8.922,7.072H.747a.734.734,0,0,1-.58-.227A.588.588,0,0,1,0,6.446C0,5.824-.005,5.2.006,4.58a1.224,1.224,0,0,1,1.18-1.139c.349-.007.7,0,1.047,0,.1,0,.126-.014.08-.118A2.365,2.365,0,0,1,6.117.669c.479.437.962.87,1.44,1.308.065.06.1.051.167,0a1.8,1.8,0,0,1,2.392-.008c.076.064.118.061.189,0,.485-.445.968-.891,1.461-1.326A2.255,2.255,0,0,1,14.176.161a2.278,2.278,0,0,1,1.54,1.886,2.121,2.121,0,0,1-.167,1.245c-.066.144-.063.145.09.146.327,0,.653,0,.98,0a1.224,1.224,0,0,1,1.229,1.215c.005.582,0,1.164,0,1.745a.66.66,0,0,1-.644.672c-.054,0-.108,0-.162,0ZM5.7,3.439H6.99c.042,0,.1.019.116-.039s-.028-.08-.061-.111q-.938-.85-1.877-1.7a.971.971,0,0,0-.58-.254,1.055,1.055,0,1,0-.09,2.1C4.9,3.441,5.3,3.439,5.7,3.439Zm6.418,0h1.153a1.389,1.389,0,0,0,.267-.024,1.055,1.055,0,0,0,.869-.886A1.051,1.051,0,0,0,12.672,1.6c-.623.557-1.241,1.119-1.861,1.68-.035.032-.087.063-.067.12s.084.04.13.04C11.29,3.44,11.705,3.439,12.121,3.439Z\",\n  transform: \"translate(0 0)\",\n  fill: \"#f7fafc\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1156-2\",\n  \"data-name\": \"Path 1156\",\n  d: \"M0,4.892V.208C0,0,0,0,.209,0H6.5c.212,0,.212,0,.212.219q0,4.075,0,8.149a1.413,1.413,0,0,1-.26.923,1.2,1.2,0,0,1-.971.491c-1.776.006-3.552,0-5.329.005C.012,9.788,0,9.718,0,9.6Q0,7.249,0,4.892Z\",\n  transform: \"translate(9.993 8.056)\",\n  fill: \"#f7fafc\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1157-2\",\n  \"data-name\": \"Path 1157\",\n  d: \"M6.7,4.894v4.7c0,.193,0,.194-.194.194H1.274A1.232,1.232,0,0,1,0,8.516Q0,4.356,0,.2C0,0,0,0,.19,0H6.51C6.7,0,6.7,0,6.7.2Q6.7,2.546,6.7,4.894Z\",\n  transform: \"translate(1.156 8.056)\",\n  fill: \"#f7fafc\"\n}))));\n\nvar SvgMailAwards = function SvgMailAwards(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 237.372,\n    height: 239.064,\n    viewBox: \"0 0 237.372 239.064\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMailAwards, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/mail-awards.60d14591.svg\";\nexport { ForwardRef as ReactComponent };","export const validateEmail = email => {\r\n\t// eslint-disable-next-line no-useless-escape\r\n\tconst re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n\treturn re.test(String(email).toLowerCase())\r\n}\r\n","import { stringify } from \"query-string\"\r\n\r\nconst MAUTIC_BASE_URL = `https://mautic.adex.net`\r\n\r\nexport const submitFormToMautic = async ({\r\n\temail,\r\n\tformId,\r\n\treturnValue,\r\n\tformName,\r\n\tmessenger\r\n}) => {\r\n\tconst data = stringify({\r\n\t\t\"mauticform[email]\": email,\r\n\t\t\"mauticform[formId]\": formId || \"\",\r\n\t\t\"mauticform[return]\": returnValue || \"\",\r\n\t\t\"mauticform[formName]\": formName || \"\",\r\n\t\t\"mauticform[messenger]\": messenger || true\r\n\t})\r\n\tconst response = await fetch(\r\n\t\t`${MAUTIC_BASE_URL}/form/submit?formId=${formId}`,\r\n\t\t{\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: data,\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded;charset=UTF-8\",\r\n\t\t\t\t\"X-Requested-With\": \"XMLHttpRequest\"\r\n\t\t\t}\r\n\t\t}\r\n\t)\r\n\tconst utf8Decoder = new TextDecoder(\"utf-8\")\r\n\tconst reader = response.body.getReader()\r\n\tlet { value: mauticDataResponse } = await reader.read()\r\n\tmauticDataResponse = mauticDataResponse\r\n\t\t? utf8Decoder.decode(mauticDataResponse)\r\n\t\t: \"\"\r\n\treturn mauticDataResponse\r\n}\r\n\r\nexport const extractJSONResponseFromHTML = async mauticDataResponse => {\r\n\tconst regex = /parent.postMessage\\(\"(.+)\".+\\)/gm\r\n\tconst matches = regex.exec(mauticDataResponse)\r\n\tif (matches && matches.length >= 1) {\r\n\t\tconst message = matches[1]\r\n\t\tlet messageCopy = message\r\n\t\tconst asciiRegex = /\\\\.../gm\r\n\t\tlet m\r\n\t\twhile ((m = asciiRegex.exec(message)) !== null) {\r\n\t\t\t// This is necessary to avoid infinite loops with zero-width matches\r\n\t\t\tif (m.index === asciiRegex.lastIndex) {\r\n\t\t\t\tasciiRegex.lastIndex++\r\n\t\t\t}\r\n\r\n\t\t\t// The result can be accessed through the `m`-variable.\r\n\t\t\t/*eslint no-loop-func: \"off\"*/\r\n\t\t\tm.forEach((match, groupIndex) => {\r\n\t\t\t\tconst decoded = String.fromCharCode(match.replace(\"\\\\\", 0))\r\n\t\t\t\tmessageCopy = messageCopy.split(match).join(decoded)\r\n\t\t\t})\r\n\t\t}\r\n\t\t// not able to JSON parse directly so I had to do this above ↑\r\n\t\treturn JSON.parse(messageCopy)\r\n\t} else {\r\n\t\tconsole.warn(`No matches found:`, mauticDataResponse)\r\n\t\treturn {}\r\n\t}\r\n}\r\n","import React, { useState, useEffect } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport {\r\n\tBox,\r\n\tButton,\r\n\tCheckbox,\r\n\tFormGroup,\r\n\tFormControl,\r\n\tFormControlLabel,\r\n\tTextField\r\n} from \"@material-ui/core\"\r\nimport { CardRow } from \"./cardCommon\"\r\n// import { ExternalAnchor } from \"./Anchor\"\r\nimport { ReactComponent as EmailAwardsIcon } from \"./../resources/mail-awards.svg\"\r\nimport { validateEmail } from \"./../helpers/validation\"\r\nimport {\r\n\textractJSONResponseFromHTML,\r\n\tsubmitFormToMautic\r\n} from \"../mauticActions\"\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\ticonBox: {\r\n\t\t\tborderRadius: \"100%\",\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: 160,\r\n\t\t\theight: 160,\r\n\t\t\ttop: -theme.spacing(4),\r\n\t\t\tbackgroundColor: \"transparent\",\r\n\t\t\tcolor: theme.palette.background.default,\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\"\r\n\t\t},\r\n\t\tbold: {\r\n\t\t\tfontWeight: 800\r\n\t\t},\r\n\t\tsingUp: {\r\n\t\t\tbackgroundColor: theme.palette.text.main,\r\n\t\t\tborderRadius: 20\r\n\t\t},\r\n\t\tgdprCheckbox: ({ errors }) => ({\r\n\t\t\tfontSize: 10,\r\n\t\t\tcolor: errors.gdpr ? theme.palette.error.main : theme.palette.text.main\r\n\t\t}),\r\n\t\ttosCheckbox: ({ errors }) => ({\r\n\t\t\tfontSize: 10,\r\n\t\t\tcolor: errors.tos ? theme.palette.error.main : theme.palette.text.main\r\n\t\t})\r\n\t}\r\n})\r\n\r\nexport default function EmailSignUp(props) {\r\n\tconst { t } = useTranslation()\r\n\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [mauticState, setMauticState] = useState({})\r\n\tconst [waiting, setWaiting] = useState(false)\r\n\tconst [gdpr, setGDPR] = useState(false)\r\n\t// const [tos, setTos] = useState(false)\r\n\tconst [errors, setErrors] = useState({\r\n\t\temail: false,\r\n\t\tgdpr: false\r\n\t\t// tos: false\r\n\t})\r\n\tconst classes = useStyles({ errors })\r\n\r\n\tuseEffect(() => {\r\n\t\t// console.log(email, gdpr, errors)\r\n\t}, [email, gdpr, errors])\r\n\r\n\tconst handleValidationErrors = () => {\r\n\t\tsetErrors({\r\n\t\t\temail: !validateEmail(email),\r\n\t\t\tgdpr: !gdpr\r\n\t\t\t// tos: !tos\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleSubmit = async () => {\r\n\t\thandleValidationErrors()\r\n\t\tif (\r\n\t\t\tvalidateEmail(email) &&\r\n\t\t\tgdpr\r\n\t\t\t// && tos\r\n\t\t) {\r\n\t\t\tsetWaiting(true)\r\n\t\t\ttry {\r\n\t\t\t\tconst HTMLResponse = await submitFormToMautic({ ...props, email })\r\n\t\t\t\tconst jsonResponse = await extractJSONResponseFromHTML(HTMLResponse)\r\n\t\t\t\tsetMauticState({\r\n\t\t\t\t\t...jsonResponse\r\n\t\t\t\t})\r\n\t\t\t} catch (error) {\r\n\t\t\t\t// If cors is not enabled for address\r\n\t\t\t\tconsole.error(error)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tbgcolor={\"background.card\"}\r\n\t\t\tp={3}\r\n\t\t\tmy={3}\r\n\t\t\tmx={1.5}\r\n\t\t\tpt={15}\r\n\t\t\twidth={270}\r\n\t\t\tmaxWidth=\"100%\"\r\n\t\t\tminHeight={420}\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\tflexDirection=\"column\"\r\n\t\t\talignItems=\"center\"\r\n\t\t\tboxShadow={25}\r\n\t\t\tposition=\"relative\"\r\n\t\t>\r\n\t\t\t{/* Used for debugging mautic responses */}\r\n\t\t\t{/* <Box>{JSON.stringify(mauticState)}</Box> */}\r\n\t\t\t<Box classes={{ root: classes.iconBox }}>\r\n\t\t\t\t<EmailAwardsIcon />\r\n\t\t\t</Box>\r\n\t\t\t{mauticState.success ? (\r\n\t\t\t\t<CardRow\r\n\t\t\t\t\tmt={3}\r\n\t\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\tfontSize={16}\r\n\t\t\t\t\ttext={mauticState.successMessage}\r\n\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\theight={1}\r\n\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\tmt={3}\r\n\t\t\t\t\t\tcolor=\"text.primary\"\r\n\t\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\t\tfontSize={16}\r\n\t\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\ti18nKey=\"email.subscribe\"\r\n\t\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\t\tstrong: (\r\n\t\t\t\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\t\t\t\tdisplay=\"inline\"\r\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"special.main\"\r\n\t\t\t\t\t\t\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize=\"h5.fontSize\"\r\n\t\t\t\t\t\t\t\t\t\t></Box>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Box width={1} mt={2}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tid={\"email-signup-email-input\"}\r\n\t\t\t\t\t\t\tlabel={t(\"email.email\")}\r\n\t\t\t\t\t\t\tvariant=\"filled\"\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\tonBlur={e =>\r\n\t\t\t\t\t\t\t\tsetErrors({ ...errors, email: !validateEmail(e.target.value) })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\terrors.email ? t(\"email.validEmail\") : t(\"email.bestEmail\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\terror={errors.email}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box mt={1} width={1}>\r\n\t\t\t\t\t\t<FormControl error={errors.gdpr}>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\t\tid={\"email-signup-gdpr-checkbox\"}\r\n\t\t\t\t\t\t\t\t\tonChange={e => setGDPR(e.target.checked)}\r\n\t\t\t\t\t\t\t\t\tname=\"gdpr\"\r\n\t\t\t\t\t\t\t\t\tclasses={{ label: classes.gdprCheckbox }}\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox size=\"small\" name=\"checkedA\" />}\r\n\t\t\t\t\t\t\t\t\tlabel={t(\"email.gdprLabel\")}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{/* <Box mt={1} width={1}>\r\n\t\t\t\t\t\t\t<FormControl error={errors.tos}>\r\n\t\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\t\t\tid={\"email-signup-tos-checkbox\"}\r\n\t\t\t\t\t\t\t\t\t\tonChange={e => setTos(e.target.checked)}\r\n\t\t\t\t\t\t\t\t\t\tname=\"tos\"\r\n\t\t\t\t\t\t\t\t\t\tclasses={{ label: classes.tosCheckbox }}\r\n\t\t\t\t\t\t\t\t\t\tcontrol={<Checkbox size=\"small\" name=\"checkedA\" />}\r\n\t\t\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ti18nKey=\"email.promotionTerms\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texternalLink: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={\"email-signup-tos-check\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`https://www.adex.network/blog/subscribe-and-win-5000-adx/`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t</Box> */}\r\n\t\t\t\t\t<Box width={1} mt={2} display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tid={`sign-up-email`}\r\n\t\t\t\t\t\t\tdisabled={waiting}\r\n\t\t\t\t\t\t\tclassName={classes.singUp}\r\n\t\t\t\t\t\t\tonClick={() => handleSubmit()}\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{waiting ? t(\"email.submitting\") : t(\"email.submitBtnLabel\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React, { useContext } from \"react\"\r\nimport AppContext from \"../AppContext\"\r\nimport {\r\n\tBox,\r\n\tGrid,\r\n\tSvgIcon,\r\n\tTypography,\r\n\tuseMediaQuery\r\n} from \"@material-ui/core\"\r\nimport PoolCard from \"./PoolCard\"\r\nimport { formatADXPretty, getADXInUSDFormatted } from \"../helpers/formatting\"\r\nimport { ReactComponent as TomIcon } from \"./../resources/tom-ic.svg\"\r\nimport { ReactComponent as LoyaltyIcon } from \"./../resources/loyalty-ic.svg\"\r\nimport SectionHeader from \"./SectionHeader\"\r\nimport { DEPOSIT_POOLS } from \"../helpers/constants\"\r\nimport StarsIcon from \"@material-ui/icons/Stars\"\r\nimport WithDialog from \"./WithDialog\"\r\nimport DepositForm from \"./DepositForm\"\r\nimport EmailSignUp from \"./EmailSignUpCard\"\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\"\r\nimport Anchor from \"components/Anchor\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { DEPOSIT_ACTION_TYPES } from \"../actions\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\n\r\nconst DepositsDialog = WithDialog(DepositForm)\r\nconst TOM_V5_POOL = DEPOSIT_POOLS[1]\r\nconst LOYALTY_POOL = DEPOSIT_POOLS[0]\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\tfontSizeSmall: {\r\n\t\t\tfontSize: 12\r\n\t\t},\r\n\t\ttextWhite: {\r\n\t\t\tcolor: \"white\"\r\n\t\t}\r\n\t}\r\n})\r\n\r\nconst Pools = () => {\r\n\tconst classes = useStyles()\r\n\tconst { t } = useTranslation()\r\n\tconst { stats, chosenWalletType, prices } = useContext(AppContext)\r\n\tconst { loyaltyPoolStats, tomStakingV5PoolStats } = stats\r\n\r\n\tconst canStake = !!chosenWalletType.name && !!stats.connectedWalletAddress\r\n\tconst tomV5APY = tomStakingV5PoolStats.currentAPY * 100\r\n\tconst justifyCenter = useMediaQuery(theme => theme.breakpoints.down(\"xs\"))\r\n\r\n\tconst loyaltyPoolAPY = loyaltyPoolStats.currentAPY * 100\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<SectionHeader title={t(\"common.pools\")} />\r\n\t\t\t<Box mt={4}>\r\n\t\t\t\t<Box\r\n\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\tflex={1}\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\tflexWrap=\"wrap\"\r\n\t\t\t\t\talignItems=\"stretch\"\r\n\t\t\t\t\tjustifyContent={justifyCenter ? \"center\" : \"flex-start\"}\r\n\t\t\t\t>\r\n\t\t\t\t\t<PoolCard\r\n\t\t\t\t\t\tid=\"validator-tom-v5\"\r\n\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t<SvgIcon fontSize=\"large\" color=\"inherit\">\r\n\t\t\t\t\t\t\t\t<TomIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tname={t(\"common.tomV5\")}\r\n\t\t\t\t\t\ttotalStakedADX={`${formatADXPretty(\r\n\t\t\t\t\t\t\ttomStakingV5PoolStats.poolTotalStaked\r\n\t\t\t\t\t\t)} ADX`}\r\n\t\t\t\t\t\ttotalStakedUSD={`${getADXInUSDFormatted(\r\n\t\t\t\t\t\t\tprices,\r\n\t\t\t\t\t\t\ttomStakingV5PoolStats.poolTotalStaked\r\n\t\t\t\t\t\t)}`}\r\n\t\t\t\t\t\tcurrentAPY={`${tomV5APY.toFixed(2)} %`}\r\n\t\t\t\t\t\tweeklyYield={`${(tomV5APY / (365 / 7)).toFixed(4)} %`}\r\n\t\t\t\t\t\tweeklyYieldInfo={[\r\n\t\t\t\t\t\t\tt(\"pools.currentDailyYield\", {\r\n\t\t\t\t\t\t\t\tyield: (tomV5APY / 365).toFixed(4)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tloading={!tomStakingV5PoolStats.loaded}\r\n\t\t\t\t\t\tdisabled={!canStake}\r\n\t\t\t\t\t\tdisabledInfo={t(\"pools.connectWalletToStake\")}\r\n\t\t\t\t\t\tlockupPeriodTitle={t(\"common.unbondPeriod\")}\r\n\t\t\t\t\t\tlockupPeriodInfo={t(\"pools.lockupPeriodInfo\", {\r\n\t\t\t\t\t\t\tcount: TOM_V5_POOL.lockupPeriod\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tlockupPeriod={t(\"pools.unbondPeriodDay\", {\r\n\t\t\t\t\t\t\tcount: TOM_V5_POOL.lockupPeriod\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tstatsPath={`/stats?validator=${t(TOM_V5_POOL.label)}`}\r\n\t\t\t\t\t\tactionBtn={\r\n\t\t\t\t\t\t\t<DepositsDialog\r\n\t\t\t\t\t\t\t\tid=\"staking-pool-tom-deposit-form-card\"\r\n\t\t\t\t\t\t\t\ttitle={t(\"deposits.depositTo\", {\r\n\t\t\t\t\t\t\t\t\tpool: t(\"common.tomStakingPool\")\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\tbtnLabel={t(\"common.deposit\")}\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tdisabled={!canStake}\r\n\t\t\t\t\t\t\t\tdepositPool={DEPOSIT_POOLS[1].id}\r\n\t\t\t\t\t\t\t\tactionType={DEPOSIT_ACTION_TYPES.deposit}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<PoolCard\r\n\t\t\t\t\t\tid=\"loyalty-pool\"\r\n\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t<SvgIcon fontSize=\"large\" color=\"inherit\">\r\n\t\t\t\t\t\t\t\t<LoyaltyIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tname={t(\"common.loPo\")}\r\n\t\t\t\t\t\ttotalStakedADX={`${formatADXPretty(\r\n\t\t\t\t\t\t\tloyaltyPoolStats.poolTotalStaked\r\n\t\t\t\t\t\t)} ADX`}\r\n\t\t\t\t\t\ttotalStakedUSD={`${getADXInUSDFormatted(\r\n\t\t\t\t\t\t\tprices,\r\n\t\t\t\t\t\t\tloyaltyPoolStats.poolTotalStaked\r\n\t\t\t\t\t\t)}`}\r\n\t\t\t\t\t\tcurrentAPY={`${loyaltyPoolAPY.toFixed(2)} %`}\r\n\t\t\t\t\t\tweeklyYield={`${(loyaltyPoolAPY / (365 / 7)).toFixed(4)} %`}\r\n\t\t\t\t\t\tweeklyYieldInfo={[\r\n\t\t\t\t\t\t\tt(\"pools.currentDailyYield\", {\r\n\t\t\t\t\t\t\t\tyield: (loyaltyPoolAPY / 365).toFixed(4)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tloading={!loyaltyPoolStats.loaded}\r\n\t\t\t\t\t\tdisabled={!canStake}\r\n\t\t\t\t\t\tdisabledInfo={t(\"pools.connectWalletToDeposit\")}\r\n\t\t\t\t\t\tlockupPeriodTitle={t(\"common.unbondPeriod\")}\r\n\t\t\t\t\t\tlockupPeriodInfo={t(\"common.noUnbondPeriod\")}\r\n\t\t\t\t\t\tlockupPeriod={t(\"common.noUnbondPeriod\")}\r\n\t\t\t\t\t\textraData={[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: \"loyalty-pool-deposits-limit\",\r\n\t\t\t\t\t\t\t\ttitle: t(\"pools.totalDepositsLimit\"),\r\n\t\t\t\t\t\t\t\ttitleInfo: \"\",\r\n\t\t\t\t\t\t\t\tnormalValue: \"30 000 000 ADX\",\r\n\t\t\t\t\t\t\t\timportantValue: \"\",\r\n\t\t\t\t\t\t\t\tvalueInfo: \"\",\r\n\t\t\t\t\t\t\t\textra: \"\",\r\n\t\t\t\t\t\t\t\textrInfo: \"\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tactionBtn={\r\n\t\t\t\t\t\t\t<DepositsDialog\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tid=\"loyalty-pool-deposit-form-card\"\r\n\t\t\t\t\t\t\t\ttitle={t(\"common.addNewDeposit\")}\r\n\t\t\t\t\t\t\t\tbtnLabel={t(\"common.deposit\")}\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tdisabled={!canStake}\r\n\t\t\t\t\t\t\t\tdepositPool={LOYALTY_POOL.id}\r\n\t\t\t\t\t\t\t\tactionType={DEPOSIT_ACTION_TYPES.deposit}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\tbgcolor={\"background.card\"}\r\n\t\t\t\t\t\t\tp={2}\r\n\t\t\t\t\t\t\tmy={3}\r\n\t\t\t\t\t\t\tmx={1.5}\r\n\t\t\t\t\t\t\twidth={270}\r\n\t\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\t\tboxShadow={25}\r\n\t\t\t\t\t\t\tposition=\"relative\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\t\t\tdirection=\"row\"\r\n\t\t\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\t\t\tspacing={2}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Grid item xs={2}>\r\n\t\t\t\t\t\t\t\t\t<StarsIcon color=\"secondary\" />\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<Grid item xs={10}>\r\n\t\t\t\t\t\t\t\t\t<Typography align=\"left\" variant=\"h5\" color=\"textPrimary\">\r\n\t\t\t\t\t\t\t\t\t\t<strong>{t(\"email.newToStaking\")}</strong>\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t<Typography align=\"left\" variant=\"body1\" color=\"secondary\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"https://help.adex.network/hc/en-us/articles/360019465979-New-to-staking-A-summary-of-all-you-need-to-know\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{t(\"email.learnMore\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ArrowForwardIosIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSizeSmall: classes.fontSizeSmall\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<EmailSignUp formId={2} formName=\"stakingportalleads\" />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default Pools\r\n","export function loadFromLocalStorage(key) {\r\n\ttry {\r\n\t\tconst data = localStorage.getItem(key)\r\n\t\tif (data === null) {\r\n\t\t\treturn undefined\r\n\t\t}\r\n\t\treturn JSON.parse(data)\r\n\t} catch (err) {\r\n\t\treturn undefined\r\n\t}\r\n}\r\n\r\nexport function saveToLocalStorage(data, key) {\r\n\ttry {\r\n\t\tconst serialized = JSON.stringify(data)\r\n\t\tlocalStorage.setItem(key, serialized)\r\n\t} catch (err) {\r\n\t\tconsole.warn(err)\r\n\t}\r\n}\r\n\r\nexport function removeFromLocalStorage(key) {\r\n\tlocalStorage.removeItem(key)\r\n}\r\n\r\nexport function getKeys() {\r\n\treturn Object.keys(localStorage)\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport { fade } from \"@material-ui/core/styles/colorManipulator\"\r\nimport {\r\n\tSvgIcon,\r\n\tBox,\r\n\tModal,\r\n\tFade,\r\n\tBackdrop,\r\n\tTypography,\r\n\tButton\r\n} from \"@material-ui/core\"\r\nimport { CardRow } from \"./cardCommon\"\r\nimport { ReactComponent as AdExIcon } from \"./../resources/adex-logo-clean.svg\"\r\nimport { formatADXPretty } from \"../helpers/formatting\"\r\nimport AppContext from \"../AppContext\"\r\nimport { ZERO } from \"../helpers/constants\"\r\nimport { DEPOSIT_POOLS } from \"../helpers/constants\"\r\nimport { DEPOSIT_ACTION_TYPES } from \"../actions\"\r\n\r\nimport {\r\n\tloadFromLocalStorage,\r\n\tsaveToLocalStorage\r\n} from \"../helpers/localStorage\"\r\n\r\nimport { useTranslation } from \"react-i18next\"\r\nimport WithDialog from \"./WithDialog\"\r\nimport DepositForm from \"./DepositForm\"\r\n\r\nconst DepositsDialog = WithDialog(DepositForm)\r\n\r\nconst HIDE_FOR = 10 * 24 * 60 * 60 * 1000 // 10 day\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\ticonBoxBack: {\r\n\t\t\tborderRadius: \"100%\",\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: 92,\r\n\t\t\theight: 92,\r\n\t\t\ttop: -46,\r\n\t\t\tleft: \"calc(50% - 46px)\",\r\n\t\t\tbackground: `linear-gradient(69deg, ${fade(\r\n\t\t\t\ttheme.palette.lightGrey.main,\r\n\t\t\t\t0.69\r\n\t\t\t)} 0%, ${fade(theme.palette.common.white, 0.69)} 100%)`,\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\"\r\n\t\t},\r\n\t\ticonBox: {\r\n\t\t\tborderRadius: \"100%\",\r\n\t\t\twidth: 82,\r\n\t\t\theight: 82,\r\n\t\t\tbackgroundColor: theme.palette.common.white,\r\n\t\t\tcolor: theme.palette.background.default,\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\"\r\n\t\t},\r\n\t\ttop: {\r\n\t\t\tbackground: `radial-gradient(\r\n                ellipse at bottom,\r\n                ${theme.palette.background.special} 0%,\r\n                ${theme.palette.common.black} 110%\r\n            )`\r\n\t\t},\r\n\t\tbottom: {\r\n\t\t\tposition: \"relative\",\r\n\t\t\tbackground: theme.palette.common.white,\r\n\t\t\tborderTopLeftRadius: \"100%\",\r\n\t\t\tborderTopRightRadius: \"100%\",\r\n\t\t\twidth: \"142%\",\r\n\t\t\tmarginLeft: \"-21%\",\r\n\t\t\tmarginTop: -90,\r\n\t\t\tpadding: theme.spacing(3),\r\n\t\t\tpaddingTop: 69 + theme.spacing(3),\r\n\t\t\tpaddingLeft: `calc(21% + ${theme.spacing(3)}px)`,\r\n\t\t\tpaddingRight: `calc(21% + ${theme.spacing(3)}px)`\r\n\t\t},\r\n\t\tmodal: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\"\r\n\t\t}\r\n\t}\r\n})\r\n\r\nconst StakeNowPopup = () => {\r\n\tconst { t } = useTranslation()\r\n\tconst classes = useStyles()\r\n\tconst [open, setOpen] = useState(false)\r\n\r\n\tconst { stats, account, legacySwapOpen, legacySwapInPrg } = useContext(\r\n\t\tAppContext\r\n\t)\r\n\r\n\tconst { userBalance } = stats\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!legacySwapInPrg && !legacySwapOpen) {\r\n\t\t\tconst hasADX = userBalance.gt(ZERO)\r\n\t\t\tconst lastPopUP = loadFromLocalStorage(`stake-popup-last-pop-${account}`)\r\n\t\t\tconst showSinceLast = !lastPopUP || Date.now() - lastPopUP > HIDE_FOR\r\n\r\n\t\t\tif (hasADX && showSinceLast) {\r\n\t\t\t\tsetOpen(true)\r\n\t\t\t\tsaveToLocalStorage(Date.now(), `stake-popup-last-pop-${account}`)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [legacySwapOpen, legacySwapInPrg, account, userBalance])\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<Modal\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={() => setOpen(false)}\r\n\t\t\t\tclassName={classes.modal}\r\n\t\t\t\tcloseAfterTransition\r\n\t\t\t\tBackdropComponent={Backdrop}\r\n\t\t\t\tBackdropProps={{\r\n\t\t\t\t\ttimeout: 300\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Fade in={open}>\r\n\t\t\t\t\t<Box overflow=\"hidden\" width={420} maxWidth={\"100%\"} m={1}>\r\n\t\t\t\t\t\t<Box height={200} classes={{ root: classes.top }}></Box>\r\n\t\t\t\t\t\t<Box classes={{ root: classes.bottom }}>\r\n\t\t\t\t\t\t\t<Box classes={{ root: classes.iconBoxBack }}>\r\n\t\t\t\t\t\t\t\t<Box classes={{ root: classes.iconBox }} fontSize={50}>\r\n\t\t\t\t\t\t\t\t\t<SvgIcon fontSize=\"inherit\" color=\"inherit\">\r\n\t\t\t\t\t\t\t\t\t\t<AdExIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\t\t\tjustifyContent=\"center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\tvariant=\"h4\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tgutterBottom\r\n\t\t\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t(\"popups.congratulations\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\tvariant=\"caption\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tgutterBottom\r\n\t\t\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t(\"popups.proudOwnerOfADX\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t\t<Box my={3}>\r\n\t\t\t\t\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"text.main\"\r\n\t\t\t\t\t\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\t\t\t\t\ttext={t(\"common.currencyBalance\", { currency: \"ADX\" })}\r\n\t\t\t\t\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<CardRow\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"warning.main\"\r\n\t\t\t\t\t\t\t\t\t\tfontWeight={\"fontWeightBold\"}\r\n\t\t\t\t\t\t\t\t\t\tfontSize={27}\r\n\t\t\t\t\t\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\t\t\t\t\tstats.userBalance\r\n\t\t\t\t\t\t\t\t\t\t\t\t? formatADXPretty(userBalance) + \" ADX\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tisAmountText\r\n\t\t\t\t\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t\t\t\t<Box my={1}>\r\n\t\t\t\t\t\t\t\t\t<DepositsDialog\r\n\t\t\t\t\t\t\t\t\t\tid={`stake-popup-stake-btn`}\r\n\t\t\t\t\t\t\t\t\t\ttitle={t(\"deposits.depositTo\", {\r\n\t\t\t\t\t\t\t\t\t\t\tpool: t(\"common.tomStakingPool\")\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\tbtnLabel={t(\"bonds.stakeADX\")}\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"extended\"\r\n\t\t\t\t\t\t\t\t\t\tfabButton\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\ttooltipTitle={t(\"common.connectWallet\")}\r\n\t\t\t\t\t\t\t\t\t\tdepositPool={DEPOSIT_POOLS[1].id}\r\n\t\t\t\t\t\t\t\t\t\tactionType={DEPOSIT_ACTION_TYPES.deposit}\r\n\t\t\t\t\t\t\t\t\t\tonCloseDialog={() => setOpen(false)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t\t\t\t<Box my={1}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tid={`stake-popup-close-btn`}\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => setOpen(false)}\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{t(\"common.goBack\")}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Fade>\r\n\t\t\t</Modal>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default StakeNowPopup\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n  id: \"linear-gradient\",\n  x1: 0.282,\n  y1: 0.147,\n  x2: 0.839,\n  y2: 1.048,\n  gradientUnits: \"objectBoundingBox\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  offset: 0,\n  stopColor: \"#dfdfdf\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  offset: 1,\n  stopColor: \"#e5e5e5\",\n  stopOpacity: 0.49\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1759\",\n  \"data-name\": \"Group 1759\",\n  transform: \"translate(-862.982 -236)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1749\",\n  \"data-name\": \"Group 1749\",\n  transform: \"translate(0 8)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1401\",\n  \"data-name\": \"Path 1401\",\n  d: \"M79.108,18a12,12,0,0,1,20.784,0L165.75,132.5a12,12,0,0,1-10.392,18H24a12,12,0,0,1-10.392-18Z\",\n  transform: \"translate(851 218)\",\n  fill: \"url(#linear-gradient)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Polygon_1\",\n  \"data-name\": \"Polygon 1\",\n  d: \"M70.562,12.086a8,8,0,0,1,13.876,0l63.683,110.931A8,8,0,0,1,141.183,135H13.817a8,8,0,0,1-6.938-11.983Z\",\n  transform: \"translate(863 228)\",\n  fill: \"#feb006\"\n})), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1402\",\n  \"data-name\": \"Path 1402\",\n  d: \"M-493.88,1030.708h-15.525v-3.573h-16.585c.123.108.211.185.3.261q2.034,1.74,4.07,3.478c.126.107.132.183.021.311q-1.076,1.242-2.137,2.5c-.118.14-.185.165-.337.032q-1.71-1.49-3.436-2.962-3.145-2.7-6.3-5.388c-.131-.112-.118-.166,0-.268.5-.43,1-.867,1.5-1.3q2.243-1.965,4.485-3.931,1.842-1.611,3.689-3.217c.222-.194.238-.194.438.041q.976,1.149,1.956,2.294a.421.421,0,0,1-.046.594c-1.47,1.259-2.942,2.517-4.468,3.821h16.842v-9.761a3.837,3.837,0,0,0-3.837-3.837h-25.048a3.837,3.837,0,0,0-3.837,3.837v25.048a3.837,3.837,0,0,0,3.837,3.837h15.525v3.566H-506.1c-1.525-1.3-3-2.561-4.467-3.82a.422.422,0,0,1-.046-.594q.981-1.145,1.956-2.294c.2-.234.216-.234.438-.041q1.843,1.61,3.689,3.217,2.245,1.963,4.485,3.931c.5.437,1,.874,1.5,1.3.12.1.134.156,0,.268q-3.152,2.689-6.3,5.388-1.722,1.477-3.436,2.962c-.152.133-.219.108-.337-.032q-1.06-1.256-2.137-2.5c-.111-.128-.1-.2.021-.311q2.038-1.736,4.07-3.478c.089-.076.177-.154.3-.261h-16.4v9.768a3.837,3.837,0,0,0,3.837,3.837h25.048a3.837,3.837,0,0,0,3.837-3.837v-25.048A3.837,3.837,0,0,0-493.88,1030.708Z\",\n  transform: \"translate(1459.085 -718.444)\",\n  fill: \"#8b6002\"\n}));\n\nvar SvgMigrationIc = function SvgMigrationIc(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 155.394,\n    height: 140.5,\n    viewBox: \"0 0 155.394 140.5\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMigrationIc, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/migration-ic.7d63e541.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useContext } from \"react\"\r\nimport { Button, Fab } from \"@material-ui/core\"\r\n\r\nimport WithRouterLink from \"./WithRouterLink\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport WithDialog from \"./WithDialog\"\r\nimport MigrationForm from \"./MigrationForm\"\r\nimport AppContext from \"../AppContext\"\r\nimport { ZERO } from \"../helpers/constants\"\r\nimport { getPool } from \"../helpers/bonds\"\r\n\r\nconst MigrationDialog = WithDialog(MigrationForm)\r\n\r\nconst RRButton = WithRouterLink(Button)\r\nconst RRFab = WithRouterLink(Fab)\r\n\r\nexport default function MigrationBtn({ onBeforeOpen, fabButton, color, size }) {\r\n\tconst { t } = useTranslation()\r\n\tconst { stats } = useContext(AppContext)\r\n\r\n\tconst {\r\n\t\thasToMigrate,\r\n\t\tbondToMigrate,\r\n\t\tisWithdrawMigration\r\n\t} = stats.tomBondsMigrationData\r\n\r\n\tif (!hasToMigrate) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tconst ButtonComponent = fabButton ? RRFab : RRButton\r\n\r\n\tif (hasToMigrate && !bondToMigrate) {\r\n\t\treturn (\r\n\t\t\t<ButtonComponent\r\n\t\t\t\tonClick={onBeforeOpen}\r\n\t\t\t\tto={{ pathname: \"/stakings\" }}\r\n\t\t\t\tcolor={color || \"primary\"}\r\n\t\t\t\tsize={size || \"small\"}\r\n\t\t\t\tvariant={fabButton ? \"extended\" : \"contained\"}\r\n\t\t\t>\r\n\t\t\t\t{t(\"rewards.migrateYourBondsIfYouWandMigrate\")}\r\n\t\t\t</ButtonComponent>\r\n\t\t)\r\n\t}\r\n\r\n\tif (bondToMigrate) {\r\n\t\tconst pool = getPool(bondToMigrate.poolId)\r\n\t\tconst poolLabel = pool ? pool.label : bondToMigrate.poolId\r\n\t\tconst created = new Date(\r\n\t\t\t(bondToMigrate.nonce.gt(ZERO)\r\n\t\t\t\t? bondToMigrate.nonce\r\n\t\t\t\t: bondToMigrate.time\r\n\t\t\t).toNumber() * 1000\r\n\t\t)\r\n\r\n\t\treturn (\r\n\t\t\t<MigrationDialog\r\n\t\t\t\tid=\"staking-pool-tom-deposit-form\"\r\n\t\t\t\ttitle={\r\n\t\t\t\t\tisWithdrawMigration ? t(\"bonds.unbond\") : t(\"bonds.requestMigrate\")\r\n\t\t\t\t}\r\n\t\t\t\tbtnLabel={\r\n\t\t\t\t\tisWithdrawMigration ? t(\"bonds.unbond\") : t(\"bonds.requestMigrate\")\r\n\t\t\t\t}\r\n\t\t\t\tcolor={color || \"primary\"}\r\n\t\t\t\tsize={size || \"small\"}\r\n\t\t\t\tvariant={fabButton ? \"extended\" : \"contained\"}\r\n\t\t\t\tfabButton={!!fabButton}\r\n\t\t\t\tbond={bondToMigrate}\r\n\t\t\t\tpoolLabel={poolLabel}\r\n\t\t\t\tcreated={created}\r\n\t\t\t\tfullWidth\r\n\t\t\t\tisWithdrawMigration={isWithdrawMigration}\r\n\t\t\t\tonCloseDialog={onBeforeOpen}\r\n\t\t\t/>\r\n\t\t)\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport {\r\n\tBox,\r\n\tModal,\r\n\tFade,\r\n\tBackdrop,\r\n\tTypography,\r\n\tButton\r\n} from \"@material-ui/core\"\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\"\r\nimport { ReactComponent as MigrationIcon } from \"./../resources/migration-ic.svg\"\r\nimport AppContext from \"../AppContext\"\r\nimport MigrationBtn from \"./MigrationBtn\"\r\nimport { ExternalAnchor } from \"./Anchor\"\r\nimport { useLocation } from \"react-router-dom\"\r\n\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\treturn {\r\n\t\ticonBox: {\r\n\t\t\tborderRadius: \"100%\",\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: 92,\r\n\t\t\theight: 92,\r\n\t\t\ttop: -56,\r\n\t\t\tleft: \"calc(50% - 46px)\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\"\r\n\t\t},\r\n\t\ttop: {\r\n\t\t\tbackground: `radial-gradient(\r\n                ellipse at bottom,\r\n                ${theme.palette.background.special} 0%,\r\n                ${theme.palette.common.black} 110%\r\n            )`\r\n\t\t},\r\n\t\tbottom: {\r\n\t\t\tposition: \"relative\",\r\n\t\t\tbackground: theme.palette.common.white,\r\n\t\t\tborderTopLeftRadius: \"100%\",\r\n\t\t\tborderTopRightRadius: \"100%\",\r\n\t\t\twidth: \"142%\",\r\n\t\t\tmarginLeft: \"-21%\",\r\n\t\t\tmarginTop: -90,\r\n\t\t\tpadding: theme.spacing(3),\r\n\t\t\tpaddingTop: 69 + theme.spacing(3),\r\n\t\t\tpaddingLeft: `calc(21% + ${theme.spacing(3)}px)`,\r\n\t\t\tpaddingRight: `calc(21% + ${theme.spacing(3)}px)`\r\n\t\t},\r\n\t\tmodal: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\"\r\n\t\t}\r\n\t}\r\n})\r\n\r\nexport const MigrateNowAlert = () => {\r\n\tconst { t } = useTranslation()\r\n\r\n\tconst { stats } = useContext(AppContext)\r\n\tconst location = useLocation()\r\n\tconst path = location.pathname\r\n\r\n\tconst { hasToMigrate, bondToMigrate } = stats.tomBondsMigrationData\r\n\r\n\treturn (\r\n\t\thasToMigrate && (\r\n\t\t\t<Box mb={2}>\r\n\t\t\t\t<Alert severity=\"info\" variant=\"filled\">\r\n\t\t\t\t\t<AlertTitle id=\"alert-chain-warning-title\">\r\n\t\t\t\t\t\t{t(\"popups.migrationAlert\")}\r\n\t\t\t\t\t</AlertTitle>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tid=\"alert-chain-description\"\r\n\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Box>{t(\"bonds.migrationAlertText5\")}</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\ti18nKey=\"bonds.migrationAlertText6\"\r\n\t\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\t\texternalLink: (\r\n\t\t\t\t\t\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\tid={`migration--alert-blogpost-link`}\r\n\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t\t\thref={`https://www.adex.network/blog/staking-portal-upgrade/`}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t\t<Box mt={1}>\r\n\t\t\t\t\t\t\t{t(\"popups.migrationAlertInfoMigrate\", {\r\n\t\t\t\t\t\t\t\tcount: hasToMigrate && !bondToMigrate ? 2 : 1\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{path !== \"/stakings\" && (\r\n\t\t\t\t\t\t\t<Box mt={1}>\r\n\t\t\t\t\t\t\t\t<MigrationBtn\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Alert>\r\n\t\t\t</Box>\r\n\t\t)\r\n\t)\r\n}\r\n\r\nexport const MigrateNowPopup = () => {\r\n\tconst { t } = useTranslation()\r\n\tconst classes = useStyles()\r\n\tconst [open, setOpen] = useState(true)\r\n\r\n\tconst { stats } = useContext(AppContext)\r\n\r\n\tconst { hasToMigrate, bondToMigrate } = stats.tomBondsMigrationData\r\n\r\n\tuseEffect(() => {\r\n\t\tsetOpen(hasToMigrate)\r\n\t}, [hasToMigrate])\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<Modal\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={() => setOpen(false)}\r\n\t\t\t\tclassName={classes.modal}\r\n\t\t\t\tcloseAfterTransition\r\n\t\t\t\tBackdropComponent={Backdrop}\r\n\t\t\t\tBackdropProps={{\r\n\t\t\t\t\ttimeout: 300\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Fade in={open}>\r\n\t\t\t\t\t<Box overflow=\"hidden\" width={420} maxWidth={\"100%\"} m={1}>\r\n\t\t\t\t\t\t<Box height={200} classes={{ root: classes.top }}></Box>\r\n\t\t\t\t\t\t<Box classes={{ root: classes.bottom }}>\r\n\t\t\t\t\t\t\t<Box classes={{ root: classes.iconBox }}>\r\n\t\t\t\t\t\t\t\t<MigrationIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\t\t\tjustifyContent=\"center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\tvariant=\"h4\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tgutterBottom\r\n\t\t\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t(\"popups.migrationAlert\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\tvariant=\"caption\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tgutterBottom\r\n\t\t\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t(\"popups.migrationAlertInfoMigrate\", {\r\n\t\t\t\t\t\t\t\t\t\tcount: hasToMigrate && !bondToMigrate ? 2 : 1\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t\t<Box my={2}>\r\n\t\t\t\t\t\t\t\t\t<MigrationBtn\r\n\t\t\t\t\t\t\t\t\t\tonBeforeOpen={() => setOpen(false)}\r\n\t\t\t\t\t\t\t\t\t\tfabButton\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t\t\t\t<Box my={2}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tid={`stake-popup-close-btn`}\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => setOpen(false)}\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{t(\"popups.notNow\")}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Fade>\r\n\t\t\t</Modal>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from \"react\"\r\nimport { getPool } from \"../helpers/bonds\"\r\nimport {\r\n\tparseADX,\r\n\tformatADX,\r\n\tformatADXPretty,\r\n\ttoIdAttributeString\r\n} from \"../helpers/formatting\"\r\nimport {\r\n\tUNBOND_DAYS,\r\n\tZERO,\r\n\tDEFAULT_BOND,\r\n\tSTAKING_RULES_URL\r\n} from \"../helpers/constants\"\r\nimport {\r\n\tGrid,\r\n\tTextField,\r\n\tTypography,\r\n\tButton,\r\n\tFormControl,\r\n\tInputLabel,\r\n\tSelect,\r\n\tMenuItem,\r\n\tFormControlLabel,\r\n\tCheckbox,\r\n\tBox\r\n} from \"@material-ui/core\"\r\nimport { ExternalAnchor } from \"./Anchor\"\r\nimport { getPoolStatsByPoolId } from \"../actions\"\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\n\r\nexport default function NewBondForm({\r\n\tstats,\r\n\tonNewBond,\r\n\tpools,\r\n\tchosenWalletType,\r\n\tnewBondPool,\r\n\tsetNewBondPool\r\n}) {\r\n\tconst { t } = useTranslation()\r\n\tconst [bond, setBond] = useState(DEFAULT_BOND)\r\n\tconst [stakingAmount, setStakingAmount] = useState(\"0.0\")\r\n\tconst [amountErr, setAmountErr] = useState(false)\r\n\tconst [amountErrText, setAmountErrText] = useState(\"\")\r\n\tconst [confirmation, setConfirmation] = useState(false)\r\n\tconst minWidthStyle = { minWidth: \"180px\" }\r\n\tconst activePool = getPool(newBondPool)\r\n\tconst poolStats = activePool ? getPoolStatsByPoolId(stats, activePool.id) : {}\r\n\tconst { identityDeployed, userIdentityBalance, userBalance } = stats\r\n\r\n\tconst onlyIdentityBalance = !identityDeployed && userIdentityBalance.gt(ZERO)\r\n\tconst maxAmount = onlyIdentityBalance ? userIdentityBalance : userBalance\r\n\r\n\tconst onAction = () => {\r\n\t\tsetConfirmation(false)\r\n\t\tonNewBond(bond)\r\n\t}\r\n\r\n\tconst confirmationLabel = (\r\n\t\t<Trans\r\n\t\t\ti18nKey=\"bonds.confirmationLabel\"\r\n\t\t\tvalues={{\r\n\t\t\t\tunbondDays: UNBOND_DAYS\r\n\t\t\t}}\r\n\t\t\tcomponents={{\r\n\t\t\t\te1: (\r\n\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\tid=\"new-bond-form-adex-network-tos\"\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\thref=\"https://www.adex.network/tos/\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\t\te2: STAKING_RULES_URL ? (\r\n\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\tid=\"new-bond-form-adex-staking-rules\"\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\thref={STAKING_RULES_URL}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<></>\r\n\t\t\t\t)\r\n\t\t\t}}\r\n\t\t/>\r\n\t)\r\n\r\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\tconst validateFields = params => {\r\n\t\tconst { amountBN, poolToValidate } = params\r\n\t\tconst minStakingAmountBN = poolToValidate\r\n\t\t\t? parseADX(poolToValidate.minStakingAmount)\r\n\t\t\t: ZERO\r\n\t\tif (amountBN.gt(maxAmount)) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(t(\"errors.lowADXAmount\"))\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (poolToValidate && amountBN.lt(minStakingAmountBN)) {\r\n\t\t\tsetAmountErr(true)\r\n\t\t\tsetAmountErrText(t(\"errors.lessThanMinPoolADX\"))\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetAmountErr(false)\r\n\t\treturn\r\n\t}\r\n\r\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\tconst updateStakingAmountBN = amountBN => {\r\n\t\tvalidateFields({ amountBN, poolToValidate: activePool })\r\n\t\tsetStakingAmount(formatADX(amountBN))\r\n\t\tsetBond({\r\n\t\t\t...bond,\r\n\t\t\tamount: amountBN\r\n\t\t})\r\n\t}\r\n\r\n\tconst updatePool = value => {\r\n\t\tsetNewBondPool(value)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst amountBN = parseADX(stakingAmount)\r\n\t\tconst poolToValidate = getPool(newBondPool)\r\n\t\tvalidateFields({ amountBN, poolToValidate })\r\n\t\tsetBond({ ...bond, poolId: newBondPool })\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [newBondPool])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (onlyIdentityBalance) {\r\n\t\t\tupdateStakingAmountBN(userIdentityBalance)\r\n\t\t}\r\n\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [onlyIdentityBalance, userIdentityBalance])\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\twidth={666}\r\n\t\t\tmaxWidth={1}\r\n\t\t\tm={1}\r\n\t\t\tmaxHeight=\"90vh\"\r\n\t\t\tp={2}\r\n\t\t\tpb={4}\r\n\t\t\tbgcolor=\"background.paper\"\r\n\t\t\toverflow=\"auto\"\r\n\t\t>\r\n\t\t\t<h2>{t(\"bonds.createBond\")}</h2>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={12} sm={6}>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tid=\"new-bond-form-amount-field\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tlabel={t(\"common.labelADXAmount\")}\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\tstyle={minWidthStyle}\r\n\t\t\t\t\t\tvalue={stakingAmount}\r\n\t\t\t\t\t\terror={amountErr}\r\n\t\t\t\t\t\tdisabled={onlyIdentityBalance}\r\n\t\t\t\t\t\tonChange={ev => {\r\n\t\t\t\t\t\t\t// since its a number input it can be a negative number which wouldn't make sense so we cap it at 0\r\n\t\t\t\t\t\t\tconst amount = Math.max(0, ev.target.value)\r\n\t\t\t\t\t\t\tconst amountBN = parseADX(amount.toString())\r\n\t\t\t\t\t\t\tupdateStakingAmountBN(amountBN)\r\n\t\t\t\t\t\t\tsetStakingAmount(amount.toString())\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\thelperText={amountErr ? amountErrText : null}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Box mt={1}>\r\n\t\t\t\t\t\t{onlyIdentityBalance ? (\r\n\t\t\t\t\t\t\tt(\"bonds.stakeNewAccIdentityBalance\", {\r\n\t\t\t\t\t\t\t\tamount: formatADXPretty(userIdentityBalance),\r\n\t\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tid=\"new-bond-form-max-amount-btn\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tupdateStakingAmountBN(maxAmount)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t(\"common.maxAmountBtn\", {\r\n\t\t\t\t\t\t\t\t\tamount: formatADXPretty(maxAmount),\r\n\t\t\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12} sm={6}>\r\n\t\t\t\t\t<FormControl fullWidth required>\r\n\t\t\t\t\t\t<InputLabel>{t(\"common.pool\")}</InputLabel>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tid=\"new-bond-form-pool-select\"\r\n\t\t\t\t\t\t\tstyle={minWidthStyle}\r\n\t\t\t\t\t\t\tvalue={newBondPool}\r\n\t\t\t\t\t\t\tonChange={ev => updatePool(ev.target.value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<MenuItem value={\"\"}>\r\n\t\t\t\t\t\t\t\t<em>{t(\"common.none\")}</em>\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t{pools.map(({ label, id }) => (\r\n\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\tid={`new-bond-form-values-${toIdAttributeString(label)}`}\r\n\t\t\t\t\t\t\t\t\tkey={id}\r\n\t\t\t\t\t\t\t\t\tvalue={id}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t(label)}\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</FormControl>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t{!!activePool && (\r\n\t\t\t\t\t<Grid item xs={12} container spacing={2}>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t{t(\"common.poolRewardPolicy\")}:\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t{t(activePool.rewardPolicy)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\t{t(\"common.poolSlashingPolicy\")}:\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t{t(activePool.slashPolicy)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">{t(\"common.poolAPY\")}:</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\t\ti18nKey=\"bonds.currentYield\"\r\n\t\t\t\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\t\t\t\tapy: (poolStats.totalAPY * 100).toFixed(2),\r\n\t\t\t\t\t\t\t\t\t\tsign: \"%\"\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\t\t\tfarmer: (\r\n\t\t\t\t\t\t\t\t\t\t\t<span role=\"img\" aria-label=\"farmer\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t🌾\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t\t<strong>\r\n\t\t\t\t\t\t\t\t\t{t(\"messages.signAllTransactions\", {\r\n\t\t\t\t\t\t\t\t\t\twallet: chosenWalletType.name || \"\"\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</strong>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\tstyle={{ userSelect: \"none\" }}\r\n\t\t\t\t\t\tlabel={confirmationLabel}\r\n\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\tid=\"new-bond-form-tos-check\"\r\n\t\t\t\t\t\t\t\tchecked={confirmation}\r\n\t\t\t\t\t\t\t\tonChange={ev => setConfirmation(ev.target.checked)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t></FormControlLabel>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<FormControl style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tid={`new-bond-stake-btn-${toIdAttributeString(\r\n\t\t\t\t\t\t\t\tbond ? bond.poolId || \"bond\" : \"pool-not-selected\"\r\n\t\t\t\t\t\t\t)}`}\r\n\t\t\t\t\t\t\tdisableElevation\r\n\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\t\t\tbond.poolId &&\r\n\t\t\t\t\t\t\t\t\tconfirmation &&\r\n\t\t\t\t\t\t\t\t\tbond.amount.gt(ZERO) &&\r\n\t\t\t\t\t\t\t\t\t!amountErr\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={onAction}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t(\"bonds.stakeADX\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</FormControl>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from \"react\"\r\nimport { Contract } from \"ethers\"\r\nimport Snackbar from \"@material-ui/core/Snackbar\"\r\nimport MuiAlert from \"@material-ui/lab/Alert\"\r\nimport { utils } from \"ethers\"\r\nimport ConfirmationDialog from \"./ConfirmationDialog\"\r\nimport { ExternalAnchor } from \"./Anchor\"\r\nimport { ZERO, ADDR_ADX } from \"../helpers/constants\"\r\nimport ERC20ABI from \"../abi/ERC20\"\r\nimport { getDefaultProvider } from \"./../ethereum\"\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\n\r\nconst defaultProvider = getDefaultProvider\r\n\r\nconst ADDR_ADX_OLD = \"0x4470BB87d77b963A013DB939BE332f927f2b992e\"\r\n\r\nconst provider = defaultProvider\r\nconst LegacyToken = new Contract(ADDR_ADX_OLD, ERC20ABI, provider)\r\n\r\nexport default function LegacyADXSwapDialog(\r\n\tgetSigner,\r\n\twrapDoingTxns,\r\n\tchosenWalletType,\r\n\tlegacySwapInPrg,\r\n\tsetLegacySwapInPrg,\r\n\tlegacySwapOpen,\r\n\tsetLegacySwapInOpen\r\n) {\r\n\tconst { t } = useTranslation()\r\n\t// Amount to migrate\r\n\tconst [amount, setAmount] = useState(ZERO)\r\n\t// const [isSwapInPrg, setSwapInPrg] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!getSigner || !chosenWalletType.name) return\r\n\t\tconst refreshAmount = async () => {\r\n\t\t\tconst signer = await getSigner(chosenWalletType)\r\n\t\t\tif (!signer) return\r\n\t\t\tconst walletAddr = await signer.getAddress()\r\n\t\t\tconst balance = await LegacyToken.balanceOf(walletAddr)\r\n\t\t\tsetAmount(balance)\r\n\t\t\tif (balance.gt(ZERO)) {\r\n\t\t\t\tsetLegacySwapInOpen(true)\r\n\t\t\t}\r\n\t\t}\r\n\t\trefreshAmount().catch(e => console.error(e))\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [getSigner, chosenWalletType])\r\n\r\n\tconst farmer = (\r\n\t\t<span role=\"img\" aria-label=\"farmer\">\r\n\t\t\t🌾\r\n\t\t</span>\r\n\t)\r\n\tconst content = (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\t<Trans\r\n\t\t\t\t\ti18nKey=\"legacy.p1\"\r\n\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\tamount: amount.gt(ZERO) ? utils.formatUnits(amount, 4) : \"\"\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\texternal: (\r\n\t\t\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\t\t\tid=\"new-bond-form-adex-network-tos\"\r\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\thref={`https://www.adex.network/blog/token-upgrade-defi-features/`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<b>{t(\"legacy.p2\")}</b>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<Trans\r\n\t\t\t\t\ti18nKey=\"legacy.p3\"\r\n\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\twallet: chosenWalletType.name || \"MetaMask\"\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<b>\r\n\t\t\t\t\t<Trans\r\n\t\t\t\t\t\ti18nKey=\"legacy.p4\"\r\n\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\tamount: amount.gt(ZERO) ? utils.formatUnits(amount, 4) : \"\"\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\tfarmer,\r\n\t\t\t\t\t\t\texternal: (\r\n\t\t\t\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\t\t\t\tid=\"new-bond-form-adex-network-tos\"\r\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\thref={\r\n\t\t\t\t\t\t\t\t\t\t\"https://www.adex.network/blog/new-token-economics-and-staking/\"\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</b>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t)\r\n\tconst onSwap = wrapDoingTxns(\r\n\t\tswapTokens.bind(null, setAmount, amount, getSigner, chosenWalletType)\r\n\t)\r\n\tconst dialog = ConfirmationDialog({\r\n\t\tisOpen: legacySwapOpen,\r\n\t\tonDeny: () => setLegacySwapInOpen(false),\r\n\t\tonConfirm: async () => {\r\n\t\t\tconst txns = await onSwap()\r\n\t\t\tif (!txns) return\r\n\t\t\tsetLegacySwapInPrg(true)\r\n\t\t\tawait Promise.all(txns.map(x => x.wait()))\r\n\t\t\tsetLegacySwapInPrg(false)\r\n\t\t},\r\n\t\tconfirmActionName: t(\"legacy.swapNow\"),\r\n\t\ttitle: t(\"legacy.adxToUpgrade\"),\r\n\t\tcontent\r\n\t})\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{dialog}\r\n\t\t\t<Snackbar open={legacySwapInPrg}>\r\n\t\t\t\t<MuiAlert elevation={6} variant=\"filled\" severity=\"success\">\r\n\t\t\t\t\t{t(\"legacy.swapInProgress\")}\r\n\t\t\t\t</MuiAlert>\r\n\t\t\t</Snackbar>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nasync function swapTokens(setAmount, amount, getSigner, chosenWalletType) {\r\n\tconst signer = await getSigner(chosenWalletType)\r\n\tconst walletAddr = await signer.getAddress()\r\n\tconst legacyTokenWithSigner = new Contract(ADDR_ADX_OLD, ERC20ABI, signer)\r\n\tconst newTokenWithSigner = new Contract(\r\n\t\tADDR_ADX,\r\n\t\t[\"function swap(uint prevTokenAmount) external\"],\r\n\t\tsigner\r\n\t)\r\n\tconst allowance = await legacyTokenWithSigner.allowance(walletAddr, ADDR_ADX)\r\n\r\n\tlet txns = []\r\n\t// this mechanism is used so that we auto-calculate gas on the first tx, but hard-set on the next txns since they depend\r\n\t// on the state of the previous\r\n\tlet hasAutocalculatedGas = false\r\n\tconst firstTimeGasLimit = gasLimit => {\r\n\t\tif (hasAutocalculatedGas) return { gasLimit }\r\n\t\thasAutocalculatedGas = true\r\n\t\treturn {}\r\n\t}\r\n\tif (allowance.lt(amount)) {\r\n\t\tif (allowance.gt(ZERO)) {\r\n\t\t\ttxns.push(\r\n\t\t\t\tawait legacyTokenWithSigner.approve(\r\n\t\t\t\t\tADDR_ADX,\r\n\t\t\t\t\tZERO,\r\n\t\t\t\t\tfirstTimeGasLimit(60000)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t}\r\n\t\ttxns.push(\r\n\t\t\tawait legacyTokenWithSigner.approve(\r\n\t\t\t\tADDR_ADX,\r\n\t\t\t\tamount,\r\n\t\t\t\tfirstTimeGasLimit(60000)\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\ttxns.push(await newTokenWithSigner.swap(amount, firstTimeGasLimit(100000)))\r\n\tsetAmount(ZERO)\r\n\treturn txns\r\n}\r\n","import React, { useState } from \"react\"\r\nimport { Button, Menu, Link, MenuItem } from \"@material-ui/core\"\r\nimport HelpIcon from \"@material-ui/icons/HelpOutline\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nexport const Help = () => {\r\n\tconst { t } = useTranslation()\r\n\tconst [menuEl, setMenuEl] = useState(null)\r\n\tconst openHelpMenu = ev => {\r\n\t\tsetMenuEl(ev.currentTarget)\r\n\t}\r\n\tconst closeHelpMenu = () => {\r\n\t\tsetMenuEl(null)\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button\r\n\t\t\t\tid=\"help-menu-btn\"\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tstartIcon={<HelpIcon size=\"large\" />}\r\n\t\t\t\tonClick={openHelpMenu}\r\n\t\t\t>\r\n\t\t\t\t{t(\"help.help\")}\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tid=\"help-menu-menu\"\r\n\t\t\t\tanchorEl={menuEl}\r\n\t\t\t\topen={Boolean(menuEl)}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\tonClose={closeHelpMenu}\r\n\t\t\t\tgetContentAnchorEl={null}\r\n\t\t\t\tanchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n\t\t\t\ttransformOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n\t\t\t>\r\n\t\t\t\t<Link\r\n\t\t\t\t\tid=\"help-menu-external-link-adex-network-tos\"\r\n\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\thref=\"https://www.adex.network/tos\"\r\n\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<MenuItem onClick={closeHelpMenu}>{t(\"common.tos\")}</MenuItem>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link\r\n\t\t\t\t\tid=\"help-menu-external-link-adex-network-staking-user-guide\"\r\n\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\thref=\"https://help.adex.network/hc/en-us/categories/4404980117778-AdEx-Staking\"\r\n\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<MenuItem onClick={closeHelpMenu}>{t(\"help.userGuide\")}</MenuItem>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link\r\n\t\t\t\t\tid=\"help-menu-external-link-adex-network-staking-source-code\"\r\n\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\thref=\"https://github.com/adexnetwork/adex-protocol-eth\"\r\n\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<MenuItem onClick={closeHelpMenu}>{t(\"help.sourceCode\")}</MenuItem>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link\r\n\t\t\t\t\tid=\"help-menu-external-link-adex-network-audits\"\r\n\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\thref=\"https://github.com/adexnetwork/adex-protocol-eth#audits\"\r\n\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<MenuItem onClick={closeHelpMenu}>{t(\"help.audits\")}</MenuItem>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link\r\n\t\t\t\t\tid=\"help-menu-external-link-adex-wher-to-buy-markets\"\r\n\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\thref=\"https://coinmarketcap.com/currencies/adx-net/markets/\"\r\n\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<MenuItem onClick={closeHelpMenu}>{t(\"help.whereToBuy\")}</MenuItem>\r\n\t\t\t\t</Link>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n}\r\n","import React, { Fragment, useContext } from \"react\"\r\nimport AppContext from \"../AppContext\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport { Chip, Fab, Icon } from \"@material-ui/core\"\r\nimport { AccountBalanceWalletSharp as AccountBalanceWalletIcon } from \"@material-ui/icons\"\r\nimport Jazzicon, { jsNumberForAddress } from \"react-jazzicon\"\r\nimport { formatAddress } from \"../helpers/formatting\"\r\nimport copy from \"copy-to-clipboard\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfabIcon: {\r\n\t\tmarginRight: theme.spacing(1)\r\n\t},\r\n\tchipRoot: {\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tcolor: theme.palette.text.main,\r\n\t\tfontWeight: theme.typography.fontWeightBold,\r\n\t\tfontSize: theme.typography.pxToRem(15),\r\n\t\t// To match medium size fab\r\n\t\theight: 40,\r\n\t\tborderRadius: 40 / 2\r\n\t},\r\n\tchipIcon: {\r\n\t\tmarginLeft: 9,\r\n\t\tmarginRight: 0,\r\n\t\twidth: 26,\r\n\t\theight: 26\r\n\t}\r\n}))\r\n\r\nexport const Wallet = () => {\r\n\tconst { t } = useTranslation()\r\n\tconst classes = useStyles()\r\n\r\n\tconst { setConnectWallet, chosenWalletType, addSnack, account } = useContext(\r\n\t\tAppContext\r\n\t)\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{!chosenWalletType.name || !account ? (\r\n\t\t\t\t<Fab\r\n\t\t\t\t\tid=\"connect-wallet-btn-topbar\"\r\n\t\t\t\t\tonClick={() => setConnectWallet(true)}\r\n\t\t\t\t\tvariant=\"extended\"\r\n\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\tdisabled={chosenWalletType.name && !account}\r\n\t\t\t\t>\r\n\t\t\t\t\t<AccountBalanceWalletIcon className={classes.fabIcon} />\r\n\t\t\t\t\t{t(\"common.connectWallet\")}\r\n\t\t\t\t</Fab>\r\n\t\t\t) : (\r\n\t\t\t\t<Chip\r\n\t\t\t\t\tid=\"wallet-address-top-bar-copy\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tcopy(account)\r\n\t\t\t\t\t\taddSnack(t(\"messages.addrCopied\", { account }), \"success\")\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclickable\r\n\t\t\t\t\tclasses={{ root: classes.chipRoot, icon: classes.chipIcon }}\r\n\t\t\t\t\ticon={\r\n\t\t\t\t\t\taccount ? (\r\n\t\t\t\t\t\t\t<Icon>\r\n\t\t\t\t\t\t\t\t<Jazzicon diameter={26} seed={jsNumberForAddress(account)} />\r\n\t\t\t\t\t\t\t</Icon>\r\n\t\t\t\t\t\t) : null\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlabel={formatAddress(account)}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t)\r\n}\r\n","import React from \"react\"\r\nimport { Button, Menu, MenuItem } from \"@material-ui/core\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nconst locales = {\r\n\ten: {\r\n\t\tvalue: \"en\",\r\n\t\tlabel: \"English\"\r\n\t},\r\n\tko: {\r\n\t\tvalue: \"ko\",\r\n\t\tlabel: \"한국어\"\r\n\t},\r\n\tzh: {\r\n\t\tvalue: \"zh\",\r\n\t\tlabel: \"简体中文\"\r\n\t}\r\n}\r\n\r\nexport default function LangSelect() {\r\n\tconst { i18n } = useTranslation()\r\n\tconst [anchorEl, setAnchorEl] = React.useState(null)\r\n\r\n\tconst { language } = i18n\r\n\r\n\tconst handleClick = event => {\r\n\t\tsetAnchorEl(event.currentTarget)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button\r\n\t\t\t\taria-controls=\"lang-select-menu\"\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\tonClick={handleClick}\r\n\t\t\t>\r\n\t\t\t\t{(locales[language] || {}).label || \"English\"}\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tid=\"lang-select-menu\"\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\topen={Boolean(anchorEl)}\r\n\t\t\t\tonClose={() => setAnchorEl(null)}\r\n\t\t\t>\r\n\t\t\t\t{Object.values(locales).map(({ label = \"\", value = \"\" }) => (\r\n\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\tid={`lang-select-menu-${value}`}\r\n\t\t\t\t\t\tkey={value}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\ti18n.changeLanguage(value)\r\n\t\t\t\t\t\t\tsetAnchorEl(null)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{label}\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t))}\r\n\t\t\t</Menu>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from \"react\"\r\nimport { MuiThemeProvider } from \"@material-ui/core/styles\"\r\nimport { darkTheme, lightTheme } from \"./themeMUi\"\r\nimport {\r\n\tloadFromLocalStorage,\r\n\tsaveToLocalStorage\r\n} from \"./helpers/localStorage\"\r\n\r\nconst THEMES = {\r\n\tlight: lightTheme,\r\n\tdark: darkTheme\r\n}\r\n\r\nexport const MultiThemeContext = React.createContext()\r\n\r\nconst MultiThemeProvider = ({ children }) => {\r\n\tconst [themeType, setThemeType] = useState(\"dark\")\r\n\tconst [theme, setTheme] = useState(darkTheme)\r\n\r\n\tuseEffect(() => {\r\n\t\tconst lastTheme = loadFromLocalStorage(\"themeType\") || \"dark\"\r\n\t\tsetThemeType(lastTheme)\r\n\t\tsetTheme(THEMES[lastTheme])\r\n\t}, [])\r\n\r\n\tconst switchTheme = () => {\r\n\t\tif (themeType === \"light\") {\r\n\t\t\tsaveToLocalStorage(\"dark\", \"themeType\")\r\n\t\t\tsetThemeType(\"dark\")\r\n\t\t\tsetTheme(THEMES[\"dark\"])\r\n\t\t} else {\r\n\t\t\tsaveToLocalStorage(\"light\", \"themeType\")\r\n\t\t\tsetThemeType(\"light\")\r\n\t\t\tsetTheme(THEMES[\"light\"])\r\n\t\t}\r\n\t}\r\n\r\n\tconst contextValue = {\r\n\t\tthemeType,\r\n\t\tswitchTheme\r\n\t}\r\n\r\n\treturn (\r\n\t\t<MultiThemeContext.Provider value={contextValue}>\r\n\t\t\t<MuiThemeProvider theme={theme}>{children}</MuiThemeProvider>\r\n\t\t</MultiThemeContext.Provider>\r\n\t)\r\n}\r\n\r\nexport default MultiThemeProvider\r\n","import React, { useContext } from \"react\"\r\nimport { IconButton } from \"@material-ui/core\"\r\nimport {\r\n\tBrightness7Sharp as LightIcon,\r\n\tBrightness6Sharp as DarkIcon\r\n} from \"@material-ui/icons\"\r\nimport { MultiThemeContext } from \"../MultiThemeProvider\"\r\n\r\nexport default function ThemeSwitch() {\r\n\tconst { themeType, switchTheme } = useContext(MultiThemeContext)\r\n\r\n\treturn (\r\n\t\t<IconButton\r\n\t\t\tid={`theme-switch-go-to-${themeType === \"dark\" ? \"light\" : \"dark\"}`}\r\n\t\t\tonClick={switchTheme}\r\n\t\t>\r\n\t\t\t{themeType === \"dark\" ? <LightIcon /> : <DarkIcon />}\r\n\t\t</IconButton>\r\n\t)\r\n}\r\n","import { fade } from \"@material-ui/core/styles/colorManipulator\"\r\n\r\nconst drawerWidth = 269\r\nconst maxContentWidth = 1420\r\n\r\nexport const styles = theme => {\r\n\treturn {\r\n\t\troot: {\r\n\t\t\tflexGrow: 1,\r\n\t\t\toverflow: \"hidden\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\theight: \"100vh\",\r\n\t\t\twidth: \"100vw\",\r\n\t\t\tbackgroundColor: theme.palette.background.default,\r\n\t\t\tbackgroundImage:\r\n\t\t\t\ttheme.type === \"dark\"\r\n\t\t\t\t\t? `radial-gradient(\r\n\t\t\t\tcircle,\r\n\t\t\t\t${fade(theme.palette.background.special, 0.333)} 0%,\r\n\t\t\t\t${fade(theme.palette.background.specialSecondary, 0.69)} 146%\r\n\t\t\t)`\r\n\t\t\t\t\t: 0,\r\n\t\t\tbackgroundRepeat: \"no-repeat\",\r\n\t\t\t[theme.breakpoints.up(\"md\")]: {\r\n\t\t\t\tbackgroundPositionX: drawerWidth / 2,\r\n\t\t\t\tbackgroundImage:\r\n\t\t\t\t\ttheme.type === \"dark\"\r\n\t\t\t\t\t\t? `radial-gradient(\r\n\t\t\t\t\tcircle,\r\n\t\t\t\t\t${fade(theme.palette.background.special, 0.333)} 0%,\r\n\t\t\t\t\t${fade(theme.palette.background.specialSecondary, 0.69)} 93%\r\n\t\t\t\t)`\r\n\t\t\t\t\t\t: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\ttoolbar: {\r\n\t\t\tflexWrap: \"wrap\",\r\n\t\t\tpaddingLeft: theme.spacing(2),\r\n\t\t\tpaddingRight: theme.spacing(2),\r\n\t\t\t[theme.breakpoints.up(\"md\")]: {\r\n\t\t\t\tpaddingLeft: theme.spacing(4),\r\n\t\t\t\tpaddingRight: theme.spacing(4),\r\n\t\t\t\tmarginLeft: drawerWidth\r\n\t\t\t},\r\n\t\t\t[theme.breakpoints.down(\"sm\")]: {\r\n\t\t\t\tpaddingLeft: theme.spacing(1.5),\r\n\t\t\t\tpaddingRight: theme.spacing(1.5)\r\n\t\t\t}\r\n\t\t},\r\n\t\ttoolbarActions: {\r\n\t\t\tmaxWidth: maxContentWidth,\r\n\t\t\tmargin: \"auto\"\r\n\t\t},\r\n\t\tdrawerPaper: {\r\n\t\t\twidth: drawerWidth,\r\n\t\t\t// height: '110vh',\r\n\t\t\tbackgroundColor: theme.palette.background.darkerPaper\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\tflexGrow: 1,\r\n\t\t\tpadding: theme.spacing(2),\r\n\t\t\tpaddingTop: theme.spacing(2),\r\n\t\t\toverflow: \"auto\",\r\n\t\t\t[theme.breakpoints.up(\"md\")]: {\r\n\t\t\t\tpadding: theme.spacing(4),\r\n\t\t\t\tpaddingTop: theme.spacing(4),\r\n\t\t\t\tmarginLeft: drawerWidth\r\n\t\t\t},\r\n\t\t\t[theme.breakpoints.down(\"sm\")]: {\r\n\t\t\t\tpaddingLeft: theme.spacing(1),\r\n\t\t\t\tpaddingRight: theme.spacing(1)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcontentInner: {\r\n\t\t\tmaxWidth: maxContentWidth,\r\n\t\t\tmargin: \"auto\",\r\n\t\t\tmarginBottom: theme.spacing(2)\r\n\t\t\t// // Because of the floating button and table paging\r\n\t\t\t// [theme.breakpoints.down(\"sm\")]: {\r\n\t\t\t// \tpaddingBottom: 146 + theme.spacing(2)\r\n\t\t\t// }\r\n\t\t},\r\n\t\tmodal: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\"\r\n\t\t},\r\n\t\talwaysOnTop: {\r\n\t\t\tzIndex: `${theme.zIndex.tooltip * 2} !important`\r\n\t\t},\r\n\t\tstickyAlerts: {\r\n\t\t\tzIndex: `${theme.zIndex.appBar}`,\r\n\t\t\tposition: \"sticky\",\r\n\t\t\ttop: 0\r\n\t\t}\r\n\t}\r\n}\r\n","import React from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nimport { AppBar, Toolbar, IconButton, Box, Hidden } from \"@material-ui/core\"\r\nimport { MenuSharp as MenuIcon } from \"@material-ui/icons\"\r\nimport { Help } from \"./HelperMenu\"\r\nimport { Wallet } from \"./WalletMenu\"\r\nimport LangSelect from \"./LangSelect\"\r\nimport ThemeSwitch from \"./ThemeSwitch\"\r\nimport { styles } from \"./rootStyles\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nexport const AppToolbar = ({ handleDrawerToggle }) => {\r\n\tconst classes = useStyles()\r\n\r\n\treturn (\r\n\t\t<AppBar elevation={0} color=\"transparent\" position=\"static\">\r\n\t\t\t<Toolbar className={classes.toolbar}>\r\n\t\t\t\t<Hidden mdUp>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tid=\"mobile-burger-btn\"\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\taria-label=\"open drawer\"\r\n\t\t\t\t\t\t\tonClick={handleDrawerToggle}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<MenuIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Hidden>\r\n\t\t\t\t<Box\r\n\t\t\t\t\tclassName={classes.toolbarActions}\r\n\t\t\t\t\tflex=\"1\"\r\n\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tjustifyContent=\"flex-end\"\r\n\t\t\t\t\tflexWrap=\"wrap\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Box mr={2}>\r\n\t\t\t\t\t\t<LangSelect />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box mr={2}>\r\n\t\t\t\t\t\t<ThemeSwitch />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box mr={2}>\r\n\t\t\t\t\t\t<Help />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<Wallet />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Toolbar>\r\n\t\t</AppBar>\r\n\t)\r\n}\r\n\r\nAppToolbar.propTypes = {\r\n\thandleDrawerToggle: PropTypes.func.isRequired\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group_1606\",\n  \"data-name\": \"Group 1606\",\n  transform: \"translate(0 0)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1128\",\n  \"data-name\": \"Path 1128\",\n  d: \"M3911.642,193.845a3.686,3.686,0,0,1,.714-1.652,13.68,13.68,0,0,1,1.193-1.212c.789-.771,1.575-1.545,2.366-2.313a3.624,3.624,0,0,1,3.258-1.051,3.533,3.533,0,0,1,1.808.869c.1.093.118.164.012.268-.589.579-1.172,1.164-1.757,1.746a.21.21,0,0,1-.206.076,1.866,1.866,0,0,0-1.773.586c-.683.658-1.376,1.306-2.03,1.993a1.668,1.668,0,0,0,.015,2.4c.623.643,1.262,1.274,1.919,1.882a1.758,1.758,0,0,0,2.524-.044c.644-.614,1.279-1.239,1.912-1.865a1.978,1.978,0,0,0,.662-1.774.236.236,0,0,1,.092-.22l1.715-1.647c.18-.174.2-.17.361.017a3.393,3.393,0,0,1,.877,2.278,3.263,3.263,0,0,1-.881,2.351c-1.019,1.078-2.118,2.076-3.168,3.124a4.913,4.913,0,0,1-1.163.92,4.8,4.8,0,0,1-1.168.395h-1.085a6.008,6.008,0,0,1-.956-.295,5.417,5.417,0,0,1-1.631-1.278c-.688-.667-1.362-1.35-2.043-2.026a5.42,5.42,0,0,1-1.25-1.532,5.066,5.066,0,0,1-.317-.99Z\",\n  transform: \"translate(-3911.642 -177.307)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1129\",\n  \"data-name\": \"Path 1129\",\n  d: \"M3945.354,175.231a3.788,3.788,0,0,1-.765,1.65c-.32.373-.685.7-1.035,1.043-.814.8-1.636,1.593-2.451,2.392a4.053,4.053,0,0,1-1.375.948,3.571,3.571,0,0,1-2.7-.015,3.706,3.706,0,0,1-1.015-.626c-.113-.095-.135-.169-.019-.281q.862-.835,1.716-1.678a.278.278,0,0,1,.248-.074,1.991,1.991,0,0,0,1.663-.573c.741-.709,1.487-1.413,2.2-2.151a1.619,1.619,0,0,0-.034-2.388c-.666-.666-1.3-1.364-2.026-1.967a1.722,1.722,0,0,0-2.1.014c-.442.358-.817.787-1.23,1.175-.385.361-.762.733-1.135,1.109a1.927,1.927,0,0,0-.569,1.138,1.349,1.349,0,0,0,.033.46.218.218,0,0,1-.062.227c-.578.553-1.157,1.1-1.729,1.663-.136.133-.221.113-.341-.022a3.391,3.391,0,0,1,.11-4.681q1.824-1.854,3.727-3.628a3.238,3.238,0,0,1,1.593-.75c.044-.01.087-.023.13-.034h1.085c.043.012.086.026.13.034a3.566,3.566,0,0,1,1.844.961c.933.911,1.849,1.839,2.779,2.753a7.469,7.469,0,0,1,.649.689,3.724,3.724,0,0,1,.679,1.566Z\",\n  transform: \"translate(-3921.107 -168.182)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Path_1130\",\n  \"data-name\": \"Path 1130\",\n  d: \"M3934.977,185.166a.953.953,0,0,1-.307.721l-1.736,1.726c-.57.567-1.133,1.14-1.71,1.7-.462.447-.885.937-1.386,1.341a1.009,1.009,0,0,1-1.486-1.283,1.67,1.67,0,0,1,.329-.413q1-.995,2-1.985,1.262-1.252,2.524-2.5a1.016,1.016,0,0,1,1.624.132A.908.908,0,0,1,3934.977,185.166Z\",\n  transform: \"translate(-3919.456 -175.689)\"\n}));\n\nvar SvgLinkIc = function SvgLinkIc(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24.247,\n    height: 23.666,\n    viewBox: \"0 0 24.247 23.666\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLinkIc, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/link-ic.b389cfb7.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_3_49_\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M277.888,124.306h-21.123c-2.745,0-4.97-2.225-4.97-4.97s2.225-4.97,4.97-4.97h21.123c2.745,0,4.97,2.225,4.97,4.97 S280.633,124.306,277.888,124.306z\"\n}), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M341.387,196.858c-68.072,0-123.454,49.15-123.454,117.224c0,32.625,12.947,62.438,36.455,83.945 c22.833,20.89,53.729,32.395,86.999,32.395c33.271,0,64.169-11.505,87.001-32.395c23.508-21.509,36.454-51.32,36.454-83.945 C464.842,246.009,409.46,196.858,341.387,196.858z M341.387,366.677c-29,0-52.595-23.594-52.595-52.595 c0-29.002,23.595-52.596,52.595-52.596c29.001,0,52.595,23.594,52.595,52.596C393.981,343.083,370.388,366.677,341.387,366.677z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M87.4,260.648c-48.193,0-87.4,39.209-87.4,87.401c0,23.101,9.167,44.209,25.812,59.438 c16.166,14.79,38.038,22.935,61.589,22.935c23.552,0,45.425-8.145,61.59-22.935c16.645-15.229,25.812-36.339,25.812-59.438 C174.802,299.857,135.594,260.648,87.4,260.648z M87.4,385.113c-20.435,0-37.06-16.627-37.06-37.063 c0-20.436,16.625-37.062,37.06-37.062s37.061,16.626,37.061,37.062C124.461,368.486,107.835,385.113,87.4,385.113z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M245.277,220.425c25.347-23.58,59.479-36.566,96.108-36.566c24.679,0,48.221,5.901,68.708,16.959 c0.103,0.055,0.204,0.088,0.306,0.132c1.882,1.353,4.231,2.068,6.717,1.847c5.501-0.49,9.562-5.347,9.072-10.848 c-0.093-1.047-9.351-104.934-11.104-125.312c-2.771-32.218-26.047-32.218-34.809-32.218H245.281 c-12.047-0.024-34.378-0.013-41.274,34.135c-3.881,19.216-12.413,59.658-19,90.541c-34.663,0-67.15,0-92.26,0v-50.582 c0-7.375-5.979-13.353-13.353-13.353s-13.353,5.979-13.353,13.353v50.582c-12.812,0-20.931,0-22.52,0 c-38.677,0-50.627,83.074-29.327,120.321c18.33-19.54,44.365-31.77,73.208-31.77c50.5,0,92.405,37.479,99.376,86.083h19.604 c-0.957-6.42-1.448-12.98-1.448-19.647C204.933,277.891,219.261,244.629,245.277,220.425z M395.159,68.352 c1.099,12.771,5.136,58.241,8.026,90.744c-15.819,0-46.297,0-83.104,0V54.419h60.196 C390.01,54.419,394.006,54.954,395.159,68.352z M223.611,72.513c3.656-18.1,10.463-18.087,21.663-18.094h58.807v104.676 c-30.991,0-65.323,0-98.629,0C212.397,126.456,220.854,86.163,223.611,72.513z\"\n}))));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgFarmIcon = function SvgFarmIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"464.842px\",\n    height: \"464.841px\",\n    viewBox: \"0 0 464.842 464.841\",\n    style: {\n      enableBackground: \"new 0 0 464.842 464.841\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgFarmIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/farm-icon.7e3e7999.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useContext } from \"react\"\r\nimport {\r\n\tList,\r\n\tListItem,\r\n\tListItemIcon,\r\n\tListItemText,\r\n\tDivider,\r\n\tBox,\r\n\tSvgIcon\r\n} from \"@material-ui/core\"\r\nimport clsx from \"clsx\"\r\nimport Anchor from \"./Anchor\"\r\nimport logo from \"./../resources/staking-logo.svg\"\r\nimport logoLight from \"./../resources/logo-light-theme.svg\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport { useLocation } from \"react-router-dom\"\r\nimport packageJson from \"./../../package.json\"\r\nimport { ADDR_ADX } from \"./../helpers/constants\"\r\nimport WithRouterLink from \"./WithRouterLink\"\r\nimport UserData from \"./UserData\"\r\nimport MigrationBtn from \"./MigrationBtn\"\r\nimport {\r\n\tHomeSharp as HomeIcon,\r\n\tDashboardSharp as DashboardIcon\r\n} from \"@material-ui/icons\"\r\nimport { ReactComponent as StakingIcon } from \"./../resources/link-ic.svg\"\r\nimport { ReactComponent as GaslessIcon } from \"./../resources/gasless-ic.svg\"\r\nimport { ReactComponent as GiftIcon } from \"./../resources/gift-ic.svg\"\r\nimport { ReactComponent as StatsIcon } from \"./../resources/stats-ic.svg\"\r\nimport { ReactComponent as FarmIcon } from \"./../resources/farm-icon.svg\"\r\nimport { useTranslation } from \"react-i18next\"\r\n// import { fade } from \"@material-ui/core/styles/colorManipulator\"\r\nimport { MultiThemeContext } from \"../MultiThemeProvider\"\r\n\r\nconst RRListItem = WithRouterLink(ListItem)\r\n\r\nconst useStyles = makeStyles(theme => {\r\n\tconst activeColor = theme.palette.text.primary\r\n\tconst activeBgColor = theme.palette.background.active\r\n\r\n\treturn {\r\n\t\tsntPadding: {\r\n\t\t\tpaddingTop: 0\r\n\t\t},\r\n\t\tnavListRoot: {\r\n\t\t\tcolor: theme.palette.text.secondary,\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\tjustifyContent: \"space-between\"\r\n\t\t},\r\n\t\tnavList: {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 100,\r\n\t\t\toverflowY: \"auto\",\r\n\t\t\toverflowX: \"hidden\"\r\n\t\t},\r\n\t\tsideNavToolbar: {},\r\n\t\tversion: {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\tpadding: 10,\r\n\t\t\tpaddingLeft: 16,\r\n\t\t\tborderTopWidth: 1,\r\n\t\t\tborderTopColor: theme.palette.divider,\r\n\t\t\tborderTopStyle: \"solid\"\r\n\t\t},\r\n\t\tlistItem: {\r\n\t\t\tcolor: theme.palette.text.primary,\r\n\t\t\t\"& .MuiListItemIcon-root\": {\r\n\t\t\t\tcolor: theme.palette.text.primary // fade(theme.palette.text.main, 0.69)\r\n\t\t\t}\r\n\t\t},\r\n\t\tactive: {\r\n\t\t\tcolor: activeColor,\r\n\t\t\tbackgroundColor: activeBgColor,\r\n\t\t\t\"&:focus\": {\r\n\t\t\t\tbackgroundColor: activeBgColor\r\n\t\t\t},\r\n\t\t\t\"&:hover\": {\r\n\t\t\t\tbackgroundColor: activeBgColor,\r\n\t\t\t\tcolor: activeColor,\r\n\t\t\t\t\"& .MuiListItemIcon-root\": {\r\n\t\t\t\t\tcolor: activeColor\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"& .MuiListItemIcon-root\": {\r\n\t\t\t\tcolor: activeColor //theme.palette.text.main\r\n\t\t\t}\r\n\t\t},\r\n\t\tadxLink: {\r\n\t\t\tcolor: theme.palette.text.hint,\r\n\t\t\t\"&:hover\": {\r\n\t\t\t\tcolor: theme.palette.text.secondary\r\n\t\t\t}\r\n\t\t},\r\n\t\tsideSwitch: {\r\n\t\t\tmarginBottom: `${theme.spacing(2)}px`\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\theight: 32,\r\n\t\t\twidth: \"auto\",\r\n\t\t\tcursor: \"pointer\"\r\n\t\t},\r\n\t\tamount: {\r\n\t\t\tfontSize: theme.typography.pxToRem(18)\r\n\t\t},\r\n\t\toverlay: {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tleft: 0,\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tbackgroundColor: \"transparent\",\r\n\t\t\ttextTransform: \"uppercase\"\r\n\t\t},\r\n\t\tnoUserData: {\r\n\t\t\topacity: 0.23\r\n\t\t}\r\n\t}\r\n})\r\n\r\nfunction SideNav({\r\n\tprices,\r\n\tstats,\r\n\tonRequestUnbond,\r\n\tonUnbond,\r\n\tonClaimRewards,\r\n\tsetConnectWallet\r\n}) {\r\n\tconst { themeType } = useContext(MultiThemeContext)\r\n\tconst { t } = useTranslation()\r\n\tconst classes = useStyles()\r\n\tconst location = useLocation()\r\n\tconst path = location.pathname\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tposition=\"relative\"\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\tflexDirection=\"column\"\r\n\t\t\tjustifyContent=\"space-between\"\r\n\t\t\tflexGrow=\"1\"\r\n\t\t>\r\n\t\t\t<Box>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\tmb={1}\r\n\t\t\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\t\t\tflexDirection=\"row\"\r\n\t\t\t\t\t\t\t\talignItems=\"flex-start\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\twidth=\"200px\"\r\n\t\t\t\t\t\t\t\t\tsrc={themeType === \"dark\" ? logo : logoLight}\r\n\t\t\t\t\t\t\t\t\talt=\"adex-staking-logo\"\r\n\t\t\t\t\t\t\t\t></img>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</ListItem>\r\n\r\n\t\t\t\t\t\t<Box position=\"relative\">\r\n\t\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\t\tclassName={clsx({\r\n\t\t\t\t\t\t\t\t\t[classes.noUserData]: !stats.connectedWalletAddress\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Box width={1}>\r\n\t\t\t\t\t\t\t\t\t{UserData({\r\n\t\t\t\t\t\t\t\t\t\tprices,\r\n\t\t\t\t\t\t\t\t\t\tstats,\r\n\t\t\t\t\t\t\t\t\t\tonRequestUnbond,\r\n\t\t\t\t\t\t\t\t\t\tonUnbond,\r\n\t\t\t\t\t\t\t\t\t\tonClaimRewards\r\n\t\t\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t\t\t\t{path !== \"/stakings\" && (\r\n\t\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t\t<MigrationBtn />\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t<Divider />\r\n\r\n\t\t\t\t\t\t\t{!stats.connectedWalletAddress && (\r\n\t\t\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\t\t\tid=\"side-nav-connect-wallet-overlay\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.overlay}\r\n\t\t\t\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\t\t\t\tjustifyContent=\"center\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary.main\"\r\n\t\t\t\t\t\t\t\t\tfontSize=\"h1.fontSize\"\r\n\t\t\t\t\t\t\t\t\ttextAlign=\"center\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => setConnectWallet(true)}\r\n\t\t\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t(\"common.connectWallet\")}\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\r\n\t\t\t<Box\r\n\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\tjustifyContent=\"space-between\"\r\n\t\t\t\tflex=\"1\"\r\n\t\t\t>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\t\tid=\"side-nav-link-pools\"\r\n\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\tto={{ pathname: \"/\" }}\r\n\t\t\t\t\t\t\tclassName={clsx(classes.listItem, {\r\n\t\t\t\t\t\t\t\t[classes.active]: path === \"/\"\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListItemIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t<DashboardIcon />\r\n\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t<ListItemText primary={t(\"common.pools\")} />\r\n\t\t\t\t\t\t</RRListItem>\r\n\r\n\t\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\t\tid=\"side-nav-link-stakings\"\r\n\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\tto={{ pathname: \"/stakings\" }}\r\n\t\t\t\t\t\t\tclassName={clsx(classes.listItem, {\r\n\t\t\t\t\t\t\t\t[classes.active]: path === \"/stakings\"\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListItemIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t<SvgIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t\t<StakingIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t<ListItemText primary={t(\"common.staked\")} />\r\n\t\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\t\tid=\"side-nav-link-rewards\"\r\n\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\tto={{ pathname: \"/rewards\" }}\r\n\t\t\t\t\t\t\tclassName={clsx(classes.listItem, {\r\n\t\t\t\t\t\t\t\t[classes.active]: path === \"/rewards\"\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListItemIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t<SvgIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t\t<GiftIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t<ListItemText primary={t(\"common.rewards\")} />\r\n\t\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\t\tid=\"side-nav-link-farm\"\r\n\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\tto={{ pathname: \"/farm\" }}\r\n\t\t\t\t\t\t\tclassName={clsx(classes.listItem, {\r\n\t\t\t\t\t\t\t\t[classes.active]: path === \"/farm\"\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListItemIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t<SvgIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t\t<FarmIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t<ListItemText primary={t(\"common.farm\")} />\r\n\t\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\t\tid=\"side-nav-link-stats\"\r\n\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\tto={{ pathname: \"/stats\" }}\r\n\t\t\t\t\t\t\tclassName={clsx(classes.listItem, {\r\n\t\t\t\t\t\t\t\t[classes.active]: path === \"/stats\"\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListItemIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t<SvgIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t\t<StatsIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t<ListItemText primary={t(\"common.validatorStats\")} />\r\n\t\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\t\tid=\"side-nav-link-gasless\"\r\n\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\tto={{ pathname: \"/gasless\" }}\r\n\t\t\t\t\t\t\tclassName={clsx(classes.listItem, {\r\n\t\t\t\t\t\t\t\t[classes.active]: path === \"/gasless\"\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ListItemIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t<SvgIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t\t<GaslessIcon width=\"100%\" height=\"100%\" />\r\n\t\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\t<ListItemText primary={t(\"common.gaslessStaking\")} />\r\n\t\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<RRListItem\r\n\t\t\t\t\t\tid=\"side-nav-link-staking-landing-page\"\r\n\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\tclassName={clsx(classes.listItem)}\r\n\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\twindow.open(\r\n\t\t\t\t\t\t\t\t\"https://www.adex.network/staking/\",\r\n\t\t\t\t\t\t\t\t\"_blank\",\r\n\t\t\t\t\t\t\t\t\"noopener,noreferrer\"\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItemIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t<SvgIcon color=\"inherit\">\r\n\t\t\t\t\t\t\t\t<HomeIcon color=\"inherit\" />\r\n\t\t\t\t\t\t\t</SvgIcon>\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary={t(\"common.homePageAndCalculator\")} />\r\n\t\t\t\t\t</RRListItem>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<small>\r\n\t\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\t\tid=\"external-link-adex-network\"\r\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t\thref={`https://adex.network`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{t(\"company.copy\", { year: new Date().getFullYear() })}\r\n\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<small>\r\n\t\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\t\tid=\"external-link-adex-network-tos\"\r\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t\thref={`https://adex.network/tos`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{t(\"company.terms\")}\r\n\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<small>\r\n\t\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\t\tid=\"external-link-adex-token\"\r\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t\thref={`https://etherscan.io/address/${ADDR_ADX}`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{t(\"company.adxToken\")}\r\n\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<small>\r\n\t\t\t\t\t\t\t\t\t<Anchor\r\n\t\t\t\t\t\t\t\t\t\tid=\"external-link-adex-staking-overview\"\r\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t\thref=\"https://www.adex.network/blog/adex-defi-staking-overview/\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{t(\"company.version\", { version: packageJson.version })}\r\n\t\t\t\t\t\t\t\t\t</Anchor>\r\n\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default SideNav\r\n","import React, { useContext, useState } from \"react\"\r\nimport { Box, Typography, Button } from \"@material-ui/core\"\r\nimport StatsCard from \"./StatsCard\"\r\nimport { formatADXPretty, getADXInUSDFormatted } from \"../helpers/formatting\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { BigNumber } from \"ethers\"\r\nimport ConfirmationDialog from \"./ConfirmationDialog\"\r\nimport AppContext from \"../AppContext\"\r\nimport { ZERO } from \"./../helpers/constants\"\r\nimport { identityWithdraw } from \"../actions\"\r\n\r\nexport default function UserData({ stats, prices }) {\r\n\tconst { t } = useTranslation()\r\n\tconst [withdrawIdentityOpen, setWithdrawIdentityOpen] = useState(false)\r\n\tconst { chosenWalletType, wrapDoingTxns } = useContext(AppContext)\r\n\tconst hasLegacyIdentityBalance =\r\n\t\tstats.identityDeployed && stats.userIdentityBalance.gt(ZERO)\r\n\r\n\tconst onWithdraw = async () => {\r\n\t\tawait wrapDoingTxns(identityWithdraw.bind(null, chosenWalletType))()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box width={1}>\r\n\t\t\t<Box mb={1.5}>\r\n\t\t\t\t{StatsCard({\r\n\t\t\t\t\tsize: \"large\",\r\n\t\t\t\t\tloaded: stats.loaded,\r\n\t\t\t\t\ttitle: t(\"userData.myAdxBalance\"),\r\n\t\t\t\t\tsubtitle: stats.totalBalanceADX\r\n\t\t\t\t\t\t? formatADXPretty(stats.totalBalanceADX) + \" ADX\"\r\n\t\t\t\t\t\t: \"\",\r\n\r\n\t\t\t\t\textra: getADXInUSDFormatted(prices, stats.totalBalanceADX),\r\n\t\t\t\t\t/*actions: (<Button\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t>upgrade</Button>)*/\r\n\t\t\t\t\textraInfo: t(\"userData.adxPrice\", {\r\n\t\t\t\t\t\tpriceUSD: getADXInUSDFormatted(\r\n\t\t\t\t\t\t\tprices,\r\n\t\t\t\t\t\t\tBigNumber.from((1e18).toString())\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t})}\r\n\t\t\t</Box>\r\n\r\n\t\t\t<Box mb={1.5}>\r\n\t\t\t\t{StatsCard({\r\n\t\t\t\t\tloaded: stats.loaded,\r\n\t\t\t\t\ttitle: t(\"userData.onWallet\"),\r\n\t\t\t\t\ttitleInfo: [\r\n\t\t\t\t\t\tt(\"userData.userBalanceWallet\", {\r\n\t\t\t\t\t\t\tamount: formatADXPretty(stats.userWalletBalance),\r\n\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tt(\"userData.userBalanceGasless\", {\r\n\t\t\t\t\t\t\tamount: formatADXPretty(stats.gaslessAddrBalance),\r\n\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t...(hasLegacyIdentityBalance\r\n\t\t\t\t\t\t\t? [\r\n\t\t\t\t\t\t\t\t\tt(\"userData.activeDepositsLegacyIdentityBalance\", {\r\n\t\t\t\t\t\t\t\t\t\tamount: formatADXPretty(stats.userIdentityBalance),\r\n\t\t\t\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t  ]\r\n\t\t\t\t\t\t\t: [])\r\n\t\t\t\t\t],\r\n\t\t\t\t\tsubtitle: stats.userBalance\r\n\t\t\t\t\t\t? formatADXPretty(stats.userBalance) + \" ADX\"\r\n\t\t\t\t\t\t: \"\",\r\n\t\t\t\t\textra: getADXInUSDFormatted(prices, stats.userBalance)\r\n\t\t\t\t})}\r\n\t\t\t</Box>\r\n\r\n\t\t\t{/* <Box mb={1.5}>\r\n\t\t\t\t{StatsCard({\r\n\t\t\t\t\tloaded: stats.loaded,\r\n\t\t\t\t\ttitle: t(\"userData.activeStake\"),\r\n\t\t\t\t\ttitleInfo: t(\"userData.activeStakeInfo\", {\r\n\t\t\t\t\t\tapy: (tomPoolStats.totalAPY * 100).toFixed(2)\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tsubtitle: formatADXPretty(stats.userTotalStake) + \" ADX\",\r\n\t\t\t\t\textra: getADXInUSDFormatted(prices, stats.userTotalStake)\r\n\t\t\t\t})}\r\n\t\t\t</Box> */}\r\n\r\n\t\t\t<Box mb={1.5}>\r\n\t\t\t\t{StatsCard({\r\n\t\t\t\t\tloaded: stats.loaded,\r\n\t\t\t\t\ttitle: t(\"userData.totalStaked\"),\r\n\t\t\t\t\ttitleInfo: [\r\n\t\t\t\t\t\tt(\"userData.activeDepositsInfoLocked\", {\r\n\t\t\t\t\t\t\tamount: formatADXPretty(stats.totalLockedOnDeposits),\r\n\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tt(\"userData.activeUsersStakeLegacy\", {\r\n\t\t\t\t\t\t\tamount: formatADXPretty(stats.userTotalStake),\r\n\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tt(\"userData.activeDepositsInfoPendingToUnlock\", {\r\n\t\t\t\t\t\t\tamount: formatADXPretty(stats.totalPendingToUnlock),\r\n\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tt(\"userData.activeDepositsInfoUnlocked\", {\r\n\t\t\t\t\t\t\tamount: formatADXPretty(stats.totalUnlockedDeposits),\r\n\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tt(\"userData.activeDepositsInfoUnclaimed\", {\r\n\t\t\t\t\t\t\tamount: formatADXPretty(stats.tomRewardADX),\r\n\t\t\t\t\t\t\tcurrency: \"ADX\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t],\r\n\t\t\t\t\tsubtitle: formatADXPretty(stats.totalStaked) + \" ADX\",\r\n\t\t\t\t\textra: getADXInUSDFormatted(prices, stats.totalStaked)\r\n\t\t\t\t})}\r\n\t\t\t</Box>\r\n\r\n\t\t\t{hasLegacyIdentityBalance && (\r\n\t\t\t\t<Box mb={1.5}>\r\n\t\t\t\t\t<Box display=\"inline-block\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tid=\"btn-rewards-page-claim\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\tonClick={() => setWithdrawIdentityOpen(true)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t(\"common.withdrawLegacy\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\r\n\t\t\t{ConfirmationDialog({\r\n\t\t\t\tisOpen: withdrawIdentityOpen,\r\n\t\t\t\tonDeny: () => setWithdrawIdentityOpen(false),\r\n\t\t\t\tonConfirm: () => {\r\n\t\t\t\t\tsetWithdrawIdentityOpen(false)\r\n\t\t\t\t\tonWithdraw()\r\n\t\t\t\t},\r\n\t\t\t\tconfirmActionName: t(\"common.withdraw\"),\r\n\t\t\t\tcontent: (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Box mb={1}>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t{t(\"dialogs.withdrawFromOldIdentity\", {\r\n\t\t\t\t\t\t\t\t\tamount: formatADXPretty(stats.userIdentityBalance || ZERO),\r\n\t\t\t\t\t\t\t\t\tcurrency: \"ADX\",\r\n\t\t\t\t\t\t\t\t\twalletAddr: stats.connectedWalletAddress\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React, { useCallback, useEffect, useState } from \"react\"\r\nimport { Snackbar } from \"@material-ui/core\"\r\nimport { Alert } from \"@material-ui/lab\"\r\n\r\nexport function useSnack() {\r\n\tconst [snackPack, setSnackPack] = useState([])\r\n\tconst [snackOpen, setOpen] = useState(false)\r\n\tconst [snackMessageInfo, setMessageInfo] = useState(undefined)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (snackPack.length && !snackMessageInfo) {\r\n\t\t\t// Set a new snack when we don't have an active one\r\n\t\t\tsetMessageInfo({ ...snackPack[0] })\r\n\t\t\tsetSnackPack(prev => prev.slice(1))\r\n\t\t\tsetOpen(true)\r\n\t\t} else if (snackPack.length && snackMessageInfo && snackOpen) {\r\n\t\t\t// Close an active snack when a new one is added\r\n\t\t\tsetOpen(false)\r\n\t\t}\r\n\t}, [snackPack, snackMessageInfo, snackOpen])\r\n\r\n\tconst addSnack = useCallback(\r\n\t\t(message, severity, hideTimeout = 20000, action) => {\r\n\t\t\tsetSnackPack(prev => [\r\n\t\t\t\t...prev,\r\n\t\t\t\t{\r\n\t\t\t\t\tmessage,\r\n\t\t\t\t\tseverity,\r\n\t\t\t\t\thideTimeout,\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tkey: new Date().getTime() + \"-\" + Math.random()\r\n\t\t\t\t}\r\n\t\t\t])\r\n\t\t},\r\n\t\t[]\r\n\t)\r\n\r\n\tconst closeSnack = (event, reason) => {\r\n\t\tif (reason === \"clickaway\") {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetMessageInfo(undefined)\r\n\t\tsetOpen(false)\r\n\t}\r\n\r\n\tconst snackExited = () => {\r\n\t\tsetMessageInfo(undefined)\r\n\t}\r\n\r\n\treturn {\r\n\t\tsnackOpen,\r\n\t\tsnackMessageInfo,\r\n\t\taddSnack,\r\n\t\tcloseSnack,\r\n\t\tsnackExited\r\n\t}\r\n}\r\n\r\nexport function ShtarvolinkiSnack({\r\n\tsnackOpen,\r\n\tsnackMessageInfo = {},\r\n\tcloseSnack,\r\n\tsnackExited\r\n}) {\r\n\treturn (\r\n\t\t<Snackbar\r\n\t\t\tkey={snackMessageInfo.key}\r\n\t\t\tanchorOrigin={{\r\n\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\thorizontal: \"center\"\r\n\t\t\t}}\r\n\t\t\topen={snackOpen}\r\n\t\t\tautoHideDuration={snackMessageInfo.hideTimeout}\r\n\t\t\tonExited={snackExited}\r\n\t\t\tonClose={closeSnack}\r\n\t\t>\r\n\t\t\t<Alert\r\n\t\t\t\tonClose={closeSnack}\r\n\t\t\t\tseverity={snackMessageInfo.severity || \"info\"}\r\n\t\t\t\tvariant=\"filled\"\r\n\t\t\t\taction={snackMessageInfo.action || null}\r\n\t\t\t>\r\n\t\t\t\t{snackMessageInfo.message}\r\n\t\t\t</Alert>\r\n\t\t</Snackbar>\r\n\t)\r\n}\r\n","import React, { useState, useContext } from \"react\"\r\nimport { Switch, Route } from \"react-router-dom\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport {\r\n\tDrawer,\r\n\tModal,\r\n\tBackdrop,\r\n\tFade,\r\n\tSnackbar,\r\n\tuseMediaQuery,\r\n\tBox,\r\n\tButton\r\n} from \"@material-ui/core\"\r\nimport { Alert as MuiAlert, AlertTitle } from \"@material-ui/lab\"\r\nimport ChooseWallet from \"./ChooseWallet\"\r\nimport Stakings from \"./Stakings\"\r\nimport Gasless from \"./Gasless\"\r\nimport Rewards from \"./Rewards\"\r\nimport Farm from \"./Farm\"\r\nimport Stats from \"./Stats\"\r\nimport Pools from \"./Pools\"\r\nimport StakeNowPopup from \"./StakeNowPopup\"\r\nimport { MigrateNowPopup, MigrateNowAlert } from \"./MigrateNowPopup\"\r\nimport NewBondForm from \"./NewBondForm\"\r\nimport LegacyADXSwapDialog from \"./LegacyADXSwapDialog\"\r\nimport ConfirmationDialog from \"./ConfirmationDialog\"\r\nimport { AppToolbar } from \"./Toolbar\"\r\nimport SideNav from \"./SideNav\"\r\nimport {\r\n\tZERO,\r\n\tUNBOND_DAYS,\r\n\tPOOLS,\r\n\tREACT_APP_RPC_URL,\r\n\tIDLE_TIMEOUT_MINUTES\r\n} from \"../helpers/constants\"\r\nimport {\r\n\tformatADXPretty,\r\n\ttoIdAttributeString,\r\n\tformatAddress\r\n} from \"../helpers/formatting\"\r\nimport { styles } from \"./rootStyles\"\r\nimport AppContext from \"../AppContext\"\r\nimport { ExternalAnchor } from \"./Anchor\"\r\nimport { createNewBond } from \"../actions\"\r\nimport { ShtarvolinkiSnack } from \"./../Snack\"\r\nimport clsx from \"clsx\"\r\nimport { useTranslation, Trans } from \"react-i18next\"\r\n\r\nfunction Alert(props) {\r\n\treturn <MuiAlert variant=\"filled\" {...props} />\r\n}\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nexport default function Root() {\r\n\tconst { t } = useTranslation()\r\n\tconst classes = useStyles()\r\n\tconst [mobileOpen, setMobileOpen] = useState(false)\r\n\tconst handleDrawerToggle = () => {\r\n\t\tsetMobileOpen(!mobileOpen)\r\n\t}\r\n\tconst isTempDrawer = useMediaQuery(theme => theme.breakpoints.down(\"sm\"))\r\n\r\n\tconst {\r\n\t\tisNewBondOpen,\r\n\t\tsetNewBondOpen,\r\n\t\ttoUnbond,\r\n\t\tsetToUnbond,\r\n\t\topenErr,\r\n\t\topenDoingTx,\r\n\t\tsnackbarErr,\r\n\t\tstats,\r\n\t\tconnectWallet,\r\n\t\tsetConnectWallet,\r\n\t\tchosenWalletType,\r\n\t\twrapDoingTxns,\r\n\t\tonRequestUnbond,\r\n\t\tonUnbond,\r\n\t\tonClaimRewards,\r\n\t\thandleErrClose,\r\n\t\tgetSigner,\r\n\t\tprices,\r\n\t\tonWalletTypeSelect,\r\n\t\tsnackHooks,\r\n\t\tchainWarning,\r\n\t\tnewBondPool,\r\n\t\tsetNewBondPool,\r\n\t\tlegacySwapInPrg,\r\n\t\tsetLegacySwapInPrg,\r\n\t\tlegacySwapOpen,\r\n\t\tsetLegacySwapInOpen,\r\n\t\tidlePopupOpen,\r\n\t\tonIdleDialogAction,\r\n\t\t// secondsToAutoRefresh,\r\n\t\taccount\r\n\t} = useContext(AppContext)\r\n\r\n\tconst drawer = SideNav({\r\n\t\tprices,\r\n\t\tstats,\r\n\t\tonRequestUnbond: setToUnbond,\r\n\t\tonUnbond,\r\n\t\tonClaimRewards,\r\n\t\tsetConnectWallet\r\n\t})\r\n\r\n\tconst container = window !== undefined ? document.body : undefined\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<AppToolbar\r\n\t\t\t\tchosenWalletType={chosenWalletType}\r\n\t\t\t\tsetConnectWallet={setConnectWallet}\r\n\t\t\t\tsetNewBondOpen={setNewBondOpen}\r\n\t\t\t\thandleDrawerToggle={handleDrawerToggle}\r\n\t\t\t\tstats={stats}\r\n\t\t\t/>\r\n\r\n\t\t\t<nav aria-label=\"side navigation\">\r\n\t\t\t\t<Drawer\r\n\t\t\t\t\tcontainer={container}\r\n\t\t\t\t\tvariant={isTempDrawer ? \"temporary\" : \"permanent\"}\r\n\t\t\t\t\tanchor=\"left\"\r\n\t\t\t\t\topen={isTempDrawer ? mobileOpen : true}\r\n\t\t\t\t\tonClose={handleDrawerToggle}\r\n\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\tpaper: classes.drawerPaper\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tModalProps={{\r\n\t\t\t\t\t\tkeepMounted: true // Better open performance on mobile.\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{drawer}\r\n\t\t\t\t</Drawer>\r\n\t\t\t</nav>\r\n\r\n\t\t\t<main className={classes.content}>\r\n\t\t\t\t<div className={classes.contentInner}>\r\n\t\t\t\t\t<Box mb={2} className={classes.stickyAlerts}>\r\n\t\t\t\t\t\t{stats.hasPendingTransactions && (\r\n\t\t\t\t\t\t\t<Box mt={2}>\r\n\t\t\t\t\t\t\t\t<Alert severity=\"warning\" variant=\"filled\">\r\n\t\t\t\t\t\t\t\t\t<AlertTitle id=\"alert-pending-transactions-warning-title\">\r\n\t\t\t\t\t\t\t\t\t\t{t(\"messages.pendingTransactionsTitle\")}\r\n\t\t\t\t\t\t\t\t\t</AlertTitle>\r\n\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\t\t\t\ti18nKey=\"messages.pendingTransactionsInfo1\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\t\t\t\t\t\taccount: formatAddress(account)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\t\t\t\t\texternal: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ExternalAnchor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"external-link-adex-token\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`https://etherscan.io/address/${account}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"textPrimary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t></ExternalAnchor>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t<Trans i18nKey=\"messages.pendingTransactionsInfo2\" />\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<MigrateNowAlert />\r\n\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path=\"/stakings\">\r\n\t\t\t\t\t\t\t<Stakings />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/gasless\">\r\n\t\t\t\t\t\t\t<Gasless />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/rewards\">\r\n\t\t\t\t\t\t\t<Rewards />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/farm\">\r\n\t\t\t\t\t\t\t<Farm />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/stats\">\r\n\t\t\t\t\t\t\t<Stats />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/\">\r\n\t\t\t\t\t\t\t<Pools />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t</Switch>\r\n\r\n\t\t\t\t\t{// Load stats first to prevent simultanious calls to getSigner\r\n\t\t\t\t\tLegacyADXSwapDialog(\r\n\t\t\t\t\t\tstats.loaded ? getSigner : null,\r\n\t\t\t\t\t\twrapDoingTxns,\r\n\t\t\t\t\t\tchosenWalletType,\r\n\t\t\t\t\t\tlegacySwapInPrg,\r\n\t\t\t\t\t\tsetLegacySwapInPrg,\r\n\t\t\t\t\t\tlegacySwapOpen,\r\n\t\t\t\t\t\tsetLegacySwapInOpen\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{ConfirmationDialog({\r\n\t\t\t\t\t\tisOpen: !!toUnbond,\r\n\t\t\t\t\t\tonDeny: () => setToUnbond(null),\r\n\t\t\t\t\t\tonConfirm: () => {\r\n\t\t\t\t\t\t\tif (toUnbond) onRequestUnbond(toUnbond)\r\n\t\t\t\t\t\t\tsetToUnbond(null)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tconfirmActionName: t(\"common.unbond\"),\r\n\t\t\t\t\t\tcontent: (\r\n\t\t\t\t\t\t\t<Trans\r\n\t\t\t\t\t\t\t\ti18nKey=\"dialogs.bondToV5MigrationConfirmation\"\r\n\t\t\t\t\t\t\t\tvalues={{\r\n\t\t\t\t\t\t\t\t\tamount: formatADXPretty(\r\n\t\t\t\t\t\t\t\t\t\ttoUnbond ? toUnbond.currentAmount : ZERO\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\tcurrency: \"ADX\",\r\n\t\t\t\t\t\t\t\t\tunbondDays: UNBOND_DAYS\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\t\tbox: <Box mb={2}></Box>,\r\n\t\t\t\t\t\t\t\t\tol: <ol></ol>,\r\n\t\t\t\t\t\t\t\t\tli: <li></li>\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t{ChooseWallet({\r\n\t\t\t\t\t\topen: !!connectWallet,\r\n\t\t\t\t\t\thandleClose: () => {\r\n\t\t\t\t\t\t\tsetConnectWallet(null)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\thandleListItemClick: onWalletTypeSelect,\r\n\t\t\t\t\t\tdisableNonBrowserWallets: !REACT_APP_RPC_URL\r\n\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\topen={openErr}\r\n\t\t\t\t\t\tautoHideDuration={10000}\r\n\t\t\t\t\t\tonClose={handleErrClose}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Alert\r\n\t\t\t\t\t\t\tid={`err-aler-${toIdAttributeString(snackbarErr)}`}\r\n\t\t\t\t\t\t\tonClose={handleErrClose}\r\n\t\t\t\t\t\t\tseverity=\"error\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t(\r\n\t\t\t\t\t\t\t\tsnackbarErr.msg || snackbarErr,\r\n\t\t\t\t\t\t\t\tObject.entries(snackbarErr.opts || {}).reduce(\r\n\t\t\t\t\t\t\t\t\t(opts, [key, value]) => {\r\n\t\t\t\t\t\t\t\t\t\topts[key] = t(value)\r\n\t\t\t\t\t\t\t\t\t\treturn opts\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{}\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t</Snackbar>\r\n\t\t\t\t\t<ShtarvolinkiSnack {...snackHooks} />\r\n\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\topen={isNewBondOpen}\r\n\t\t\t\t\t\tonClose={() => setNewBondOpen(false)}\r\n\t\t\t\t\t\tclassName={classes.modal}\r\n\t\t\t\t\t\tcloseAfterTransition\r\n\t\t\t\t\t\tBackdropComponent={Backdrop}\r\n\t\t\t\t\t\tBackdropProps={{\r\n\t\t\t\t\t\t\ttimeout: 300\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Fade in={isNewBondOpen}>\r\n\t\t\t\t\t\t\t{NewBondForm({\r\n\t\t\t\t\t\t\t\tstats,\r\n\t\t\t\t\t\t\t\tsetNewBondPool,\r\n\t\t\t\t\t\t\t\tnewBondPool,\r\n\t\t\t\t\t\t\t\tpools: POOLS.filter(x => x.selectable),\r\n\t\t\t\t\t\t\t\tonNewBond: async bond => {\r\n\t\t\t\t\t\t\t\t\tsetNewBondOpen(false)\r\n\t\t\t\t\t\t\t\t\tawait wrapDoingTxns(\r\n\t\t\t\t\t\t\t\t\t\tcreateNewBond.bind(null, stats, chosenWalletType, bond)\r\n\t\t\t\t\t\t\t\t\t)()\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tchosenWalletType,\r\n\t\t\t\t\t\t\t\tisEarly: stats.userBonds.find(\r\n\t\t\t\t\t\t\t\t\tx => x.nonce.toNumber() < 1597276800\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Fade>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\topen={chainWarning}\r\n\t\t\t\t\t\taria-labelledby=\"alert-chain-warning-title\"\r\n\t\t\t\t\t\taria-describedby=\"alert-chain-description\"\r\n\t\t\t\t\t\tBackdropComponent={Backdrop}\r\n\t\t\t\t\t\tclassName={clsx(classes.modal, classes.alwaysOnTop)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Fade in={chainWarning}>\r\n\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t<Alert severity=\"warning\">\r\n\t\t\t\t\t\t\t\t\t<AlertTitle id=\"alert-chain-warning-title\">\r\n\t\t\t\t\t\t\t\t\t\t{t(\"messages.unsupportedEthNetwork\")}\r\n\t\t\t\t\t\t\t\t\t</AlertTitle>\r\n\t\t\t\t\t\t\t\t\t<Box id=\"alert-chain-description\">\r\n\t\t\t\t\t\t\t\t\t\t{t(\"messages.connectToMainnet\")}\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Fade>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\topen={idlePopupOpen}\r\n\t\t\t\t\t\taria-labelledby=\"alert-user-idle-title\"\r\n\t\t\t\t\t\taria-describedby=\"alert-user-idle-description\"\r\n\t\t\t\t\t\tBackdropComponent={Backdrop}\r\n\t\t\t\t\t\tclassName={clsx(classes.modal, classes.alwaysOnTop)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Fade in={idlePopupOpen}>\r\n\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t<Alert\r\n\t\t\t\t\t\t\t\t\tseverity=\"info\"\r\n\t\t\t\t\t\t\t\t\taction={\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={onIdleDialogAction}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{t(\"messages.continueSession\")}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t(\"messages.useIdleTitle\", {\r\n\t\t\t\t\t\t\t\t\t\tminutes: IDLE_TIMEOUT_MINUTES\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Fade>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\topen={openDoingTx}\r\n\t\t\t\t\t\taria-labelledby=\"info-doingTx\"\r\n\t\t\t\t\t\tBackdropComponent={Backdrop}\r\n\t\t\t\t\t\tcloseAfterTransition\r\n\t\t\t\t\t\tclassName={clsx(classes.modal)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Fade in={openDoingTx}>\r\n\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t<Alert severity=\"info\">\r\n\t\t\t\t\t\t\t\t\t<Box id=\"info-doingTx\" p={2}>\r\n\t\t\t\t\t\t\t\t\t\t{t(\"messages.signAllTransactions\", {\r\n\t\t\t\t\t\t\t\t\t\t\twallet: chosenWalletType.name || \"\"\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Fade>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t\t<StakeNowPopup />\r\n\t\t\t\t\t<MigrateNowPopup />\r\n\t\t\t\t</div>\r\n\t\t\t</main>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from \"react\"\r\nimport {\r\n\tDialog,\r\n\tDialogTitle,\r\n\tList,\r\n\tListItem,\r\n\tListItemText,\r\n\tAvatar,\r\n\tListItemIcon\r\n} from \"@material-ui/core\"\r\nimport { Wallets, METAMASK } from \"../helpers/constants\"\r\nimport { toIdAttributeString } from \"../helpers/formatting\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nexport default function ChooseWallet({\r\n\thandleListItemClick,\r\n\thandleClose,\r\n\topen,\r\n\tdisableNonBrowserWallets\r\n}) {\r\n\tconst { t } = useTranslation()\r\n\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\tonClose={handleClose}\r\n\t\t\taria-labelledby=\"simple-dialog-title\"\r\n\t\t\topen={open}\r\n\t\t>\r\n\t\t\t<DialogTitle id=\"simple-dialog-title\">\r\n\t\t\t\t{t(\"dialogs.selectWallet\")}\r\n\t\t\t</DialogTitle>\r\n\t\t\t<List>\r\n\t\t\t\t{Wallets.map(({ icon, name = \"\", extraLabel }) => (\r\n\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\tid={`connect-wallet-select-${toIdAttributeString(name)}`}\r\n\t\t\t\t\t\tdisabled={disableNonBrowserWallets && name !== METAMASK}\r\n\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\tonClick={() => handleListItemClick(name)}\r\n\t\t\t\t\t\tkey={name}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<Avatar src={icon} />\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\tprimary={t(\"dialogs.connectWith\", {\r\n\t\t\t\t\t\t\t\twallet: name\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tsecondary={\r\n\t\t\t\t\t\t\t\textraLabel\r\n\t\t\t\t\t\t\t\t\t? t(extraLabel.message || \"\", extraLabel.data || {})\r\n\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t))}\r\n\t\t\t</List>\r\n\t\t</Dialog>\r\n\t)\r\n}\r\n","import { LedgerConnector } from \"@web3-react/ledger-connector\"\r\nimport { TrezorConnector } from \"@web3-react/trezor-connector\"\r\nimport { InjectedConnector } from \"@web3-react/injected-connector\"\r\nimport { WalletConnectConnector } from \"@web3-react/walletconnect-connector\"\r\nimport { REACT_APP_RPC_URL } from \"../helpers/constants\"\r\n\r\nconst POLLING_INTERVAL = 13000\r\n\r\nexport const injected = new InjectedConnector({\r\n\tsupportedChainIds: [1, 3, 4, 5, 42]\r\n})\r\n\r\nexport const ledger = new LedgerConnector({\r\n\tchainId: 1,\r\n\turl: REACT_APP_RPC_URL,\r\n\tpollingInterval: POLLING_INTERVAL\r\n})\r\n\r\nexport const trezor = new TrezorConnector({\r\n\tchainId: 1,\r\n\turl: REACT_APP_RPC_URL,\r\n\tpollingInterval: POLLING_INTERVAL,\r\n\tmanifestEmail: \"contactus@adex.network\",\r\n\tmanifestAppUrl: \"https://staking.adex.network\",\r\n\tconfig: {\r\n\t\tnetworkId: 1\r\n\t}\r\n})\r\n\r\nexport const walletconnect = new WalletConnectConnector({\r\n\trpc: { 1: REACT_APP_RPC_URL },\r\n\tbridge: \"https://bridge.walletconnect.org\",\r\n\tqrcode: true,\r\n\tpollingInterval: POLLING_INTERVAL\r\n})\r\n","import { useEffect, useState, useCallback } from \"react\"\r\nimport { useWeb3React, UnsupportedChainIdError } from \"@web3-react/core\"\r\nimport {\r\n\tNoEthereumProviderError,\r\n\tUserRejectedRequestError as UserRejectedRequestErrorInjected\r\n} from \"@web3-react/injected-connector\"\r\nimport { useIdleTimer } from \"react-idle-timer\"\r\nimport { UserRejectedRequestError as UserRejectedRequestErrorWalletConnect } from \"@web3-react/walletconnect-connector\"\r\nimport { getSigner } from \"./ethereum\"\r\nimport {\r\n\tWALLET_CONNECT,\r\n\tMETAMASK,\r\n\tTREZOR,\r\n\tLEDGER,\r\n\tSUPPORTED_CHAINS,\r\n\tIDLE_TIMEOUT_MINUTES\r\n} from \"./helpers/constants\"\r\nimport { injected, trezor, ledger, walletconnect } from \"./helpers/connector\"\r\nimport {\r\n\tEMPTY_STATS,\r\n\tloadStats,\r\n\tonUnbondOrRequest,\r\n\tclaimRewards,\r\n\tgetPrices,\r\n\treBond,\r\n\tonMigrationToV5Finalize\r\n} from \"./actions\"\r\nimport { useInactiveListener } from \"./helpers/hooks\"\r\nimport { useSnack } from \"./Snack\"\r\n\r\nconst REFRESH_INTVL = 300_000 // 300sec\r\nconst REFRESH_INTVL_WALLET = 60_000 // 60sec\r\nconst IDLE_TIMEOUT = IDLE_TIMEOUT_MINUTES * 60 * 1000\r\n\r\nconst connectorsByName = {\r\n\t[METAMASK]: injected,\r\n\t[WALLET_CONNECT]: walletconnect,\r\n\t[TREZOR]: trezor,\r\n\t[LEDGER]: ledger\r\n}\r\n\r\nfunction tryGetErrMessage(error) {\r\n\tif (error && error.message) {\r\n\t\treturn error.message\r\n\t} else if (typeof error === \"string\") {\r\n\t\treturn error\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nfunction getErrorMessage(error) {\r\n\tif (error instanceof NoEthereumProviderError) {\r\n\t\treturn \"errors.noEthBrowserDetected\"\r\n\t} else if (error instanceof UnsupportedChainIdError) {\r\n\t\treturn \"errors.connectedToUnsupportedNetwork\"\r\n\t} else if (\r\n\t\terror instanceof UserRejectedRequestErrorInjected ||\r\n\t\terror instanceof UserRejectedRequestErrorWalletConnect\r\n\t) {\r\n\t\treturn \"errors.siteNotAuth\"\r\n\t} else if (tryGetErrMessage(error)) {\r\n\t\tconsole.error(error)\r\n\t\treturn tryGetErrMessage(error)\r\n\t} else {\r\n\t\tconsole.error(error)\r\n\t\treturn \"errors.unknownCheckConsole\"\r\n\t}\r\n}\r\n\r\nexport default function useApp() {\r\n\tconst { addSnack, ...snackHooks } = useSnack()\r\n\tconst {\r\n\t\tlibrary,\r\n\t\tactivate,\r\n\t\terror,\r\n\t\tdeactivate,\r\n\t\tchainId,\r\n\t\taccount\r\n\t} = useWeb3React()\r\n\r\n\tconst [isNewBondOpen, setNewBondOpen] = useState(false)\r\n\tconst [toUnbond, setToUnbond] = useState(null)\r\n\tconst [openErr, setOpenErr] = useState(false)\r\n\tconst [openDoingTx, setOpenDoingTx] = useState(false)\r\n\tconst [snackbarErr, setSnackbarErr] = useState(\"errors.unexpectedError\")\r\n\tconst [stats, setStats] = useState(EMPTY_STATS)\r\n\tconst [connectWallet, setConnectWallet] = useState(null)\r\n\tconst [chosenWalletTypeName, setChosenWalletTypeName] = useState(null)\r\n\tconst [chosenWalletType, setChosenWalletType] = useState({})\r\n\tconst [prices, setPrices] = useState({})\r\n\tconst [chainWarning, setChainWarning] = useState(false)\r\n\tconst [newBondPool, setNewBondPool] = useState(null)\r\n\tconst [legacySwapInPrg, setLegacySwapInPrg] = useState(false)\r\n\tconst [legacySwapOpen, setLegacySwapInOpen] = useState(false)\r\n\tconst [refreshCount, setRefreshCount] = useState(0)\r\n\tconst [userIdle, setUserIdle] = useState(false)\r\n\tconst [idlePopupOpen, setIdlePopupOpen] = useState(false)\r\n\tconst [secondsToAutoRefresh, setSecondsToAutoRefresh] = useState(\r\n\t\tREFRESH_INTVL\r\n\t)\r\n\r\n\tuseInactiveListener(!!connectWallet)\r\n\r\n\tconst handleOnIdle = () => {\r\n\t\tsetUserIdle(true)\r\n\t\tsetIdlePopupOpen(true)\r\n\t}\r\n\r\n\tconst onIdleDialogAction = () => {\r\n\t\tsetIdlePopupOpen(false)\r\n\t\tsetUserIdle(false)\r\n\t}\r\n\r\n\tuseIdleTimer({\r\n\t\ttimeout: IDLE_TIMEOUT,\r\n\t\tonIdle: handleOnIdle,\r\n\t\tdebounce: 500\r\n\t})\r\n\r\n\tconst refreshStats = useCallback(async () => {\r\n\t\tif (userIdle) return\r\n\r\n\t\tconst newPrices =\r\n\t\t\t!Object.keys(prices) || refreshCount % 3 === 0\r\n\t\t\t\t? await getPrices()\r\n\t\t\t\t: prices\r\n\t\tconst updatePrices = newPrices !== prices\r\n\r\n\t\ttry {\r\n\t\t\tconst newStats = await loadStats(\r\n\t\t\t\tchosenWalletType,\r\n\t\t\t\tupdatePrices ? newPrices : prices\r\n\t\t\t)\r\n\t\t\tsetRefreshCount(refreshCount + 1)\r\n\t\t\tsetStats(newStats)\r\n\t\t\tif (updatePrices) {\r\n\t\t\t\tsetPrices(newPrices)\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(\"loadStats\", e)\r\n\t\t\tif (e.code === 4001) {\r\n\t\t\t\tsetSnackbarErr(\"errors.authDeniedByUser\")\r\n\t\t\t} else {\r\n\t\t\t\tsetSnackbarErr({\r\n\t\t\t\t\tmsg: \"errors.loadingStats\",\r\n\t\t\t\t\topts: { error: !!e ? e.message || e.toString() : \"\" }\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tsetOpenErr(true)\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [userIdle, chosenWalletType, refreshCount, prices])\r\n\r\n\tuseEffect(() => {\r\n\t\trefreshStats()\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [chosenWalletType])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chosenWalletType.name) {\r\n\t\t\tconst intvlSecsToRefresh = setInterval(\r\n\t\t\t\t() => setSecondsToAutoRefresh(secondsToAutoRefresh - 1),\r\n\t\t\t\t1000\r\n\t\t\t)\r\n\t\t\treturn () => {\r\n\t\t\t\tclearInterval(intvlSecsToRefresh)\r\n\t\t\t}\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [chosenWalletType.name, secondsToAutoRefresh])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst refreshInterval = chosenWalletType.name\r\n\t\t\t? REFRESH_INTVL_WALLET\r\n\t\t\t: REFRESH_INTVL\r\n\t\tconst intvl = setInterval(refreshStats, refreshInterval)\r\n\r\n\t\tsetSecondsToAutoRefresh(Math.floor(refreshInterval / 1000))\r\n\t\treturn () => {\r\n\t\t\tclearInterval(intvl)\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [chosenWalletType.name, refreshStats])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!!chainId && !SUPPORTED_CHAINS.some(chain => chainId === chain.id)) {\r\n\t\t\tsetChainWarning(true)\r\n\t\t} else {\r\n\t\t\tsetChainWarning(false)\r\n\t\t}\r\n\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [chosenWalletTypeName, chainId, account])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!!error) {\r\n\t\t\tsetSnackbarErr(getErrorMessage(error))\r\n\t\t\tsetOpenErr(true)\r\n\t\t\tdeactivate()\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [error])\r\n\r\n\tconst wrapDoingTxns = fn => async (...args) => {\r\n\t\ttry {\r\n\t\t\tsetOpenDoingTx(true)\r\n\t\t\tsetOpenErr(false)\r\n\t\t\tconst res = await fn.apply(null, args)\r\n\t\t\tsetOpenDoingTx(false)\r\n\t\t\trefreshStats()\r\n\t\t\treturn res\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t\tsetOpenDoingTx(false)\r\n\t\t\tsetSnackbarErr(\r\n\t\t\t\te.values\r\n\t\t\t\t\t? {\r\n\t\t\t\t\t\t\tmsg: e.message || \"errors.unknownError\",\r\n\t\t\t\t\t\t\topts: e.values || {}\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t: e.message || \"errors.unknownError\"\r\n\t\t\t)\r\n\t\t\tsetOpenErr(true)\r\n\t\t}\r\n\t}\r\n\tconst onRequestUnbond = wrapDoingTxns(\r\n\t\tonUnbondOrRequest.bind(null, false, chosenWalletType)\r\n\t)\r\n\r\n\tconst onUnbond = wrapDoingTxns(\r\n\t\tonUnbondOrRequest.bind(null, true, chosenWalletType)\r\n\t)\r\n\tconst onMigrationFinalize = wrapDoingTxns(\r\n\t\tonMigrationToV5Finalize.bind(null, chosenWalletType)\r\n\t)\r\n\tconst onRebond = wrapDoingTxns(reBond.bind(null, chosenWalletType))\r\n\tconst onClaimRewards = wrapDoingTxns(\r\n\t\tclaimRewards.bind(null, chosenWalletType)\r\n\t)\r\n\r\n\tconst handleErrClose = (event, reason) => {\r\n\t\tif (reason === \"clickaway\") {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetOpenErr(false)\r\n\t}\r\n\r\n\tconst onWalletTypeSelect = async walletTypeName => {\r\n\t\tsetChosenWalletTypeName(walletTypeName)\r\n\t\tsetConnectWallet(null)\r\n\t\tconsole.log(\"activating\")\r\n\t\tawait activate(connectorsByName[walletTypeName])\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function updateWalletType() {\r\n\t\t\tif (library && chosenWalletTypeName) {\r\n\t\t\t\tconst newWalletType = { name: chosenWalletTypeName, library }\r\n\t\t\t\tconst signer = await getSigner(newWalletType)\r\n\r\n\t\t\t\tif (signer) {\r\n\t\t\t\t\tsetChosenWalletType(newWalletType)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tupdateWalletType()\r\n\t}, [library, chosenWalletTypeName])\r\n\r\n\treturn {\r\n\t\tisNewBondOpen,\r\n\t\tsetNewBondOpen,\r\n\t\ttoUnbond,\r\n\t\tsetToUnbond,\r\n\t\tonRebond,\r\n\t\tonMigrationFinalize,\r\n\t\topenErr,\r\n\t\tsetOpenErr,\r\n\t\topenDoingTx,\r\n\t\tsetOpenDoingTx,\r\n\t\tsnackbarErr,\r\n\t\tsetSnackbarErr,\r\n\t\tstats,\r\n\t\tconnectWallet,\r\n\t\tsetConnectWallet,\r\n\t\tchosenWalletType,\r\n\t\trefreshStats,\r\n\t\twrapDoingTxns,\r\n\t\tonRequestUnbond,\r\n\t\tonUnbond,\r\n\t\tonClaimRewards,\r\n\t\thandleErrClose,\r\n\t\tgetSigner,\r\n\t\tprices,\r\n\t\tonWalletTypeSelect,\r\n\t\taddSnack,\r\n\t\tsnackHooks,\r\n\t\tchainId,\r\n\t\taccount,\r\n\t\tchainWarning,\r\n\t\tnewBondPool,\r\n\t\tsetNewBondPool,\r\n\t\tlegacySwapInPrg,\r\n\t\tsetLegacySwapInPrg,\r\n\t\tlegacySwapOpen,\r\n\t\tsetLegacySwapInOpen,\r\n\t\tidlePopupOpen,\r\n\t\tonIdleDialogAction,\r\n\t\tuserIdle,\r\n\t\tsecondsToAutoRefresh\r\n\t}\r\n}\r\n","import { useEffect } from \"react\"\r\nimport { useWeb3React } from \"@web3-react/core\"\r\nimport { injected } from \"./connector\"\r\n\r\nexport function useInactiveListener(suppress) {\r\n\tconst { active, error, activate } = useWeb3React()\r\n\r\n\tconst handleConnect = () => {\r\n\t\tconsole.log(\"Handling 'connect' event\")\r\n\t\tactivate(injected)\r\n\t}\r\n\r\n\tconst handleChainChanged = chainId => {\r\n\t\tconsole.log(\"Handling 'chainChanged' event with payload\", chainId)\r\n\t\tactivate(injected)\r\n\t}\r\n\r\n\tconst handleAccountsChanged = accounts => {\r\n\t\tconsole.log(\"Handling 'accountsChanged' event with payload KOR\", accounts)\r\n\t\tif (active && accounts.length > 0) {\r\n\t\t\twindow.location.reload()\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleNetworkChanged = networkId => {\r\n\t\tconsole.log(\"Handling 'networkChanged' event with payload\", networkId)\r\n\t\tactivate(injected)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst { ethereum } = window\r\n\r\n\t\tif (ethereum && ethereum.on) {\r\n\t\t\tethereum.on(\"connect\", handleConnect)\r\n\t\t\tethereum.on(\"chainChanged\", handleChainChanged)\r\n\t\t\tethereum.on(\"accountsChanged\", handleAccountsChanged)\r\n\t\t\tethereum.on(\"networkChanged\", handleNetworkChanged)\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tif (ethereum && ethereum.removeListener) {\r\n\t\t\t\tethereum.removeListener(\"connect\", handleConnect)\r\n\t\t\t\tethereum.removeListener(\"chainChanged\", handleChainChanged)\r\n\t\t\t\tethereum.removeListener(\"accountsChanged\", handleAccountsChanged)\r\n\t\t\t\tethereum.removeListener(\"networkChanged\", handleNetworkChanged)\r\n\t\t\t}\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [error, active, suppress])\r\n}\r\n","import React, { useContext } from \"react\"\r\nimport { LinearProgress, Box } from \"@material-ui/core\"\r\nimport logo from \"../resources/staking-logo.svg\"\r\nimport logoLight from \"../resources/logo-light-theme.svg\"\r\nimport { MultiThemeContext } from \"../MultiThemeProvider\"\r\n\r\nexport default function Loading() {\r\n\tconst { themeType } = useContext(MultiThemeContext)\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\twidth=\"100vw\"\r\n\t\t\theight=\"100vh\"\r\n\t\t\tflexDirection=\"column\"\r\n\t\t\tjustifyContent=\"center\"\r\n\t\t\talignItems=\"center\"\r\n\t\t>\r\n\t\t\t<Box mb={1}>\r\n\t\t\t\t<img\r\n\t\t\t\t\twidth=\"200px\"\r\n\t\t\t\t\tsrc={themeType === \"dark\" ? logo : logoLight}\r\n\t\t\t\t\t// src={logo}\r\n\t\t\t\t\talt=\"adex-staking-logo\"\r\n\t\t\t\t></img>\r\n\t\t\t</Box>\r\n\t\t\t<Box width={200}>\r\n\t\t\t\t<LinearProgress color=\"secondary\" />\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t)\r\n}\r\n","import React, { Suspense } from \"react\"\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\"\r\nimport { HashRouter as Router } from \"react-router-dom\"\r\nimport { Web3ReactProvider } from \"@web3-react/core\"\r\nimport { ethers } from \"ethers\"\r\nimport Root from \"./components/Root\"\r\nimport AppContext from \"./AppContext\"\r\nimport ValidatorStatsContext from \"./ValidatorStatsContext\"\r\nimport useApp from \"./AppHooks\"\r\nimport useValidatorStats from \"./ValidatorStatsHooks\"\r\nimport Loading from \"./components/Loading\"\r\nimport MultiThemeProvider from \"./MultiThemeProvider\"\r\nimport { FarmProvider } from \"./FarmProvider\"\r\nimport \"./App.css\"\r\n\r\nconst App = () => {\r\n\tconst appHooks = useApp()\r\n\tconst validatorStatsHooks = useValidatorStats()\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<AppContext.Provider value={appHooks}>\r\n\t\t\t\t<FarmProvider>\r\n\t\t\t\t\t<ValidatorStatsContext.Provider value={validatorStatsHooks}>\r\n\t\t\t\t\t\t<Router>\r\n\t\t\t\t\t\t\t<Root />\r\n\t\t\t\t\t\t</Router>\r\n\t\t\t\t\t</ValidatorStatsContext.Provider>\r\n\t\t\t\t</FarmProvider>\r\n\t\t\t</AppContext.Provider>\r\n\t\t</React.Fragment>\r\n\t)\r\n}\r\n\r\nexport default () => (\r\n\t<MultiThemeProvider>\r\n\t\t<CssBaseline />\r\n\t\t<Suspense fallback={<Loading />}>\r\n\t\t\t<Web3ReactProvider\r\n\t\t\t\tgetLibrary={provider => new ethers.providers.Web3Provider(provider)}\r\n\t\t\t>\r\n\t\t\t\t<App />\r\n\t\t\t</Web3ReactProvider>\r\n\t\t</Suspense>\r\n\t</MultiThemeProvider>\r\n)\r\n","import { useEffect, useState } from \"react\"\r\nimport { getValidatorStatsByPoolId } from \"./actions/pools\"\r\n\r\nexport default function ValidatorStatsHooks() {\r\n\tconst [poolId, setPoolId] = useState(\"\")\r\n\tconst [pool, setPool] = useState({})\r\n\tconst [statsByPoolId, setStatsByPoolId] = useState({})\r\n\tconst [stats, setStats] = useState({})\r\n\r\n\tconst loaded = !!Object.keys(stats).length\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!statsByPoolId[poolId]) {\r\n\t\t\tconst newStats = { ...setStatsByPoolId }\r\n\t\t\tnewStats[poolId] = {}\r\n\t\t\tsetStatsByPoolId(newStats)\r\n\t\t\tsetStats(newStats[poolId])\r\n\r\n\t\t\tconst updatePoolStats = async () => {\r\n\t\t\t\tconst stats = await getValidatorStatsByPoolId(poolId)()\r\n\t\t\t\tconst newStats = { ...setStatsByPoolId }\r\n\t\t\t\tnewStats[poolId] = stats\r\n\t\t\t\tsetStatsByPoolId(newStats)\r\n\t\t\t\tsetStats(newStats[poolId])\r\n\t\t\t}\r\n\t\t\tupdatePoolStats()\r\n\t\t}\r\n\t}, [poolId, statsByPoolId])\r\n\r\n\treturn {\r\n\t\tloaded,\r\n\t\tpoolId,\r\n\t\tsetPoolId,\r\n\t\tpool,\r\n\t\tsetPool,\r\n\t\tstatsByPoolId,\r\n\t\tsetStatsByPoolId,\r\n\t\tstats,\r\n\t\tsetStats\r\n\t}\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import i18n from \"i18next\"\r\nimport { initReactI18next } from \"react-i18next\"\r\n\r\nimport Backend from \"i18next-http-backend\"\r\nimport LanguageDetector from \"i18next-browser-languagedetector\"\r\n// don't want to use this?\r\n// have a look at the Quick start guide\r\n// for passing in lng and translations on init\r\n\r\ni18n\r\n\t// load translation using http -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\r\n\t// learn more: https://github.com/i18next/i18next-http-backend\r\n\t.use(Backend)\r\n\t// detect user language\r\n\t// learn more: https://github.com/i18next/i18next-browser-languageDetector\r\n\t.use(LanguageDetector)\r\n\t// pass the i18n instance to react-i18next.\r\n\t.use(initReactI18next)\r\n\t// init i18next\r\n\t// for all options read: https://www.i18next.com/overview/configuration-options\r\n\t.init({\r\n\t\tbackend: {\r\n\t\t\t// for all available options read the backend's repository readme file\r\n\t\t\tloadPath: \"/locales/{{lng}}/{{ns}}.json\"\r\n\t\t},\r\n\t\tfallbackLng: \"en\",\r\n\t\tdefaultNS: \"translation\",\r\n\t\tdebug: true,\r\n\t\tkeySeparator: \".\",\r\n\t\tinterpolation: {\r\n\t\t\tescapeValue: false // not needed for react as it escapes by default\r\n\t\t}\r\n\t})\r\n\r\nexport default i18n\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport App from \"./App\"\r\nimport * as serviceWorker from \"./serviceWorker\"\r\n\r\nimport \"./i18n\"\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister()\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", {\n  id: \"defs4\"\n}, /*#__PURE__*/React.createElement(\"style\", {\n  id: \"style2\"\n}, \".cls-1{fill:#1b75bc;}.cls-2{fill:#3c3c3b;}\"));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title6\"\n}, \"adex-vector-logo\");\n\nvar SvgAdexLogoClean = function SvgAdexLogoClean(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 765.98 765.98\",\n    id: \"svg16\",\n    ref: svgRef\n  }, props), _ref2, title === undefined ? _ref3 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title6\"\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Layer_2\",\n    \"data-name\": \"Layer 2\",\n    transform: \"translate(152)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Layer_1-2\",\n    \"data-name\": \"Layer 1\"\n  }, /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"87.67,617.65 235.13,470.2 382.58,617.65 470.25,529.98 322.8,382.53 470.25,235.08 382.58,147.4 235.13,294.85 87.67,147.4 0,235.08 147.45,382.53 0,529.98 \",\n    id: \"polygon8\",\n    style: {\n      fill: \"#1b75bc\"\n    }\n  }), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"183.93 51.2 97.82 137.31 170.36 209.85 235.13 144.3 299.89 209.85 372.44 137.31 286.33 51.2 235.13 0 183.93 51.2\",\n    id: \"polyline10\",\n    style: {\n      fill: \"#3c3c3b\"\n    }\n  }), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"183.93 714.78 97.82 628.67 170.36 556.13 235.13 621.67 299.89 556.13 372.44 628.67 286.33 714.78 235.13 765.98 183.93 714.78\",\n    id: \"polyline12\",\n    style: {\n      fill: \"#3c3c3b\"\n    }\n  }))));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgAdexLogoClean, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/adex-logo-clean.37246031.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".cls-1{fill:#3c3c3c;}.cls-2{fill:#ff4266;}\\r\\n\"));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_2\",\n  \"data-name\": \"Layer 2\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_1-2\",\n  \"data-name\": \"Layer 1\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-1\",\n  points: \"63.93 50.11 73.68 59.86 82.38 51.05 91.09 59.86 100.84 50.11 89.26 38.54 82.38 31.66 75.5 38.54 63.93 50.11\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-1\",\n  points: \"82.38 115.21 73.68 106.4 63.93 116.15 75.5 127.72 82.38 134.6 89.26 127.72 100.84 116.15 91.09 106.4 82.38 115.21\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"115.19 82.27 106.49 73.46 96.74 83.21 108.31 94.78 115.19 101.66 122.07 94.78 133.65 83.21 123.9 73.46 115.19 82.27\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"68.03 83.21 58.28 73.46 49.58 82.27 40.87 73.46 31.12 83.21 42.69 94.78 49.58 101.66 56.46 94.78 68.03 83.21\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"113.98 19.39 122.69 28.2 132.44 18.45 120.86 6.88 113.98 0 107.1 6.88 95.53 18.45 105.28 28.2 113.98 19.39\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"50.78 19.39 59.49 28.2 69.24 18.45 57.66 6.88 50.78 0 43.9 6.88 32.33 18.45 42.08 28.2 50.78 19.39\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"18.72 51.41 27.22 43.01 17.81 33.6 6.64 44.77 0 51.41 6.64 58.05 17.81 69.22 27.22 59.81 18.72 51.41\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"158.13 44.77 146.95 33.6 137.54 43.01 146.05 51.41 137.54 59.81 146.95 69.22 158.13 58.05 164.77 51.41 158.13 44.77\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"70.6 19.81 50.78 39.63 30.97 19.81 19.19 31.59 39 51.41 19.19 71.22 29.65 81.69 81.06 30.27 70.6 19.81\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-2\",\n  points: \"145.58 31.59 133.8 19.81 113.98 39.63 94.2 19.84 83.75 30.3 135.13 81.67 145.58 71.22 125.76 51.41 145.58 31.59\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"cls-1\",\n  points: \"95.39 81.84 95.39 81.84 113.98 63.25 113.95 63.22 113.96 63.21 102.18 51.43 82.38 71.22 82.41 71.25 82.38 71.29 82.35 71.25 82.38 71.22 62.6 51.44 50.79 63.26 70.6 83.07 69.21 84.46 69.2 84.45 50.75 102.9 50.78 102.94 50.81 102.91 62.57 114.67 82.38 94.85 102.2 114.67 113.95 102.91 113.98 102.94 114.01 102.92 94.16 83.07 95.39 81.84\"\n})));\n\nvar SvgLoyaltyIc = function SvgLoyaltyIc(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 164.77 134.6\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLoyaltyIc, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/loyalty-ic.cc4cb42b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_2\",\n  \"data-name\": \"Layer 2\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_1-2\",\n  \"data-name\": \"Layer 1\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M25.81,123.07c-6.88,0-13.75,0-20.63,0a4.81,4.81,0,0,1-4.79-3.19,4.94,4.94,0,0,1,1.15-5.51,5.24,5.24,0,0,1,4.12-1.45q18,0,36,0c2.85,0,2.83,0,2.21-2.84a71,71,0,0,1,1.67-37.22,13.43,13.43,0,0,0,.65-4.74c-.6-12.82-2.17-25.57-3-38.37-.51-7.77-1-15.55.16-23.32a17.14,17.14,0,0,1,.36-1.73c1-4.15,2.48-5.09,6.64-4.35,6.88,1.24,13.07,4.18,18.93,7.86A102.65,102.65,0,0,1,89,24.93a2.66,2.66,0,0,0,3.23.77,70.38,70.38,0,0,1,44.8,0,2.51,2.51,0,0,0,3.06-.74c7.51-7.75,15.56-14.84,25.23-19.83A49.65,49.65,0,0,1,180,.12c2.64-.44,4,.32,5,2.88a25.67,25.67,0,0,1,1.49,8.54c.35,9-.37,17.92-1.11,26.86s-1.65,18.07-2.21,27.13a32.38,32.38,0,0,0,1.5,10.72,70.6,70.6,0,0,1,.57,34.45c-.5,2.22-.52,2.22,1.84,2.22q18.3,0,36.6,0c3.1,0,5.22,1.81,5.44,4.57a5,5,0,0,1-5.09,5.56c-4.67.06-9.35,0-14,0H183.6c-.54,0-1.08,0-1.61,0-.86.07-1.16.76-1.31,1.44-.19.87.61.87,1.15,1l24.91,6.66c.62.16,1.25.31,1.86.51a5,5,0,0,1,3.58,6.42,5.1,5.1,0,0,1-6.45,3.31c-4.57-1.2-9.13-2.44-13.7-3.66-5.08-1.37-10.18-2.7-15.25-4.12a1.86,1.86,0,0,0-2.42.88,41.55,41.55,0,0,1-2.6,3.49,1.22,1.22,0,0,0,.09,1.93q7.92,7.81,15.79,15.67c1.22,1.21,2.49,2.37,3.69,3.59a5.24,5.24,0,0,1,.29,7.52c-2.09,2.14-5.09,2.1-7.45-.23q-9.28-9.19-18.48-18.46c-1.56-1.56-1.59-1.58-3.18-.18a70.5,70.5,0,0,1-38.6,17.52A71.48,71.48,0,0,1,76.62,156.3a63,63,0,0,1-9.91-7.43c-1.13-1-2-1-3.12.11-6,6.13-12.14,12.18-18.22,18.27-1.26,1.26-2.65,2.22-4.53,2A4.84,4.84,0,0,1,36.47,166a5.12,5.12,0,0,1,1.35-5.63c2.27-2.28,4.61-4.49,6.9-6.76,4.12-4.09,8.2-8.22,12.35-12.27.94-.91,1-1.57.16-2.54a18.77,18.77,0,0,1-2.21-3c-.74-1.28-1.63-1.37-3-1-9.48,2.6-19,5.13-28.48,7.67a5.13,5.13,0,0,1-6-7.66,6,6,0,0,1,3.77-2.28q12.69-3.36,25.38-6.78c.67-.18,1.88,0,1.77-1.16s-1.07-1.52-2.24-1.51c-6.83,0-13.65,0-20.48,0Zm88.65,9.27c.68.22.6.74.73,1.11a31.42,31.42,0,0,0,2.19,5c3.33,6,8.82,8.25,15.14,5.72,8.42-3.38,13-10,14.63-18.81,1-5.23-1.31-8.69-5.68-11.13a25.34,25.34,0,0,0-4.68-2.14c-13.68-4.33-27.48-4.32-41.33-1a25.5,25.5,0,0,0-10,4.61c-2.53,2-4,4.49-3.66,7.8.86,9.11,5.36,15.88,13.42,20.09,4.56,2.37,9.24,2.32,13.44-1.15a17,17,0,0,0,4.6-6.9C113.67,134.5,114.05,133.42,114.46,132.34ZM82.2,88.18a7.38,7.38,0,0,0-7.49,7.41,7.5,7.5,0,1,0,15,.14A7.39,7.39,0,0,0,82.2,88.18Zm64.73,0a7.37,7.37,0,0,0-7.42,7.47,7.47,7.47,0,0,0,7.38,7.57,7.64,7.64,0,0,0,7.62-7.56A7.39,7.39,0,0,0,146.93,88.18Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M114.68,111.67A26.83,26.83,0,0,1,122,112.8c1.84.68,2.23,1.36,2.05,3.3-.47,4.94-4.66,8.94-9.37,8.94a9.82,9.82,0,0,1-9.42-8.89c-.2-2,.21-2.71,2.15-3.39A27.63,27.63,0,0,1,114.68,111.67Z\"\n})));\n\nvar SvgTomIc = function SvgTomIc(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 229.17 169.33\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgTomIc, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/tom-ic.13f67482.svg\";\nexport { ForwardRef as ReactComponent };","module.exports = __webpack_public_path__ + \"static/media/staking-logo.7e002c99.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-light-theme.5e7ce8ac.svg\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"balancer-bal\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  id: \"SVGID-2\",\n  \"data-name\": \"SVGID\",\n  d: \"M507.5,709C347.6,709,218,662.8,218,600.9c0-32.3,35.3-61.4,91.8-81.9,44.1,28.3,118.1,42.8,202,42.8,81.9,0,154.3-17.7,198.8-44.8,53.3,20.3,86.4,48.6,86.4,79.8,0,62-129.6,112.2-289.5,112.2Z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  id: \"SVGID-3\",\n  \"data-name\": \"SVGID\",\n  d: \"M509.2,547.9c-121.2,0-219.5-38-219.5-84.9,0-26,30.3-49.3,77.8-64.8,33.9,17.7,84.7,29,141.7,29s107.8-11.3,141.7-29c47.6,15.6,77.8,38.8,77.8,64.8.1,46.9-98.2,84.9-219.5,84.9Z\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  id: \"SVGID-4\",\n  \"data-name\": \"SVGID\",\n  d: \"M508.4,413.1c-93.7,0-169.7-31.4-169.7-70s76-70,169.7-70,169.7,31.4,169.7,70-76,70-169.7,70Z\"\n});\n\nvar SvgBalancerBalLogo = function SvgBalancerBalLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 1000 1000\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Layer_2\",\n    \"data-name\": \"Layer 2\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Layer_1-2\",\n    \"data-name\": \"Layer 1\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"SVGID\",\n    d: \"M500,0c276.1,0,500,223.9,500,500s-223.9,500-500,500S0,776.1,0,500,223.9,0,500,0Z\",\n    style: {\n      fill: \"transparent\"\n    }\n  }), _ref3, _ref4, _ref5)));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgBalancerBalLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/balancer-bal-logo.25c409cf.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"style\", {\n  type: \"text/css\"\n}, \"\\r\\n\\t.st0{fill:#FF007A;}\\r\\n\\t.st1{fill-rule:evenodd;clip-rule:evenodd;fill:#FF007A;}\\r\\n\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st0\",\n  d: \"M66,44.1c-2.1-0.3-2.2-0.4-1.2-0.5c1.9-0.3,6.3,0.1,9.4,0.8c7.2,1.7,13.7,6.1,20.6,13.8l1.8,2.1l2.6-0.4  c11.1-1.8,22.5-0.4,32,4c2.6,1.2,6.7,3.6,7.2,4.2c0.2,0.2,0.5,1.5,0.7,2.8c0.7,4.7,0.4,8.2-1.1,10.9c-0.8,1.5-0.8,1.9-0.3,3.2  c0.4,1,1.6,1.7,2.7,1.7c2.4,0,4.9-3.8,6.1-9.1l0.5-2.1l0.9,1c5.1,5.7,9.1,13.6,9.7,19.2l0.2,1.5l-0.9-1.3c-1.5-2.3-2.9-3.8-4.8-5.1  c-3.4-2.3-7-3-16.5-3.5c-8.6-0.5-13.5-1.2-18.3-2.8c-8.2-2.7-12.4-6.2-22.1-19.1c-4.3-5.7-7-8.8-9.7-11.4  C79.6,48.3,73.7,45.3,66,44.1z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st0\",\n  d: \"M140.5,56.8c0.2-3.8,0.7-6.3,1.8-8.6c0.4-0.9,0.8-1.7,0.9-1.7c0.1,0-0.1,0.7-0.4,1.5c-0.8,2.2-0.9,5.3-0.4,8.8  c0.7,4.5,1,5.1,5.8,10c2.2,2.3,4.8,5.2,5.8,6.4l1.7,2.2l-1.7-1.6c-2.1-2-6.9-5.8-8-6.3c-0.7-0.4-0.8-0.4-1.3,0.1  c-0.4,0.4-0.5,1-0.5,3.9c-0.1,4.5-0.7,7.3-2.2,10.2c-0.8,1.5-0.9,1.2-0.2-0.5c0.5-1.3,0.6-1.9,0.6-6.2c0-8.7-1-10.8-7.1-14.3  c-1.5-0.9-4.1-2.2-5.6-2.9c-1.6-0.7-2.8-1.3-2.7-1.3c0.2-0.2,6.1,1.5,8.4,2.5c3.5,1.4,4.1,1.5,4.5,1.4  C140.2,60.1,140.4,59.3,140.5,56.8z\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st0\",\n  d: \"M70.1,71.7c-4.2-5.8-6.9-14.8-6.3-21.5l0.2-2.1l1,0.2c1.8,0.3,4.9,1.5,6.4,2.4c4,2.4,5.8,5.7,7.5,13.9  c0.5,2.4,1.2,5.2,1.5,6.1c0.5,1.5,2.4,5,4,7.2c1.1,1.6,0.4,2.4-2.1,2.2C78.5,79.7,73.4,76.2,70.1,71.7z\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st0\",\n  d: \"M135.4,115.2c-19.8-8-26.8-14.9-26.8-26.6c0-1.7,0.1-3.1,0.1-3.1c0.1,0,0.8,0.6,1.7,1.3c4,3.2,8.5,4.6,21,6.4  c7.3,1.1,11.5,1.9,15.3,3.2c12.1,4,19.6,12.2,21.4,23.3c0.5,3.2,0.2,9.3-0.6,12.5c-0.7,2.5-2.7,7.1-3.2,7.2c-0.1,0-0.3-0.5-0.3-1.3  c-0.2-4.2-2.3-8.2-5.8-11.3C154,123.2,148.6,120.5,135.4,115.2z\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st0\",\n  d: \"M121.4,118.5c-0.2-1.5-0.7-3.4-1-4.2l-0.5-1.5l0.9,1.1c1.3,1.5,2.3,3.3,3.2,5.8c0.7,1.9,0.7,2.5,0.7,5.6  c0,3-0.1,3.7-0.7,5.4c-1,2.7-2.2,4.6-4.2,6.7c-3.6,3.7-8.3,5.7-15,6.6c-1.2,0.1-4.6,0.4-7.6,0.6c-7.5,0.4-12.5,1.2-17,2.8  c-0.6,0.2-1.2,0.4-1.3,0.3c-0.2-0.2,2.9-2,5.4-3.2c3.5-1.7,7.1-2.6,15-4c3.9-0.6,7.9-1.4,8.9-1.8C118.1,135.6,123,127.9,121.4,118.5  z\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st0\",\n  d: \"M130.5,134.6c-2.6-5.7-3.2-11.1-1.8-16.2c0.2-0.5,0.4-1,0.6-1c0.2,0,0.8,0.3,1.4,0.7c1.2,0.8,3.7,2.2,10.1,5.7  c8.1,4.4,12.7,7.8,15.9,11.7c2.8,3.4,4.5,7.3,5.3,12.1c0.5,2.7,0.2,9.2-0.5,11.9c-2.2,8.5-7.2,15.3-14.5,19.2c-1.1,0.6-2,1-2.1,1  c-0.1,0,0.3-1,0.9-2.2c2.4-5.1,2.7-10,0.9-15.5c-1.1-3.4-3.4-7.5-8-14.4C133.2,139.6,131.9,137.5,130.5,134.6z\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st0\",\n  d: \"M56,165.2c7.4-6.2,16.5-10.6,24.9-12c3.6-0.6,9.6-0.4,12.9,0.5c5.3,1.4,10.1,4.4,12.6,8.1  c2.4,3.6,3.5,6.7,4.6,13.6c0.4,2.7,0.9,5.5,1,6.1c0.8,3.6,2.4,6.4,4.4,7.9c3.1,2.3,8.5,2.4,13.8,0.4c0.9-0.3,1.7-0.6,1.7-0.5  c0.2,0.2-2.5,2-4.3,2.9c-2.5,1.3-4.5,1.7-7.2,1.7c-4.8,0-8.9-2.5-12.2-7.5c-0.7-1-2.1-3.9-3.3-6.6c-3.5-8.1-5.3-10.5-9.4-13.2  c-3.6-2.3-8.2-2.8-11.7-1.1c-4.6,2.2-5.8,8.1-2.6,11.7c1.3,1.5,3.7,2.7,5.7,3c3.7,0.5,6.9-2.4,6.9-6.1c0-2.4-0.9-3.8-3.3-4.9  c-3.2-1.4-6.7,0.2-6.6,3.3c0,1.3,0.6,2.1,1.9,2.7c0.8,0.4,0.8,0.4,0.2,0.3c-2.9-0.6-3.6-4.2-1.3-6.5c2.8-2.8,8.7-1.6,10.7,2.3  c0.8,1.6,0.9,4.8,0.2,6.8c-1.7,4.4-6.5,6.7-11.4,5.4c-3.3-0.9-4.7-1.8-8.7-5.9c-7-7.2-9.7-8.6-19.7-10.1l-1.9-0.3L56,165.2z\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st1\",\n  d: \"M3.4,4.3c23.3,28.3,59.2,72.3,61,74.7c1.5,2,0.9,3.9-1.6,5.3c-1.4,0.8-4.3,1.6-5.7,1.6c-1.6,0-3.5-0.8-4.8-2.1  c-0.9-0.9-4.8-6.6-13.6-20.3c-6.7-10.5-12.4-19.2-12.5-19.3C25.8,44,25.8,44,38,65.8C45.7,79.5,48.2,84.4,48.2,85c0,1.3-0.4,2-2,3.8  c-2.7,3-3.9,6.4-4.8,13.5c-1,7.9-3.7,13.5-11.4,23c-4.5,5.6-5.2,6.6-6.3,8.9c-1.4,2.8-1.8,4.4-2,8c-0.2,3.8,0.2,6.2,1.3,9.8  c1,3.2,2.1,5.3,4.8,9.4c2.3,3.6,3.7,6.3,3.7,7.3c0,0.8,0.2,0.8,3.8,0c8.6-2,15.7-5.4,19.6-9.6c2.4-2.6,3-4,3-7.6  c0-2.3-0.1-2.8-0.7-4.2c-1-2.2-2.9-4-7-6.8c-5.4-3.7-7.7-6.7-8.3-10.7c-0.5-3.4,0.1-5.7,3.1-12c3.1-6.5,3.9-9.2,4.4-15.8  c0.3-4.2,0.8-5.9,2-7.2c1.3-1.4,2.4-1.9,5.5-2.3c5.1-0.7,8.4-2,11-4.5c2.3-2.1,3.3-4.2,3.4-7.3l0.1-2.3L70.1,77C65.4,71.6,0.3,0,0,0  C-0.1,0,1.5,1.9,3.4,4.3z M34.1,146.5c1.1-1.9,0.5-4.3-1.3-5.5c-1.7-1.1-4.3-0.6-4.3,0.9c0,0.4,0.2,0.8,0.8,1c0.9,0.5,1,1,0.3,2.1  c-0.7,1.1-0.7,2.1,0.2,2.8C31.2,148.9,33.1,148.3,34.1,146.5z\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st1\",\n  d: \"M74.6,93.9c-2.4,0.7-4.7,3.3-5.4,5.9c-0.4,1.6-0.2,4.5,0.5,5.4c1.1,1.4,2.1,1.8,4.9,1.8  c5.5,0,10.2-2.4,10.7-5.3c0.5-2.4-1.6-5.7-4.5-7.2C79.3,93.7,76.2,93.4,74.6,93.9z M81,98.9c0.8-1.2,0.5-2.5-1-3.4  c-2.7-1.7-6.8-0.3-6.8,2.3c0,1.3,2.1,2.7,4.1,2.7C78.6,100.5,80.4,99.7,81,98.9z\"\n});\n\nvar SvgUniswapUniLogo = function SvgUniswapUniLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 168.3 193.8\",\n    style: {\n      enableBackground: \"new 0 0 168.3 193.8\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgUniswapUniLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/uniswap-uni-logo.3f564040.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"translate(0,250) scale(0.100000,-0.100000)\",\n  fill: \"#000000\",\n  stroke: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1105 2489 c-530 -71 -950 -450 -1070 -964 -52 -224 -39 -454 39 -682 132 -388 463 -694 861 -798 213 -55 413 -55 630 0 414 105 761 439 879 847 30 103 56 271 56 358 0 87 -26 255 -56 358 -88 303 -315 584 -594 736 -215 117 -518 176 -745 145z m184 -555 c107 -54 231 -211 231 -293 0 -111 -134 -86 -270 48 -97 96 -140 195 -110 252 16 28 84 25 149 -7z m720 -336 c94 -71 131 -109 131 -134 0 -37 -30 -47 -74 -23 l-36 19 7 -27 c15 -54 8 -274 -11 -346 -44 -169 -109 -281 -230 -403 -135 -135 -280 -212 -460 -243 -172 -31 -421 7 -475 73 -16 19 -11 56 11 69 12 8 36 5 90 -12 50 -16 109 -25 189 -28 150 -7 238 11 378 79 90 43 115 61 190 136 160 161 231 332 231 552 l-1 95 -20 -27 c-24 -33 -54 -36 -69 -8 -8 16 -5 45 14 126 40 165 46 169 135 102z m-1318 -255 c108 -53 239 -216 239 -297 0 -106 -144 -81 -273 48 -176 176 -154 341 34 249z\"\n}));\n\nvar SvgYUsd = function SvgYUsd(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"250pt\",\n    height: \"250pt\",\n    viewBox: \"0 0 250 250\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgYUsd, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/yUSD.22cc1191.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_x0020_1\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"_1421394342400\"\n}, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#343434\",\n  fillRule: \"nonzero\",\n  points: \"392.07,0 383.5,29.11 383.5,873.74 392.07,882.29 784.13,650.54 \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#8C8C8C\",\n  fillRule: \"nonzero\",\n  points: \"392.07,0 -0,650.54 392.07,882.29 392.07,472.33 \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#3C3C3B\",\n  fillRule: \"nonzero\",\n  points: \"392.07,956.52 387.24,962.41 387.24,1263.28 392.07,1277.38 784.37,724.89 \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#8C8C8C\",\n  fillRule: \"nonzero\",\n  points: \"392.07,1277.38 392.07,956.52 -0,724.89 \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#141414\",\n  fillRule: \"nonzero\",\n  points: \"392.07,882.29 784.13,650.54 392.07,472.33 \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#393939\",\n  fillRule: \"nonzero\",\n  points: \"0,650.54 392.07,882.29 392.07,472.33 \"\n}))));\n\nvar SvgEthLogo = function SvgEthLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlSpace: \"preserve\",\n    width: \"100%\",\n    height: \"100%\",\n    shapeRendering: \"geometricPrecision\",\n    textRendering: \"geometricPrecision\",\n    imageRendering: \"optimizeQuality\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    viewBox: \"0 0 784.37 1277.39\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgEthLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/eth-logo.98473c31.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"yearn-finance-yfi\");\n\nvar SvgYfiLogo = function SvgYfiLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 1000 1000\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Layer_2\",\n    \"data-name\": \"Layer 2\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Layer_1-2\",\n    \"data-name\": \"Layer 1\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"SVGID\",\n    d: \"M500,0c276.1,0,500,223.9,500,500s-223.9,500-500,500S0,776.1,0,500,223.9,0,500,0Z\",\n    style: {\n      fill: \"#006ae3\",\n      fillRule: \"evenodd\"\n    }\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    id: \"SVGID-2\",\n    \"data-name\": \"SVGID\",\n    points: \"479.4 710.8 479.4 294.8 524.7 294.8 524.7 710.8 479.4 710.8\",\n    style: {\n      fill: \"#fff\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"SVGID-3\",\n    \"data-name\": \"SVGID\",\n    d: \"M710,433.4,570.1,470.5,538.9,325.3l41.6-9.4,16.4,68.8s37.8-62-12.6-126.2c-29.7-33-43.8-34.4-77.1-39.6-29.3-4.2-97.4,5.7-117.7,85.2-8.6,51.2,1.1,89.1,67.1,138.7L452.9,498s-73.7-51.9-92.7-88.3c-14.7-28.8-39.9-85.7,5.6-164.9,24.5-39.6,72.8-77.6,157.9-73.6C566.5,173,671,225.3,654.8,347.5c-2.8,22.9-14.7,53.4-14.7,53.4l57.4-12.8L710,433.4Z\",\n    style: {\n      fill: \"#fff\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"SVGID-4\",\n    \"data-name\": \"SVGID\",\n    d: \"M630.1,758.9c-25.6,38.9-74.9,75.6-159.8,69.4-42.8-2.9-145.8-58-126.4-179.7,3.4-22.8,16.1-52.9,16.1-52.9l-57.7,11.2L291,561.4,431.9,528l27.4,146-41.9,8.3L402.8,613s-39.4,60.9,9.2,126.5c28.8,33.8,42.8,35.5,76.1,41.6,29.1,5,97.5-3.2,119.9-82.1,9.9-50.9,1.2-89.1-63.4-140.5l5.2-55.1s72.3,53.8,90.3,90.7c13.8,29.3,37.5,86.9-10,164.8Z\",\n    style: {\n      fill: \"#fff\"\n    }\n  }))));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgYfiLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/yfi-logo.20ed0894.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".cls-1{fill:#2a5ada;}\"));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"title\", null, \"Asset 1\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_2\",\n  \"data-name\": \"Layer 2\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_1-2\",\n  \"data-name\": \"Layer 1\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-1\",\n  d: \"M18.9,0l-4,2.3L4,8.6,0,10.9V32.7L4,35l11,6.3,4,2.3,4-2.3L33.8,35l4-2.3V10.9l-4-2.3L22.9,2.3ZM8,28.1V15.5L18.9,9.2l10.9,6.3V28.1L18.9,34.4Z\"\n})));\n\nvar SvgChainLinkLogo = function SvgChainLinkLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 37.8 43.6\",\n    ref: svgRef\n  }, props), _ref2, title === undefined ? _ref3 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref4);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgChainLinkLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/chain-link-logo.fb759cb4.svg\";\nexport { ForwardRef as ReactComponent };","import { BigNumber, utils } from \"ethers\"\r\nimport walletconnectLogo from \"../walletconnect-logo.svg\"\r\nimport metamaskLogo from \"../metamask-fox.svg\"\r\nimport trezorLogo from \"../trezor.svg\"\r\n// import ledgerLogo from \"../ledger.png\"\r\n\r\nimport { ReactComponent as BalancerIcon } from \"./../resources/balancer-bal-logo.svg\"\r\nimport { ReactComponent as UniswapIcon } from \"./../resources/uniswap-uni-logo.svg\"\r\nimport { ReactComponent as YUSDIcon } from \"./../resources/yUSD.svg\"\r\nimport { ReactComponent as ADXIcon } from \"./../resources/adex-logo-clean.svg\"\r\nimport { ReactComponent as ETHIcon } from \"./../resources/eth-logo.svg\"\r\nimport { ReactComponent as YFIIcon } from \"./../resources/yfi-logo.svg\"\r\nimport { ReactComponent as LINKIcon } from \"./../resources/chain-link-logo.svg\"\r\nimport { ReactComponent as LoyaltyIcon } from \"./../resources/loyalty-ic.svg\"\r\nimport { ReactComponent as TomIcon } from \"./../resources/tom-ic.svg\"\r\n\r\nexport const useTestnet = false // TODO env cfg\r\n\r\nexport const MIGRATION_UNBOND_BEFORE = 1619182800000 // 24.04.2021\r\n\r\n// Legacy staking\r\nexport const ADDR_STAKING = useTestnet\r\n\t? \"0xA83675086d99ef52ac78EDd534059C0Ae7f504f4\"\r\n\t: \"0x4846c6837ec670bbd1f5b485471c8f64ecb9c534\"\r\n\r\nexport const ZERO = BigNumber.from(0)\r\n// export const PRICES_API_URL =\r\n// \t\"https://min-api.cryptocompare.com/data/price?fsym=ADX&tsyms=BTC,USD,EUR\"\r\n\r\nexport const PRICES_API_URL = `https://api.coingecko.com/api/v3/simple/price?ids=ADEX&vs_currencies=usd`\r\nexport const UNBOND_DAYS = 20\r\nexport const STAKING_RULES_URL = null\r\n\r\nexport const IDLE_TIMEOUT_MINUTES = 10\r\n\r\nexport const ADDR_CORE = \"0x333420fc6a897356e69b62417cd17ff012177d2b\"\r\n\r\nexport const ADDR_ADX = useTestnet\r\n\t? \"0x6170ea3629a1E49B77EEd0e0A18460ac184CA71e\"\r\n\t: \"0xADE00C28244d5CE17D72E40330B1c318cD12B7c3\"\r\nexport const ADDR_FACTORY = \"0x9fe0d438e3c29c7cff949ad8e8da9403a531cc1a\"\r\nexport const ADDR_ADX_LOYALTY_TOKEN =\r\n\t\"0xd9A4cB9dc9296e111c66dFACAb8Be034EE2E1c2C\"\r\nexport const DAI_TOKEN_ADDR = useTestnet\r\n\t? \"0x7af963cF6D228E564e2A0aA0DdBF06210B38615D\"\r\n\t: \"0x6B175474E89094C44Da98b954EedeAC495271d0F\"\r\n\r\nexport const ZERO_ADDR = \"0x0000000000000000000000000000000000000000\"\r\n\r\nexport const ADDR_STAKING_POOL = useTestnet\r\n\t? \"0x061dcbDD5E09f81e8D7EF2668E0946B277008ec2\"\r\n\t: \"0xB6456b57f03352bE48Bf101B46c1752a0813491a\"\r\n\r\nexport const ADDR_STAKING_MIGRATOR = useTestnet\r\n\t? // ? \"0x90C3d23ab2D9F7305D63f7Cb8514Fdd4B2f6225E\"\r\n\t  // ? \"0x555660ccf94b40ee8d7ddca8dd3c4dbf7bd51312\" // with Jerry pool id\r\n\t  \"0x7dc5737cddd06975dc1e1dd246636ed526c93fc7\" // with Jerry pool id - updated abi - log owner\r\n\t: \"0x27851Df171c419A8e05cac7d7B45a9Fa72B0a07c\"\r\n\r\nexport const ADDR_ADX_SUPPLY_CONTROLLER = useTestnet\r\n\t? \"0x1DD8Fb8aE154B780973Ff21D163ad8710c145B79\"\r\n\t: \"0x9d47f1c6ba4d66d8aa5e19226191a8968bc9094e\"\r\n\r\nexport const ADDR_GASLESS_SWEEPER = useTestnet\r\n\t? \"0x12F741A073bC410dA3941f57BCfa7CD53e176bE2\"\r\n\t: \"0x872E239332d13D6B29bf58283906d92fB2A7209b\"\r\n\r\nexport const MAX_UINT = BigNumber.from(\r\n\t\"115792089237316195423570985008687907853269984665640564039457584007913129639935\"\r\n)\r\n\r\nexport const MIN_BALANCE_FOR_GASLESS_TXNS = BigNumber.from(\r\n\t\"5000000000000000000000\"\r\n) // 5 000 ADX\r\n\r\nexport const DEFAULT_BOND = {\r\n\tpoolId: \"\",\r\n\tamount: ZERO\r\n}\r\n\r\nexport const POOLS = [\r\n\t{\r\n\t\tlabel: \"common.validatorTom\",\r\n\t\tid: utils.id(\"validator:0x2892f6C41E0718eeeDd49D98D648C789668cA67d\"),\r\n\t\tselectable: true,\r\n\t\tminStakingAmount: \"0.0\",\r\n\t\tpurpose: \"pools.tomPurpose\",\r\n\t\tlockupPeriod: 30,\r\n\t\tlockupPeriodText: \"pools.tomLockupPeriodTxt\",\r\n\t\trewardPolicy: \"pools.tomRewardPolicy\",\r\n\t\tslashPolicy: \"pools.tomSlashPolicy\",\r\n\t\tapyStability: \"pools.tomApyStability\",\r\n\t\turl: useTestnet ? \"http://localhost:8005\" : \"https://tom.adex.network\",\r\n\t\testimatedAnnualFeeYield: 182500,\r\n\t\testimatedAnnualADXYield: 15103448.2758,\r\n\t\testimatedAnnualADXEarlyYield: 12166666.6666\r\n\t},\r\n\t{\r\n\t\tlabel: \"common.validatorJerry\",\r\n\t\tid: utils.id(\"validator:0xce07CbB7e054514D590a0262C93070D838bFBA2e\"),\r\n\t\tselectable: false,\r\n\t\tminStakingAmount: \"0.0\",\r\n\t\tpurpose: \"pools.jerryPurpose\",\r\n\t\tlockupPeriod: 30,\r\n\t\tlockupPeriodText: \"pools.jerryLockupPeriodTxt\",\r\n\t\trewardPolicy: \"pools.jerryRewardPolicy\",\r\n\t\tslashPolicy: \"pools.jerrySlashPolicy\",\r\n\t\tapyStability: \"pools.jerryApyStability\",\r\n\t\turl: useTestnet ? \"http://localhost:8005\" : \"https://tom.adex.network\"\r\n\t}\r\n]\r\n\r\nexport const DEPOSIT_POOLS = [\r\n\t{\r\n\t\tlabel: \"common.loPo\",\r\n\t\tid: utils.id(\"deposit:0x49ee1555672E1b7928Fc581810B4e79dD85263E1\"),\r\n\t\tselectable: true,\r\n\t\tminStakingAmount: \"0.0\",\r\n\t\trewardPolicy: \"pools.loPoRewardPolicy\",\r\n\t\tslashPolicy: \"pools.loPoSlashPolicy\",\r\n\t\turl:\r\n\t\t\t\"https://etherscan.io/address/0x49ee1555672e1b7928fc581810b4e79dd85263e1\",\r\n\t\tconfirmationLabel: null,\r\n\t\tconfirmationUrl: \"https://www.adex.network/tos/\"\r\n\t},\r\n\t{\r\n\t\tversion: \"stakingv5\",\r\n\t\tlabel: \"common.tomStakingPool\",\r\n\t\tid: utils.id(\"V5validator:0x2892f6C41E0718eeeDd49D98D648C789668cA67d\"), // TODO:\r\n\t\tselectable: true,\r\n\t\tvalidatorId: utils.id(\r\n\t\t\t\"validator:0x2892f6C41E0718eeeDd49D98D648C789668cA67d\"\r\n\t\t), // Used for validator stats page\r\n\t\thasValidatorStats: true,\r\n\t\tminStakingAmount: \"0.0\",\r\n\t\tpurpose: \"pools.tomV5Purpose\",\r\n\t\tlockupPeriod: 20,\r\n\t\tlockupPeriodText: \"pools.tomV5LockupPeriodTxt\",\r\n\t\trewardPolicy: \"pools.tomV5RewardPolicy\",\r\n\t\tslashPolicy: \"pools.tomV5SlashPolicy\",\r\n\t\tapyStability: \"pools.tomApyStability\",\r\n\t\turl: \"https://tom.adex.network\",\r\n\t\tlegacyPoolId: utils.id(\r\n\t\t\t\"validator:0x2892f6C41E0718eeeDd49D98D648C789668cA67d\"\r\n\t\t),\r\n\t\tuserDepositsLimit: \"15000000000000000000000000\" // 15 000 000\r\n\t}\r\n]\r\n\r\nexport const iconByPoolId = ({ poolId, id }) => {\r\n\tswitch (poolId || id) {\r\n\t\tcase \"adex-loyalty-pool\":\r\n\t\tcase DEPOSIT_POOLS[0].id:\r\n\t\t\treturn LoyaltyIcon\r\n\t\tcase \"adex-staking-pool\":\r\n\t\tcase POOLS[0].id:\r\n\t\tcase POOLS[1].id:\r\n\t\tcase DEPOSIT_POOLS[1].id:\r\n\t\t\treturn TomIcon\r\n\t\tdefault:\r\n\t\t\treturn null\r\n\t}\r\n}\r\n\r\nexport const METAMASK = \"Metamask\"\r\nexport const WALLET_CONNECT = \"WalletConnect\"\r\nexport const TREZOR = \"Trezor\"\r\nexport const LEDGER = \"Ledger\"\r\n\r\nexport const Wallets = [\r\n\t{\r\n\t\tname: METAMASK,\r\n\t\ticon: metamaskLogo\r\n\t},\r\n\t{\r\n\t\tname: WALLET_CONNECT,\r\n\t\ticon: walletconnectLogo,\r\n\t\textraLabel: {\r\n\t\t\tmessage: \"dialogs.exceptWallets\",\r\n\t\t\tdata: {\r\n\t\t\t\twallets: \"Trust Wallet\"\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname: TREZOR,\r\n\t\ticon: trezorLogo,\r\n\t\textraLabel: {\r\n\t\t\tmessage: \"dialogs.trezorDefaultAddressOnly\"\r\n\t\t}\r\n\t}\r\n\t// {\r\n\t// \tname: LEDGER,\r\n\t// \ticon: ledgerLogo\r\n\t// }\r\n]\r\n\r\nexport const SUPPORTED_CHAINS = useTestnet\r\n\t? [{ id: 5, name: \"goerli\" }]\r\n\t: [{ id: 1, name: \"mainnet\" }]\r\n\r\nexport const TOKEN_OLD_TO_NEW_MULTIPLIER = BigNumber.from(\"100000000000000\")\r\n\r\nexport const REACT_APP_INFURA_ID = \"3d22938fd7dd41b7af4197752f83e8a1\"\r\n\r\n// export const REACT_APP_RPC_URL =\r\n// \t\"wss://mainnet.infura.io/ws/v3/3d22938fd7dd41b7af4197752f83e8a1\"\r\n\r\nexport const REACT_APP_RPC_URL = useTestnet\r\n\t? \"https://goerli.infura.io/v3/3d22938fd7dd41b7af4197752f83e8a1\"\r\n\t: \"https://mainnet.infura.io/v3/3d22938fd7dd41b7af4197752f83e8a1\"\r\n\r\nexport const ADEX_RELAYER_HOST = useTestnet\r\n\t? // ? \"https://goerli-relayer.adex.network\"\r\n\t  \"http://localhost:1934\"\r\n\t: \"https://relayer.adex.network\"\r\n// export const ADEX_RELAYER_HOST = \"https://goerli-relayer.adex.network\"\r\n\r\nconst MAIN_START_BLOCK = 11296000\r\n\r\nexport const FARM_POOLS = [\r\n\t// {\r\n\t// \t// GOERLI TST\r\n\t// \tpoolId: 0,\r\n\t// \tname: \"TST-ADX\",\r\n\t// \ttoken: \"TST-ADX\",\r\n\t// \tplatform: \"Balancer\",\r\n\t// \tdepositAssetName: \"TST-ADX\",\r\n\t// \tdepositAssetAddr: \"0x7af963cF6D228E564e2A0aA0DdBF06210B38615D\",\r\n\t// \tdepositAssetDecimals: 18,\r\n\t// \tgetDepositAssetUrl: \"https://goerli-faucet.slock.it/\",\r\n\t// \tlpTokenAddr: \"0x2aecF52ABe359820c48986046959B4136AfDfbe2\",\r\n\t// \tlpTokenData: [\r\n\t// \t\t{\r\n\t// \t\t\ttoken: \"TST\",\r\n\t// \t\t\tweight: 0.2,\r\n\t// \t\t\taddr: \"0x7af963cF6D228E564e2A0aA0DdBF06210B38615D\"\r\n\t// \t\t},\r\n\t// \t\t{\r\n\t// \t\t\ttoken: \"ADX\",\r\n\t// \t\t\tweight: 0.8,\r\n\t// \t\t\taddr: ADDR_ADX\r\n\t// \t\t}\r\n\t// \t],\r\n\t// \trewardAssetName: \"ADX\",\r\n\t// \trewardAssetAddr: ADDR_ADX,\r\n\t// \tplatformIcon: BalancerIcon,\r\n\t// \tassetsIcons: [ADXIcon, YUSDIcon]\r\n\t// },\r\n\t// {\r\n\t// \t// GOERLI TST\r\n\t// \tpoolId: 1,\r\n\t// \tname: \"ADX-TST-2\",\r\n\t// \ttoken: \"ADX-TST-2\",\r\n\t// \tplatform: \"Uniswap\",\r\n\t// \tdepositAssetName: \"ADX-TST-2\",\r\n\t// \tdepositAssetAddr: ADDR_ADX,\r\n\t// \tdepositAssetDecimals: 18,\r\n\t// \tgetDepositAssetUrl: \"https://goerli-faucet.slock.it/\",\r\n\t// \tlpTokenAddr: \"0x0A8fe6e91eaAb3758dF18f546f7364343667E957\",\r\n\t// \tlpTokenData: [\r\n\t// \t\t{\r\n\t// \t\t\ttoken: \"ADX\",\r\n\t// \t\t\tweight: 0.83129,\r\n\t// \t\t\taddr: ADDR_ADX\r\n\t// \t\t},\r\n\t// \t\t{\r\n\t// \t\t\ttoken: \"TST2\",\r\n\t// \t\t\tweight: 1 - 0.83129,\r\n\t// \t\t\taddr: \"0x7af963cF6D228E564e2A0aA0DdBF06210B38615D\"\r\n\t// \t\t}\r\n\t// \t],\r\n\t// \trewardAssetName: \"ADX\",\r\n\t// \trewardAssetAddr: ADDR_ADX,\r\n\t// \tplatformIcon: UniswapIcon,\r\n\t// \tassetsIcons: [ADXIcon, ADXIcon]\r\n\t// }\r\n\r\n\t// MAINNET\r\n\t{\r\n\t\tpoolId: 0,\r\n\t\tname: \"Uniswap ADX-ETH\",\r\n\t\ttoken: \"UNI-ADX-ETH\",\r\n\t\tplatform: \"Uniswap\",\r\n\t\tdepositAssetName: \"UNI-ADX-ETH\",\r\n\t\tdepositAssetAddr: \"0xd3772a963790fede65646cfdae08734a17cd0f47\",\r\n\t\tdepositAssetDecimals: 18,\r\n\t\tgetDepositAssetUrl:\r\n\t\t\t\"https://info.uniswap.org/pair/0xd3772a963790fede65646cfdae08734a17cd0f47\",\r\n\t\tlpTokenAddr: \"0xd3772a963790fede65646cfdae08734a17cd0f47\",\r\n\t\tlpTokenData: [\r\n\t\t\t{\r\n\t\t\t\ttoken: \"ADX\",\r\n\t\t\t\tweight: 0.5,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0xADE00C28244d5CE17D72E40330B1c318cD12B7c3\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttoken: \"ETH\",\r\n\t\t\t\tweight: 0.5,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"\r\n\t\t\t}\r\n\t\t],\r\n\t\trewardAssetName: \"ADX\",\r\n\t\trewardAssetAddr: ADDR_ADX,\r\n\t\tplatformIcon: UniswapIcon,\r\n\t\tassetsIcons: [ADXIcon, ETHIcon],\r\n\t\tspecial: true,\r\n\t\tlatRewardBlock: 11547869, //11494773,\r\n\t\tfirstRewardBlock: MAIN_START_BLOCK,\r\n\t\trewardsDurationDays: 38\r\n\t},\r\n\t{\r\n\t\tpoolId: 1,\r\n\t\tname: \"Balancer ADX-yUSD\",\r\n\t\ttoken: \"BPT-ADX-yUSD\",\r\n\t\tplatform: \"Balancer\",\r\n\t\tdepositAssetName: \"BPT-ADX-yUSD\",\r\n\t\tdepositAssetAddr: \"0x415900c6e18b89531e3e24c902b05c031c71a925\",\r\n\t\tdepositAssetDecimals: 18,\r\n\t\tgetDepositAssetUrl:\r\n\t\t\t\"https://pools.balancer.exchange/#/pool/0x415900c6e18b89531e3e24c902b05c031c71a925/\",\r\n\t\tlpTokenAddr: \"0x415900c6e18b89531e3e24c902b05c031c71a925\",\r\n\t\tlpTokenData: [\r\n\t\t\t{\r\n\t\t\t\ttoken: \"ADX\",\r\n\t\t\t\tweight: 0.7,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0xADE00C28244d5CE17D72E40330B1c318cD12B7c3\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttoken: \"yUSD\",\r\n\t\t\t\tweight: 0.3,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0x5dbcF33D8c2E976c6b560249878e6F1491Bca25c\"\r\n\t\t\t}\r\n\t\t],\r\n\t\trewardAssetName: \"ADX\",\r\n\t\trewardAssetAddr: ADDR_ADX,\r\n\t\tplatformIcon: BalancerIcon,\r\n\t\tassetsIcons: [ADXIcon, YUSDIcon],\r\n\t\tspecial: true,\r\n\t\tlatRewardBlock: 11547869, // 11494773,\r\n\t\tfirstRewardBlock: MAIN_START_BLOCK,\r\n\t\trewardsDurationDays: 38\r\n\t},\r\n\t{\r\n\t\tpoolId: 2,\r\n\t\tname: \"Balancer BAL-ETH\",\r\n\t\ttoken: \"BPT-BAL-ETH\",\r\n\t\tplatform: \"Balancer\",\r\n\t\tdepositAssetName: \"BPT-BAL-ETH\",\r\n\t\tdepositAssetAddr: \"0x59A19D8c652FA0284f44113D0ff9aBa70bd46fB4\",\r\n\t\tdepositAssetDecimals: 18,\r\n\t\tgetDepositAssetUrl:\r\n\t\t\t\"https://pools.balancer.exchange/#/pool/0x59A19D8c652FA0284f44113D0ff9aBa70bd46fB4/\",\r\n\t\tlpTokenAddr: \"0x59A19D8c652FA0284f44113D0ff9aBa70bd46fB4\",\r\n\t\tlpTokenData: [\r\n\t\t\t{\r\n\t\t\t\ttoken: \"BAL\",\r\n\t\t\t\tweight: 0.8,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0xba100000625a3754423978a60c9317c58a424e3D\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttoken: \"ETH\",\r\n\t\t\t\tweight: 0.2,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"\r\n\t\t\t}\r\n\t\t],\r\n\t\trewardAssetName: \"ADX\",\r\n\t\trewardAssetAddr: ADDR_ADX,\r\n\t\tplatformIcon: BalancerIcon,\r\n\t\tassetsIcons: [BalancerIcon, ETHIcon],\r\n\t\tlatRewardBlock: 11428515,\r\n\t\tfirstRewardBlock: MAIN_START_BLOCK,\r\n\t\trewardsDurationDays: 20\r\n\t},\r\n\t{\r\n\t\tpoolId: 3,\r\n\t\tname: \"Uniswap YFI-ETH\",\r\n\t\ttoken: \"UNI-YFI-ETH\",\r\n\t\tplatform: \"Uniswap\",\r\n\t\tdepositAssetName: \"UNI-YFI-ETH\",\r\n\t\tdepositAssetAddr: \"0x2fDbAdf3C4D5A8666Bc06645B8358ab803996E28\",\r\n\t\tdepositAssetDecimals: 18,\r\n\t\tgetDepositAssetUrl:\r\n\t\t\t\"https://info.uniswap.org/pair/0x2fDbAdf3C4D5A8666Bc06645B8358ab803996E28\",\r\n\t\tlpTokenAddr: \"0x2fDbAdf3C4D5A8666Bc06645B8358ab803996E28\",\r\n\t\tlpTokenData: [\r\n\t\t\t{\r\n\t\t\t\ttoken: \"YFI\",\r\n\t\t\t\tweight: 0.5,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0x0bc529c00c6401aef6d220be8c6ea1667f6ad93e\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttoken: \"ETH\",\r\n\t\t\t\tweight: 0.5,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"\r\n\t\t\t}\r\n\t\t],\r\n\t\trewardAssetName: \"ADX\",\r\n\t\trewardAssetAddr: ADDR_ADX,\r\n\t\tplatformIcon: UniswapIcon,\r\n\t\tassetsIcons: [YFIIcon, ETHIcon],\r\n\t\tlatRewardBlock: 11428515,\r\n\t\tfirstRewardBlock: MAIN_START_BLOCK,\r\n\t\trewardsDurationDays: 20\r\n\t},\r\n\t{\r\n\t\tpoolId: 4,\r\n\t\tname: \"Uniswap UNI-ETH\",\r\n\t\ttoken: \"UNI-UNI-ETH\",\r\n\t\tplatform: \"Uniswap\",\r\n\t\tdepositAssetName: \"UNI-UNI-ETH\",\r\n\t\tdepositAssetAddr: \"0xd3d2E2692501A5c9Ca623199D38826e513033a17\",\r\n\t\tdepositAssetDecimals: 18,\r\n\t\tgetDepositAssetUrl:\r\n\t\t\t\"https://info.uniswap.org/pair/0xd3d2E2692501A5c9Ca623199D38826e513033a17\",\r\n\t\tlpTokenAddr: \"0xd3d2E2692501A5c9Ca623199D38826e513033a17\",\r\n\t\tlpTokenData: [\r\n\t\t\t{\r\n\t\t\t\ttoken: \"UNI\",\r\n\t\t\t\tweight: 0.5,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttoken: \"ETH\",\r\n\t\t\t\tweight: 0.5,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"\r\n\t\t\t}\r\n\t\t],\r\n\t\trewardAssetName: \"ADX\",\r\n\t\trewardAssetAddr: ADDR_ADX,\r\n\t\tplatformIcon: UniswapIcon,\r\n\t\tassetsIcons: [UniswapIcon, ETHIcon],\r\n\t\tlatRewardBlock: 11428515,\r\n\t\tfirstRewardBlock: MAIN_START_BLOCK,\r\n\t\trewardsDurationDays: 20\r\n\t},\r\n\t{\r\n\t\tpoolId: 5,\r\n\t\tname: \"Uniswap LINK-ETH\",\r\n\t\ttoken: \"UNI-LINK-ETH\",\r\n\t\tplatform: \"Uniswap\",\r\n\t\tdepositAssetName: \"UNI-LINK-ETH\",\r\n\t\tdepositAssetAddr: \"0xa2107FA5B38d9bbd2C461D6EDf11B11A50F6b974\",\r\n\t\tdepositAssetDecimals: 18,\r\n\t\tgetDepositAssetUrl:\r\n\t\t\t\"https://info.uniswap.org/pair/0xa2107FA5B38d9bbd2C461D6EDf11B11A50F6b974\",\r\n\t\tlpTokenAddr: \"0xa2107FA5B38d9bbd2C461D6EDf11B11A50F6b974\",\r\n\t\tlpTokenData: [\r\n\t\t\t{\r\n\t\t\t\ttoken: \"LINK\",\r\n\t\t\t\tweight: 0.5,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0x514910771af9ca656af840dff83e8264ecf986ca\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttoken: \"ETH\",\r\n\t\t\t\tweight: 0.5,\r\n\t\t\t\tdecimals: 18,\r\n\t\t\t\taddr: \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"\r\n\t\t\t}\r\n\t\t],\r\n\t\trewardAssetName: \"ADX\",\r\n\t\trewardAssetAddr: ADDR_ADX,\r\n\t\tplatformIcon: UniswapIcon,\r\n\t\tassetsIcons: [LINKIcon, ETHIcon],\r\n\t\tlatRewardBlock: 11428515,\r\n\t\tfirstRewardBlock: MAIN_START_BLOCK,\r\n\t\trewardsDurationDays: 20\r\n\t}\r\n]\r\n","module.exports = __webpack_public_path__ + \"static/media/walletconnect-logo.d1f73612.svg\";","module.exports = __webpack_public_path__ + \"static/media/metamask-fox.cd899d8f.svg\";","module.exports = __webpack_public_path__ + \"static/media/trezor.a438c3ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/eddie-farmer-info-card.698a903f.svg\";","import { generateAddress2 } from \"ethereumjs-util\"\r\nimport { utils, ContractFactory } from \"ethers\"\r\nimport { Transaction } from \"adex-protocol-eth/js\"\r\nimport { ADDR_FACTORY, ADDR_GASLESS_SWEEPER, useTestnet } from \"./constants\"\r\nimport GaslessDepositorABI from \"../abi/GaslessDepositor.json\"\r\nimport GaslessDepositorBytecode from \"../abi/GaslessDepositor_bytecode.json\"\r\n\r\nfunction getBytecode(addr) {\r\n\tconst addrHex = addr.slice(2).toLowerCase()\r\n\t// Do not change that bytecode! It comes from compiling this https://gist.github.com/Ivshti/e66cd57ade1abfb07c2517df9e73ceb9\r\n\r\n\tconst bytecode = useTestnet\r\n\t\t? `0x608060405234801561001057600080fd5b5060026000803073ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908360ff160217905550600260008073${addrHex}73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908360ff1602179055506101b7806100e46000396000f3fe608060405234801561001057600080fd5b506004361061002f5760003560e01c8063c066a5b11461007357610030565b5b60007396e3cb4b4632ed45363ff2c9f0fbec9b583d9d3a90503660008037600080366000846127105a03f43d6000803e806000811461006e573d6000f35b3d6000fd5b61008d600480360381019061008891906100d8565b6100a3565b60405161009a9190610110565b60405180910390f35b60006020528060005260406000206000915054906101000a900460ff1681565b6000813590506100d28161016a565b92915050565b6000602082840312156100ea57600080fd5b60006100f8848285016100c3565b91505092915050565b61010a8161015d565b82525050565b60006020820190506101256000830184610101565b92915050565b60006101368261013d565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600060ff82169050919050565b6101738161012b565b811461017e57600080fd5b5056fea264697066735822122019f5875efc4074eb90fc23ade40cf7e2dab386def2d35b85eb8873751ce883b764736f6c634300060c0033`\r\n\t\t: `0x608060405234801561001057600080fd5b5060026000803073ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908360ff160217905550600260008073${addrHex}73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908360ff1602179055506000734470bb87d77b963a013db939be332f927f2b992e9050600073ade00c28244d5ce17d72e40330b1c318cd12b7c3905060008273ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016101429190610501565b60206040518083038186803b15801561015a57600080fd5b505afa15801561016e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610192919061045a565b90506000811115610276578273ffffffffffffffffffffffffffffffffffffffff1663095ea7b383836040518363ffffffff1660e01b81526004016101d892919061051c565b600060405180830381600087803b1580156101f257600080fd5b505af1158015610206573d6000803e3d6000fd5b505050508173ffffffffffffffffffffffffffffffffffffffff166394b918de826040518263ffffffff1660e01b81526004016102439190610560565b600060405180830381600087803b15801561025d57600080fd5b505af1158015610271573d6000803e3d6000fd5b505050505b60008273ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016102b19190610501565b60206040518083038186803b1580156102c957600080fd5b505afa1580156102dd573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610301919061045a565b9050600081111561043c576000734846c6837ec670bbd1f5b485471c8f64ecb9c53490508373ffffffffffffffffffffffffffffffffffffffff1663095ea7b382846040518363ffffffff1660e01b815260040161036092919061051c565b600060405180830381600087803b15801561037a57600080fd5b505af115801561038e573d6000803e3d6000fd5b505050508073ffffffffffffffffffffffffffffffffffffffff1663b4dca72460405180606001604052808581526020017f2ce0c96383fb229d9776f33846e983a956a7d95844fac57b180ed0071d93bb2860001b8152602001428152506040518263ffffffff1660e01b81526004016104089190610545565b600060405180830381600087803b15801561042257600080fd5b505af1158015610436573d6000803e3d6000fd5b50505050505b505050506105d8565b600081519050610454816105c1565b92915050565b60006020828403121561046c57600080fd5b600061047a84828501610445565b91505092915050565b61048c8161057b565b82525050565b61049b8161058d565b82525050565b6060820160008201516104b760008501826104e3565b5060208201516104ca6020850182610492565b5060408201516104dd60408501826104e3565b50505050565b6104ec816105b7565b82525050565b6104fb816105b7565b82525050565b60006020820190506105166000830184610483565b92915050565b60006040820190506105316000830185610483565b61053e60208301846104f2565b9392505050565b600060608201905061055a60008301846104a1565b92915050565b600060208201905061057560008301846104f2565b92915050565b600061058682610597565b9050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b6105ca816105b7565b81146105d557600080fd5b50565b6101b7806105e76000396000f3fe608060405234801561001057600080fd5b506004361061002f5760003560e01c8063c066a5b11461007357610030565b5b60007396e3cb4b4632ed45363ff2c9f0fbec9b583d9d3a90503660008037600080366000846127105a03f43d6000803e806000811461006e573d6000f35b3d6000fd5b61008d600480360381019061008891906100d8565b6100a3565b60405161009a9190610110565b60405180910390f35b60006020528060005260406000206000915054906101000a900460ff1681565b6000813590506100d28161016a565b92915050565b6000602082840312156100ea57600080fd5b60006100f8848285016100c3565b91505092915050565b61010a8161015d565b82525050565b60006020820190506101256000830184610101565b92915050565b60006101368261013d565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600060ff82169050919050565b6101738161012b565b811461017e57600080fd5b5056fea26469706673582212200e40aa3025d54e828fb973089b64ce06688fedcd71b98ae68521a0217652c59564736f6c634300060c0033`\r\n\treturn bytecode\r\n}\r\n\r\nexport function getUserIdentity(walletAddr) {\r\n\tconst bytecode = getBytecode(walletAddr)\r\n\tconst addr = utils.getAddress(\r\n\t\t`0x${generateAddress2(ADDR_FACTORY, Buffer.alloc(32), bytecode).toString(\r\n\t\t\t\"hex\"\r\n\t\t)}`\r\n\t)\r\n\treturn { bytecode, addr }\r\n}\r\n\r\nexport function rawZeroFeeTx(idAddr, nonce, to, data) {\r\n\treturn {\r\n\t\tidentityContract: idAddr,\r\n\t\tnonce: nonce.toString(),\r\n\t\tfeeTokenAddr: \"0x6b175474e89094c44da98b954eedeac495271d0f\",\r\n\t\tfeeAmount: 0,\r\n\t\tto,\r\n\t\tdata\r\n\t}\r\n}\r\n\r\nexport function zeroFeeTx(idAddr, nonce, to, data) {\r\n\treturn new Transaction({\r\n\t\tidentityContract: idAddr,\r\n\t\tnonce: nonce.toString(),\r\n\t\tfeeTokenAddr: \"0x6b175474e89094c44da98b954eedeac495271d0f\",\r\n\t\tfeeAmount: 0,\r\n\t\tto,\r\n\t\tdata\r\n\t})\r\n}\r\n\r\nexport function getUserGaslessAddress(ADXTokenAddr, poolAddr, walletAddr) {\r\n\tconst factory = new ContractFactory(\r\n\t\tGaslessDepositorABI,\r\n\t\tGaslessDepositorBytecode.object\r\n\t)\r\n\tconst initCode = factory.getDeployTransaction(\r\n\t\tADXTokenAddr,\r\n\t\tpoolAddr,\r\n\t\twalletAddr\r\n\t).data\r\n\tconst initCodeHash = utils.keccak256(initCode)\r\n\r\n\tconst gaslessAddr = utils.getCreate2Address(\r\n\t\tADDR_GASLESS_SWEEPER,\r\n\t\tBuffer.alloc(32),\r\n\t\tinitCodeHash\r\n\t)\r\n\r\n\treturn gaslessAddr\r\n}\r\n"],"sourceRoot":""}